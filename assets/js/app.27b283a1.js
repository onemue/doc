(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[]]);!function(n){function t(t){for(var r,a,s=t[0],c=t[1],l=t[2],p=0,f=[];p<s.length;p++)a=s[p],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(n[r]=c[r]);for(u&&u(t);f.length;)f.shift()();return o.push.apply(o,l||[]),e()}function e(){for(var n,t=0;t<o.length;t++){for(var e=o[t],r=!0,s=1;s<e.length;s++){var c=e[s];0!==i[c]&&(r=!1)}r&&(o.splice(t--,1),n=a(a.s=e[0]))}return n}var r={},i={1:0},o=[];function a(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.e=function(n){var t=[],e=i[n];if(0!==e)if(e)t.push(e[2]);else{var r=new Promise((function(t,r){e=i[n]=[t,r]}));t.push(e[2]=r);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.src=function(n){return a.p+"assets/js/"+({}[n]||n)+"."+{2:"2e8f894a",3:"ea118fbe",4:"6fbf7596",5:"f7d53cbe",6:"db4bfcd5",7:"2123913f",8:"c52818c0",9:"20e728b8",10:"f6f629b0",11:"84b24849",12:"76af45bb",13:"c0ae4be6",14:"4f6283b3",15:"002291f6",16:"5dfc5cc5",17:"14f17db6",18:"971e9caa",19:"889fb802",20:"d1be27fd",21:"83fd3971",22:"6bc785a8",23:"c9474e02",24:"054109cd",25:"c7f91c21"}[n]+".js"}(n);var c=new Error;o=function(t){s.onerror=s.onload=null,clearTimeout(l);var e=i[n];if(0!==e){if(e){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+n+" failed.\n("+r+": "+o+")",c.name="ChunkLoadError",c.type=r,c.request=o,e[1](c)}i[n]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(t)},a.m=n,a.c=r,a.d=function(n,t,e){a.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},a.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},a.t=function(n,t){if(1&t&&(n=a(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var r in n)a.d(e,r,function(t){return n[t]}.bind(null,r));return e},a.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return a.d(t,"a",t),t},a.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},a.p="/docs/",a.oe=function(n){throw console.error(n),n};var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;o.push([213,0]),e()}([function(n,t){var e=function(n){return n&&n.Math==Math&&n};n.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof global&&global)||function(){return this}()||Function("return this")()},function(n,t,e){var r=e(0),i=e(37).f,o=e(19),a=e(15),s=e(92),c=e(99),l=e(126);n.exports=function(n,t){var e,u,p,f,d,h=n.target,m=n.global,g=n.stat;if(e=m?r:g?r[h]||s(h,{}):(r[h]||{}).prototype)for(u in t){if(f=t[u],p=n.noTargetGet?(d=i(e,u))&&d.value:e[u],!l(m?u:h+(g?".":"#")+u,n.forced)&&void 0!==p){if(typeof f==typeof p)continue;c(f,p)}(n.sham||p&&p.sham)&&o(f,"sham",!0),a(e,u,f,n)}}},function(n,t,e){var r=e(47),i=Function.prototype,o=i.bind,a=i.call,s=r&&o.bind(a,a);n.exports=r?function(n){return n&&s(n)}:function(n){return n&&function(){return a.apply(n,arguments)}}},function(n,t){n.exports=function(n){try{return!!n()}catch(n){return!0}}},function(n,t,e){var r=e(0),i=e(63),o=e(10),a=e(64),s=e(93),c=e(131),l=i("wks"),u=r.Symbol,p=u&&u.for,f=c?u:u&&u.withoutSetter||a;n.exports=function(n){if(!o(l,n)||!s&&"string"!=typeof l[n]){var t="Symbol."+n;s&&o(u,n)?l[n]=u[n]:l[n]=c&&p?p(t):f(t)}return l[n]}},function(n,t){n.exports=function(n){return"function"==typeof n}},function(n,t,e){var r=e(5);n.exports=function(n){return"object"==typeof n?null!==n:r(n)}},function(n,t,e){var r=e(102),i=e(15),o=e(230);r||i(Object.prototype,"toString",o,{unsafe:!0})},function(n,t,e){var r=e(0),i=e(6),o=r.String,a=r.TypeError;n.exports=function(n){if(i(n))return n;throw a(o(n)+" is not an object")}},function(n,t,e){var r=e(3);n.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(n,t,e){var r=e(2),i=e(14),o=r({}.hasOwnProperty);n.exports=Object.hasOwn||function(n,t){return o(i(n),t)}},function(n,t,e){var r=e(47),i=Function.prototype.call;n.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},function(n,t,e){var r=e(0),i=e(9),o=e(133),a=e(132),s=e(8),c=e(67),l=r.TypeError,u=Object.defineProperty,p=Object.getOwnPropertyDescriptor;t.f=i?a?function(n,t,e){if(s(n),t=c(t),s(e),"function"==typeof n&&"prototype"===t&&"value"in e&&"writable"in e&&!e.writable){var r=p(n,t);r&&r.writable&&(n[t]=e.value,e={configurable:"configurable"in e?e.configurable:r.configurable,enumerable:"enumerable"in e?e.enumerable:r.enumerable,writable:!1})}return u(n,t,e)}:u:function(n,t,e){if(s(n),t=c(t),s(e),o)try{return u(n,t,e)}catch(n){}if("get"in e||"set"in e)throw l("Accessors not supported");return"value"in e&&(n[t]=e.value),n}},function(n,t,e){var r=e(0),i=e(5),o=function(n){return i(n)?n:void 0};n.exports=function(n,t){return arguments.length<2?o(r[n]):r[n]&&r[n][t]}},function(n,t,e){var r=e(0),i=e(32),o=r.Object;n.exports=function(n){return o(i(n))}},function(n,t,e){var r=e(0),i=e(5),o=e(10),a=e(19),s=e(92),c=e(71),l=e(33),u=e(88).CONFIGURABLE,p=l.get,f=l.enforce,d=String(String).split("String");(n.exports=function(n,t,e,c){var l,p=!!c&&!!c.unsafe,h=!!c&&!!c.enumerable,m=!!c&&!!c.noTargetGet,g=c&&void 0!==c.name?c.name:t;i(e)&&("Symbol("===String(g).slice(0,7)&&(g="["+String(g).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(e,"name")||u&&e.name!==g)&&a(e,"name",g),(l=f(e)).source||(l.source=d.join("string"==typeof g?g:""))),n!==r?(p?!m&&n[t]&&(h=!0):delete n[t],h?n[t]=e:a(n,t,e)):h?n[t]=e:s(t,e)})(Function.prototype,"toString",(function(){return i(this)&&p(this).source||c(this)}))},function(n,t,e){var r=e(46),i=e(32);n.exports=function(n){return r(i(n))}},function(n,t,e){var r=e(0),i=e(61),o=r.String;n.exports=function(n){if("Symbol"===i(n))throw TypeError("Cannot convert a Symbol value to a string");return o(n)}},function(n,t){n.exports=!1},function(n,t,e){var r=e(9),i=e(12),o=e(36);n.exports=r?function(n,t,e){return i.f(n,t,o(1,e))}:function(n,t,e){return n[t]=e,n}},function(n,t,e){"use strict";var r=e(149).charAt,i=e(17),o=e(33),a=e(136),s=o.set,c=o.getterFor("String Iterator");a(String,"String",(function(n){s(this,{type:"String Iterator",string:i(n),index:0})}),(function(){var n,t=c(this),e=t.string,i=t.index;return i>=e.length?{value:void 0,done:!0}:(n=r(e,i),t.index+=n.length,{value:n,done:!1})}))},function(n,t){var e=Array.isArray;n.exports=e},function(n,t,e){var r=e(164),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();n.exports=o},function(n,t,e){var r=e(87);n.exports=function(n){return r(n.length)}},function(n,t,e){var r=e(2),i=r({}.toString),o=r("".slice);n.exports=function(n){return o(i(n),8,-1)}},function(n,t,e){var r=e(0),i=e(150),o=e(151),a=e(124),s=e(19),c=e(4),l=c("iterator"),u=c("toStringTag"),p=a.values,f=function(n,t){if(n){if(n[l]!==p)try{s(n,l,p)}catch(t){n[l]=p}if(n[u]||s(n,u,t),i[t])for(var e in a)if(n[e]!==a[e])try{s(n,e,a[e])}catch(t){n[e]=a[e]}}};for(var d in i)f(r[d]&&r[d].prototype,d);f(o,"DOMTokenList")},function(n,t,e){var r,i=e(8),o=e(125),a=e(97),s=e(49),c=e(135),l=e(66),u=e(70),p=u("IE_PROTO"),f=function(){},d=function(n){return"<script>"+n+"<\/script>"},h=function(n){n.write(d("")),n.close();var t=n.parentWindow.Object;return n=null,t},m=function(){try{r=new ActiveXObject("htmlfile")}catch(n){}var n,t;m="undefined"!=typeof document?document.domain&&r?h(r):((t=l("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(n=t.contentWindow.document).open(),n.write(d("document.F=Object")),n.close(),n.F):h(r);for(var e=a.length;e--;)delete m.prototype[a[e]];return m()};s[p]=!0,n.exports=Object.create||function(n,t){var e;return null!==n?(f.prototype=i(n),e=new f,f.prototype=null,e[p]=n):e=m(),void 0===t?e:o.f(e,t)}},function(n,t,e){var r=e(15),i=e(246),o=Error.prototype;o.toString!==i&&r(o,"toString",i)},function(n,t,e){var r=e(0),i=e(5),o=e(68),a=r.TypeError;n.exports=function(n){if(i(n))return n;throw a(o(n)+" is not a function")}},function(n,t,e){var r=e(1),i=e(0),o=e(35),a=e(242),s=i.WebAssembly,c=7!==Error("e",{cause:7}).cause,l=function(n,t){var e={};e[n]=a(n,t,c),r({global:!0,forced:c},e)},u=function(n,t){if(s&&s[n]){var e={};e[n]=a("WebAssembly."+n,t,c),r({target:"WebAssembly",stat:!0,forced:c},e)}};l("Error",(function(n){return function(t){return o(n,this,arguments)}})),l("EvalError",(function(n){return function(t){return o(n,this,arguments)}})),l("RangeError",(function(n){return function(t){return o(n,this,arguments)}})),l("ReferenceError",(function(n){return function(t){return o(n,this,arguments)}})),l("SyntaxError",(function(n){return function(t){return o(n,this,arguments)}})),l("TypeError",(function(n){return function(t){return o(n,this,arguments)}})),l("URIError",(function(n){return function(t){return o(n,this,arguments)}})),u("CompileError",(function(n){return function(t){return o(n,this,arguments)}})),u("LinkError",(function(n){return function(t){return o(n,this,arguments)}})),u("RuntimeError",(function(n){return function(t){return o(n,this,arguments)}}))},function(n,t,e){var r=e(267),i=e(270);n.exports=function(n,t){var e=i(n,t);return r(e)?e:void 0}},function(n,t,e){"use strict";var r=e(1),i=e(90);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(n,t,e){var r=e(0).TypeError;n.exports=function(n){if(null==n)throw r("Can't call method on "+n);return n}},function(n,t,e){var r,i,o,a=e(216),s=e(0),c=e(2),l=e(6),u=e(19),p=e(10),f=e(91),d=e(70),h=e(49),m=s.TypeError,g=s.WeakMap;if(a||f.state){var v=f.state||(f.state=new g),_=c(v.get),x=c(v.has),y=c(v.set);r=function(n,t){if(x(v,n))throw new m("Object already initialized");return t.facade=n,y(v,n,t),t},i=function(n){return _(v,n)||{}},o=function(n){return x(v,n)}}else{var w=d("state");h[w]=!0,r=function(n,t){if(p(n,w))throw new m("Object already initialized");return t.facade=n,u(n,w,t),t},i=function(n){return p(n,w)?n[w]:{}},o=function(n){return p(n,w)}}n.exports={set:r,get:i,has:o,enforce:function(n){return o(n)?i(n):r(n,{})},getterFor:function(n){return function(t){var e;if(!l(t)||(e=i(t)).type!==n)throw m("Incompatible receiver, "+n+" required");return e}}}},function(n,t,e){var r=e(2);n.exports=r({}.isPrototypeOf)},function(n,t,e){var r=e(47),i=Function.prototype,o=i.apply,a=i.call;n.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(o):function(){return a.apply(o,arguments)})},function(n,t){n.exports=function(n,t){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:t}}},function(n,t,e){var r=e(9),i=e(11),o=e(98),a=e(36),s=e(16),c=e(67),l=e(10),u=e(133),p=Object.getOwnPropertyDescriptor;t.f=r?p:function(n,t){if(n=s(n),t=c(t),u)try{return p(n,t)}catch(n){}if(l(n,t))return a(!i(o.f,n,t),n[t])}},function(n,t){n.exports=function(n){return null!=n&&"object"==typeof n}},function(n,t,e){"use strict";var r=e(1),i=e(41).filter;r({target:"Array",proto:!0,forced:!e(76)("filter")},{filter:function(n){return i(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,t,e){var r=e(2),i=e(28),o=e(47),a=r(r.bind);n.exports=function(n,t){return i(n),void 0===t?n:o?a(n,t):function(){return n.apply(t,arguments)}}},function(n,t,e){var r=e(40),i=e(2),o=e(46),a=e(14),s=e(23),c=e(129),l=i([].push),u=function(n){var t=1==n,e=2==n,i=3==n,u=4==n,p=6==n,f=7==n,d=5==n||p;return function(h,m,g,v){for(var _,x,y=a(h),w=o(y),b=r(m,g),k=s(w),$=0,S=v||c,z=t?S(h,k):e||f?S(h,0):void 0;k>$;$++)if((d||$ in w)&&(x=b(_=w[$],$,y),n))if(t)z[$]=x;else if(x)switch(n){case 3:return!0;case 5:return _;case 6:return $;case 2:l(z,_)}else switch(n){case 4:return!1;case 7:l(z,_)}return p?-1:i||u?u:z}};n.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},function(n,t,e){"use strict";var r=e(3);n.exports=function(n,t){var e=[][n];return!!e&&r((function(){e.call(null,t||function(){return 1},1)}))}},function(n,t,e){var r=e(12).f,i=e(10),o=e(4)("toStringTag");n.exports=function(n,t,e){n&&!e&&(n=n.prototype),n&&!i(n,o)&&r(n,o,{configurable:!0,value:t})}},function(n,t,e){var r=e(24);n.exports=Array.isArray||function(n){return"Array"==r(n)}},function(n,t,e){var r=e(53),i=e(252),o=e(253),a=r?r.toStringTag:void 0;n.exports=function(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":a&&a in Object(n)?i(n):o(n)}},function(n,t,e){var r=e(0),i=e(2),o=e(3),a=e(24),s=r.Object,c=i("".split);n.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(n){return"String"==a(n)?c(n,""):s(n)}:s},function(n,t,e){var r=e(3);n.exports=!r((function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}))},function(n,t,e){var r,i,o=e(0),a=e(65),s=o.process,c=o.Deno,l=s&&s.versions||c&&c.version,u=l&&l.v8;u&&(i=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=+r[1]),n.exports=i},function(n,t){n.exports={}},function(n,t){n.exports={}},function(n,t,e){var r=e(2),i=e(8),o=e(217);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,t=!1,e={};try{(n=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(e,[]),t=e instanceof Array}catch(n){}return function(e,r){return i(e),o(r),t?n(e,r):e.__proto__=r,e}}():void 0)},function(n,t,e){"use strict";var r=e(67),i=e(12),o=e(36);n.exports=function(n,t,e){var a=r(t);a in n?i.f(n,a,o(0,e)):n[a]=e}},function(n,t,e){var r=e(22).Symbol;n.exports=r},function(n,t,e){"use strict";e.d(t,"a",(function(){return o}));e(122);var r=e(55);e(62),e(77),e(7),e(103),e(20),e(25),e(160);var i=e(83);e(29),e(27);function o(n){return function(n){if(Array.isArray(n))return Object(r.a)(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||Object(i.a)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(n,t,e){"use strict";function r(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}e.d(t,"a",(function(){return r}))},function(n,t,e){"use strict";function r(n,t,e,r,i,o,a,s){var c,l="function"==typeof n?n.options:n;if(t&&(l.render=t,l.staticRenderFns=e,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),a?(c=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),i&&i.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(a)},l._ssrRegister=c):i&&(c=s?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(n,t){return c.call(t),u(n,t)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:n,options:l}}e.d(t,"a",(function(){return r}))},function(n,t,e){var r=e(28);n.exports=function(n,t){var e=n[t];return null==e?void 0:r(e)}},function(n,t){var e=Math.ceil,r=Math.floor;n.exports=function(n){var t=+n;return t!=t||0===t?0:(t>0?r:e)(t)}},function(n,t,e){"use strict";var r=e(1),i=e(0),o=e(44),a=e(72),s=e(6),c=e(96),l=e(23),u=e(16),p=e(52),f=e(4),d=e(76),h=e(73),m=d("slice"),g=f("species"),v=i.Array,_=Math.max;r({target:"Array",proto:!0,forced:!m},{slice:function(n,t){var e,r,i,f=u(this),d=l(f),m=c(n,d),x=c(void 0===t?d:t,d);if(o(f)&&(e=f.constructor,(a(e)&&(e===v||o(e.prototype))||s(e)&&null===(e=e[g]))&&(e=void 0),e===v||void 0===e))return h(f,m,x);for(r=new(void 0===e?v:e)(_(x-m,0)),i=0;m<x;m++,i++)m in f&&p(r,i,f[m]);return r.length=i,r}})},function(n,t,e){var r=e(134),i=e(97).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(n){return r(n,i)}},function(n,t,e){var r=e(0),i=e(102),o=e(5),a=e(24),s=e(4)("toStringTag"),c=r.Object,l="Arguments"==a(function(){return arguments}());n.exports=i?a:function(n){var t,e,r;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(e=function(n,t){try{return n[t]}catch(n){}}(t=c(n),s))?e:l?a(t):"Object"==(r=a(t))&&o(t.callee)?"Arguments":r}},function(n,t,e){"use strict";var r=e(1),i=e(0),o=e(13),a=e(35),s=e(11),c=e(2),l=e(18),u=e(9),p=e(93),f=e(3),d=e(10),h=e(44),m=e(5),g=e(6),v=e(34),_=e(94),x=e(8),y=e(14),w=e(16),b=e(67),k=e(17),$=e(36),S=e(26),z=e(69),j=e(60),T=e(157),C=e(100),E=e(37),P=e(12),A=e(125),I=e(98),O=e(73),N=e(15),q=e(63),L=e(70),R=e(49),D=e(64),M=e(4),U=e(158),F=e(159),B=e(43),H=e(33),G=e(41).forEach,W=L("hidden"),V=M("toPrimitive"),K=H.set,Q=H.getterFor("Symbol"),Y=Object.prototype,J=i.Symbol,X=J&&J.prototype,Z=i.TypeError,nn=i.QObject,tn=o("JSON","stringify"),en=E.f,rn=P.f,on=T.f,an=I.f,sn=c([].push),cn=q("symbols"),ln=q("op-symbols"),un=q("string-to-symbol-registry"),pn=q("symbol-to-string-registry"),fn=q("wks"),dn=!nn||!nn.prototype||!nn.prototype.findChild,hn=u&&f((function(){return 7!=S(rn({},"a",{get:function(){return rn(this,"a",{value:7}).a}})).a}))?function(n,t,e){var r=en(Y,t);r&&delete Y[t],rn(n,t,e),r&&n!==Y&&rn(Y,t,r)}:rn,mn=function(n,t){var e=cn[n]=S(X);return K(e,{type:"Symbol",tag:n,description:t}),u||(e.description=t),e},gn=function(n,t,e){n===Y&&gn(ln,t,e),x(n);var r=b(t);return x(e),d(cn,r)?(e.enumerable?(d(n,W)&&n[W][r]&&(n[W][r]=!1),e=S(e,{enumerable:$(0,!1)})):(d(n,W)||rn(n,W,$(1,{})),n[W][r]=!0),hn(n,r,e)):rn(n,r,e)},vn=function(n,t){x(n);var e=w(t),r=z(e).concat(wn(e));return G(r,(function(t){u&&!s(_n,e,t)||gn(n,t,e[t])})),n},_n=function(n){var t=b(n),e=s(an,this,t);return!(this===Y&&d(cn,t)&&!d(ln,t))&&(!(e||!d(this,t)||!d(cn,t)||d(this,W)&&this[W][t])||e)},xn=function(n,t){var e=w(n),r=b(t);if(e!==Y||!d(cn,r)||d(ln,r)){var i=en(e,r);return!i||!d(cn,r)||d(e,W)&&e[W][r]||(i.enumerable=!0),i}},yn=function(n){var t=on(w(n)),e=[];return G(t,(function(n){d(cn,n)||d(R,n)||sn(e,n)})),e},wn=function(n){var t=n===Y,e=on(t?ln:w(n)),r=[];return G(e,(function(n){!d(cn,n)||t&&!d(Y,n)||sn(r,cn[n])})),r};(p||(N(X=(J=function(){if(v(X,this))throw Z("Symbol is not a constructor");var n=arguments.length&&void 0!==arguments[0]?k(arguments[0]):void 0,t=D(n),e=function(n){this===Y&&s(e,ln,n),d(this,W)&&d(this[W],t)&&(this[W][t]=!1),hn(this,t,$(1,n))};return u&&dn&&hn(Y,t,{configurable:!0,set:e}),mn(t,n)}).prototype,"toString",(function(){return Q(this).tag})),N(J,"withoutSetter",(function(n){return mn(D(n),n)})),I.f=_n,P.f=gn,A.f=vn,E.f=xn,j.f=T.f=yn,C.f=wn,U.f=function(n){return mn(M(n),n)},u&&(rn(X,"description",{configurable:!0,get:function(){return Q(this).description}}),l||N(Y,"propertyIsEnumerable",_n,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!p,sham:!p},{Symbol:J}),G(z(fn),(function(n){F(n)})),r({target:"Symbol",stat:!0,forced:!p},{for:function(n){var t=k(n);if(d(un,t))return un[t];var e=J(t);return un[t]=e,pn[e]=t,e},keyFor:function(n){if(!_(n))throw Z(n+" is not a symbol");if(d(pn,n))return pn[n]},useSetter:function(){dn=!0},useSimple:function(){dn=!1}}),r({target:"Object",stat:!0,forced:!p,sham:!u},{create:function(n,t){return void 0===t?S(n):vn(S(n),t)},defineProperty:gn,defineProperties:vn,getOwnPropertyDescriptor:xn}),r({target:"Object",stat:!0,forced:!p},{getOwnPropertyNames:yn,getOwnPropertySymbols:wn}),r({target:"Object",stat:!0,forced:f((function(){C.f(1)}))},{getOwnPropertySymbols:function(n){return C.f(y(n))}}),tn)&&r({target:"JSON",stat:!0,forced:!p||f((function(){var n=J();return"[null]"!=tn([n])||"{}"!=tn({a:n})||"{}"!=tn(Object(n))}))},{stringify:function(n,t,e){var r=O(arguments),i=t;if((g(t)||void 0!==n)&&!_(n))return h(t)||(t=function(n,t){if(m(i)&&(t=s(i,this,n,t)),!_(t))return t}),r[1]=t,a(tn,null,r)}});if(!X[V]){var bn=X.valueOf;N(X,V,(function(n){return s(bn,this)}))}B(J,"Symbol"),R[W]=!0},function(n,t,e){var r=e(18),i=e(91);(n.exports=function(n,t){return i[n]||(i[n]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:r?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(n,t,e){var r=e(2),i=0,o=Math.random(),a=r(1..toString);n.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+a(++i+o,36)}},function(n,t,e){var r=e(13);n.exports=r("navigator","userAgent")||""},function(n,t,e){var r=e(0),i=e(6),o=r.document,a=i(o)&&i(o.createElement);n.exports=function(n){return a?o.createElement(n):{}}},function(n,t,e){var r=e(214),i=e(94);n.exports=function(n){var t=r(n,"string");return i(t)?t:t+""}},function(n,t,e){var r=e(0).String;n.exports=function(n){try{return r(n)}catch(n){return"Object"}}},function(n,t,e){var r=e(134),i=e(97);n.exports=Object.keys||function(n){return r(n,i)}},function(n,t,e){var r=e(63),i=e(64),o=r("keys");n.exports=function(n){return o[n]||(o[n]=i(n))}},function(n,t,e){var r=e(2),i=e(5),o=e(91),a=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(n){return a(n)}),n.exports=o.inspectSource},function(n,t,e){var r=e(2),i=e(3),o=e(5),a=e(61),s=e(13),c=e(71),l=function(){},u=[],p=s("Reflect","construct"),f=/^\s*(?:class|function)\b/,d=r(f.exec),h=!f.exec(l),m=function(n){if(!o(n))return!1;try{return p(l,u,n),!0}catch(n){return!1}},g=function(n){if(!o(n))return!1;switch(a(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!d(f,c(n))}catch(n){return!0}};g.sham=!0,n.exports=!p||i((function(){var n;return m(m.call)||!m(Object)||!m((function(){n=!0}))||n}))?g:m},function(n,t,e){var r=e(2);n.exports=r([].slice)},function(n,t,e){var r=e(24),i=e(0);n.exports="process"==r(i.process)},function(n,t,e){"use strict";e.d(t,"a",(function(){return i}));e(7);function r(n,t,e,r,i,o,a){try{var s=n[o](a),c=s.value}catch(n){return void e(n)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(n){return function(){var t=this,e=arguments;return new Promise((function(i,o){var a=n.apply(t,e);function s(n){r(a,i,o,s,c,"next",n)}function c(n){r(a,i,o,s,c,"throw",n)}s(void 0)}))}}},function(n,t,e){var r=e(3),i=e(4),o=e(48),a=i("species");n.exports=function(n){return o>=51||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[n](Boolean).foo}))}},function(n,t,e){"use strict";var r=e(1),i=e(9),o=e(0),a=e(2),s=e(10),c=e(5),l=e(34),u=e(17),p=e(12).f,f=e(99),d=o.Symbol,h=d&&d.prototype;if(i&&c(d)&&(!("description"in h)||void 0!==d().description)){var m={},g=function(){var n=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),t=l(h,this)?new d(n):void 0===n?d():d(n);return""===n&&(m[t]=!0),t};f(g,d),g.prototype=h,h.constructor=g;var v="Symbol(test)"==String(d("test")),_=a(h.toString),x=a(h.valueOf),y=/^Symbol\((.*)\)[^)]+$/,w=a("".replace),b=a("".slice);p(h,"description",{configurable:!0,get:function(){var n=x(this),t=_(n);if(s(m,n))return"";var e=v?b(t,7,-1):w(t,y,"$1");return""===e?void 0:e}}),r({global:!0,forced:!0},{Symbol:g})}},function(n,t,e){var r=e(257),i=e(258),o=e(259),a=e(260),s=e(261);function c(n){var t=-1,e=null==n?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,n.exports=c},function(n,t,e){var r=e(166);n.exports=function(n,t){for(var e=n.length;e--;)if(r(n[e][0],t))return e;return-1}},function(n,t,e){var r=e(30)(Object,"create");n.exports=r},function(n,t,e){var r=e(279);n.exports=function(n,t){var e=n.__data__;return r(t)?e["string"==typeof t?"string":"hash"]:e.map}},function(n,t,e){var r=e(112);n.exports=function(n){if("string"==typeof n||r(n))return n;var t=n+"";return"0"==t&&1/n==-1/0?"-0":t}},function(n,t,e){"use strict";e.d(t,"a",(function(){return i}));e(59),e(7),e(104),e(160),e(20),e(31),e(115);var r=e(55);function i(n,t){if(n){if("string"==typeof n)return Object(r.a)(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Object(r.a)(n,t):void 0}}},function(n,t,e){var r,i;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(i="function"==typeof(r=function(){var n,t,e={version:"0.2.0"},r=e.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function i(n,t,e){return n<t?t:n>e?e:n}function o(n){return 100*(-1+n)}e.configure=function(n){var t,e;for(t in n)void 0!==(e=n[t])&&n.hasOwnProperty(t)&&(r[t]=e);return this},e.status=null,e.set=function(n){var t=e.isStarted();n=i(n,r.minimum,1),e.status=1===n?null:n;var c=e.render(!t),l=c.querySelector(r.barSelector),u=r.speed,p=r.easing;return c.offsetWidth,a((function(t){""===r.positionUsing&&(r.positionUsing=e.getPositioningCSS()),s(l,function(n,t,e){var i;return(i="translate3d"===r.positionUsing?{transform:"translate3d("+o(n)+"%,0,0)"}:"translate"===r.positionUsing?{transform:"translate("+o(n)+"%,0)"}:{"margin-left":o(n)+"%"}).transition="all "+t+"ms "+e,i}(n,u,p)),1===n?(s(c,{transition:"none",opacity:1}),c.offsetWidth,setTimeout((function(){s(c,{transition:"all "+u+"ms linear",opacity:0}),setTimeout((function(){e.remove(),t()}),u)}),u)):setTimeout(t,u)})),this},e.isStarted=function(){return"number"==typeof e.status},e.start=function(){e.status||e.set(0);var n=function(){setTimeout((function(){e.status&&(e.trickle(),n())}),r.trickleSpeed)};return r.trickle&&n(),this},e.done=function(n){return n||e.status?e.inc(.3+.5*Math.random()).set(1):this},e.inc=function(n){var t=e.status;return t?("number"!=typeof n&&(n=(1-t)*i(Math.random()*t,.1,.95)),t=i(t+n,0,.994),e.set(t)):e.start()},e.trickle=function(){return e.inc(Math.random()*r.trickleRate)},n=0,t=0,e.promise=function(r){return r&&"resolved"!==r.state()?(0===t&&e.start(),n++,t++,r.always((function(){0==--t?(n=0,e.done()):e.set((n-t)/n)})),this):this},e.render=function(n){if(e.isRendered())return document.getElementById("nprogress");l(document.documentElement,"nprogress-busy");var t=document.createElement("div");t.id="nprogress",t.innerHTML=r.template;var i,a=t.querySelector(r.barSelector),c=n?"-100":o(e.status||0),u=document.querySelector(r.parent);return s(a,{transition:"all 0 linear",transform:"translate3d("+c+"%,0,0)"}),r.showSpinner||(i=t.querySelector(r.spinnerSelector))&&f(i),u!=document.body&&l(u,"nprogress-custom-parent"),u.appendChild(t),t},e.remove=function(){u(document.documentElement,"nprogress-busy"),u(document.querySelector(r.parent),"nprogress-custom-parent");var n=document.getElementById("nprogress");n&&f(n)},e.isRendered=function(){return!!document.getElementById("nprogress")},e.getPositioningCSS=function(){var n=document.body.style,t="WebkitTransform"in n?"Webkit":"MozTransform"in n?"Moz":"msTransform"in n?"ms":"OTransform"in n?"O":"";return t+"Perspective"in n?"translate3d":t+"Transform"in n?"translate":"margin"};var a=function(){var n=[];function t(){var e=n.shift();e&&e(t)}return function(e){n.push(e),1==n.length&&t()}}(),s=function(){var n=["Webkit","O","Moz","ms"],t={};function e(e){return e=e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(n,t){return t.toUpperCase()})),t[e]||(t[e]=function(t){var e=document.body.style;if(t in e)return t;for(var r,i=n.length,o=t.charAt(0).toUpperCase()+t.slice(1);i--;)if((r=n[i]+o)in e)return r;return t}(e))}function r(n,t,r){t=e(t),n.style[t]=r}return function(n,t){var e,i,o=arguments;if(2==o.length)for(e in t)void 0!==(i=t[e])&&t.hasOwnProperty(e)&&r(n,e,i);else r(n,o[1],o[2])}}();function c(n,t){return("string"==typeof n?n:p(n)).indexOf(" "+t+" ")>=0}function l(n,t){var e=p(n),r=e+t;c(e,t)||(n.className=r.substring(1))}function u(n,t){var e,r=p(n);c(n,t)&&(e=r.replace(" "+t+" "," "),n.className=e.substring(1,e.length-1))}function p(n){return(" "+(n.className||"")+" ").replace(/\s+/gi," ")}function f(n){n&&n.parentNode&&n.parentNode.removeChild(n)}return e})?r.call(t,e,t,n):r)||(n.exports=i)},function(n,t,e){"use strict";var r=e(1),i=e(41).map;r({target:"Array",proto:!0,forced:!e(76)("map")},{map:function(n){return i(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,t,e){"use strict";var r=e(35),i=e(11),o=e(2),a=e(192),s=e(3),c=e(8),l=e(5),u=e(58),p=e(87),f=e(17),d=e(32),h=e(199),m=e(57),g=e(247),v=e(193),_=e(4)("replace"),x=Math.max,y=Math.min,w=o([].concat),b=o([].push),k=o("".indexOf),$=o("".slice),S="$0"==="a".replace(/./,"$0"),z=!!/./[_]&&""===/./[_]("a","$0");a("replace",(function(n,t,e){var o=z?"$":"$0";return[function(n,e){var r=d(this),o=null==n?void 0:m(n,_);return o?i(o,n,r,e):i(t,f(r),n,e)},function(n,i){var a=c(this),s=f(n);if("string"==typeof i&&-1===k(i,o)&&-1===k(i,"$<")){var d=e(t,a,s,i);if(d.done)return d.value}var m=l(i);m||(i=f(i));var _=a.global;if(_){var S=a.unicode;a.lastIndex=0}for(var z=[];;){var j=v(a,s);if(null===j)break;if(b(z,j),!_)break;""===f(j[0])&&(a.lastIndex=h(s,p(a.lastIndex),S))}for(var T,C="",E=0,P=0;P<z.length;P++){for(var A=f((j=z[P])[0]),I=x(y(u(j.index),s.length),0),O=[],N=1;N<j.length;N++)b(O,void 0===(T=j[N])?T:String(T));var q=j.groups;if(m){var L=w([A],O,I,s);void 0!==q&&b(L,q);var R=f(r(i,void 0,L))}else R=g(A,s,I,O,q,i);I>=E&&(C+=$(s,E,I)+R,E=I+A.length)}return C+$(s,E)}]}),!!s((function(){var n=/./;return n.exec=function(){var n=[];return n.groups={a:"7"},n},"7"!=="".replace(n,"$<a>")}))||!S||z)},function(n,t,e){var r=e(58),i=Math.min;n.exports=function(n){return n>0?i(r(n),9007199254740991):0}},function(n,t,e){var r=e(9),i=e(10),o=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=i(o,"name"),c=s&&"something"===function(){}.name,l=s&&(!r||r&&a(o,"name").configurable);n.exports={EXISTS:s,PROPER:c,CONFIGURABLE:l}},function(n,t,e){var r=e(61),i=e(57),o=e(50),a=e(4)("iterator");n.exports=function(n){if(null!=n)return i(n,a)||i(n,"@@iterator")||o[r(n)]}},function(n,t,e){"use strict";var r,i,o=e(11),a=e(2),s=e(17),c=e(197),l=e(191),u=e(63),p=e(26),f=e(33).get,d=e(198),h=e(208),m=u("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,v=g,_=a("".charAt),x=a("".indexOf),y=a("".replace),w=a("".slice),b=(i=/b*/g,o(g,r=/a/,"a"),o(g,i,"a"),0!==r.lastIndex||0!==i.lastIndex),k=l.BROKEN_CARET,$=void 0!==/()??/.exec("")[1];(b||$||k||d||h)&&(v=function(n){var t,e,r,i,a,l,u,d=this,h=f(d),S=s(n),z=h.raw;if(z)return z.lastIndex=d.lastIndex,t=o(v,z,S),d.lastIndex=z.lastIndex,t;var j=h.groups,T=k&&d.sticky,C=o(c,d),E=d.source,P=0,A=S;if(T&&(C=y(C,"y",""),-1===x(C,"g")&&(C+="g"),A=w(S,d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==_(S,d.lastIndex-1))&&(E="(?: "+E+")",A=" "+A,P++),e=new RegExp("^(?:"+E+")",C)),$&&(e=new RegExp("^"+E+"$(?!\\s)",C)),b&&(r=d.lastIndex),i=o(g,T?e:d,A),T?i?(i.input=w(i.input,P),i[0]=w(i[0],P),i.index=d.lastIndex,d.lastIndex+=i[0].length):d.lastIndex=0:b&&i&&(d.lastIndex=d.global?i.index+i[0].length:r),$&&i&&i.length>1&&o(m,i[0],e,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i&&j)for(i.groups=l=p(null),a=0;a<j.length;a++)l[(u=j[a])[0]]=i[u[1]];return i}),n.exports=v},function(n,t,e){var r=e(0),i=e(92),o=r["__core-js_shared__"]||i("__core-js_shared__",{});n.exports=o},function(n,t,e){var r=e(0),i=Object.defineProperty;n.exports=function(n,t){try{i(r,n,{value:t,configurable:!0,writable:!0})}catch(e){r[n]=t}return t}},function(n,t,e){var r=e(48),i=e(3);n.exports=!!Object.getOwnPropertySymbols&&!i((function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(n,t,e){var r=e(0),i=e(13),o=e(5),a=e(34),s=e(131),c=r.Object;n.exports=s?function(n){return"symbol"==typeof n}:function(n){var t=i("Symbol");return o(t)&&a(t.prototype,c(n))}},function(n,t,e){var r=e(16),i=e(96),o=e(23),a=function(n){return function(t,e,a){var s,c=r(t),l=o(c),u=i(a,l);if(n&&e!=e){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((n||u in c)&&c[u]===e)return n||u||0;return!n&&-1}};n.exports={includes:a(!0),indexOf:a(!1)}},function(n,t,e){var r=e(58),i=Math.max,o=Math.min;n.exports=function(n,t){var e=r(n);return e<0?i(e+t,0):o(e,t)}},function(n,t){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,t,e){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(n){var t=i(this,n);return!!t&&t.enumerable}:r},function(n,t,e){var r=e(10),i=e(137),o=e(37),a=e(12);n.exports=function(n,t,e){for(var s=i(t),c=a.f,l=o.f,u=0;u<s.length;u++){var p=s[u];r(n,p)||e&&r(e,p)||c(n,p,l(t,p))}}},function(n,t){t.f=Object.getOwnPropertySymbols},function(n,t,e){var r=e(0),i=e(10),o=e(5),a=e(14),s=e(70),c=e(139),l=s("IE_PROTO"),u=r.Object,p=u.prototype;n.exports=c?u.getPrototypeOf:function(n){var t=a(n);if(i(t,l))return t[l];var e=t.constructor;return o(e)&&t instanceof e?e.prototype:t instanceof u?p:null}},function(n,t,e){var r={};r[e(4)("toStringTag")]="z",n.exports="[object z]"===String(r)},function(n,t,e){e(159)("iterator")},function(n,t,e){var r=e(9),i=e(88).EXISTS,o=e(2),a=e(12).f,s=Function.prototype,c=o(s.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=o(l.exec);r&&!i&&a(s,"name",{configurable:!0,get:function(){try{return u(l,c(this))[1]}catch(n){return""}}})},function(n,t,e){var r=e(251),i=e(38),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(n){return i(n)&&a.call(n,"callee")&&!s.call(n,"callee")};n.exports=c},function(n,t,e){var r=e(30)(e(22),"Map");n.exports=r},function(n,t){n.exports=function(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}},function(n,t,e){var r=e(271),i=e(278),o=e(280),a=e(281),s=e(282);function c(n){var t=-1,e=null==n?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,n.exports=c},function(n,t){n.exports=function(n){var t=-1,e=Array(n.size);return n.forEach((function(n){e[++t]=n})),e}},function(n,t){n.exports=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991}},function(n,t,e){var r=e(21),i=e(112),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;n.exports=function(n,t){if(r(n))return!1;var e=typeof n;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=n&&!i(n))||(a.test(n)||!o.test(n)||null!=t&&n in Object(t))}},function(n,t,e){var r=e(45),i=e(38);n.exports=function(n){return"symbol"==typeof n||i(n)&&"[object Symbol]"==r(n)}},function(n,t){n.exports=function(n){return n}},function(n,t,e){"use strict";e.d(t,"a",(function(){return i}));e(122);e(62),e(77),e(7),e(103),e(20),e(25);var r=e(83);e(29),e(27);function i(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,i,o=[],a=!0,s=!1;try{for(e=e.call(n);!(a=(r=e.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(n){s=!0,i=n}finally{try{a||null==e.return||e.return()}finally{if(s)throw i}}return o}}(n,t)||Object(r.a)(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(n,t,e){"use strict";e(31);var r,i,o=e(1),a=e(0),s=e(11),c=e(2),l=e(5),u=e(6),p=(r=!1,(i=/[ac]/).exec=function(){return r=!0,/./.exec.apply(this,arguments)},!0===i.test("abc")&&r),f=a.Error,d=c(/./.test);o({target:"RegExp",proto:!0,forced:!p},{test:function(n){var t=this.exec;if(!l(t))return d(this,n);var e=s(t,this,n);if(null!==e&&!u(e))throw new f("RegExp exec method returned something other than an Object or null");return!!e}})},function(n,t,e){"use strict";var r=e(1),i=e(41).some;r({target:"Array",proto:!0,forced:!e(42)("some")},{some:function(n){return i(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,t,e){var r=e(1),i=e(14),o=e(69);r({target:"Object",stat:!0,forced:e(3)((function(){o(1)}))},{keys:function(n){return o(i(n))}})},function(n,t,e){"use strict";var r=e(1),i=e(155);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(n,t,e){var r=e(0),i=e(150),o=e(151),a=e(155),s=e(19),c=function(n){if(n&&n.forEach!==a)try{s(n,"forEach",a)}catch(t){n.forEach=a}};for(var l in i)i[l]&&c(r[l]&&r[l].prototype);c(o)},function(n,t,e){var r=e(4),i=e(26),o=e(12),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),n.exports=function(n){s[a][n]=!0}},function(n,t,e){var r=function(n){"use strict";var t=Object.prototype,e=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(n,t,e){return Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}),n[t]}try{s({},"")}catch(n){s=function(n,t,e){return n[t]=e}}function c(n,t,e,r){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),a=new k(r||[]);return o._invoke=function(n,t,e){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return S()}for(e.method=i,e.arg=o;;){var a=e.delegate;if(a){var s=y(a,e);if(s){if(s===u)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=l(n,t,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}(n,e,a),o}function l(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}n.wrap=c;var u={};function p(){}function f(){}function d(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m($([])));g&&g!==t&&e.call(g,i)&&(h=g);var v=d.prototype=p.prototype=Object.create(h);function _(n){["next","throw","return"].forEach((function(t){s(n,t,(function(n){return this._invoke(t,n)}))}))}function x(n,t){var r;this._invoke=function(i,o){function a(){return new t((function(r,a){!function r(i,o,a,s){var c=l(n[i],n,o);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==typeof p&&e.call(p,"__await")?t.resolve(p.__await).then((function(n){r("next",n,a,s)}),(function(n){r("throw",n,a,s)})):t.resolve(p).then((function(n){u.value=n,a(u)}),(function(n){return r("throw",n,a,s)}))}s(c.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function y(n,t){var e=n.iterator[t.method];if(void 0===e){if(t.delegate=null,"throw"===t.method){if(n.iterator.return&&(t.method="return",t.arg=void 0,y(n,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=l(e,n.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var i=r.arg;return i?i.done?(t[n.resultName]=i.value,t.next=n.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function b(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function k(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(w,this),this.reset(!0)}function $(n){if(n){var t=n[i];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,o=function t(){for(;++r<n.length;)if(e.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=d,s(v,"constructor",d),s(d,"constructor",f),f.displayName=s(d,a,"GeneratorFunction"),n.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,d):(n.__proto__=d,s(n,a,"GeneratorFunction")),n.prototype=Object.create(v),n},n.awrap=function(n){return{__await:n}},_(x.prototype),s(x.prototype,o,(function(){return this})),n.AsyncIterator=x,n.async=function(t,e,r,i,o){void 0===o&&(o=Promise);var a=new x(c(t,e,r,i),o);return n.isGeneratorFunction(e)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},_(v),s(v,a,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),n.keys=function(n){var t=[];for(var e in n)t.push(e);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in n)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=$,k.prototype={constructor:k,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!n)for(var t in this)"t"===t.charAt(0)&&e.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var t=this;function r(e,r){return a.type="throw",a.arg=n,t.next=e,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=e.call(o,"catchLoc"),c=e.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(n,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&e.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===n||"continue"===n)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=n,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),u},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===n)return this.complete(e.completion,e.afterLoc),b(e),u}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===n){var r=e.completion;if("throw"===r.type){var i=r.arg;b(e)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(n,t,e){return this.delegate={iterator:$(n),resultName:t,nextLoc:e},"next"===this.method&&(this.arg=void 0),u}},n}(n.exports);try{regeneratorRuntime=r}catch(n){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(n,t,e){e(1)({target:"Array",stat:!0},{isArray:e(44)})},function(n,t,e){var r=e(1),i=e(9),o=e(12).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==o,sham:!i},{defineProperty:o})},function(n,t,e){"use strict";var r=e(16),i=e(120),o=e(50),a=e(33),s=e(12).f,c=e(136),l=e(18),u=e(9),p=a.set,f=a.getterFor("Array Iterator");n.exports=c(Array,"Array",(function(n,t){p(this,{type:"Array Iterator",target:r(n),index:0,kind:t})}),(function(){var n=f(this),t=n.target,e=n.kind,r=n.index++;return!t||r>=t.length?(n.target=void 0,{value:void 0,done:!0}):"keys"==e?{value:r,done:!1}:"values"==e?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");var d=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!l&&u&&"values"!==d.name)try{s(d,"name",{value:"values"})}catch(n){}},function(n,t,e){var r=e(9),i=e(132),o=e(12),a=e(8),s=e(16),c=e(69);t.f=r&&!i?Object.defineProperties:function(n,t){a(n);for(var e,r=s(t),i=c(t),l=i.length,u=0;l>u;)o.f(n,e=i[u++],r[e]);return n}},function(n,t,e){var r=e(3),i=e(5),o=/#|\.prototype\./,a=function(n,t){var e=c[s(n)];return e==u||e!=l&&(i(t)?r(t):!!t)},s=a.normalize=function(n){return String(n).replace(o,".").toLowerCase()},c=a.data={},l=a.NATIVE="N",u=a.POLYFILL="P";n.exports=a},function(n,t,e){var r=e(0),i=e(11),o=e(28),a=e(8),s=e(68),c=e(89),l=r.TypeError;n.exports=function(n,t){var e=arguments.length<2?c(n):t;if(o(e))return a(i(e,n));throw l(s(n)+" is not iterable")}},function(n,t,e){var r=e(8),i=e(144),o=e(4)("species");n.exports=function(n,t){var e,a=r(n).constructor;return void 0===a||null==(e=r(a)[o])?t:i(e)}},function(n,t,e){var r=e(231);n.exports=function(n,t){return new(r(n))(0===t?0:t)}},function(n,t){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(n,t,e){var r=e(93);n.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(n,t,e){var r=e(9),i=e(3);n.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(n,t,e){var r=e(9),i=e(3),o=e(66);n.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(n,t,e){var r=e(2),i=e(10),o=e(16),a=e(95).indexOf,s=e(49),c=r([].push);n.exports=function(n,t){var e,r=o(n),l=0,u=[];for(e in r)!i(s,e)&&i(r,e)&&c(u,e);for(;t.length>l;)i(r,e=t[l++])&&(~a(u,e)||c(u,e));return u}},function(n,t,e){var r=e(13);n.exports=r("document","documentElement")},function(n,t,e){"use strict";var r=e(1),i=e(11),o=e(18),a=e(88),s=e(5),c=e(202),l=e(101),u=e(51),p=e(43),f=e(19),d=e(15),h=e(4),m=e(50),g=e(138),v=a.PROPER,_=a.CONFIGURABLE,x=g.IteratorPrototype,y=g.BUGGY_SAFARI_ITERATORS,w=h("iterator"),b=function(){return this};n.exports=function(n,t,e,a,h,g,k){c(e,t,a);var $,S,z,j=function(n){if(n===h&&A)return A;if(!y&&n in E)return E[n];switch(n){case"keys":case"values":case"entries":return function(){return new e(this,n)}}return function(){return new e(this)}},T=t+" Iterator",C=!1,E=n.prototype,P=E[w]||E["@@iterator"]||h&&E[h],A=!y&&P||j(h),I="Array"==t&&E.entries||P;if(I&&($=l(I.call(new n)))!==Object.prototype&&$.next&&(o||l($)===x||(u?u($,x):s($[w])||d($,w,b)),p($,T,!0,!0),o&&(m[T]=b)),v&&"values"==h&&P&&"values"!==P.name&&(!o&&_?f(E,"name","values"):(C=!0,A=function(){return i(P,this)})),h)if(S={values:j("values"),keys:g?A:j("keys"),entries:j("entries")},k)for(z in S)(y||C||!(z in E))&&d(E,z,S[z]);else r({target:t,proto:!0,forced:y||C},S);return o&&!k||E[w]===A||d(E,w,A,{name:h}),m[t]=A,S}},function(n,t,e){var r=e(13),i=e(2),o=e(60),a=e(100),s=e(8),c=i([].concat);n.exports=r("Reflect","ownKeys")||function(n){var t=o.f(s(n)),e=a.f;return e?c(t,e(n)):t}},function(n,t,e){"use strict";var r,i,o,a=e(3),s=e(5),c=e(26),l=e(101),u=e(15),p=e(4),f=e(18),d=p("iterator"),h=!1;[].keys&&("next"in(o=[].keys())?(i=l(l(o)))!==Object.prototype&&(r=i):h=!0),null==r||a((function(){var n={};return r[d].call(n)!==n}))?r={}:f&&(r=c(r)),s(r[d])||u(r,d,(function(){return this})),n.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},function(n,t,e){var r=e(3);n.exports=!r((function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}))},function(n,t,e){var r=e(0);n.exports=r.Promise},function(n,t,e){var r=e(4),i=e(50),o=r("iterator"),a=Array.prototype;n.exports=function(n){return void 0!==n&&(i.Array===n||a[o]===n)}},function(n,t,e){var r=e(11),i=e(8),o=e(57);n.exports=function(n,t,e){var a,s;i(n);try{if(!(a=o(n,"return"))){if("throw"===t)throw e;return e}a=r(a,n)}catch(n){s=!0,a=n}if("throw"===t)throw e;if(s)throw a;return i(a),e}},function(n,t,e){var r=e(4)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(n){}n.exports=function(n,t){if(!t&&!i)return!1;var e=!1;try{var o={};o[r]=function(){return{next:function(){return{done:e=!0}}}},n(o)}catch(n){}return e}},function(n,t,e){var r=e(0),i=e(72),o=e(68),a=r.TypeError;n.exports=function(n){if(i(n))return n;throw a(o(n)+" is not a constructor")}},function(n,t,e){var r,i,o,a,s=e(0),c=e(35),l=e(40),u=e(5),p=e(10),f=e(3),d=e(135),h=e(73),m=e(66),g=e(206),v=e(146),_=e(74),x=s.setImmediate,y=s.clearImmediate,w=s.process,b=s.Dispatch,k=s.Function,$=s.MessageChannel,S=s.String,z=0,j={};try{r=s.location}catch(n){}var T=function(n){if(p(j,n)){var t=j[n];delete j[n],t()}},C=function(n){return function(){T(n)}},E=function(n){T(n.data)},P=function(n){s.postMessage(S(n),r.protocol+"//"+r.host)};x&&y||(x=function(n){g(arguments.length,1);var t=u(n)?n:k(n),e=h(arguments,1);return j[++z]=function(){c(t,void 0,e)},i(z),z},y=function(n){delete j[n]},_?i=function(n){w.nextTick(C(n))}:b&&b.now?i=function(n){b.now(C(n))}:$&&!v?(a=(o=new $).port2,o.port1.onmessage=E,i=l(a.postMessage,a)):s.addEventListener&&u(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!f(P)?(i=P,s.addEventListener("message",E,!1)):i="onreadystatechange"in m("script")?function(n){d.appendChild(m("script")).onreadystatechange=function(){d.removeChild(this),T(n)}}:function(n){setTimeout(C(n),0)}),n.exports={set:x,clear:y}},function(n,t,e){var r=e(65);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},function(n,t,e){var r=e(8),i=e(6),o=e(148);n.exports=function(n,t){if(r(n),i(t)&&t.constructor===n)return t;var e=o.f(n);return(0,e.resolve)(t),e.promise}},function(n,t,e){"use strict";var r=e(28),i=function(n){var t,e;this.promise=new n((function(n,r){if(void 0!==t||void 0!==e)throw TypeError("Bad Promise constructor");t=n,e=r})),this.resolve=r(t),this.reject=r(e)};n.exports.f=function(n){return new i(n)}},function(n,t,e){var r=e(2),i=e(58),o=e(17),a=e(32),s=r("".charAt),c=r("".charCodeAt),l=r("".slice),u=function(n){return function(t,e){var r,u,p=o(a(t)),f=i(e),d=p.length;return f<0||f>=d?n?"":void 0:(r=c(p,f))<55296||r>56319||f+1===d||(u=c(p,f+1))<56320||u>57343?n?s(p,f):r:n?l(p,f,f+2):u-56320+(r-55296<<10)+65536}};n.exports={codeAt:u(!1),charAt:u(!0)}},function(n,t){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,t,e){var r=e(66)("span").classList,i=r&&r.constructor&&r.constructor.prototype;n.exports=i===Object.prototype?void 0:i},function(n,t,e){var r=e(1),i=e(3),o=e(14),a=e(101),s=e(139);r({target:"Object",stat:!0,forced:i((function(){a(1)})),sham:!s},{getPrototypeOf:function(n){return a(o(n))}})},function(n,t,e){var r=e(0),i=e(195),o=r.TypeError;n.exports=function(n){if(i(n))throw o("The method doesn't accept regular expressions");return n}},function(n,t,e){var r=e(4)("match");n.exports=function(n){var t=/./;try{"/./"[n](t)}catch(e){try{return t[r]=!1,"/./"[n](t)}catch(n){}}return!1}},function(n,t,e){"use strict";var r=e(41).forEach,i=e(42)("forEach");n.exports=i?[].forEach:function(n){return r(this,n,arguments.length>1?arguments[1]:void 0)}},function(n,t,e){var r=e(3);n.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(n,t,e){var r=e(24),i=e(16),o=e(60).f,a=e(196),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(n){return s&&"Window"==r(n)?function(n){try{return o(n)}catch(n){return a(s)}}(n):o(i(n))}},function(n,t,e){var r=e(4);t.f=r},function(n,t,e){var r=e(239),i=e(10),o=e(158),a=e(12).f;n.exports=function(n){var t=r.Symbol||(r.Symbol={});i(t,n)||a(t,n,{value:o.f(n)})}},function(n,t,e){var r=e(1),i=e(240);r({target:"Array",stat:!0,forced:!e(143)((function(n){Array.from(n)}))},{from:i})},function(n,t,e){var r=e(17);n.exports=function(n,t){return void 0===n?arguments.length<2?"":t:r(n)}},function(n,t,e){e(1)({target:"Object",stat:!0,sham:!e(9)},{create:e(26)})},function(n,t){n.exports=function(n,t){for(var e=-1,r=t.length,i=n.length;++e<r;)n[i+e]=t[e];return n}},function(n,t){var e="object"==typeof global&&global&&global.Object===Object&&global;n.exports=e},function(n,t,e){var r=e(78),i=e(262),o=e(263),a=e(264),s=e(265),c=e(266);function l(n){var t=this.__data__=new r(n);this.size=t.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=s,l.prototype.set=c,n.exports=l},function(n,t){n.exports=function(n,t){return n===t||n!=n&&t!=t}},function(n,t,e){var r=e(45),i=e(107);n.exports=function(n){if(!i(n))return!1;var t=r(n);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(n,t){var e=Function.prototype.toString;n.exports=function(n){if(null!=n){try{return e.call(n)}catch(n){}try{return n+""}catch(n){}}return""}},function(n,t,e){var r=e(283),i=e(38);n.exports=function n(t,e,o,a,s){return t===e||(null==t||null==e||!i(t)&&!i(e)?t!=t&&e!=e:r(t,e,o,a,n,s))}},function(n,t,e){var r=e(171),i=e(286),o=e(172);n.exports=function(n,t,e,a,s,c){var l=1&e,u=n.length,p=t.length;if(u!=p&&!(l&&p>u))return!1;var f=c.get(n),d=c.get(t);if(f&&d)return f==t&&d==n;var h=-1,m=!0,g=2&e?new r:void 0;for(c.set(n,t),c.set(t,n);++h<u;){var v=n[h],_=t[h];if(a)var x=l?a(_,v,h,t,n,c):a(v,_,h,n,t,c);if(void 0!==x){if(x)continue;m=!1;break}if(g){if(!i(t,(function(n,t){if(!o(g,t)&&(v===n||s(v,n,e,a,c)))return g.push(t)}))){m=!1;break}}else if(v!==_&&!s(v,_,e,a,c)){m=!1;break}}return c.delete(n),c.delete(t),m}},function(n,t,e){var r=e(108),i=e(284),o=e(285);function a(n){var t=-1,e=null==n?0:n.length;for(this.__data__=new r;++t<e;)this.add(n[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,n.exports=a},function(n,t){n.exports=function(n,t){return n.has(t)}},function(n,t,e){var r=e(296),i=e(302),o=e(177);n.exports=function(n){return o(n)?r(n):i(n)}},function(n,t,e){(function(n){var r=e(22),i=e(298),o=t&&!t.nodeType&&t,a=o&&"object"==typeof n&&n&&!n.nodeType&&n,s=a&&a.exports===o?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;n.exports=c}).call(this,e(130)(n))},function(n,t){var e=/^(?:0|[1-9]\d*)$/;n.exports=function(n,t){var r=typeof n;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&e.test(n))&&n>-1&&n%1==0&&n<t}},function(n,t,e){var r=e(299),i=e(300),o=e(301),a=o&&o.isTypedArray,s=a?i(a):r;n.exports=s},function(n,t,e){var r=e(167),i=e(110);n.exports=function(n){return null!=n&&i(n.length)&&!r(n)}},function(n,t,e){var r=e(30)(e(22),"Set");n.exports=r},function(n,t,e){var r=e(107);n.exports=function(n){return n==n&&!r(n)}},function(n,t){n.exports=function(n,t){return function(e){return null!=e&&(e[n]===t&&(void 0!==t||n in Object(e)))}}},function(n,t,e){var r=e(182),i=e(82);n.exports=function(n,t){for(var e=0,o=(t=r(t,n)).length;null!=n&&e<o;)n=n[i(t[e++])];return e&&e==o?n:void 0}},function(n,t,e){var r=e(21),i=e(111),o=e(313),a=e(316);n.exports=function(n,t){return r(n)?n:i(n,t)?[n]:o(a(n))}},function(n,t,e){e(1)({target:"Object",stat:!0},{setPrototypeOf:e(51)})},function(n,t,e){var r=e(1),i=e(13),o=e(35),a=e(345),s=e(144),c=e(8),l=e(6),u=e(26),p=e(3),f=i("Reflect","construct"),d=Object.prototype,h=[].push,m=p((function(){function n(){}return!(f((function(){}),[],n)instanceof n)})),g=!p((function(){f((function(){}))})),v=m||g;r({target:"Reflect",stat:!0,forced:v,sham:v},{construct:function(n,t){s(n),c(t);var e=arguments.length<3?n:s(arguments[2]);if(g&&!m)return f(n,t,e);if(n==e){switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3])}var r=[null];return o(h,r,t),new(o(a,n,r))}var i=e.prototype,p=u(l(i)?i:d),v=o(n,p,t);return l(v)?v:p}})},function(n,t,e){var r=e(1),i=e(0),o=e(43);r({global:!0},{Reflect:{}}),o(i.Reflect,"Reflect",!0)},function(n,t,e){},function(n,t,e){},function(n,t,e){var r=e(249),i=e(254),o=e(325),a=e(333),s=e(342),c=e(212),l=o((function(n){var t=c(n);return s(t)&&(t=void 0),a(r(n,1,s,!0),i(t,2))}));n.exports=l},function(n,t,e){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var r=/["'&<>]/;n.exports=function(n){var t,e=""+n,i=r.exec(e);if(!i)return e;var o="",a=0,s=0;for(a=i.index;a<e.length;a++){switch(e.charCodeAt(a)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#39;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}s!==a&&(o+=e.substring(s,a)),s=a+1,o+=t}return s!==a?o+e.substring(s,a):o}},function(n,t){var e=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),u=Object.prototype.toString,p=Math.max,f=Math.min,d=function(){return l.Date.now()};function h(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function m(n){if("number"==typeof n)return n;if(function(n){return"symbol"==typeof n||function(n){return!!n&&"object"==typeof n}(n)&&"[object Symbol]"==u.call(n)}(n))return NaN;if(h(n)){var t="function"==typeof n.valueOf?n.valueOf():n;n=h(t)?t+"":t}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(e,"");var s=i.test(n);return s||o.test(n)?a(n.slice(2),s?2:8):r.test(n)?NaN:+n}n.exports=function(n,t,e){var r,i,o,a,s,c,l=0,u=!1,g=!1,v=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function _(t){var e=r,o=i;return r=i=void 0,l=t,a=n.apply(o,e)}function x(n){return l=n,s=setTimeout(w,t),u?_(n):a}function y(n){var e=n-c;return void 0===c||e>=t||e<0||g&&n-l>=o}function w(){var n=d();if(y(n))return b(n);s=setTimeout(w,function(n){var e=t-(n-c);return g?f(e,o-(n-l)):e}(n))}function b(n){return s=void 0,v&&r?_(n):(r=i=void 0,a)}function k(){var n=d(),e=y(n);if(r=arguments,i=this,c=n,e){if(void 0===s)return x(c);if(g)return s=setTimeout(w,t),_(c)}return void 0===s&&(s=setTimeout(w,t)),a}return t=m(t)||0,h(e)&&(u=!!e.leading,o=(g="maxWait"in e)?p(m(e.maxWait)||0,t):o,v="trailing"in e?!!e.trailing:v),k.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=i=s=void 0},k.flush=function(){return void 0===s?a:b(d())},k}},function(n,t,e){var r=e(3),i=e(0).RegExp,o=r((function(){var n=i("a","y");return n.lastIndex=2,null!=n.exec("abcd")})),a=o||r((function(){return!i("a","y").sticky})),s=o||r((function(){var n=i("^r","gy");return n.lastIndex=2,null!=n.exec("str")}));n.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:o}},function(n,t,e){"use strict";e(31);var r=e(2),i=e(15),o=e(90),a=e(3),s=e(4),c=e(19),l=s("species"),u=RegExp.prototype;n.exports=function(n,t,e,p){var f=s(n),d=!a((function(){var t={};return t[f]=function(){return 7},7!=""[n](t)})),h=d&&!a((function(){var t=!1,e=/a/;return"split"===n&&((e={}).constructor={},e.constructor[l]=function(){return e},e.flags="",e[f]=/./[f]),e.exec=function(){return t=!0,null},e[f](""),!t}));if(!d||!h||e){var m=r(/./[f]),g=t(f,""[n],(function(n,t,e,i,a){var s=r(n),c=t.exec;return c===o||c===u.exec?d&&!a?{done:!0,value:m(t,e,i)}:{done:!0,value:s(e,t,i)}:{done:!1}}));i(String.prototype,n,g[0]),i(u,f,g[1])}p&&c(u[f],"sham",!0)}},function(n,t,e){var r=e(0),i=e(11),o=e(8),a=e(5),s=e(24),c=e(90),l=r.TypeError;n.exports=function(n,t){var e=n.exec;if(a(e)){var r=i(e,n,t);return null!==r&&o(r),r}if("RegExp"===s(n))return i(c,n,t);throw l("RegExp#exec called on incompatible receiver")}},function(n,t,e){"use strict";var r=e(1),i=e(2),o=e(95).indexOf,a=e(42),s=i([].indexOf),c=!!s&&1/s([1],1,-0)<0,l=a("indexOf");r({target:"Array",proto:!0,forced:c||!l},{indexOf:function(n){var t=arguments.length>1?arguments[1]:void 0;return c?s(this,n,t)||0:o(this,n,t)}})},function(n,t,e){var r=e(6),i=e(24),o=e(4)("match");n.exports=function(n){var t;return r(n)&&(void 0!==(t=n[o])?!!t:"RegExp"==i(n))}},function(n,t,e){var r=e(0),i=e(96),o=e(23),a=e(52),s=r.Array,c=Math.max;n.exports=function(n,t,e){for(var r=o(n),l=i(t,r),u=i(void 0===e?r:e,r),p=s(c(u-l,0)),f=0;l<u;l++,f++)a(p,f,n[l]);return p.length=f,p}},function(n,t,e){"use strict";var r=e(8);n.exports=function(){var n=r(this),t="";return n.global&&(t+="g"),n.ignoreCase&&(t+="i"),n.multiline&&(t+="m"),n.dotAll&&(t+="s"),n.unicode&&(t+="u"),n.sticky&&(t+="y"),t}},function(n,t,e){var r=e(3),i=e(0).RegExp;n.exports=r((function(){var n=i(".","s");return!(n.dotAll&&n.exec("\n")&&"s"===n.flags)}))},function(n,t,e){"use strict";var r=e(149).charAt;n.exports=function(n,t,e){return t+(e?r(n,t).length:1)}},function(n,t,e){"use strict";var r=e(1),i=e(2),o=e(46),a=e(16),s=e(42),c=i([].join),l=o!=Object,u=s("join",",");r({target:"Array",proto:!0,forced:l||!u},{join:function(n){return c(a(this),void 0===n?",":n)}})},function(n,t,e){"use strict";var r=e(1),i=e(0),o=e(3),a=e(44),s=e(6),c=e(14),l=e(23),u=e(52),p=e(129),f=e(76),d=e(4),h=e(48),m=d("isConcatSpreadable"),g=i.TypeError,v=h>=51||!o((function(){var n=[];return n[m]=!1,n.concat()[0]!==n})),_=f("concat"),x=function(n){if(!s(n))return!1;var t=n[m];return void 0!==t?!!t:a(n)};r({target:"Array",proto:!0,forced:!v||!_},{concat:function(n){var t,e,r,i,o,a=c(this),s=p(a,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(x(o=-1===t?a:arguments[t])){if(f+(i=l(o))>9007199254740991)throw g("Maximum allowed index exceeded");for(e=0;e<i;e++,f++)e in o&&u(s,f,o[e])}else{if(f>=9007199254740991)throw g("Maximum allowed index exceeded");u(s,f++,o)}return s.length=f,s}})},function(n,t,e){"use strict";var r=e(138).IteratorPrototype,i=e(26),o=e(36),a=e(43),s=e(50),c=function(){return this};n.exports=function(n,t,e,l){var u=t+" Iterator";return n.prototype=i(r,{next:o(+!l,e)}),a(n,u,!1,!0),s[u]=c,n}},function(n,t,e){var r=e(15);n.exports=function(n,t,e){for(var i in t)r(n,i,t[i],e);return n}},function(n,t,e){"use strict";var r=e(13),i=e(12),o=e(4),a=e(9),s=o("species");n.exports=function(n){var t=r(n),e=i.f;a&&t&&!t[s]&&e(t,s,{configurable:!0,get:function(){return this}})}},function(n,t,e){var r=e(0),i=e(34),o=r.TypeError;n.exports=function(n,t){if(i(t,n))return n;throw o("Incorrect invocation")}},function(n,t,e){var r=e(0).TypeError;n.exports=function(n,t){if(n<t)throw r("Not enough arguments");return n}},function(n,t,e){var r=e(1),i=e(9),o=e(137),a=e(16),s=e(37),c=e(52);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(n){for(var t,e,r=a(n),i=s.f,l=o(r),u={},p=0;l.length>p;)void 0!==(e=i(r,t=l[p++]))&&c(u,t,e);return u}})},function(n,t,e){var r=e(3),i=e(0).RegExp;n.exports=r((function(){var n=i("(?<a>b)","g");return"b"!==n.exec("b").groups.a||"bc"!=="b".replace(n,"$<a>c")}))},function(n,t,e){var r=e(5),i=e(6),o=e(51);n.exports=function(n,t,e){var a,s;return o&&r(a=t.constructor)&&a!==e&&i(s=a.prototype)&&s!==e.prototype&&o(n,s),n}},function(n,t,e){"use strict";var r=e(1),i=e(95).includes,o=e(120);r({target:"Array",proto:!0},{includes:function(n){return i(this,n,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(n,t,e){"use strict";var r=e(1),i=e(2),o=e(153),a=e(32),s=e(17),c=e(154),l=i("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(n){return!!~l(s(a(this)),s(o(n)),arguments.length>1?arguments[1]:void 0)}})},function(n,t){n.exports=function(n){var t=null==n?0:n.length;return t?n[t-1]:void 0}},function(n,t,e){n.exports=e(348)},function(n,t,e){var r=e(0),i=e(11),o=e(6),a=e(94),s=e(57),c=e(215),l=e(4),u=r.TypeError,p=l("toPrimitive");n.exports=function(n,t){if(!o(n)||a(n))return n;var e,r=s(n,p);if(r){if(void 0===t&&(t="default"),e=i(r,n,t),!o(e)||a(e))return e;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),c(n,t)}},function(n,t,e){var r=e(0),i=e(11),o=e(5),a=e(6),s=r.TypeError;n.exports=function(n,t){var e,r;if("string"===t&&o(e=n.toString)&&!a(r=i(e,n)))return r;if(o(e=n.valueOf)&&!a(r=i(e,n)))return r;if("string"!==t&&o(e=n.toString)&&!a(r=i(e,n)))return r;throw s("Can't convert object to primitive value")}},function(n,t,e){var r=e(0),i=e(5),o=e(71),a=r.WeakMap;n.exports=i(a)&&/native code/.test(o(a))},function(n,t,e){var r=e(0),i=e(5),o=r.String,a=r.TypeError;n.exports=function(n){if("object"==typeof n||i(n))return n;throw a("Can't set "+o(n)+" as a prototype")}},function(n,t,e){"use strict";var r,i,o,a,s=e(1),c=e(18),l=e(0),u=e(13),p=e(11),f=e(140),d=e(15),h=e(203),m=e(51),g=e(43),v=e(204),_=e(28),x=e(5),y=e(6),w=e(205),b=e(71),k=e(219),$=e(143),S=e(128),z=e(145).set,j=e(220),T=e(147),C=e(223),E=e(148),P=e(224),A=e(225),I=e(33),O=e(126),N=e(4),q=e(226),L=e(74),R=e(48),D=N("species"),M="Promise",U=I.getterFor(M),F=I.set,B=I.getterFor(M),H=f&&f.prototype,G=f,W=H,V=l.TypeError,K=l.document,Q=l.process,Y=E.f,J=Y,X=!!(K&&K.createEvent&&l.dispatchEvent),Z=x(l.PromiseRejectionEvent),nn=!1,tn=O(M,(function(){var n=b(G),t=n!==String(G);if(!t&&66===R)return!0;if(c&&!W.finally)return!0;if(R>=51&&/native code/.test(n))return!1;var e=new G((function(n){n(1)})),r=function(n){n((function(){}),(function(){}))};return(e.constructor={})[D]=r,!(nn=e.then((function(){}))instanceof r)||!t&&q&&!Z})),en=tn||!$((function(n){G.all(n).catch((function(){}))})),rn=function(n){var t;return!(!y(n)||!x(t=n.then))&&t},on=function(n,t){var e,r,i,o=t.value,a=1==t.state,s=a?n.ok:n.fail,c=n.resolve,l=n.reject,u=n.domain;try{s?(a||(2===t.rejection&&un(t),t.rejection=1),!0===s?e=o:(u&&u.enter(),e=s(o),u&&(u.exit(),i=!0)),e===n.promise?l(V("Promise-chain cycle")):(r=rn(e))?p(r,e,c,l):c(e)):l(o)}catch(n){u&&!i&&u.exit(),l(n)}},an=function(n,t){n.notified||(n.notified=!0,j((function(){for(var e,r=n.reactions;e=r.get();)on(e,n);n.notified=!1,t&&!n.rejection&&cn(n)})))},sn=function(n,t,e){var r,i;X?((r=K.createEvent("Event")).promise=t,r.reason=e,r.initEvent(n,!1,!0),l.dispatchEvent(r)):r={promise:t,reason:e},!Z&&(i=l["on"+n])?i(r):"unhandledrejection"===n&&C("Unhandled promise rejection",e)},cn=function(n){p(z,l,(function(){var t,e=n.facade,r=n.value;if(ln(n)&&(t=P((function(){L?Q.emit("unhandledRejection",r,e):sn("unhandledrejection",e,r)})),n.rejection=L||ln(n)?2:1,t.error))throw t.value}))},ln=function(n){return 1!==n.rejection&&!n.parent},un=function(n){p(z,l,(function(){var t=n.facade;L?Q.emit("rejectionHandled",t):sn("rejectionhandled",t,n.value)}))},pn=function(n,t,e){return function(r){n(t,r,e)}},fn=function(n,t,e){n.done||(n.done=!0,e&&(n=e),n.value=t,n.state=2,an(n,!0))},dn=function(n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(n.facade===t)throw V("Promise can't be resolved itself");var r=rn(t);r?j((function(){var e={done:!1};try{p(r,t,pn(dn,e,n),pn(fn,e,n))}catch(t){fn(e,t,n)}})):(n.value=t,n.state=1,an(n,!1))}catch(t){fn({done:!1},t,n)}}};if(tn&&(W=(G=function(n){w(this,W),_(n),p(r,this);var t=U(this);try{n(pn(dn,t),pn(fn,t))}catch(n){fn(t,n)}}).prototype,(r=function(n){F(this,{type:M,done:!1,notified:!1,parent:!1,reactions:new A,rejection:!1,state:0,value:void 0})}).prototype=h(W,{then:function(n,t){var e=B(this),r=Y(S(this,G));return e.parent=!0,r.ok=!x(n)||n,r.fail=x(t)&&t,r.domain=L?Q.domain:void 0,0==e.state?e.reactions.add(r):j((function(){on(r,e)})),r.promise},catch:function(n){return this.then(void 0,n)}}),i=function(){var n=new r,t=U(n);this.promise=n,this.resolve=pn(dn,t),this.reject=pn(fn,t)},E.f=Y=function(n){return n===G||n===o?new i(n):J(n)},!c&&x(f)&&H!==Object.prototype)){a=H.then,nn||(d(H,"then",(function(n,t){var e=this;return new G((function(n,t){p(a,e,n,t)})).then(n,t)}),{unsafe:!0}),d(H,"catch",W.catch,{unsafe:!0}));try{delete H.constructor}catch(n){}m&&m(H,W)}s({global:!0,wrap:!0,forced:tn},{Promise:G}),g(G,M,!1,!0),v(M),o=u(M),s({target:M,stat:!0,forced:tn},{reject:function(n){var t=Y(this);return p(t.reject,void 0,n),t.promise}}),s({target:M,stat:!0,forced:c||tn},{resolve:function(n){return T(c&&this===o?G:this,n)}}),s({target:M,stat:!0,forced:en},{all:function(n){var t=this,e=Y(t),r=e.resolve,i=e.reject,o=P((function(){var e=_(t.resolve),o=[],a=0,s=1;k(n,(function(n){var c=a++,l=!1;s++,p(e,t,n).then((function(n){l||(l=!0,o[c]=n,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),e.promise},race:function(n){var t=this,e=Y(t),r=e.reject,i=P((function(){var i=_(t.resolve);k(n,(function(n){p(i,t,n).then(e.resolve,r)}))}));return i.error&&r(i.value),e.promise}})},function(n,t,e){var r=e(0),i=e(40),o=e(11),a=e(8),s=e(68),c=e(141),l=e(23),u=e(34),p=e(127),f=e(89),d=e(142),h=r.TypeError,m=function(n,t){this.stopped=n,this.result=t},g=m.prototype;n.exports=function(n,t,e){var r,v,_,x,y,w,b,k=e&&e.that,$=!(!e||!e.AS_ENTRIES),S=!(!e||!e.IS_ITERATOR),z=!(!e||!e.INTERRUPTED),j=i(t,k),T=function(n){return r&&d(r,"normal",n),new m(!0,n)},C=function(n){return $?(a(n),z?j(n[0],n[1],T):j(n[0],n[1])):z?j(n,T):j(n)};if(S)r=n;else{if(!(v=f(n)))throw h(s(n)+" is not iterable");if(c(v)){for(_=0,x=l(n);x>_;_++)if((y=C(n[_]))&&u(g,y))return y;return new m(!1)}r=p(n,v)}for(w=r.next;!(b=o(w,r)).done;){try{y=C(b.value)}catch(n){d(r,"throw",n)}if("object"==typeof y&&y&&u(g,y))return y}return new m(!1)}},function(n,t,e){var r,i,o,a,s,c,l,u,p=e(0),f=e(40),d=e(37).f,h=e(145).set,m=e(146),g=e(221),v=e(222),_=e(74),x=p.MutationObserver||p.WebKitMutationObserver,y=p.document,w=p.process,b=p.Promise,k=d(p,"queueMicrotask"),$=k&&k.value;$||(r=function(){var n,t;for(_&&(n=w.domain)&&n.exit();i;){t=i.fn,i=i.next;try{t()}catch(n){throw i?a():o=void 0,n}}o=void 0,n&&n.enter()},m||_||v||!x||!y?!g&&b&&b.resolve?((l=b.resolve(void 0)).constructor=b,u=f(l.then,l),a=function(){u(r)}):_?a=function(){w.nextTick(r)}:(h=f(h,p),a=function(){h(r)}):(s=!0,c=y.createTextNode(""),new x(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),n.exports=$||function(n){var t={fn:n,next:void 0};o&&(o.next=t),i||(i=t,a()),o=t}},function(n,t,e){var r=e(65),i=e(0);n.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==i.Pebble},function(n,t,e){var r=e(65);n.exports=/web0s(?!.*chrome)/i.test(r)},function(n,t,e){var r=e(0);n.exports=function(n,t){var e=r.console;e&&e.error&&(1==arguments.length?e.error(n):e.error(n,t))}},function(n,t){n.exports=function(n){try{return{error:!1,value:n()}}catch(n){return{error:!0,value:n}}}},function(n,t){var e=function(){this.head=null,this.tail=null};e.prototype={add:function(n){var t={item:n,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}},n.exports=e},function(n,t){n.exports="object"==typeof window},function(n,t,e){var r=e(1),i=e(228);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(n,t,e){"use strict";var r=e(9),i=e(2),o=e(11),a=e(3),s=e(69),c=e(100),l=e(98),u=e(14),p=e(46),f=Object.assign,d=Object.defineProperty,h=i([].concat);n.exports=!f||a((function(){if(r&&1!==f({b:1},f(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var n={},t={},e=Symbol();return n[e]=7,"abcdefghijklmnopqrst".split("").forEach((function(n){t[n]=n})),7!=f({},n)[e]||"abcdefghijklmnopqrst"!=s(f({},t)).join("")}))?function(n,t){for(var e=u(n),i=arguments.length,a=1,f=c.f,d=l.f;i>a;)for(var m,g=p(arguments[a++]),v=f?h(s(g),f(g)):s(g),_=v.length,x=0;_>x;)m=v[x++],r&&!o(d,g,m)||(e[m]=g[m]);return e}:f},function(n,t,e){"use strict";var r=e(1),i=e(18),o=e(140),a=e(3),s=e(13),c=e(5),l=e(128),u=e(147),p=e(15);if(r({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(n){var t=l(this,s("Promise")),e=c(n);return this.then(e?function(e){return u(t,n()).then((function(){return e}))}:n,e?function(e){return u(t,n()).then((function(){throw e}))}:n)}}),!i&&c(o)){var f=s("Promise").prototype.finally;o.prototype.finally!==f&&p(o.prototype,"finally",f,{unsafe:!0})}},function(n,t,e){"use strict";var r=e(102),i=e(61);n.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(n,t,e){var r=e(0),i=e(44),o=e(72),a=e(6),s=e(4)("species"),c=r.Array;n.exports=function(n){var t;return i(n)&&(t=n.constructor,(o(t)&&(t===c||i(t.prototype))||a(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?c:t}},function(n,t,e){"use strict";var r=e(1),i=e(233).left,o=e(42),a=e(48),s=e(74);r({target:"Array",proto:!0,forced:!o("reduce")||!s&&a>79&&a<83},{reduce:function(n){var t=arguments.length;return i(this,n,t,t>1?arguments[1]:void 0)}})},function(n,t,e){var r=e(0),i=e(28),o=e(14),a=e(46),s=e(23),c=r.TypeError,l=function(n){return function(t,e,r,l){i(e);var u=o(t),p=a(u),f=s(u),d=n?f-1:0,h=n?-1:1;if(r<2)for(;;){if(d in p){l=p[d],d+=h;break}if(d+=h,n?d<0:f<=d)throw c("Reduce of empty array with no initial value")}for(;n?d>=0:f>d;d+=h)d in p&&(l=e(l,p[d],d,u));return l}};n.exports={left:l(!1),right:l(!0)}},function(n,t,e){"use strict";var r,i=e(1),o=e(2),a=e(37).f,s=e(87),c=e(17),l=e(153),u=e(32),p=e(154),f=e(18),d=o("".startsWith),h=o("".slice),m=Math.min,g=p("startsWith");i({target:"String",proto:!0,forced:!!(f||g||(r=a(String.prototype,"startsWith"),!r||r.writable))&&!g},{startsWith:function(n){var t=c(u(this));l(n);var e=s(m(arguments.length>1?arguments[1]:void 0,t.length)),r=c(n);return d?d(t,r,e):h(t,e,e+r.length)===r}})},function(n,t,e){var r=e(1),i=e(156),o=e(3),a=e(6),s=e(236).onFreeze,c=Object.freeze;r({target:"Object",stat:!0,forced:o((function(){c(1)})),sham:!i},{freeze:function(n){return c&&a(n)?c(s(n)):n}})},function(n,t,e){var r=e(1),i=e(2),o=e(49),a=e(6),s=e(10),c=e(12).f,l=e(60),u=e(157),p=e(237),f=e(64),d=e(156),h=!1,m=f("meta"),g=0,v=function(n){c(n,m,{value:{objectID:"O"+g++,weakData:{}}})},_=n.exports={enable:function(){_.enable=function(){},h=!0;var n=l.f,t=i([].splice),e={};e[m]=1,n(e).length&&(l.f=function(e){for(var r=n(e),i=0,o=r.length;i<o;i++)if(r[i]===m){t(r,i,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},fastKey:function(n,t){if(!a(n))return"symbol"==typeof n?n:("string"==typeof n?"S":"P")+n;if(!s(n,m)){if(!p(n))return"F";if(!t)return"E";v(n)}return n[m].objectID},getWeakData:function(n,t){if(!s(n,m)){if(!p(n))return!0;if(!t)return!1;v(n)}return n[m].weakData},onFreeze:function(n){return d&&h&&p(n)&&!s(n,m)&&v(n),n}};o[m]=!0},function(n,t,e){var r=e(3),i=e(6),o=e(24),a=e(238),s=Object.isExtensible,c=r((function(){s(1)}));n.exports=c||a?function(n){return!!i(n)&&((!a||"ArrayBuffer"!=o(n))&&(!s||s(n)))}:s},function(n,t,e){var r=e(3);n.exports=r((function(){if("function"==typeof ArrayBuffer){var n=new ArrayBuffer(8);Object.isExtensible(n)&&Object.defineProperty(n,"a",{value:8})}}))},function(n,t,e){var r=e(0);n.exports=r},function(n,t,e){"use strict";var r=e(0),i=e(40),o=e(11),a=e(14),s=e(241),c=e(141),l=e(72),u=e(23),p=e(52),f=e(127),d=e(89),h=r.Array;n.exports=function(n){var t=a(n),e=l(this),r=arguments.length,m=r>1?arguments[1]:void 0,g=void 0!==m;g&&(m=i(m,r>2?arguments[2]:void 0));var v,_,x,y,w,b,k=d(t),$=0;if(!k||this==h&&c(k))for(v=u(t),_=e?new this(v):h(v);v>$;$++)b=g?m(t[$],$):t[$],p(_,$,b);else for(w=(y=f(t,k)).next,_=e?new this:[];!(x=o(w,y)).done;$++)b=g?s(y,m,[x.value,$],!0):x.value,p(_,$,b);return _.length=$,_}},function(n,t,e){var r=e(8),i=e(142);n.exports=function(n,t,e,o){try{return o?t(r(e)[0],e[1]):t(e)}catch(t){i(n,"throw",t)}}},function(n,t,e){"use strict";var r=e(13),i=e(10),o=e(19),a=e(34),s=e(51),c=e(99),l=e(209),u=e(161),p=e(243),f=e(244),d=e(245),h=e(18);n.exports=function(n,t,e,m){var g=m?2:1,v=n.split("."),_=v[v.length-1],x=r.apply(null,v);if(x){var y=x.prototype;if(!h&&i(y,"cause")&&delete y.cause,!e)return x;var w=r("Error"),b=t((function(n,t){var e=u(m?t:n,void 0),r=m?new x(n):new x;return void 0!==e&&o(r,"message",e),d&&o(r,"stack",f(r.stack,2)),this&&a(y,this)&&l(r,this,b),arguments.length>g&&p(r,arguments[g]),r}));if(b.prototype=y,"Error"!==_&&(s?s(b,w):c(b,w,{name:!0})),c(b,x),!h)try{y.name!==_&&o(y,"name",_),y.constructor=b}catch(n){}return b}}},function(n,t,e){var r=e(6),i=e(19);n.exports=function(n,t){r(t)&&"cause"in t&&i(n,"cause",t.cause)}},function(n,t,e){var r=e(2)("".replace),i=String(Error("zxcasd").stack),o=/\n\s*at [^:]*:[^\n]*/,a=o.test(i);n.exports=function(n,t){if(a&&"string"==typeof n)for(;t--;)n=r(n,o,"");return n}},function(n,t,e){var r=e(3),i=e(36);n.exports=!r((function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",i(1,7)),7!==n.stack)}))},function(n,t,e){"use strict";var r=e(9),i=e(3),o=e(8),a=e(26),s=e(161),c=Error.prototype.toString,l=i((function(){if(r){var n=a(Object.defineProperty({},"name",{get:function(){return this===n}}));if("true"!==c.call(n))return!0}return"2: 1"!==c.call({message:1,name:2})||"Error"!==c.call({})}));n.exports=l?function(){var n=o(this),t=s(n.name,"Error"),e=s(n.message);return t?e?t+": "+e:t:e}:c},function(n,t,e){var r=e(2),i=e(14),o=Math.floor,a=r("".charAt),s=r("".replace),c=r("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;n.exports=function(n,t,e,r,p,f){var d=e+n.length,h=r.length,m=u;return void 0!==p&&(p=i(p),m=l),s(f,m,(function(i,s){var l;switch(a(s,0)){case"$":return"$";case"&":return n;case"`":return c(t,0,e);case"'":return c(t,d);case"<":l=p[c(s,1,-1)];break;default:var u=+s;if(0===u)return i;if(u>h){var f=o(u/10);return 0===f?i:f<=h?void 0===r[f-1]?a(s,1):r[f-1]+a(s,1):i}l=r[u-1]}return void 0===l?"":l}))}},function(n,t,e){var r=e(1),i=e(0),o=e(13),a=e(35),s=e(2),c=e(3),l=i.Array,u=o("JSON","stringify"),p=s(/./.exec),f=s("".charAt),d=s("".charCodeAt),h=s("".replace),m=s(1..toString),g=/[\uD800-\uDFFF]/g,v=/^[\uD800-\uDBFF]$/,_=/^[\uDC00-\uDFFF]$/,x=function(n,t,e){var r=f(e,t-1),i=f(e,t+1);return p(v,n)&&!p(_,i)||p(_,n)&&!p(v,r)?"\\u"+m(d(n,0),16):n},y=c((function(){return'"\\udf06\\ud834"'!==u("\udf06\ud834")||'"\\udead"'!==u("\udead")}));u&&r({target:"JSON",stat:!0,forced:y},{stringify:function(n,t,e){for(var r=0,i=arguments.length,o=l(i);r<i;r++)o[r]=arguments[r];var s=a(u,null,o);return"string"==typeof s?h(s,g,x):s}})},function(n,t,e){var r=e(163),i=e(250);n.exports=function n(t,e,o,a,s){var c=-1,l=t.length;for(o||(o=i),s||(s=[]);++c<l;){var u=t[c];e>0&&o(u)?e>1?n(u,e-1,o,a,s):r(s,u):a||(s[s.length]=u)}return s}},function(n,t,e){var r=e(53),i=e(105),o=e(21),a=r?r.isConcatSpreadable:void 0;n.exports=function(n){return o(n)||i(n)||!!(a&&n&&n[a])}},function(n,t,e){var r=e(45),i=e(38);n.exports=function(n){return i(n)&&"[object Arguments]"==r(n)}},function(n,t,e){var r=e(53),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;n.exports=function(n){var t=o.call(n,s),e=n[s];try{n[s]=void 0;var r=!0}catch(n){}var i=a.call(n);return r&&(t?n[s]=e:delete n[s]),i}},function(n,t){var e=Object.prototype.toString;n.exports=function(n){return e.call(n)}},function(n,t,e){var r=e(255),i=e(311),o=e(113),a=e(21),s=e(322);n.exports=function(n){return"function"==typeof n?n:null==n?o:"object"==typeof n?a(n)?i(n[0],n[1]):r(n):s(n)}},function(n,t,e){var r=e(256),i=e(310),o=e(180);n.exports=function(n){var t=i(n);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(e){return e===n||r(e,n,t)}}},function(n,t,e){var r=e(165),i=e(169);n.exports=function(n,t,e,o){var a=e.length,s=a,c=!o;if(null==n)return!s;for(n=Object(n);a--;){var l=e[a];if(c&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++a<s;){var u=(l=e[a])[0],p=n[u],f=l[1];if(c&&l[2]){if(void 0===p&&!(u in n))return!1}else{var d=new r;if(o)var h=o(p,f,u,n,t,d);if(!(void 0===h?i(f,p,3,o,d):h))return!1}}return!0}},function(n,t){n.exports=function(){this.__data__=[],this.size=0}},function(n,t,e){var r=e(79),i=Array.prototype.splice;n.exports=function(n){var t=this.__data__,e=r(t,n);return!(e<0)&&(e==t.length-1?t.pop():i.call(t,e,1),--this.size,!0)}},function(n,t,e){var r=e(79);n.exports=function(n){var t=this.__data__,e=r(t,n);return e<0?void 0:t[e][1]}},function(n,t,e){var r=e(79);n.exports=function(n){return r(this.__data__,n)>-1}},function(n,t,e){var r=e(79);n.exports=function(n,t){var e=this.__data__,i=r(e,n);return i<0?(++this.size,e.push([n,t])):e[i][1]=t,this}},function(n,t,e){var r=e(78);n.exports=function(){this.__data__=new r,this.size=0}},function(n,t){n.exports=function(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}},function(n,t){n.exports=function(n){return this.__data__.get(n)}},function(n,t){n.exports=function(n){return this.__data__.has(n)}},function(n,t,e){var r=e(78),i=e(106),o=e(108);n.exports=function(n,t){var e=this.__data__;if(e instanceof r){var a=e.__data__;if(!i||a.length<199)return a.push([n,t]),this.size=++e.size,this;e=this.__data__=new o(a)}return e.set(n,t),this.size=e.size,this}},function(n,t,e){var r=e(167),i=e(268),o=e(107),a=e(168),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,p=l.hasOwnProperty,f=RegExp("^"+u.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=function(n){return!(!o(n)||i(n))&&(r(n)?f:s).test(a(n))}},function(n,t,e){var r,i=e(269),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";n.exports=function(n){return!!o&&o in n}},function(n,t,e){var r=e(22)["__core-js_shared__"];n.exports=r},function(n,t){n.exports=function(n,t){return null==n?void 0:n[t]}},function(n,t,e){var r=e(272),i=e(78),o=e(106);n.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(n,t,e){var r=e(273),i=e(274),o=e(275),a=e(276),s=e(277);function c(n){var t=-1,e=null==n?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,n.exports=c},function(n,t,e){var r=e(80);n.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(n,t){n.exports=function(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}},function(n,t,e){var r=e(80),i=Object.prototype.hasOwnProperty;n.exports=function(n){var t=this.__data__;if(r){var e=t[n];return"__lodash_hash_undefined__"===e?void 0:e}return i.call(t,n)?t[n]:void 0}},function(n,t,e){var r=e(80),i=Object.prototype.hasOwnProperty;n.exports=function(n){var t=this.__data__;return r?void 0!==t[n]:i.call(t,n)}},function(n,t,e){var r=e(80);n.exports=function(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(n,t,e){var r=e(81);n.exports=function(n){var t=r(this,n).delete(n);return this.size-=t?1:0,t}},function(n,t){n.exports=function(n){var t=typeof n;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==n:null===n}},function(n,t,e){var r=e(81);n.exports=function(n){return r(this,n).get(n)}},function(n,t,e){var r=e(81);n.exports=function(n){return r(this,n).has(n)}},function(n,t,e){var r=e(81);n.exports=function(n,t){var e=r(this,n),i=e.size;return e.set(n,t),this.size+=e.size==i?0:1,this}},function(n,t,e){var r=e(165),i=e(170),o=e(287),a=e(290),s=e(306),c=e(21),l=e(174),u=e(176),p="[object Object]",f=Object.prototype.hasOwnProperty;n.exports=function(n,t,e,d,h,m){var g=c(n),v=c(t),_=g?"[object Array]":s(n),x=v?"[object Array]":s(t),y=(_="[object Arguments]"==_?p:_)==p,w=(x="[object Arguments]"==x?p:x)==p,b=_==x;if(b&&l(n)){if(!l(t))return!1;g=!0,y=!1}if(b&&!y)return m||(m=new r),g||u(n)?i(n,t,e,d,h,m):o(n,t,_,e,d,h,m);if(!(1&e)){var k=y&&f.call(n,"__wrapped__"),$=w&&f.call(t,"__wrapped__");if(k||$){var S=k?n.value():n,z=$?t.value():t;return m||(m=new r),h(S,z,e,d,m)}}return!!b&&(m||(m=new r),a(n,t,e,d,h,m))}},function(n,t){n.exports=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this}},function(n,t){n.exports=function(n){return this.__data__.has(n)}},function(n,t){n.exports=function(n,t){for(var e=-1,r=null==n?0:n.length;++e<r;)if(t(n[e],e,n))return!0;return!1}},function(n,t,e){var r=e(53),i=e(288),o=e(166),a=e(170),s=e(289),c=e(109),l=r?r.prototype:void 0,u=l?l.valueOf:void 0;n.exports=function(n,t,e,r,l,p,f){switch(e){case"[object DataView]":if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=t.byteLength||!p(new i(n),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+n,+t);case"[object Error]":return n.name==t.name&&n.message==t.message;case"[object RegExp]":case"[object String]":return n==t+"";case"[object Map]":var d=s;case"[object Set]":var h=1&r;if(d||(d=c),n.size!=t.size&&!h)return!1;var m=f.get(n);if(m)return m==t;r|=2,f.set(n,t);var g=a(d(n),d(t),r,l,p,f);return f.delete(n),g;case"[object Symbol]":if(u)return u.call(n)==u.call(t)}return!1}},function(n,t,e){var r=e(22).Uint8Array;n.exports=r},function(n,t){n.exports=function(n){var t=-1,e=Array(n.size);return n.forEach((function(n,r){e[++t]=[r,n]})),e}},function(n,t,e){var r=e(291),i=Object.prototype.hasOwnProperty;n.exports=function(n,t,e,o,a,s){var c=1&e,l=r(n),u=l.length;if(u!=r(t).length&&!c)return!1;for(var p=u;p--;){var f=l[p];if(!(c?f in t:i.call(t,f)))return!1}var d=s.get(n),h=s.get(t);if(d&&h)return d==t&&h==n;var m=!0;s.set(n,t),s.set(t,n);for(var g=c;++p<u;){var v=n[f=l[p]],_=t[f];if(o)var x=c?o(_,v,f,t,n,s):o(v,_,f,n,t,s);if(!(void 0===x?v===_||a(v,_,e,o,s):x)){m=!1;break}g||(g="constructor"==f)}if(m&&!g){var y=n.constructor,w=t.constructor;y==w||!("constructor"in n)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(m=!1)}return s.delete(n),s.delete(t),m}},function(n,t,e){var r=e(292),i=e(293),o=e(173);n.exports=function(n){return r(n,o,i)}},function(n,t,e){var r=e(163),i=e(21);n.exports=function(n,t,e){var o=t(n);return i(n)?o:r(o,e(n))}},function(n,t,e){var r=e(294),i=e(295),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(n){return null==n?[]:(n=Object(n),r(a(n),(function(t){return o.call(n,t)})))}:i;n.exports=s},function(n,t){n.exports=function(n,t){for(var e=-1,r=null==n?0:n.length,i=0,o=[];++e<r;){var a=n[e];t(a,e,n)&&(o[i++]=a)}return o}},function(n,t){n.exports=function(){return[]}},function(n,t,e){var r=e(297),i=e(105),o=e(21),a=e(174),s=e(175),c=e(176),l=Object.prototype.hasOwnProperty;n.exports=function(n,t){var e=o(n),u=!e&&i(n),p=!e&&!u&&a(n),f=!e&&!u&&!p&&c(n),d=e||u||p||f,h=d?r(n.length,String):[],m=h.length;for(var g in n)!t&&!l.call(n,g)||d&&("length"==g||p&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||h.push(g);return h}},function(n,t){n.exports=function(n,t){for(var e=-1,r=Array(n);++e<n;)r[e]=t(e);return r}},function(n,t){n.exports=function(){return!1}},function(n,t,e){var r=e(45),i=e(110),o=e(38),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,n.exports=function(n){return o(n)&&i(n.length)&&!!a[r(n)]}},function(n,t){n.exports=function(n){return function(t){return n(t)}}},function(n,t,e){(function(n){var r=e(164),i=t&&!t.nodeType&&t,o=i&&"object"==typeof n&&n&&!n.nodeType&&n,a=o&&o.exports===i&&r.process,s=function(){try{var n=o&&o.require&&o.require("util").types;return n||a&&a.binding&&a.binding("util")}catch(n){}}();n.exports=s}).call(this,e(130)(n))},function(n,t,e){var r=e(303),i=e(304),o=Object.prototype.hasOwnProperty;n.exports=function(n){if(!r(n))return i(n);var t=[];for(var e in Object(n))o.call(n,e)&&"constructor"!=e&&t.push(e);return t}},function(n,t){var e=Object.prototype;n.exports=function(n){var t=n&&n.constructor;return n===("function"==typeof t&&t.prototype||e)}},function(n,t,e){var r=e(305)(Object.keys,Object);n.exports=r},function(n,t){n.exports=function(n,t){return function(e){return n(t(e))}}},function(n,t,e){var r=e(307),i=e(106),o=e(308),a=e(178),s=e(309),c=e(45),l=e(168),u=l(r),p=l(i),f=l(o),d=l(a),h=l(s),m=c;(r&&"[object DataView]"!=m(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=m(new i)||o&&"[object Promise]"!=m(o.resolve())||a&&"[object Set]"!=m(new a)||s&&"[object WeakMap]"!=m(new s))&&(m=function(n){var t=c(n),e="[object Object]"==t?n.constructor:void 0,r=e?l(e):"";if(r)switch(r){case u:return"[object DataView]";case p:return"[object Map]";case f:return"[object Promise]";case d:return"[object Set]";case h:return"[object WeakMap]"}return t}),n.exports=m},function(n,t,e){var r=e(30)(e(22),"DataView");n.exports=r},function(n,t,e){var r=e(30)(e(22),"Promise");n.exports=r},function(n,t,e){var r=e(30)(e(22),"WeakMap");n.exports=r},function(n,t,e){var r=e(179),i=e(173);n.exports=function(n){for(var t=i(n),e=t.length;e--;){var o=t[e],a=n[o];t[e]=[o,a,r(a)]}return t}},function(n,t,e){var r=e(169),i=e(312),o=e(319),a=e(111),s=e(179),c=e(180),l=e(82);n.exports=function(n,t){return a(n)&&s(t)?c(l(n),t):function(e){var a=i(e,n);return void 0===a&&a===t?o(e,n):r(t,a,3)}}},function(n,t,e){var r=e(181);n.exports=function(n,t,e){var i=null==n?void 0:r(n,t);return void 0===i?e:i}},function(n,t,e){var r=e(314),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(n){var t=[];return 46===n.charCodeAt(0)&&t.push(""),n.replace(i,(function(n,e,r,i){t.push(r?i.replace(o,"$1"):e||n)})),t}));n.exports=a},function(n,t,e){var r=e(315);n.exports=function(n){var t=r(n,(function(n){return 500===e.size&&e.clear(),n})),e=t.cache;return t}},function(n,t,e){var r=e(108);function i(n,t){if("function"!=typeof n||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var e=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=e.cache;if(o.has(i))return o.get(i);var a=n.apply(this,r);return e.cache=o.set(i,a)||o,a};return e.cache=new(i.Cache||r),e}i.Cache=r,n.exports=i},function(n,t,e){var r=e(317);n.exports=function(n){return null==n?"":r(n)}},function(n,t,e){var r=e(53),i=e(318),o=e(21),a=e(112),s=r?r.prototype:void 0,c=s?s.toString:void 0;n.exports=function n(t){if("string"==typeof t)return t;if(o(t))return i(t,n)+"";if(a(t))return c?c.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(n,t){n.exports=function(n,t){for(var e=-1,r=null==n?0:n.length,i=Array(r);++e<r;)i[e]=t(n[e],e,n);return i}},function(n,t,e){var r=e(320),i=e(321);n.exports=function(n,t){return null!=n&&i(n,t,r)}},function(n,t){n.exports=function(n,t){return null!=n&&t in Object(n)}},function(n,t,e){var r=e(182),i=e(105),o=e(21),a=e(175),s=e(110),c=e(82);n.exports=function(n,t,e){for(var l=-1,u=(t=r(t,n)).length,p=!1;++l<u;){var f=c(t[l]);if(!(p=null!=n&&e(n,f)))break;n=n[f]}return p||++l!=u?p:!!(u=null==n?0:n.length)&&s(u)&&a(f,u)&&(o(n)||i(n))}},function(n,t,e){var r=e(323),i=e(324),o=e(111),a=e(82);n.exports=function(n){return o(n)?r(a(n)):i(n)}},function(n,t){n.exports=function(n){return function(t){return null==t?void 0:t[n]}}},function(n,t,e){var r=e(181);n.exports=function(n){return function(t){return r(t,n)}}},function(n,t,e){var r=e(113),i=e(326),o=e(328);n.exports=function(n,t){return o(i(n,t,r),n+"")}},function(n,t,e){var r=e(327),i=Math.max;n.exports=function(n,t,e){return t=i(void 0===t?n.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),c=Array(s);++a<s;)c[a]=o[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=o[a];return l[t]=e(c),r(n,this,l)}}},function(n,t){n.exports=function(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}},function(n,t,e){var r=e(329),i=e(332)(r);n.exports=i},function(n,t,e){var r=e(330),i=e(331),o=e(113),a=i?function(n,t){return i(n,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;n.exports=a},function(n,t){n.exports=function(n){return function(){return n}}},function(n,t,e){var r=e(30),i=function(){try{var n=r(Object,"defineProperty");return n({},"",{}),n}catch(n){}}();n.exports=i},function(n,t){var e=Date.now;n.exports=function(n){var t=0,r=0;return function(){var i=e(),o=16-(i-r);if(r=i,o>0){if(++t>=800)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}},function(n,t,e){var r=e(171),i=e(334),o=e(339),a=e(172),s=e(340),c=e(109);n.exports=function(n,t,e){var l=-1,u=i,p=n.length,f=!0,d=[],h=d;if(e)f=!1,u=o;else if(p>=200){var m=t?null:s(n);if(m)return c(m);f=!1,u=a,h=new r}else h=t?[]:d;n:for(;++l<p;){var g=n[l],v=t?t(g):g;if(g=e||0!==g?g:0,f&&v==v){for(var _=h.length;_--;)if(h[_]===v)continue n;t&&h.push(v),d.push(g)}else u(h,v,e)||(h!==d&&h.push(v),d.push(g))}return d}},function(n,t,e){var r=e(335);n.exports=function(n,t){return!!(null==n?0:n.length)&&r(n,t,0)>-1}},function(n,t,e){var r=e(336),i=e(337),o=e(338);n.exports=function(n,t,e){return t==t?o(n,t,e):r(n,i,e)}},function(n,t){n.exports=function(n,t,e,r){for(var i=n.length,o=e+(r?1:-1);r?o--:++o<i;)if(t(n[o],o,n))return o;return-1}},function(n,t){n.exports=function(n){return n!=n}},function(n,t){n.exports=function(n,t,e){for(var r=e-1,i=n.length;++r<i;)if(n[r]===t)return r;return-1}},function(n,t){n.exports=function(n,t,e){for(var r=-1,i=null==n?0:n.length;++r<i;)if(e(t,n[r]))return!0;return!1}},function(n,t,e){var r=e(178),i=e(341),o=e(109),a=r&&1/o(new r([,-0]))[1]==1/0?function(n){return new r(n)}:i;n.exports=a},function(n,t){n.exports=function(){}},function(n,t,e){var r=e(177),i=e(38);n.exports=function(n){return i(n)&&r(n)}},function(n,t,e){},function(n,t,e){},function(n,t,e){"use strict";var r=e(0),i=e(2),o=e(28),a=e(6),s=e(10),c=e(73),l=e(47),u=r.Function,p=i([].concat),f=i([].join),d={},h=function(n,t,e){if(!s(d,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";d[t]=u("C,a","return new C("+f(r,",")+")")}return d[t](n,e)};n.exports=l?u.bind:function(n){var t=o(this),e=t.prototype,r=c(arguments,1),i=function(){var e=p(r,c(arguments));return this instanceof i?h(t,e.length,e):t.apply(n,e)};return a(e)&&(i.prototype=e),i}},function(n,t,e){"use strict";e(186)},function(n,t,e){"use strict";e(187)},function(n,t,e){"use strict";e.r(t);e(124),e(218),e(227),e(229);var r=e(75),i=(e(121),e(59),e(7),e(20),e(25),e(85),e(39),Object.freeze({}));function o(n){return null==n}function a(n){return null!=n}function s(n){return!0===n}function c(n){return"string"==typeof n||"number"==typeof n||"symbol"==typeof n||"boolean"==typeof n}function l(n){return null!==n&&"object"==typeof n}var u=Object.prototype.toString;function p(n){return"[object Object]"===u.call(n)}function f(n){return"[object RegExp]"===u.call(n)}function d(n){var t=parseFloat(String(n));return t>=0&&Math.floor(t)===t&&isFinite(n)}function h(n){return a(n)&&"function"==typeof n.then&&"function"==typeof n.catch}function m(n){return null==n?"":Array.isArray(n)||p(n)&&n.toString===u?JSON.stringify(n,null,2):String(n)}function g(n){var t=parseFloat(n);return isNaN(t)?n:t}function v(n,t){for(var e=Object.create(null),r=n.split(","),i=0;i<r.length;i++)e[r[i]]=!0;return t?function(n){return e[n.toLowerCase()]}:function(n){return e[n]}}v("slot,component",!0);var _=v("key,ref,slot,slot-scope,is");function x(n,t){if(n.length){var e=n.indexOf(t);if(e>-1)return n.splice(e,1)}}var y=Object.prototype.hasOwnProperty;function w(n,t){return y.call(n,t)}function b(n){var t=Object.create(null);return function(e){return t[e]||(t[e]=n(e))}}var k=/-(\w)/g,$=b((function(n){return n.replace(k,(function(n,t){return t?t.toUpperCase():""}))})),S=b((function(n){return n.charAt(0).toUpperCase()+n.slice(1)})),z=/\B([A-Z])/g,j=b((function(n){return n.replace(z,"-$1").toLowerCase()}));var T=Function.prototype.bind?function(n,t){return n.bind(t)}:function(n,t){function e(e){var r=arguments.length;return r?r>1?n.apply(t,arguments):n.call(t,e):n.call(t)}return e._length=n.length,e};function C(n,t){t=t||0;for(var e=n.length-t,r=new Array(e);e--;)r[e]=n[e+t];return r}function E(n,t){for(var e in t)n[e]=t[e];return n}function P(n){for(var t={},e=0;e<n.length;e++)n[e]&&E(t,n[e]);return t}function A(n,t,e){}var I=function(n,t,e){return!1},O=function(n){return n};function N(n,t){if(n===t)return!0;var e=l(n),r=l(t);if(!e||!r)return!e&&!r&&String(n)===String(t);try{var i=Array.isArray(n),o=Array.isArray(t);if(i&&o)return n.length===t.length&&n.every((function(n,e){return N(n,t[e])}));if(n instanceof Date&&t instanceof Date)return n.getTime()===t.getTime();if(i||o)return!1;var a=Object.keys(n),s=Object.keys(t);return a.length===s.length&&a.every((function(e){return N(n[e],t[e])}))}catch(n){return!1}}function q(n,t){for(var e=0;e<n.length;e++)if(N(n[e],t))return e;return-1}function L(n){var t=!1;return function(){t||(t=!0,n.apply(this,arguments))}}var R=["component","directive","filter"],D=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],M={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:I,isReservedAttr:I,isUnknownElement:I,getTagNamespace:A,parsePlatformTagName:O,mustUseProp:I,async:!0,_lifecycleHooks:D},U=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function F(n,t,e,r){Object.defineProperty(n,t,{value:e,enumerable:!!r,writable:!0,configurable:!0})}var B=new RegExp("[^"+U.source+".$_\\d]");var H,G="__proto__"in{},W="undefined"!=typeof window,V="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,K=V&&WXEnvironment.platform.toLowerCase(),Q=W&&window.navigator.userAgent.toLowerCase(),Y=Q&&/msie|trident/.test(Q),J=Q&&Q.indexOf("msie 9.0")>0,X=Q&&Q.indexOf("edge/")>0,Z=(Q&&Q.indexOf("android"),Q&&/iphone|ipad|ipod|ios/.test(Q)||"ios"===K),nn=(Q&&/chrome\/\d+/.test(Q),Q&&/phantomjs/.test(Q),Q&&Q.match(/firefox\/(\d+)/)),tn={}.watch,en=!1;if(W)try{var rn={};Object.defineProperty(rn,"passive",{get:function(){en=!0}}),window.addEventListener("test-passive",null,rn)}catch(n){}var on=function(){return void 0===H&&(H=!W&&!V&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),H},an=W&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function sn(n){return"function"==typeof n&&/native code/.test(n.toString())}var cn,ln="undefined"!=typeof Symbol&&sn(Symbol)&&"undefined"!=typeof Reflect&&sn(Reflect.ownKeys);cn="undefined"!=typeof Set&&sn(Set)?Set:function(){function n(){this.set=Object.create(null)}return n.prototype.has=function(n){return!0===this.set[n]},n.prototype.add=function(n){this.set[n]=!0},n.prototype.clear=function(){this.set=Object.create(null)},n}();var un=A,pn=0,fn=function(){this.id=pn++,this.subs=[]};fn.prototype.addSub=function(n){this.subs.push(n)},fn.prototype.removeSub=function(n){x(this.subs,n)},fn.prototype.depend=function(){fn.target&&fn.target.addDep(this)},fn.prototype.notify=function(){var n=this.subs.slice();for(var t=0,e=n.length;t<e;t++)n[t].update()},fn.target=null;var dn=[];function hn(n){dn.push(n),fn.target=n}function mn(){dn.pop(),fn.target=dn[dn.length-1]}var gn=function(n,t,e,r,i,o,a,s){this.tag=n,this.data=t,this.children=e,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},vn={child:{configurable:!0}};vn.child.get=function(){return this.componentInstance},Object.defineProperties(gn.prototype,vn);var _n=function(n){void 0===n&&(n="");var t=new gn;return t.text=n,t.isComment=!0,t};function xn(n){return new gn(void 0,void 0,void 0,String(n))}function yn(n){var t=new gn(n.tag,n.data,n.children&&n.children.slice(),n.text,n.elm,n.context,n.componentOptions,n.asyncFactory);return t.ns=n.ns,t.isStatic=n.isStatic,t.key=n.key,t.isComment=n.isComment,t.fnContext=n.fnContext,t.fnOptions=n.fnOptions,t.fnScopeId=n.fnScopeId,t.asyncMeta=n.asyncMeta,t.isCloned=!0,t}var wn=Array.prototype,bn=Object.create(wn);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(n){var t=wn[n];F(bn,n,(function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var i,o=t.apply(this,e),a=this.__ob__;switch(n){case"push":case"unshift":i=e;break;case"splice":i=e.slice(2)}return i&&a.observeArray(i),a.dep.notify(),o}))}));var kn=Object.getOwnPropertyNames(bn),$n=!0;function Sn(n){$n=n}var zn=function(n){this.value=n,this.dep=new fn,this.vmCount=0,F(n,"__ob__",this),Array.isArray(n)?(G?function(n,t){n.__proto__=t}(n,bn):function(n,t,e){for(var r=0,i=e.length;r<i;r++){var o=e[r];F(n,o,t[o])}}(n,bn,kn),this.observeArray(n)):this.walk(n)};function jn(n,t){var e;if(l(n)&&!(n instanceof gn))return w(n,"__ob__")&&n.__ob__ instanceof zn?e=n.__ob__:$n&&!on()&&(Array.isArray(n)||p(n))&&Object.isExtensible(n)&&!n._isVue&&(e=new zn(n)),t&&e&&e.vmCount++,e}function Tn(n,t,e,r,i){var o=new fn,a=Object.getOwnPropertyDescriptor(n,t);if(!a||!1!==a.configurable){var s=a&&a.get,c=a&&a.set;s&&!c||2!==arguments.length||(e=n[t]);var l=!i&&jn(e);Object.defineProperty(n,t,{enumerable:!0,configurable:!0,get:function(){var t=s?s.call(n):e;return fn.target&&(o.depend(),l&&(l.dep.depend(),Array.isArray(t)&&Pn(t))),t},set:function(t){var r=s?s.call(n):e;t===r||t!=t&&r!=r||s&&!c||(c?c.call(n,t):e=t,l=!i&&jn(t),o.notify())}})}}function Cn(n,t,e){if(Array.isArray(n)&&d(t))return n.length=Math.max(n.length,t),n.splice(t,1,e),e;if(t in n&&!(t in Object.prototype))return n[t]=e,e;var r=n.__ob__;return n._isVue||r&&r.vmCount?e:r?(Tn(r.value,t,e),r.dep.notify(),e):(n[t]=e,e)}function En(n,t){if(Array.isArray(n)&&d(t))n.splice(t,1);else{var e=n.__ob__;n._isVue||e&&e.vmCount||w(n,t)&&(delete n[t],e&&e.dep.notify())}}function Pn(n){for(var t=void 0,e=0,r=n.length;e<r;e++)(t=n[e])&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Pn(t)}zn.prototype.walk=function(n){for(var t=Object.keys(n),e=0;e<t.length;e++)Tn(n,t[e])},zn.prototype.observeArray=function(n){for(var t=0,e=n.length;t<e;t++)jn(n[t])};var An=M.optionMergeStrategies;function In(n,t){if(!t)return n;for(var e,r,i,o=ln?Reflect.ownKeys(t):Object.keys(t),a=0;a<o.length;a++)"__ob__"!==(e=o[a])&&(r=n[e],i=t[e],w(n,e)?r!==i&&p(r)&&p(i)&&In(r,i):Cn(n,e,i));return n}function On(n,t,e){return e?function(){var r="function"==typeof t?t.call(e,e):t,i="function"==typeof n?n.call(e,e):n;return r?In(r,i):i}:t?n?function(){return In("function"==typeof t?t.call(this,this):t,"function"==typeof n?n.call(this,this):n)}:t:n}function Nn(n,t){var e=t?n?n.concat(t):Array.isArray(t)?t:[t]:n;return e?function(n){for(var t=[],e=0;e<n.length;e++)-1===t.indexOf(n[e])&&t.push(n[e]);return t}(e):e}function qn(n,t,e,r){var i=Object.create(n||null);return t?E(i,t):i}An.data=function(n,t,e){return e?On(n,t,e):t&&"function"!=typeof t?n:On(n,t)},D.forEach((function(n){An[n]=Nn})),R.forEach((function(n){An[n+"s"]=qn})),An.watch=function(n,t,e,r){if(n===tn&&(n=void 0),t===tn&&(t=void 0),!t)return Object.create(n||null);if(!n)return t;var i={};for(var o in E(i,n),t){var a=i[o],s=t[o];a&&!Array.isArray(a)&&(a=[a]),i[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return i},An.props=An.methods=An.inject=An.computed=function(n,t,e,r){if(!n)return t;var i=Object.create(null);return E(i,n),t&&E(i,t),i},An.provide=On;var Ln=function(n,t){return void 0===t?n:t};function Rn(n,t,e){if("function"==typeof t&&(t=t.options),function(n,t){var e=n.props;if(e){var r,i,o={};if(Array.isArray(e))for(r=e.length;r--;)"string"==typeof(i=e[r])&&(o[$(i)]={type:null});else if(p(e))for(var a in e)i=e[a],o[$(a)]=p(i)?i:{type:i};else 0;n.props=o}}(t),function(n,t){var e=n.inject;if(e){var r=n.inject={};if(Array.isArray(e))for(var i=0;i<e.length;i++)r[e[i]]={from:e[i]};else if(p(e))for(var o in e){var a=e[o];r[o]=p(a)?E({from:o},a):{from:a}}else 0}}(t),function(n){var t=n.directives;if(t)for(var e in t){var r=t[e];"function"==typeof r&&(t[e]={bind:r,update:r})}}(t),!t._base&&(t.extends&&(n=Rn(n,t.extends,e)),t.mixins))for(var r=0,i=t.mixins.length;r<i;r++)n=Rn(n,t.mixins[r],e);var o,a={};for(o in n)s(o);for(o in t)w(n,o)||s(o);function s(r){var i=An[r]||Ln;a[r]=i(n[r],t[r],e,r)}return a}function Dn(n,t,e,r){if("string"==typeof e){var i=n[t];if(w(i,e))return i[e];var o=$(e);if(w(i,o))return i[o];var a=S(o);return w(i,a)?i[a]:i[e]||i[o]||i[a]}}function Mn(n,t,e,r){var i=t[n],o=!w(e,n),a=e[n],s=Hn(Boolean,i.type);if(s>-1)if(o&&!w(i,"default"))a=!1;else if(""===a||a===j(n)){var c=Hn(String,i.type);(c<0||s<c)&&(a=!0)}if(void 0===a){a=function(n,t,e){if(!w(t,"default"))return;var r=t.default;0;if(n&&n.$options.propsData&&void 0===n.$options.propsData[e]&&void 0!==n._props[e])return n._props[e];return"function"==typeof r&&"Function"!==Fn(t.type)?r.call(n):r}(r,i,n);var l=$n;Sn(!0),jn(a),Sn(l)}return a}var Un=/^\s*function (\w+)/;function Fn(n){var t=n&&n.toString().match(Un);return t?t[1]:""}function Bn(n,t){return Fn(n)===Fn(t)}function Hn(n,t){if(!Array.isArray(t))return Bn(t,n)?0:-1;for(var e=0,r=t.length;e<r;e++)if(Bn(t[e],n))return e;return-1}function Gn(n,t,e){hn();try{if(t)for(var r=t;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{if(!1===i[o].call(r,n,t,e))return}catch(n){Vn(n,r,"errorCaptured hook")}}Vn(n,t,e)}finally{mn()}}function Wn(n,t,e,r,i){var o;try{(o=e?n.apply(t,e):n.call(t))&&!o._isVue&&h(o)&&!o._handled&&(o.catch((function(n){return Gn(n,r,i+" (Promise/async)")})),o._handled=!0)}catch(n){Gn(n,r,i)}return o}function Vn(n,t,e){if(M.errorHandler)try{return M.errorHandler.call(null,n,t,e)}catch(t){t!==n&&Kn(t,null,"config.errorHandler")}Kn(n,t,e)}function Kn(n,t,e){if(!W&&!V||"undefined"==typeof console)throw n;console.error(n)}var Qn,Yn=!1,Jn=[],Xn=!1;function Zn(){Xn=!1;var n=Jn.slice(0);Jn.length=0;for(var t=0;t<n.length;t++)n[t]()}if("undefined"!=typeof Promise&&sn(Promise)){var nt=Promise.resolve();Qn=function(){nt.then(Zn),Z&&setTimeout(A)},Yn=!0}else if(Y||"undefined"==typeof MutationObserver||!sn(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Qn="undefined"!=typeof setImmediate&&sn(setImmediate)?function(){setImmediate(Zn)}:function(){setTimeout(Zn,0)};else{var tt=1,et=new MutationObserver(Zn),rt=document.createTextNode(String(tt));et.observe(rt,{characterData:!0}),Qn=function(){tt=(tt+1)%2,rt.data=String(tt)},Yn=!0}function it(n,t){var e;if(Jn.push((function(){if(n)try{n.call(t)}catch(n){Gn(n,t,"nextTick")}else e&&e(t)})),Xn||(Xn=!0,Qn()),!n&&"undefined"!=typeof Promise)return new Promise((function(n){e=n}))}var ot=new cn;function at(n){!function n(t,e){var r,i,o=Array.isArray(t);if(!o&&!l(t)||Object.isFrozen(t)||t instanceof gn)return;if(t.__ob__){var a=t.__ob__.dep.id;if(e.has(a))return;e.add(a)}if(o)for(r=t.length;r--;)n(t[r],e);else for(i=Object.keys(t),r=i.length;r--;)n(t[i[r]],e)}(n,ot),ot.clear()}var st=b((function(n){var t="&"===n.charAt(0),e="~"===(n=t?n.slice(1):n).charAt(0),r="!"===(n=e?n.slice(1):n).charAt(0);return{name:n=r?n.slice(1):n,once:e,capture:r,passive:t}}));function ct(n,t){function e(){var n=arguments,r=e.fns;if(!Array.isArray(r))return Wn(r,null,arguments,t,"v-on handler");for(var i=r.slice(),o=0;o<i.length;o++)Wn(i[o],null,n,t,"v-on handler")}return e.fns=n,e}function lt(n,t,e,r,i,a){var c,l,u,p;for(c in n)l=n[c],u=t[c],p=st(c),o(l)||(o(u)?(o(l.fns)&&(l=n[c]=ct(l,a)),s(p.once)&&(l=n[c]=i(p.name,l,p.capture)),e(p.name,l,p.capture,p.passive,p.params)):l!==u&&(u.fns=l,n[c]=u));for(c in t)o(n[c])&&r((p=st(c)).name,t[c],p.capture)}function ut(n,t,e){var r;n instanceof gn&&(n=n.data.hook||(n.data.hook={}));var i=n[t];function c(){e.apply(this,arguments),x(r.fns,c)}o(i)?r=ct([c]):a(i.fns)&&s(i.merged)?(r=i).fns.push(c):r=ct([i,c]),r.merged=!0,n[t]=r}function pt(n,t,e,r,i){if(a(t)){if(w(t,e))return n[e]=t[e],i||delete t[e],!0;if(w(t,r))return n[e]=t[r],i||delete t[r],!0}return!1}function ft(n){return c(n)?[xn(n)]:Array.isArray(n)?function n(t,e){var r,i,l,u,p=[];for(r=0;r<t.length;r++)o(i=t[r])||"boolean"==typeof i||(l=p.length-1,u=p[l],Array.isArray(i)?i.length>0&&(dt((i=n(i,(e||"")+"_"+r))[0])&&dt(u)&&(p[l]=xn(u.text+i[0].text),i.shift()),p.push.apply(p,i)):c(i)?dt(u)?p[l]=xn(u.text+i):""!==i&&p.push(xn(i)):dt(i)&&dt(u)?p[l]=xn(u.text+i.text):(s(t._isVList)&&a(i.tag)&&o(i.key)&&a(e)&&(i.key="__vlist"+e+"_"+r+"__"),p.push(i)));return p}(n):void 0}function dt(n){return a(n)&&a(n.text)&&!1===n.isComment}function ht(n,t){if(n){for(var e=Object.create(null),r=ln?Reflect.ownKeys(n):Object.keys(n),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){for(var a=n[o].from,s=t;s;){if(s._provided&&w(s._provided,a)){e[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in n[o]){var c=n[o].default;e[o]="function"==typeof c?c.call(t):c}else 0}}return e}}function mt(n,t){if(!n||!n.length)return{};for(var e={},r=0,i=n.length;r<i;r++){var o=n[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==t&&o.fnContext!==t||!a||null==a.slot)(e.default||(e.default=[])).push(o);else{var s=a.slot,c=e[s]||(e[s]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var l in e)e[l].every(gt)&&delete e[l];return e}function gt(n){return n.isComment&&!n.asyncFactory||" "===n.text}function vt(n){return n.isComment&&n.asyncFactory}function _t(n,t,e){var r,o=Object.keys(t).length>0,a=n?!!n.$stable:!o,s=n&&n.$key;if(n){if(n._normalized)return n._normalized;if(a&&e&&e!==i&&s===e.$key&&!o&&!e.$hasNormal)return e;for(var c in r={},n)n[c]&&"$"!==c[0]&&(r[c]=xt(t,c,n[c]))}else r={};for(var l in t)l in r||(r[l]=yt(t,l));return n&&Object.isExtensible(n)&&(n._normalized=r),F(r,"$stable",a),F(r,"$key",s),F(r,"$hasNormal",o),r}function xt(n,t,e){var r=function(){var n=arguments.length?e.apply(null,arguments):e({}),t=(n=n&&"object"==typeof n&&!Array.isArray(n)?[n]:ft(n))&&n[0];return n&&(!t||1===n.length&&t.isComment&&!vt(t))?void 0:n};return e.proxy&&Object.defineProperty(n,t,{get:r,enumerable:!0,configurable:!0}),r}function yt(n,t){return function(){return n[t]}}function wt(n,t){var e,r,i,o,s;if(Array.isArray(n)||"string"==typeof n)for(e=new Array(n.length),r=0,i=n.length;r<i;r++)e[r]=t(n[r],r);else if("number"==typeof n)for(e=new Array(n),r=0;r<n;r++)e[r]=t(r+1,r);else if(l(n))if(ln&&n[Symbol.iterator]){e=[];for(var c=n[Symbol.iterator](),u=c.next();!u.done;)e.push(t(u.value,e.length)),u=c.next()}else for(o=Object.keys(n),e=new Array(o.length),r=0,i=o.length;r<i;r++)s=o[r],e[r]=t(n[s],s,r);return a(e)||(e=[]),e._isVList=!0,e}function bt(n,t,e,r){var i,o=this.$scopedSlots[n];o?(e=e||{},r&&(e=E(E({},r),e)),i=o(e)||("function"==typeof t?t():t)):i=this.$slots[n]||("function"==typeof t?t():t);var a=e&&e.slot;return a?this.$createElement("template",{slot:a},i):i}function kt(n){return Dn(this.$options,"filters",n)||O}function $t(n,t){return Array.isArray(n)?-1===n.indexOf(t):n!==t}function St(n,t,e,r,i){var o=M.keyCodes[t]||e;return i&&r&&!M.keyCodes[t]?$t(i,r):o?$t(o,n):r?j(r)!==t:void 0===n}function zt(n,t,e,r,i){if(e)if(l(e)){var o;Array.isArray(e)&&(e=P(e));var a=function(a){if("class"===a||"style"===a||_(a))o=n;else{var s=n.attrs&&n.attrs.type;o=r||M.mustUseProp(t,s,a)?n.domProps||(n.domProps={}):n.attrs||(n.attrs={})}var c=$(a),l=j(a);c in o||l in o||(o[a]=e[a],i&&((n.on||(n.on={}))["update:"+a]=function(n){e[a]=n}))};for(var s in e)a(s)}else;return n}function jt(n,t){var e=this._staticTrees||(this._staticTrees=[]),r=e[n];return r&&!t||Ct(r=e[n]=this.$options.staticRenderFns[n].call(this._renderProxy,null,this),"__static__"+n,!1),r}function Tt(n,t,e){return Ct(n,"__once__"+t+(e?"_"+e:""),!0),n}function Ct(n,t,e){if(Array.isArray(n))for(var r=0;r<n.length;r++)n[r]&&"string"!=typeof n[r]&&Et(n[r],t+"_"+r,e);else Et(n,t,e)}function Et(n,t,e){n.isStatic=!0,n.key=t,n.isOnce=e}function Pt(n,t){if(t)if(p(t)){var e=n.on=n.on?E({},n.on):{};for(var r in t){var i=e[r],o=t[r];e[r]=i?[].concat(i,o):o}}else;return n}function At(n,t,e,r){t=t||{$stable:!e};for(var i=0;i<n.length;i++){var o=n[i];Array.isArray(o)?At(o,t,e):o&&(o.proxy&&(o.fn.proxy=!0),t[o.key]=o.fn)}return r&&(t.$key=r),t}function It(n,t){for(var e=0;e<t.length;e+=2){var r=t[e];"string"==typeof r&&r&&(n[t[e]]=t[e+1])}return n}function Ot(n,t){return"string"==typeof n?t+n:n}function Nt(n){n._o=Tt,n._n=g,n._s=m,n._l=wt,n._t=bt,n._q=N,n._i=q,n._m=jt,n._f=kt,n._k=St,n._b=zt,n._v=xn,n._e=_n,n._u=At,n._g=Pt,n._d=It,n._p=Ot}function qt(n,t,e,r,o){var a,c=this,l=o.options;w(r,"_uid")?(a=Object.create(r))._original=r:(a=r,r=r._original);var u=s(l._compiled),p=!u;this.data=n,this.props=t,this.children=e,this.parent=r,this.listeners=n.on||i,this.injections=ht(l.inject,r),this.slots=function(){return c.$slots||_t(n.scopedSlots,c.$slots=mt(e,r)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return _t(n.scopedSlots,this.slots())}}),u&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=_t(n.scopedSlots,this.$slots)),l._scopeId?this._c=function(n,t,e,i){var o=Bt(a,n,t,e,i,p);return o&&!Array.isArray(o)&&(o.fnScopeId=l._scopeId,o.fnContext=r),o}:this._c=function(n,t,e,r){return Bt(a,n,t,e,r,p)}}function Lt(n,t,e,r,i){var o=yn(n);return o.fnContext=e,o.fnOptions=r,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function Rt(n,t){for(var e in t)n[$(e)]=t[e]}Nt(qt.prototype);var Dt={init:function(n,t){if(n.componentInstance&&!n.componentInstance._isDestroyed&&n.data.keepAlive){var e=n;Dt.prepatch(e,e)}else{(n.componentInstance=function(n,t){var e={_isComponent:!0,_parentVnode:n,parent:t},r=n.data.inlineTemplate;a(r)&&(e.render=r.render,e.staticRenderFns=r.staticRenderFns);return new n.componentOptions.Ctor(e)}(n,Xt)).$mount(t?n.elm:void 0,t)}},prepatch:function(n,t){var e=t.componentOptions;!function(n,t,e,r,o){0;var a=r.data.scopedSlots,s=n.$scopedSlots,c=!!(a&&!a.$stable||s!==i&&!s.$stable||a&&n.$scopedSlots.$key!==a.$key||!a&&n.$scopedSlots.$key),l=!!(o||n.$options._renderChildren||c);n.$options._parentVnode=r,n.$vnode=r,n._vnode&&(n._vnode.parent=r);if(n.$options._renderChildren=o,n.$attrs=r.data.attrs||i,n.$listeners=e||i,t&&n.$options.props){Sn(!1);for(var u=n._props,p=n.$options._propKeys||[],f=0;f<p.length;f++){var d=p[f],h=n.$options.props;u[d]=Mn(d,h,t,n)}Sn(!0),n.$options.propsData=t}e=e||i;var m=n.$options._parentListeners;n.$options._parentListeners=e,Jt(n,e,m),l&&(n.$slots=mt(o,r.context),n.$forceUpdate());0}(t.componentInstance=n.componentInstance,e.propsData,e.listeners,t,e.children)},insert:function(n){var t,e=n.context,r=n.componentInstance;r._isMounted||(r._isMounted=!0,ee(r,"mounted")),n.data.keepAlive&&(e._isMounted?((t=r)._inactive=!1,ie.push(t)):te(r,!0))},destroy:function(n){var t=n.componentInstance;t._isDestroyed||(n.data.keepAlive?function n(t,e){if(e&&(t._directInactive=!0,ne(t)))return;if(!t._inactive){t._inactive=!0;for(var r=0;r<t.$children.length;r++)n(t.$children[r]);ee(t,"deactivated")}}(t,!0):t.$destroy())}},Mt=Object.keys(Dt);function Ut(n,t,e,r,c){if(!o(n)){var u=e.$options._base;if(l(n)&&(n=u.extend(n)),"function"==typeof n){var p;if(o(n.cid)&&void 0===(n=function(n,t){if(s(n.error)&&a(n.errorComp))return n.errorComp;if(a(n.resolved))return n.resolved;var e=Gt;e&&a(n.owners)&&-1===n.owners.indexOf(e)&&n.owners.push(e);if(s(n.loading)&&a(n.loadingComp))return n.loadingComp;if(e&&!a(n.owners)){var r=n.owners=[e],i=!0,c=null,u=null;e.$on("hook:destroyed",(function(){return x(r,e)}));var p=function(n){for(var t=0,e=r.length;t<e;t++)r[t].$forceUpdate();n&&(r.length=0,null!==c&&(clearTimeout(c),c=null),null!==u&&(clearTimeout(u),u=null))},f=L((function(e){n.resolved=Wt(e,t),i?r.length=0:p(!0)})),d=L((function(t){a(n.errorComp)&&(n.error=!0,p(!0))})),m=n(f,d);return l(m)&&(h(m)?o(n.resolved)&&m.then(f,d):h(m.component)&&(m.component.then(f,d),a(m.error)&&(n.errorComp=Wt(m.error,t)),a(m.loading)&&(n.loadingComp=Wt(m.loading,t),0===m.delay?n.loading=!0:c=setTimeout((function(){c=null,o(n.resolved)&&o(n.error)&&(n.loading=!0,p(!1))}),m.delay||200)),a(m.timeout)&&(u=setTimeout((function(){u=null,o(n.resolved)&&d(null)}),m.timeout)))),i=!1,n.loading?n.loadingComp:n.resolved}}(p=n,u)))return function(n,t,e,r,i){var o=_n();return o.asyncFactory=n,o.asyncMeta={data:t,context:e,children:r,tag:i},o}(p,t,e,r,c);t=t||{},$e(n),a(t.model)&&function(n,t){var e=n.model&&n.model.prop||"value",r=n.model&&n.model.event||"input";(t.attrs||(t.attrs={}))[e]=t.model.value;var i=t.on||(t.on={}),o=i[r],s=t.model.callback;a(o)?(Array.isArray(o)?-1===o.indexOf(s):o!==s)&&(i[r]=[s].concat(o)):i[r]=s}(n.options,t);var f=function(n,t,e){var r=t.options.props;if(!o(r)){var i={},s=n.attrs,c=n.props;if(a(s)||a(c))for(var l in r){var u=j(l);pt(i,c,l,u,!0)||pt(i,s,l,u,!1)}return i}}(t,n);if(s(n.options.functional))return function(n,t,e,r,o){var s=n.options,c={},l=s.props;if(a(l))for(var u in l)c[u]=Mn(u,l,t||i);else a(e.attrs)&&Rt(c,e.attrs),a(e.props)&&Rt(c,e.props);var p=new qt(e,c,o,r,n),f=s.render.call(null,p._c,p);if(f instanceof gn)return Lt(f,e,p.parent,s,p);if(Array.isArray(f)){for(var d=ft(f)||[],h=new Array(d.length),m=0;m<d.length;m++)h[m]=Lt(d[m],e,p.parent,s,p);return h}}(n,f,t,e,r);var d=t.on;if(t.on=t.nativeOn,s(n.options.abstract)){var m=t.slot;t={},m&&(t.slot=m)}!function(n){for(var t=n.hook||(n.hook={}),e=0;e<Mt.length;e++){var r=Mt[e],i=t[r],o=Dt[r];i===o||i&&i._merged||(t[r]=i?Ft(o,i):o)}}(t);var g=n.options.name||c;return new gn("vue-component-"+n.cid+(g?"-"+g:""),t,void 0,void 0,void 0,e,{Ctor:n,propsData:f,listeners:d,tag:c,children:r},p)}}}function Ft(n,t){var e=function(e,r){n(e,r),t(e,r)};return e._merged=!0,e}function Bt(n,t,e,r,i,u){return(Array.isArray(e)||c(e))&&(i=r,r=e,e=void 0),s(u)&&(i=2),function(n,t,e,r,i){if(a(e)&&a(e.__ob__))return _n();a(e)&&a(e.is)&&(t=e.is);if(!t)return _n();0;Array.isArray(r)&&"function"==typeof r[0]&&((e=e||{}).scopedSlots={default:r[0]},r.length=0);2===i?r=ft(r):1===i&&(r=function(n){for(var t=0;t<n.length;t++)if(Array.isArray(n[t]))return Array.prototype.concat.apply([],n);return n}(r));var c,u;if("string"==typeof t){var p;u=n.$vnode&&n.$vnode.ns||M.getTagNamespace(t),c=M.isReservedTag(t)?new gn(M.parsePlatformTagName(t),e,r,void 0,void 0,n):e&&e.pre||!a(p=Dn(n.$options,"components",t))?new gn(t,e,r,void 0,void 0,n):Ut(p,e,n,r,t)}else c=Ut(t,e,n,r);return Array.isArray(c)?c:a(c)?(a(u)&&function n(t,e,r){t.ns=e,"foreignObject"===t.tag&&(e=void 0,r=!0);if(a(t.children))for(var i=0,c=t.children.length;i<c;i++){var l=t.children[i];a(l.tag)&&(o(l.ns)||s(r)&&"svg"!==l.tag)&&n(l,e,r)}}(c,u),a(e)&&function(n){l(n.style)&&at(n.style);l(n.class)&&at(n.class)}(e),c):_n()}(n,t,e,r,i)}var Ht,Gt=null;function Wt(n,t){return(n.__esModule||ln&&"Module"===n[Symbol.toStringTag])&&(n=n.default),l(n)?t.extend(n):n}function Vt(n){if(Array.isArray(n))for(var t=0;t<n.length;t++){var e=n[t];if(a(e)&&(a(e.componentOptions)||vt(e)))return e}}function Kt(n,t){Ht.$on(n,t)}function Qt(n,t){Ht.$off(n,t)}function Yt(n,t){var e=Ht;return function r(){var i=t.apply(null,arguments);null!==i&&e.$off(n,r)}}function Jt(n,t,e){Ht=n,lt(t,e||{},Kt,Qt,Yt,n),Ht=void 0}var Xt=null;function Zt(n){var t=Xt;return Xt=n,function(){Xt=t}}function ne(n){for(;n&&(n=n.$parent);)if(n._inactive)return!0;return!1}function te(n,t){if(t){if(n._directInactive=!1,ne(n))return}else if(n._directInactive)return;if(n._inactive||null===n._inactive){n._inactive=!1;for(var e=0;e<n.$children.length;e++)te(n.$children[e]);ee(n,"activated")}}function ee(n,t){hn();var e=n.$options[t],r=t+" hook";if(e)for(var i=0,o=e.length;i<o;i++)Wn(e[i],n,null,n,r);n._hasHookEvent&&n.$emit("hook:"+t),mn()}var re=[],ie=[],oe={},ae=!1,se=!1,ce=0;var le=0,ue=Date.now;if(W&&!Y){var pe=window.performance;pe&&"function"==typeof pe.now&&ue()>document.createEvent("Event").timeStamp&&(ue=function(){return pe.now()})}function fe(){var n,t;for(le=ue(),se=!0,re.sort((function(n,t){return n.id-t.id})),ce=0;ce<re.length;ce++)(n=re[ce]).before&&n.before(),t=n.id,oe[t]=null,n.run();var e=ie.slice(),r=re.slice();ce=re.length=ie.length=0,oe={},ae=se=!1,function(n){for(var t=0;t<n.length;t++)n[t]._inactive=!0,te(n[t],!0)}(e),function(n){var t=n.length;for(;t--;){var e=n[t],r=e.vm;r._watcher===e&&r._isMounted&&!r._isDestroyed&&ee(r,"updated")}}(r),an&&M.devtools&&an.emit("flush")}var de=0,he=function(n,t,e,r,i){this.vm=n,i&&(n._watcher=this),n._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=e,this.id=++de,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new cn,this.newDepIds=new cn,this.expression="","function"==typeof t?this.getter=t:(this.getter=function(n){if(!B.test(n)){var t=n.split(".");return function(n){for(var e=0;e<t.length;e++){if(!n)return;n=n[t[e]]}return n}}}(t),this.getter||(this.getter=A)),this.value=this.lazy?void 0:this.get()};he.prototype.get=function(){var n;hn(this);var t=this.vm;try{n=this.getter.call(t,t)}catch(n){if(!this.user)throw n;Gn(n,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&at(n),mn(),this.cleanupDeps()}return n},he.prototype.addDep=function(n){var t=n.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(n),this.depIds.has(t)||n.addSub(this))},he.prototype.cleanupDeps=function(){for(var n=this.deps.length;n--;){var t=this.deps[n];this.newDepIds.has(t.id)||t.removeSub(this)}var e=this.depIds;this.depIds=this.newDepIds,this.newDepIds=e,this.newDepIds.clear(),e=this.deps,this.deps=this.newDeps,this.newDeps=e,this.newDeps.length=0},he.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(n){var t=n.id;if(null==oe[t]){if(oe[t]=!0,se){for(var e=re.length-1;e>ce&&re[e].id>n.id;)e--;re.splice(e+1,0,n)}else re.push(n);ae||(ae=!0,it(fe))}}(this)},he.prototype.run=function(){if(this.active){var n=this.get();if(n!==this.value||l(n)||this.deep){var t=this.value;if(this.value=n,this.user){var e='callback for watcher "'+this.expression+'"';Wn(this.cb,this.vm,[n,t],this.vm,e)}else this.cb.call(this.vm,n,t)}}},he.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},he.prototype.depend=function(){for(var n=this.deps.length;n--;)this.deps[n].depend()},he.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||x(this.vm._watchers,this);for(var n=this.deps.length;n--;)this.deps[n].removeSub(this);this.active=!1}};var me={enumerable:!0,configurable:!0,get:A,set:A};function ge(n,t,e){me.get=function(){return this[t][e]},me.set=function(n){this[t][e]=n},Object.defineProperty(n,e,me)}function ve(n){n._watchers=[];var t=n.$options;t.props&&function(n,t){var e=n.$options.propsData||{},r=n._props={},i=n.$options._propKeys=[];n.$parent&&Sn(!1);var o=function(o){i.push(o);var a=Mn(o,t,e,n);Tn(r,o,a),o in n||ge(n,"_props",o)};for(var a in t)o(a);Sn(!0)}(n,t.props),t.methods&&function(n,t){n.$options.props;for(var e in t)n[e]="function"!=typeof t[e]?A:T(t[e],n)}(n,t.methods),t.data?function(n){var t=n.$options.data;p(t=n._data="function"==typeof t?function(n,t){hn();try{return n.call(t,t)}catch(n){return Gn(n,t,"data()"),{}}finally{mn()}}(t,n):t||{})||(t={});var e=Object.keys(t),r=n.$options.props,i=(n.$options.methods,e.length);for(;i--;){var o=e[i];0,r&&w(r,o)||(a=void 0,36!==(a=(o+"").charCodeAt(0))&&95!==a&&ge(n,"_data",o))}var a;jn(t,!0)}(n):jn(n._data={},!0),t.computed&&function(n,t){var e=n._computedWatchers=Object.create(null),r=on();for(var i in t){var o=t[i],a="function"==typeof o?o:o.get;0,r||(e[i]=new he(n,a||A,A,_e)),i in n||xe(n,i,o)}}(n,t.computed),t.watch&&t.watch!==tn&&function(n,t){for(var e in t){var r=t[e];if(Array.isArray(r))for(var i=0;i<r.length;i++)be(n,e,r[i]);else be(n,e,r)}}(n,t.watch)}var _e={lazy:!0};function xe(n,t,e){var r=!on();"function"==typeof e?(me.get=r?ye(t):we(e),me.set=A):(me.get=e.get?r&&!1!==e.cache?ye(t):we(e.get):A,me.set=e.set||A),Object.defineProperty(n,t,me)}function ye(n){return function(){var t=this._computedWatchers&&this._computedWatchers[n];if(t)return t.dirty&&t.evaluate(),fn.target&&t.depend(),t.value}}function we(n){return function(){return n.call(this,this)}}function be(n,t,e,r){return p(e)&&(r=e,e=e.handler),"string"==typeof e&&(e=n[e]),n.$watch(t,e,r)}var ke=0;function $e(n){var t=n.options;if(n.super){var e=$e(n.super);if(e!==n.superOptions){n.superOptions=e;var r=function(n){var t,e=n.options,r=n.sealedOptions;for(var i in e)e[i]!==r[i]&&(t||(t={}),t[i]=e[i]);return t}(n);r&&E(n.extendOptions,r),(t=n.options=Rn(e,n.extendOptions)).name&&(t.components[t.name]=n)}}return t}function Se(n){this._init(n)}function ze(n){n.cid=0;var t=1;n.extend=function(n){n=n||{};var e=this,r=e.cid,i=n._Ctor||(n._Ctor={});if(i[r])return i[r];var o=n.name||e.options.name;var a=function(n){this._init(n)};return(a.prototype=Object.create(e.prototype)).constructor=a,a.cid=t++,a.options=Rn(e.options,n),a.super=e,a.options.props&&function(n){var t=n.options.props;for(var e in t)ge(n.prototype,"_props",e)}(a),a.options.computed&&function(n){var t=n.options.computed;for(var e in t)xe(n.prototype,e,t[e])}(a),a.extend=e.extend,a.mixin=e.mixin,a.use=e.use,R.forEach((function(n){a[n]=e[n]})),o&&(a.options.components[o]=a),a.superOptions=e.options,a.extendOptions=n,a.sealedOptions=E({},a.options),i[r]=a,a}}function je(n){return n&&(n.Ctor.options.name||n.tag)}function Te(n,t){return Array.isArray(n)?n.indexOf(t)>-1:"string"==typeof n?n.split(",").indexOf(t)>-1:!!f(n)&&n.test(t)}function Ce(n,t){var e=n.cache,r=n.keys,i=n._vnode;for(var o in e){var a=e[o];if(a){var s=a.name;s&&!t(s)&&Ee(e,o,r,i)}}}function Ee(n,t,e,r){var i=n[t];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),n[t]=null,x(e,t)}Se.prototype._init=function(n){var t=this;t._uid=ke++,t._isVue=!0,n&&n._isComponent?function(n,t){var e=n.$options=Object.create(n.constructor.options),r=t._parentVnode;e.parent=t.parent,e._parentVnode=r;var i=r.componentOptions;e.propsData=i.propsData,e._parentListeners=i.listeners,e._renderChildren=i.children,e._componentTag=i.tag,t.render&&(e.render=t.render,e.staticRenderFns=t.staticRenderFns)}(t,n):t.$options=Rn($e(t.constructor),n||{},t),t._renderProxy=t,t._self=t,function(n){var t=n.$options,e=t.parent;if(e&&!t.abstract){for(;e.$options.abstract&&e.$parent;)e=e.$parent;e.$children.push(n)}n.$parent=e,n.$root=e?e.$root:n,n.$children=[],n.$refs={},n._watcher=null,n._inactive=null,n._directInactive=!1,n._isMounted=!1,n._isDestroyed=!1,n._isBeingDestroyed=!1}(t),function(n){n._events=Object.create(null),n._hasHookEvent=!1;var t=n.$options._parentListeners;t&&Jt(n,t)}(t),function(n){n._vnode=null,n._staticTrees=null;var t=n.$options,e=n.$vnode=t._parentVnode,r=e&&e.context;n.$slots=mt(t._renderChildren,r),n.$scopedSlots=i,n._c=function(t,e,r,i){return Bt(n,t,e,r,i,!1)},n.$createElement=function(t,e,r,i){return Bt(n,t,e,r,i,!0)};var o=e&&e.data;Tn(n,"$attrs",o&&o.attrs||i,null,!0),Tn(n,"$listeners",t._parentListeners||i,null,!0)}(t),ee(t,"beforeCreate"),function(n){var t=ht(n.$options.inject,n);t&&(Sn(!1),Object.keys(t).forEach((function(e){Tn(n,e,t[e])})),Sn(!0))}(t),ve(t),function(n){var t=n.$options.provide;t&&(n._provided="function"==typeof t?t.call(n):t)}(t),ee(t,"created"),t.$options.el&&t.$mount(t.$options.el)},function(n){var t={get:function(){return this._data}},e={get:function(){return this._props}};Object.defineProperty(n.prototype,"$data",t),Object.defineProperty(n.prototype,"$props",e),n.prototype.$set=Cn,n.prototype.$delete=En,n.prototype.$watch=function(n,t,e){if(p(t))return be(this,n,t,e);(e=e||{}).user=!0;var r=new he(this,n,t,e);if(e.immediate){var i='callback for immediate watcher "'+r.expression+'"';hn(),Wn(t,this,[r.value],this,i),mn()}return function(){r.teardown()}}}(Se),function(n){var t=/^hook:/;n.prototype.$on=function(n,e){var r=this;if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)r.$on(n[i],e);else(r._events[n]||(r._events[n]=[])).push(e),t.test(n)&&(r._hasHookEvent=!0);return r},n.prototype.$once=function(n,t){var e=this;function r(){e.$off(n,r),t.apply(e,arguments)}return r.fn=t,e.$on(n,r),e},n.prototype.$off=function(n,t){var e=this;if(!arguments.length)return e._events=Object.create(null),e;if(Array.isArray(n)){for(var r=0,i=n.length;r<i;r++)e.$off(n[r],t);return e}var o,a=e._events[n];if(!a)return e;if(!t)return e._events[n]=null,e;for(var s=a.length;s--;)if((o=a[s])===t||o.fn===t){a.splice(s,1);break}return e},n.prototype.$emit=function(n){var t=this,e=t._events[n];if(e){e=e.length>1?C(e):e;for(var r=C(arguments,1),i='event handler for "'+n+'"',o=0,a=e.length;o<a;o++)Wn(e[o],t,r,t,i)}return t}}(Se),function(n){n.prototype._update=function(n,t){var e=this,r=e.$el,i=e._vnode,o=Zt(e);e._vnode=n,e.$el=i?e.__patch__(i,n):e.__patch__(e.$el,n,t,!1),o(),r&&(r.__vue__=null),e.$el&&(e.$el.__vue__=e),e.$vnode&&e.$parent&&e.$vnode===e.$parent._vnode&&(e.$parent.$el=e.$el)},n.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},n.prototype.$destroy=function(){var n=this;if(!n._isBeingDestroyed){ee(n,"beforeDestroy"),n._isBeingDestroyed=!0;var t=n.$parent;!t||t._isBeingDestroyed||n.$options.abstract||x(t.$children,n),n._watcher&&n._watcher.teardown();for(var e=n._watchers.length;e--;)n._watchers[e].teardown();n._data.__ob__&&n._data.__ob__.vmCount--,n._isDestroyed=!0,n.__patch__(n._vnode,null),ee(n,"destroyed"),n.$off(),n.$el&&(n.$el.__vue__=null),n.$vnode&&(n.$vnode.parent=null)}}}(Se),function(n){Nt(n.prototype),n.prototype.$nextTick=function(n){return it(n,this)},n.prototype._render=function(){var n,t=this,e=t.$options,r=e.render,i=e._parentVnode;i&&(t.$scopedSlots=_t(i.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=i;try{Gt=t,n=r.call(t._renderProxy,t.$createElement)}catch(e){Gn(e,t,"render"),n=t._vnode}finally{Gt=null}return Array.isArray(n)&&1===n.length&&(n=n[0]),n instanceof gn||(n=_n()),n.parent=i,n}}(Se);var Pe=[String,RegExp,Array],Ae={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Pe,exclude:Pe,max:[String,Number]},methods:{cacheVNode:function(){var n=this.cache,t=this.keys,e=this.vnodeToCache,r=this.keyToCache;if(e){var i=e.tag,o=e.componentInstance,a=e.componentOptions;n[r]={name:je(a),tag:i,componentInstance:o},t.push(r),this.max&&t.length>parseInt(this.max)&&Ee(n,t[0],t,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var n in this.cache)Ee(this.cache,n,this.keys)},mounted:function(){var n=this;this.cacheVNode(),this.$watch("include",(function(t){Ce(n,(function(n){return Te(t,n)}))})),this.$watch("exclude",(function(t){Ce(n,(function(n){return!Te(t,n)}))}))},updated:function(){this.cacheVNode()},render:function(){var n=this.$slots.default,t=Vt(n),e=t&&t.componentOptions;if(e){var r=je(e),i=this.include,o=this.exclude;if(i&&(!r||!Te(i,r))||o&&r&&Te(o,r))return t;var a=this.cache,s=this.keys,c=null==t.key?e.Ctor.cid+(e.tag?"::"+e.tag:""):t.key;a[c]?(t.componentInstance=a[c].componentInstance,x(s,c),s.push(c)):(this.vnodeToCache=t,this.keyToCache=c),t.data.keepAlive=!0}return t||n&&n[0]}}};!function(n){var t={get:function(){return M}};Object.defineProperty(n,"config",t),n.util={warn:un,extend:E,mergeOptions:Rn,defineReactive:Tn},n.set=Cn,n.delete=En,n.nextTick=it,n.observable=function(n){return jn(n),n},n.options=Object.create(null),R.forEach((function(t){n.options[t+"s"]=Object.create(null)})),n.options._base=n,E(n.options.components,Ae),function(n){n.use=function(n){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(n)>-1)return this;var e=C(arguments,1);return e.unshift(this),"function"==typeof n.install?n.install.apply(n,e):"function"==typeof n&&n.apply(null,e),t.push(n),this}}(n),function(n){n.mixin=function(n){return this.options=Rn(this.options,n),this}}(n),ze(n),function(n){R.forEach((function(t){n[t]=function(n,e){return e?("component"===t&&p(e)&&(e.name=e.name||n,e=this.options._base.extend(e)),"directive"===t&&"function"==typeof e&&(e={bind:e,update:e}),this.options[t+"s"][n]=e,e):this.options[t+"s"][n]}}))}(n)}(Se),Object.defineProperty(Se.prototype,"$isServer",{get:on}),Object.defineProperty(Se.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Se,"FunctionalRenderContext",{value:qt}),Se.version="2.6.14";var Ie=v("style,class"),Oe=v("input,textarea,option,select,progress"),Ne=v("contenteditable,draggable,spellcheck"),qe=v("events,caret,typing,plaintext-only"),Le=v("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),Re="http://www.w3.org/1999/xlink",De=function(n){return":"===n.charAt(5)&&"xlink"===n.slice(0,5)},Me=function(n){return De(n)?n.slice(6,n.length):""},Ue=function(n){return null==n||!1===n};function Fe(n){for(var t=n.data,e=n,r=n;a(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(t=Be(r.data,t));for(;a(e=e.parent);)e&&e.data&&(t=Be(t,e.data));return function(n,t){if(a(n)||a(t))return He(n,Ge(t));return""}(t.staticClass,t.class)}function Be(n,t){return{staticClass:He(n.staticClass,t.staticClass),class:a(n.class)?[n.class,t.class]:t.class}}function He(n,t){return n?t?n+" "+t:n:t||""}function Ge(n){return Array.isArray(n)?function(n){for(var t,e="",r=0,i=n.length;r<i;r++)a(t=Ge(n[r]))&&""!==t&&(e&&(e+=" "),e+=t);return e}(n):l(n)?function(n){var t="";for(var e in n)n[e]&&(t&&(t+=" "),t+=e);return t}(n):"string"==typeof n?n:""}var We={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Ve=v("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Ke=v("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Qe=function(n){return Ve(n)||Ke(n)};var Ye=Object.create(null);var Je=v("text,number,password,search,email,tel,url");var Xe=Object.freeze({createElement:function(n,t){var e=document.createElement(n);return"select"!==n||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&e.setAttribute("multiple","multiple"),e},createElementNS:function(n,t){return document.createElementNS(We[n],t)},createTextNode:function(n){return document.createTextNode(n)},createComment:function(n){return document.createComment(n)},insertBefore:function(n,t,e){n.insertBefore(t,e)},removeChild:function(n,t){n.removeChild(t)},appendChild:function(n,t){n.appendChild(t)},parentNode:function(n){return n.parentNode},nextSibling:function(n){return n.nextSibling},tagName:function(n){return n.tagName},setTextContent:function(n,t){n.textContent=t},setStyleScope:function(n,t){n.setAttribute(t,"")}}),Ze={create:function(n,t){nr(t)},update:function(n,t){n.data.ref!==t.data.ref&&(nr(n,!0),nr(t))},destroy:function(n){nr(n,!0)}};function nr(n,t){var e=n.data.ref;if(a(e)){var r=n.context,i=n.componentInstance||n.elm,o=r.$refs;t?Array.isArray(o[e])?x(o[e],i):o[e]===i&&(o[e]=void 0):n.data.refInFor?Array.isArray(o[e])?o[e].indexOf(i)<0&&o[e].push(i):o[e]=[i]:o[e]=i}}var tr=new gn("",{},[]),er=["create","activate","update","remove","destroy"];function rr(n,t){return n.key===t.key&&n.asyncFactory===t.asyncFactory&&(n.tag===t.tag&&n.isComment===t.isComment&&a(n.data)===a(t.data)&&function(n,t){if("input"!==n.tag)return!0;var e,r=a(e=n.data)&&a(e=e.attrs)&&e.type,i=a(e=t.data)&&a(e=e.attrs)&&e.type;return r===i||Je(r)&&Je(i)}(n,t)||s(n.isAsyncPlaceholder)&&o(t.asyncFactory.error))}function ir(n,t,e){var r,i,o={};for(r=t;r<=e;++r)a(i=n[r].key)&&(o[i]=r);return o}var or={create:ar,update:ar,destroy:function(n){ar(n,tr)}};function ar(n,t){(n.data.directives||t.data.directives)&&function(n,t){var e,r,i,o=n===tr,a=t===tr,s=cr(n.data.directives,n.context),c=cr(t.data.directives,t.context),l=[],u=[];for(e in c)r=s[e],i=c[e],r?(i.oldValue=r.value,i.oldArg=r.arg,ur(i,"update",t,n),i.def&&i.def.componentUpdated&&u.push(i)):(ur(i,"bind",t,n),i.def&&i.def.inserted&&l.push(i));if(l.length){var p=function(){for(var e=0;e<l.length;e++)ur(l[e],"inserted",t,n)};o?ut(t,"insert",p):p()}u.length&&ut(t,"postpatch",(function(){for(var e=0;e<u.length;e++)ur(u[e],"componentUpdated",t,n)}));if(!o)for(e in s)c[e]||ur(s[e],"unbind",n,n,a)}(n,t)}var sr=Object.create(null);function cr(n,t){var e,r,i=Object.create(null);if(!n)return i;for(e=0;e<n.length;e++)(r=n[e]).modifiers||(r.modifiers=sr),i[lr(r)]=r,r.def=Dn(t.$options,"directives",r.name);return i}function lr(n){return n.rawName||n.name+"."+Object.keys(n.modifiers||{}).join(".")}function ur(n,t,e,r,i){var o=n.def&&n.def[t];if(o)try{o(e.elm,n,e,r,i)}catch(r){Gn(r,e.context,"directive "+n.name+" "+t+" hook")}}var pr=[Ze,or];function fr(n,t){var e=t.componentOptions;if(!(a(e)&&!1===e.Ctor.options.inheritAttrs||o(n.data.attrs)&&o(t.data.attrs))){var r,i,s=t.elm,c=n.data.attrs||{},l=t.data.attrs||{};for(r in a(l.__ob__)&&(l=t.data.attrs=E({},l)),l)i=l[r],c[r]!==i&&dr(s,r,i,t.data.pre);for(r in(Y||X)&&l.value!==c.value&&dr(s,"value",l.value),c)o(l[r])&&(De(r)?s.removeAttributeNS(Re,Me(r)):Ne(r)||s.removeAttribute(r))}}function dr(n,t,e,r){r||n.tagName.indexOf("-")>-1?hr(n,t,e):Le(t)?Ue(e)?n.removeAttribute(t):(e="allowfullscreen"===t&&"EMBED"===n.tagName?"true":t,n.setAttribute(t,e)):Ne(t)?n.setAttribute(t,function(n,t){return Ue(t)||"false"===t?"false":"contenteditable"===n&&qe(t)?t:"true"}(t,e)):De(t)?Ue(e)?n.removeAttributeNS(Re,Me(t)):n.setAttributeNS(Re,t,e):hr(n,t,e)}function hr(n,t,e){if(Ue(e))n.removeAttribute(t);else{if(Y&&!J&&"TEXTAREA"===n.tagName&&"placeholder"===t&&""!==e&&!n.__ieph){var r=function(t){t.stopImmediatePropagation(),n.removeEventListener("input",r)};n.addEventListener("input",r),n.__ieph=!0}n.setAttribute(t,e)}}var mr={create:fr,update:fr};function gr(n,t){var e=t.elm,r=t.data,i=n.data;if(!(o(r.staticClass)&&o(r.class)&&(o(i)||o(i.staticClass)&&o(i.class)))){var s=Fe(t),c=e._transitionClasses;a(c)&&(s=He(s,Ge(c))),s!==e._prevClass&&(e.setAttribute("class",s),e._prevClass=s)}}var vr,_r={create:gr,update:gr};function xr(n,t,e){var r=vr;return function i(){var o=t.apply(null,arguments);null!==o&&br(n,i,e,r)}}var yr=Yn&&!(nn&&Number(nn[1])<=53);function wr(n,t,e,r){if(yr){var i=le,o=t;t=o._wrapper=function(n){if(n.target===n.currentTarget||n.timeStamp>=i||n.timeStamp<=0||n.target.ownerDocument!==document)return o.apply(this,arguments)}}vr.addEventListener(n,t,en?{capture:e,passive:r}:e)}function br(n,t,e,r){(r||vr).removeEventListener(n,t._wrapper||t,e)}function kr(n,t){if(!o(n.data.on)||!o(t.data.on)){var e=t.data.on||{},r=n.data.on||{};vr=t.elm,function(n){if(a(n.__r)){var t=Y?"change":"input";n[t]=[].concat(n.__r,n[t]||[]),delete n.__r}a(n.__c)&&(n.change=[].concat(n.__c,n.change||[]),delete n.__c)}(e),lt(e,r,wr,br,xr,t.context),vr=void 0}}var $r,Sr={create:kr,update:kr};function zr(n,t){if(!o(n.data.domProps)||!o(t.data.domProps)){var e,r,i=t.elm,s=n.data.domProps||{},c=t.data.domProps||{};for(e in a(c.__ob__)&&(c=t.data.domProps=E({},c)),s)e in c||(i[e]="");for(e in c){if(r=c[e],"textContent"===e||"innerHTML"===e){if(t.children&&(t.children.length=0),r===s[e])continue;1===i.childNodes.length&&i.removeChild(i.childNodes[0])}if("value"===e&&"PROGRESS"!==i.tagName){i._value=r;var l=o(r)?"":String(r);jr(i,l)&&(i.value=l)}else if("innerHTML"===e&&Ke(i.tagName)&&o(i.innerHTML)){($r=$r||document.createElement("div")).innerHTML="<svg>"+r+"</svg>";for(var u=$r.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;u.firstChild;)i.appendChild(u.firstChild)}else if(r!==s[e])try{i[e]=r}catch(n){}}}}function jr(n,t){return!n.composing&&("OPTION"===n.tagName||function(n,t){var e=!0;try{e=document.activeElement!==n}catch(n){}return e&&n.value!==t}(n,t)||function(n,t){var e=n.value,r=n._vModifiers;if(a(r)){if(r.number)return g(e)!==g(t);if(r.trim)return e.trim()!==t.trim()}return e!==t}(n,t))}var Tr={create:zr,update:zr},Cr=b((function(n){var t={},e=/:(.+)/;return n.split(/;(?![^(]*\))/g).forEach((function(n){if(n){var r=n.split(e);r.length>1&&(t[r[0].trim()]=r[1].trim())}})),t}));function Er(n){var t=Pr(n.style);return n.staticStyle?E(n.staticStyle,t):t}function Pr(n){return Array.isArray(n)?P(n):"string"==typeof n?Cr(n):n}var Ar,Ir=/^--/,Or=/\s*!important$/,Nr=function(n,t,e){if(Ir.test(t))n.style.setProperty(t,e);else if(Or.test(e))n.style.setProperty(j(t),e.replace(Or,""),"important");else{var r=Lr(t);if(Array.isArray(e))for(var i=0,o=e.length;i<o;i++)n.style[r]=e[i];else n.style[r]=e}},qr=["Webkit","Moz","ms"],Lr=b((function(n){if(Ar=Ar||document.createElement("div").style,"filter"!==(n=$(n))&&n in Ar)return n;for(var t=n.charAt(0).toUpperCase()+n.slice(1),e=0;e<qr.length;e++){var r=qr[e]+t;if(r in Ar)return r}}));function Rr(n,t){var e=t.data,r=n.data;if(!(o(e.staticStyle)&&o(e.style)&&o(r.staticStyle)&&o(r.style))){var i,s,c=t.elm,l=r.staticStyle,u=r.normalizedStyle||r.style||{},p=l||u,f=Pr(t.data.style)||{};t.data.normalizedStyle=a(f.__ob__)?E({},f):f;var d=function(n,t){var e,r={};if(t)for(var i=n;i.componentInstance;)(i=i.componentInstance._vnode)&&i.data&&(e=Er(i.data))&&E(r,e);(e=Er(n.data))&&E(r,e);for(var o=n;o=o.parent;)o.data&&(e=Er(o.data))&&E(r,e);return r}(t,!0);for(s in p)o(d[s])&&Nr(c,s,"");for(s in d)(i=d[s])!==p[s]&&Nr(c,s,null==i?"":i)}}var Dr={create:Rr,update:Rr},Mr=/\s+/;function Ur(n,t){if(t&&(t=t.trim()))if(n.classList)t.indexOf(" ")>-1?t.split(Mr).forEach((function(t){return n.classList.add(t)})):n.classList.add(t);else{var e=" "+(n.getAttribute("class")||"")+" ";e.indexOf(" "+t+" ")<0&&n.setAttribute("class",(e+t).trim())}}function Fr(n,t){if(t&&(t=t.trim()))if(n.classList)t.indexOf(" ")>-1?t.split(Mr).forEach((function(t){return n.classList.remove(t)})):n.classList.remove(t),n.classList.length||n.removeAttribute("class");else{for(var e=" "+(n.getAttribute("class")||"")+" ",r=" "+t+" ";e.indexOf(r)>=0;)e=e.replace(r," ");(e=e.trim())?n.setAttribute("class",e):n.removeAttribute("class")}}function Br(n){if(n){if("object"==typeof n){var t={};return!1!==n.css&&E(t,Hr(n.name||"v")),E(t,n),t}return"string"==typeof n?Hr(n):void 0}}var Hr=b((function(n){return{enterClass:n+"-enter",enterToClass:n+"-enter-to",enterActiveClass:n+"-enter-active",leaveClass:n+"-leave",leaveToClass:n+"-leave-to",leaveActiveClass:n+"-leave-active"}})),Gr=W&&!J,Wr="transition",Vr="transitionend",Kr="animation",Qr="animationend";Gr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Wr="WebkitTransition",Vr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Kr="WebkitAnimation",Qr="webkitAnimationEnd"));var Yr=W?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(n){return n()};function Jr(n){Yr((function(){Yr(n)}))}function Xr(n,t){var e=n._transitionClasses||(n._transitionClasses=[]);e.indexOf(t)<0&&(e.push(t),Ur(n,t))}function Zr(n,t){n._transitionClasses&&x(n._transitionClasses,t),Fr(n,t)}function ni(n,t,e){var r=ei(n,t),i=r.type,o=r.timeout,a=r.propCount;if(!i)return e();var s="transition"===i?Vr:Qr,c=0,l=function(){n.removeEventListener(s,u),e()},u=function(t){t.target===n&&++c>=a&&l()};setTimeout((function(){c<a&&l()}),o+1),n.addEventListener(s,u)}var ti=/\b(transform|all)(,|$)/;function ei(n,t){var e,r=window.getComputedStyle(n),i=(r[Wr+"Delay"]||"").split(", "),o=(r[Wr+"Duration"]||"").split(", "),a=ri(i,o),s=(r[Kr+"Delay"]||"").split(", "),c=(r[Kr+"Duration"]||"").split(", "),l=ri(s,c),u=0,p=0;return"transition"===t?a>0&&(e="transition",u=a,p=o.length):"animation"===t?l>0&&(e="animation",u=l,p=c.length):p=(e=(u=Math.max(a,l))>0?a>l?"transition":"animation":null)?"transition"===e?o.length:c.length:0,{type:e,timeout:u,propCount:p,hasTransform:"transition"===e&&ti.test(r[Wr+"Property"])}}function ri(n,t){for(;n.length<t.length;)n=n.concat(n);return Math.max.apply(null,t.map((function(t,e){return ii(t)+ii(n[e])})))}function ii(n){return 1e3*Number(n.slice(0,-1).replace(",","."))}function oi(n,t){var e=n.elm;a(e._leaveCb)&&(e._leaveCb.cancelled=!0,e._leaveCb());var r=Br(n.data.transition);if(!o(r)&&!a(e._enterCb)&&1===e.nodeType){for(var i=r.css,s=r.type,c=r.enterClass,u=r.enterToClass,p=r.enterActiveClass,f=r.appearClass,d=r.appearToClass,h=r.appearActiveClass,m=r.beforeEnter,v=r.enter,_=r.afterEnter,x=r.enterCancelled,y=r.beforeAppear,w=r.appear,b=r.afterAppear,k=r.appearCancelled,$=r.duration,S=Xt,z=Xt.$vnode;z&&z.parent;)S=z.context,z=z.parent;var j=!S._isMounted||!n.isRootInsert;if(!j||w||""===w){var T=j&&f?f:c,C=j&&h?h:p,E=j&&d?d:u,P=j&&y||m,A=j&&"function"==typeof w?w:v,I=j&&b||_,O=j&&k||x,N=g(l($)?$.enter:$);0;var q=!1!==i&&!J,R=ci(A),D=e._enterCb=L((function(){q&&(Zr(e,E),Zr(e,C)),D.cancelled?(q&&Zr(e,T),O&&O(e)):I&&I(e),e._enterCb=null}));n.data.show||ut(n,"insert",(function(){var t=e.parentNode,r=t&&t._pending&&t._pending[n.key];r&&r.tag===n.tag&&r.elm._leaveCb&&r.elm._leaveCb(),A&&A(e,D)})),P&&P(e),q&&(Xr(e,T),Xr(e,C),Jr((function(){Zr(e,T),D.cancelled||(Xr(e,E),R||(si(N)?setTimeout(D,N):ni(e,s,D)))}))),n.data.show&&(t&&t(),A&&A(e,D)),q||R||D()}}}function ai(n,t){var e=n.elm;a(e._enterCb)&&(e._enterCb.cancelled=!0,e._enterCb());var r=Br(n.data.transition);if(o(r)||1!==e.nodeType)return t();if(!a(e._leaveCb)){var i=r.css,s=r.type,c=r.leaveClass,u=r.leaveToClass,p=r.leaveActiveClass,f=r.beforeLeave,d=r.leave,h=r.afterLeave,m=r.leaveCancelled,v=r.delayLeave,_=r.duration,x=!1!==i&&!J,y=ci(d),w=g(l(_)?_.leave:_);0;var b=e._leaveCb=L((function(){e.parentNode&&e.parentNode._pending&&(e.parentNode._pending[n.key]=null),x&&(Zr(e,u),Zr(e,p)),b.cancelled?(x&&Zr(e,c),m&&m(e)):(t(),h&&h(e)),e._leaveCb=null}));v?v(k):k()}function k(){b.cancelled||(!n.data.show&&e.parentNode&&((e.parentNode._pending||(e.parentNode._pending={}))[n.key]=n),f&&f(e),x&&(Xr(e,c),Xr(e,p),Jr((function(){Zr(e,c),b.cancelled||(Xr(e,u),y||(si(w)?setTimeout(b,w):ni(e,s,b)))}))),d&&d(e,b),x||y||b())}}function si(n){return"number"==typeof n&&!isNaN(n)}function ci(n){if(o(n))return!1;var t=n.fns;return a(t)?ci(Array.isArray(t)?t[0]:t):(n._length||n.length)>1}function li(n,t){!0!==t.data.show&&oi(t)}var ui=function(n){var t,e,r={},i=n.modules,l=n.nodeOps;for(t=0;t<er.length;++t)for(r[er[t]]=[],e=0;e<i.length;++e)a(i[e][er[t]])&&r[er[t]].push(i[e][er[t]]);function u(n){var t=l.parentNode(n);a(t)&&l.removeChild(t,n)}function p(n,t,e,i,o,c,u){if(a(n.elm)&&a(c)&&(n=c[u]=yn(n)),n.isRootInsert=!o,!function(n,t,e,i){var o=n.data;if(a(o)){var c=a(n.componentInstance)&&o.keepAlive;if(a(o=o.hook)&&a(o=o.init)&&o(n,!1),a(n.componentInstance))return f(n,t),d(e,n.elm,i),s(c)&&function(n,t,e,i){var o,s=n;for(;s.componentInstance;)if(s=s.componentInstance._vnode,a(o=s.data)&&a(o=o.transition)){for(o=0;o<r.activate.length;++o)r.activate[o](tr,s);t.push(s);break}d(e,n.elm,i)}(n,t,e,i),!0}}(n,t,e,i)){var p=n.data,m=n.children,v=n.tag;a(v)?(n.elm=n.ns?l.createElementNS(n.ns,v):l.createElement(v,n),_(n),h(n,m,t),a(p)&&g(n,t),d(e,n.elm,i)):s(n.isComment)?(n.elm=l.createComment(n.text),d(e,n.elm,i)):(n.elm=l.createTextNode(n.text),d(e,n.elm,i))}}function f(n,t){a(n.data.pendingInsert)&&(t.push.apply(t,n.data.pendingInsert),n.data.pendingInsert=null),n.elm=n.componentInstance.$el,m(n)?(g(n,t),_(n)):(nr(n),t.push(n))}function d(n,t,e){a(n)&&(a(e)?l.parentNode(e)===n&&l.insertBefore(n,t,e):l.appendChild(n,t))}function h(n,t,e){if(Array.isArray(t)){0;for(var r=0;r<t.length;++r)p(t[r],e,n.elm,null,!0,t,r)}else c(n.text)&&l.appendChild(n.elm,l.createTextNode(String(n.text)))}function m(n){for(;n.componentInstance;)n=n.componentInstance._vnode;return a(n.tag)}function g(n,e){for(var i=0;i<r.create.length;++i)r.create[i](tr,n);a(t=n.data.hook)&&(a(t.create)&&t.create(tr,n),a(t.insert)&&e.push(n))}function _(n){var t;if(a(t=n.fnScopeId))l.setStyleScope(n.elm,t);else for(var e=n;e;)a(t=e.context)&&a(t=t.$options._scopeId)&&l.setStyleScope(n.elm,t),e=e.parent;a(t=Xt)&&t!==n.context&&t!==n.fnContext&&a(t=t.$options._scopeId)&&l.setStyleScope(n.elm,t)}function x(n,t,e,r,i,o){for(;r<=i;++r)p(e[r],o,n,t,!1,e,r)}function y(n){var t,e,i=n.data;if(a(i))for(a(t=i.hook)&&a(t=t.destroy)&&t(n),t=0;t<r.destroy.length;++t)r.destroy[t](n);if(a(t=n.children))for(e=0;e<n.children.length;++e)y(n.children[e])}function w(n,t,e){for(;t<=e;++t){var r=n[t];a(r)&&(a(r.tag)?(b(r),y(r)):u(r.elm))}}function b(n,t){if(a(t)||a(n.data)){var e,i=r.remove.length+1;for(a(t)?t.listeners+=i:t=function(n,t){function e(){0==--e.listeners&&u(n)}return e.listeners=t,e}(n.elm,i),a(e=n.componentInstance)&&a(e=e._vnode)&&a(e.data)&&b(e,t),e=0;e<r.remove.length;++e)r.remove[e](n,t);a(e=n.data.hook)&&a(e=e.remove)?e(n,t):t()}else u(n.elm)}function k(n,t,e,r){for(var i=e;i<r;i++){var o=t[i];if(a(o)&&rr(n,o))return i}}function $(n,t,e,i,c,u){if(n!==t){a(t.elm)&&a(i)&&(t=i[c]=yn(t));var f=t.elm=n.elm;if(s(n.isAsyncPlaceholder))a(t.asyncFactory.resolved)?j(n.elm,t,e):t.isAsyncPlaceholder=!0;else if(s(t.isStatic)&&s(n.isStatic)&&t.key===n.key&&(s(t.isCloned)||s(t.isOnce)))t.componentInstance=n.componentInstance;else{var d,h=t.data;a(h)&&a(d=h.hook)&&a(d=d.prepatch)&&d(n,t);var g=n.children,v=t.children;if(a(h)&&m(t)){for(d=0;d<r.update.length;++d)r.update[d](n,t);a(d=h.hook)&&a(d=d.update)&&d(n,t)}o(t.text)?a(g)&&a(v)?g!==v&&function(n,t,e,r,i){var s,c,u,f=0,d=0,h=t.length-1,m=t[0],g=t[h],v=e.length-1,_=e[0],y=e[v],b=!i;for(0;f<=h&&d<=v;)o(m)?m=t[++f]:o(g)?g=t[--h]:rr(m,_)?($(m,_,r,e,d),m=t[++f],_=e[++d]):rr(g,y)?($(g,y,r,e,v),g=t[--h],y=e[--v]):rr(m,y)?($(m,y,r,e,v),b&&l.insertBefore(n,m.elm,l.nextSibling(g.elm)),m=t[++f],y=e[--v]):rr(g,_)?($(g,_,r,e,d),b&&l.insertBefore(n,g.elm,m.elm),g=t[--h],_=e[++d]):(o(s)&&(s=ir(t,f,h)),o(c=a(_.key)?s[_.key]:k(_,t,f,h))?p(_,r,n,m.elm,!1,e,d):rr(u=t[c],_)?($(u,_,r,e,d),t[c]=void 0,b&&l.insertBefore(n,u.elm,m.elm)):p(_,r,n,m.elm,!1,e,d),_=e[++d]);f>h?x(n,o(e[v+1])?null:e[v+1].elm,e,d,v,r):d>v&&w(t,f,h)}(f,g,v,e,u):a(v)?(a(n.text)&&l.setTextContent(f,""),x(f,null,v,0,v.length-1,e)):a(g)?w(g,0,g.length-1):a(n.text)&&l.setTextContent(f,""):n.text!==t.text&&l.setTextContent(f,t.text),a(h)&&a(d=h.hook)&&a(d=d.postpatch)&&d(n,t)}}}function S(n,t,e){if(s(e)&&a(n.parent))n.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}var z=v("attrs,class,staticClass,staticStyle,key");function j(n,t,e,r){var i,o=t.tag,c=t.data,l=t.children;if(r=r||c&&c.pre,t.elm=n,s(t.isComment)&&a(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(a(c)&&(a(i=c.hook)&&a(i=i.init)&&i(t,!0),a(i=t.componentInstance)))return f(t,e),!0;if(a(o)){if(a(l))if(n.hasChildNodes())if(a(i=c)&&a(i=i.domProps)&&a(i=i.innerHTML)){if(i!==n.innerHTML)return!1}else{for(var u=!0,p=n.firstChild,d=0;d<l.length;d++){if(!p||!j(p,l[d],e,r)){u=!1;break}p=p.nextSibling}if(!u||p)return!1}else h(t,l,e);if(a(c)){var m=!1;for(var v in c)if(!z(v)){m=!0,g(t,e);break}!m&&c.class&&at(c.class)}}else n.data!==t.text&&(n.data=t.text);return!0}return function(n,t,e,i){if(!o(t)){var c,u=!1,f=[];if(o(n))u=!0,p(t,f);else{var d=a(n.nodeType);if(!d&&rr(n,t))$(n,t,f,null,null,i);else{if(d){if(1===n.nodeType&&n.hasAttribute("data-server-rendered")&&(n.removeAttribute("data-server-rendered"),e=!0),s(e)&&j(n,t,f))return S(t,f,!0),n;c=n,n=new gn(l.tagName(c).toLowerCase(),{},[],void 0,c)}var h=n.elm,g=l.parentNode(h);if(p(t,f,h._leaveCb?null:g,l.nextSibling(h)),a(t.parent))for(var v=t.parent,_=m(t);v;){for(var x=0;x<r.destroy.length;++x)r.destroy[x](v);if(v.elm=t.elm,_){for(var b=0;b<r.create.length;++b)r.create[b](tr,v);var k=v.data.hook.insert;if(k.merged)for(var z=1;z<k.fns.length;z++)k.fns[z]()}else nr(v);v=v.parent}a(g)?w([n],0,0):a(n.tag)&&y(n)}}return S(t,f,u),t.elm}a(n)&&y(n)}}({nodeOps:Xe,modules:[mr,_r,Sr,Tr,Dr,W?{create:li,activate:li,remove:function(n,t){!0!==n.data.show?ai(n,t):t()}}:{}].concat(pr)});J&&document.addEventListener("selectionchange",(function(){var n=document.activeElement;n&&n.vmodel&&_i(n,"input")}));var pi={inserted:function(n,t,e,r){"select"===e.tag?(r.elm&&!r.elm._vOptions?ut(e,"postpatch",(function(){pi.componentUpdated(n,t,e)})):fi(n,t,e.context),n._vOptions=[].map.call(n.options,mi)):("textarea"===e.tag||Je(n.type))&&(n._vModifiers=t.modifiers,t.modifiers.lazy||(n.addEventListener("compositionstart",gi),n.addEventListener("compositionend",vi),n.addEventListener("change",vi),J&&(n.vmodel=!0)))},componentUpdated:function(n,t,e){if("select"===e.tag){fi(n,t,e.context);var r=n._vOptions,i=n._vOptions=[].map.call(n.options,mi);if(i.some((function(n,t){return!N(n,r[t])})))(n.multiple?t.value.some((function(n){return hi(n,i)})):t.value!==t.oldValue&&hi(t.value,i))&&_i(n,"change")}}};function fi(n,t,e){di(n,t,e),(Y||X)&&setTimeout((function(){di(n,t,e)}),0)}function di(n,t,e){var r=t.value,i=n.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,c=n.options.length;s<c;s++)if(a=n.options[s],i)o=q(r,mi(a))>-1,a.selected!==o&&(a.selected=o);else if(N(mi(a),r))return void(n.selectedIndex!==s&&(n.selectedIndex=s));i||(n.selectedIndex=-1)}}function hi(n,t){return t.every((function(t){return!N(t,n)}))}function mi(n){return"_value"in n?n._value:n.value}function gi(n){n.target.composing=!0}function vi(n){n.target.composing&&(n.target.composing=!1,_i(n.target,"input"))}function _i(n,t){var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!0),n.dispatchEvent(e)}function xi(n){return!n.componentInstance||n.data&&n.data.transition?n:xi(n.componentInstance._vnode)}var yi={model:pi,show:{bind:function(n,t,e){var r=t.value,i=(e=xi(e)).data&&e.data.transition,o=n.__vOriginalDisplay="none"===n.style.display?"":n.style.display;r&&i?(e.data.show=!0,oi(e,(function(){n.style.display=o}))):n.style.display=r?o:"none"},update:function(n,t,e){var r=t.value;!r!=!t.oldValue&&((e=xi(e)).data&&e.data.transition?(e.data.show=!0,r?oi(e,(function(){n.style.display=n.__vOriginalDisplay})):ai(e,(function(){n.style.display="none"}))):n.style.display=r?n.__vOriginalDisplay:"none")},unbind:function(n,t,e,r,i){i||(n.style.display=n.__vOriginalDisplay)}}},wi={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function bi(n){var t=n&&n.componentOptions;return t&&t.Ctor.options.abstract?bi(Vt(t.children)):n}function ki(n){var t={},e=n.$options;for(var r in e.propsData)t[r]=n[r];var i=e._parentListeners;for(var o in i)t[$(o)]=i[o];return t}function $i(n,t){if(/\d-keep-alive$/.test(t.tag))return n("keep-alive",{props:t.componentOptions.propsData})}var Si=function(n){return n.tag||vt(n)},zi=function(n){return"show"===n.name},ji={name:"transition",props:wi,abstract:!0,render:function(n){var t=this,e=this.$slots.default;if(e&&(e=e.filter(Si)).length){0;var r=this.mode;0;var i=e[0];if(function(n){for(;n=n.parent;)if(n.data.transition)return!0}(this.$vnode))return i;var o=bi(i);if(!o)return i;if(this._leaving)return $i(n,i);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:c(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var s=(o.data||(o.data={})).transition=ki(this),l=this._vnode,u=bi(l);if(o.data.directives&&o.data.directives.some(zi)&&(o.data.show=!0),u&&u.data&&!function(n,t){return t.key===n.key&&t.tag===n.tag}(o,u)&&!vt(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var p=u.data.transition=E({},s);if("out-in"===r)return this._leaving=!0,ut(p,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),$i(n,i);if("in-out"===r){if(vt(o))return l;var f,d=function(){f()};ut(s,"afterEnter",d),ut(s,"enterCancelled",d),ut(p,"delayLeave",(function(n){f=n}))}}return i}}},Ti=E({tag:String,moveClass:String},wi);function Ci(n){n.elm._moveCb&&n.elm._moveCb(),n.elm._enterCb&&n.elm._enterCb()}function Ei(n){n.data.newPos=n.elm.getBoundingClientRect()}function Pi(n){var t=n.data.pos,e=n.data.newPos,r=t.left-e.left,i=t.top-e.top;if(r||i){n.data.moved=!0;var o=n.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}delete Ti.mode;var Ai={Transition:ji,TransitionGroup:{props:Ti,beforeMount:function(){var n=this,t=this._update;this._update=function(e,r){var i=Zt(n);n.__patch__(n._vnode,n.kept,!1,!0),n._vnode=n.kept,i(),t.call(n,e,r)}},render:function(n){for(var t=this.tag||this.$vnode.data.tag||"span",e=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=ki(this),s=0;s<i.length;s++){var c=i[s];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))o.push(c),e[c.key]=c,(c.data||(c.data={})).transition=a;else;}if(r){for(var l=[],u=[],p=0;p<r.length;p++){var f=r[p];f.data.transition=a,f.data.pos=f.elm.getBoundingClientRect(),e[f.key]?l.push(f):u.push(f)}this.kept=n(t,null,l),this.removed=u}return n(t,null,o)},updated:function(){var n=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";n.length&&this.hasMove(n[0].elm,t)&&(n.forEach(Ci),n.forEach(Ei),n.forEach(Pi),this._reflow=document.body.offsetHeight,n.forEach((function(n){if(n.data.moved){var e=n.elm,r=e.style;Xr(e,t),r.transform=r.WebkitTransform=r.transitionDuration="",e.addEventListener(Vr,e._moveCb=function n(r){r&&r.target!==e||r&&!/transform$/.test(r.propertyName)||(e.removeEventListener(Vr,n),e._moveCb=null,Zr(e,t))})}})))},methods:{hasMove:function(n,t){if(!Gr)return!1;if(this._hasMove)return this._hasMove;var e=n.cloneNode();n._transitionClasses&&n._transitionClasses.forEach((function(n){Fr(e,n)})),Ur(e,t),e.style.display="none",this.$el.appendChild(e);var r=ei(e);return this.$el.removeChild(e),this._hasMove=r.hasTransform}}}};Se.config.mustUseProp=function(n,t,e){return"value"===e&&Oe(n)&&"button"!==t||"selected"===e&&"option"===n||"checked"===e&&"input"===n||"muted"===e&&"video"===n},Se.config.isReservedTag=Qe,Se.config.isReservedAttr=Ie,Se.config.getTagNamespace=function(n){return Ke(n)?"svg":"math"===n?"math":void 0},Se.config.isUnknownElement=function(n){if(!W)return!0;if(Qe(n))return!1;if(n=n.toLowerCase(),null!=Ye[n])return Ye[n];var t=document.createElement(n);return n.indexOf("-")>-1?Ye[n]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:Ye[n]=/HTMLUnknownElement/.test(t.toString())},E(Se.options.directives,yi),E(Se.options.components,Ai),Se.prototype.__patch__=W?ui:A,Se.prototype.$mount=function(n,t){return function(n,t,e){var r;return n.$el=t,n.$options.render||(n.$options.render=_n),ee(n,"beforeMount"),r=function(){n._update(n._render(),e)},new he(n,r,A,{before:function(){n._isMounted&&!n._isDestroyed&&ee(n,"beforeUpdate")}},!0),e=!1,null==n.$vnode&&(n._isMounted=!0,ee(n,"mounted")),n}(this,n=n&&W?function(n){if("string"==typeof n){var t=document.querySelector(n);return t||document.createElement("div")}return n}(n):void 0,t)},W&&setTimeout((function(){M.devtools&&an&&an.emit("init",Se)}),0);var Ii=Se;
/*!
  * vue-router v3.5.3
  * (c) 2021 Evan You
  * @license MIT
  */function Oi(n,t){for(var e in t)n[e]=t[e];return n}var Ni=/[!'()*]/g,qi=function(n){return"%"+n.charCodeAt(0).toString(16)},Li=/%2C/g,Ri=function(n){return encodeURIComponent(n).replace(Ni,qi).replace(Li,",")};function Di(n){try{return decodeURIComponent(n)}catch(n){0}return n}var Mi=function(n){return null==n||"object"==typeof n?n:String(n)};function Ui(n){var t={};return(n=n.trim().replace(/^(\?|#|&)/,""))?(n.split("&").forEach((function(n){var e=n.replace(/\+/g," ").split("="),r=Di(e.shift()),i=e.length>0?Di(e.join("=")):null;void 0===t[r]?t[r]=i:Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]})),t):t}function Fi(n){var t=n?Object.keys(n).map((function(t){var e=n[t];if(void 0===e)return"";if(null===e)return Ri(t);if(Array.isArray(e)){var r=[];return e.forEach((function(n){void 0!==n&&(null===n?r.push(Ri(t)):r.push(Ri(t)+"="+Ri(n)))})),r.join("&")}return Ri(t)+"="+Ri(e)})).filter((function(n){return n.length>0})).join("&"):null;return t?"?"+t:""}var Bi=/\/?$/;function Hi(n,t,e,r){var i=r&&r.options.stringifyQuery,o=t.query||{};try{o=Gi(o)}catch(n){}var a={name:t.name||n&&n.name,meta:n&&n.meta||{},path:t.path||"/",hash:t.hash||"",query:o,params:t.params||{},fullPath:Ki(t,i),matched:n?Vi(n):[]};return e&&(a.redirectedFrom=Ki(e,i)),Object.freeze(a)}function Gi(n){if(Array.isArray(n))return n.map(Gi);if(n&&"object"==typeof n){var t={};for(var e in n)t[e]=Gi(n[e]);return t}return n}var Wi=Hi(null,{path:"/"});function Vi(n){for(var t=[];n;)t.unshift(n),n=n.parent;return t}function Ki(n,t){var e=n.path,r=n.query;void 0===r&&(r={});var i=n.hash;return void 0===i&&(i=""),(e||"/")+(t||Fi)(r)+i}function Qi(n,t,e){return t===Wi?n===t:!!t&&(n.path&&t.path?n.path.replace(Bi,"")===t.path.replace(Bi,"")&&(e||n.hash===t.hash&&Yi(n.query,t.query)):!(!n.name||!t.name)&&(n.name===t.name&&(e||n.hash===t.hash&&Yi(n.query,t.query)&&Yi(n.params,t.params))))}function Yi(n,t){if(void 0===n&&(n={}),void 0===t&&(t={}),!n||!t)return n===t;var e=Object.keys(n).sort(),r=Object.keys(t).sort();return e.length===r.length&&e.every((function(e,i){var o=n[e];if(r[i]!==e)return!1;var a=t[e];return null==o||null==a?o===a:"object"==typeof o&&"object"==typeof a?Yi(o,a):String(o)===String(a)}))}function Ji(n){for(var t=0;t<n.matched.length;t++){var e=n.matched[t];for(var r in e.instances){var i=e.instances[r],o=e.enteredCbs[r];if(i&&o){delete e.enteredCbs[r];for(var a=0;a<o.length;a++)i._isBeingDestroyed||o[a](i)}}}}var Xi={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(n,t){var e=t.props,r=t.children,i=t.parent,o=t.data;o.routerView=!0;for(var a=i.$createElement,s=e.name,c=i.$route,l=i._routerViewCache||(i._routerViewCache={}),u=0,p=!1;i&&i._routerRoot!==i;){var f=i.$vnode?i.$vnode.data:{};f.routerView&&u++,f.keepAlive&&i._directInactive&&i._inactive&&(p=!0),i=i.$parent}if(o.routerViewDepth=u,p){var d=l[s],h=d&&d.component;return h?(d.configProps&&Zi(h,o,d.route,d.configProps),a(h,o,r)):a()}var m=c.matched[u],g=m&&m.components[s];if(!m||!g)return l[s]=null,a();l[s]={component:g},o.registerRouteInstance=function(n,t){var e=m.instances[s];(t&&e!==n||!t&&e===n)&&(m.instances[s]=t)},(o.hook||(o.hook={})).prepatch=function(n,t){m.instances[s]=t.componentInstance},o.hook.init=function(n){n.data.keepAlive&&n.componentInstance&&n.componentInstance!==m.instances[s]&&(m.instances[s]=n.componentInstance),Ji(c)};var v=m.props&&m.props[s];return v&&(Oi(l[s],{route:c,configProps:v}),Zi(g,o,c,v)),a(g,o,r)}};function Zi(n,t,e,r){var i=t.props=function(n,t){switch(typeof t){case"undefined":return;case"object":return t;case"function":return t(n);case"boolean":return t?n.params:void 0;default:0}}(e,r);if(i){i=t.props=Oi({},i);var o=t.attrs=t.attrs||{};for(var a in i)n.props&&a in n.props||(o[a]=i[a],delete i[a])}}function no(n,t,e){var r=n.charAt(0);if("/"===r)return n;if("?"===r||"#"===r)return t+n;var i=t.split("/");e&&i[i.length-1]||i.pop();for(var o=n.replace(/^\//,"").split("/"),a=0;a<o.length;a++){var s=o[a];".."===s?i.pop():"."!==s&&i.push(s)}return""!==i[0]&&i.unshift(""),i.join("/")}function to(n){return n.replace(/\/+/g,"/")}var eo=Array.isArray||function(n){return"[object Array]"==Object.prototype.toString.call(n)},ro=_o,io=lo,oo=function(n,t){return po(lo(n,t),t)},ao=po,so=vo,co=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function lo(n,t){for(var e,r=[],i=0,o=0,a="",s=t&&t.delimiter||"/";null!=(e=co.exec(n));){var c=e[0],l=e[1],u=e.index;if(a+=n.slice(o,u),o=u+c.length,l)a+=l[1];else{var p=n[o],f=e[2],d=e[3],h=e[4],m=e[5],g=e[6],v=e[7];a&&(r.push(a),a="");var _=null!=f&&null!=p&&p!==f,x="+"===g||"*"===g,y="?"===g||"*"===g,w=e[2]||s,b=h||m;r.push({name:d||i++,prefix:f||"",delimiter:w,optional:y,repeat:x,partial:_,asterisk:!!v,pattern:b?ho(b):v?".*":"[^"+fo(w)+"]+?"})}}return o<n.length&&(a+=n.substr(o)),a&&r.push(a),r}function uo(n){return encodeURI(n).replace(/[\/?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()}))}function po(n,t){for(var e=new Array(n.length),r=0;r<n.length;r++)"object"==typeof n[r]&&(e[r]=new RegExp("^(?:"+n[r].pattern+")$",go(t)));return function(t,r){for(var i="",o=t||{},a=(r||{}).pretty?uo:encodeURIComponent,s=0;s<n.length;s++){var c=n[s];if("string"!=typeof c){var l,u=o[c.name];if(null==u){if(c.optional){c.partial&&(i+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(eo(u)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var p=0;p<u.length;p++){if(l=a(u[p]),!e[s].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(l)+"`");i+=(0===p?c.prefix:c.delimiter)+l}}else{if(l=c.asterisk?encodeURI(u).replace(/[?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})):a(u),!e[s].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+l+'"');i+=c.prefix+l}}else i+=c}return i}}function fo(n){return n.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function ho(n){return n.replace(/([=!:$\/()])/g,"\\$1")}function mo(n,t){return n.keys=t,n}function go(n){return n&&n.sensitive?"":"i"}function vo(n,t,e){eo(t)||(e=t||e,t=[]);for(var r=(e=e||{}).strict,i=!1!==e.end,o="",a=0;a<n.length;a++){var s=n[a];if("string"==typeof s)o+=fo(s);else{var c=fo(s.prefix),l="(?:"+s.pattern+")";t.push(s),s.repeat&&(l+="(?:"+c+l+")*"),o+=l=s.optional?s.partial?c+"("+l+")?":"(?:"+c+"("+l+"))?":c+"("+l+")"}}var u=fo(e.delimiter||"/"),p=o.slice(-u.length)===u;return r||(o=(p?o.slice(0,-u.length):o)+"(?:"+u+"(?=$))?"),o+=i?"$":r&&p?"":"(?="+u+"|$)",mo(new RegExp("^"+o,go(e)),t)}function _o(n,t,e){return eo(t)||(e=t||e,t=[]),e=e||{},n instanceof RegExp?function(n,t){var e=n.source.match(/\((?!\?)/g);if(e)for(var r=0;r<e.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return mo(n,t)}(n,t):eo(n)?function(n,t,e){for(var r=[],i=0;i<n.length;i++)r.push(_o(n[i],t,e).source);return mo(new RegExp("(?:"+r.join("|")+")",go(e)),t)}(n,t,e):function(n,t,e){return vo(lo(n,e),t,e)}(n,t,e)}ro.parse=io,ro.compile=oo,ro.tokensToFunction=ao,ro.tokensToRegExp=so;var xo=Object.create(null);function yo(n,t,e){t=t||{};try{var r=xo[n]||(xo[n]=ro.compile(n));return"string"==typeof t.pathMatch&&(t[0]=t.pathMatch),r(t,{pretty:!0})}catch(n){return""}finally{delete t[0]}}function wo(n,t,e,r){var i="string"==typeof n?{path:n}:n;if(i._normalized)return i;if(i.name){var o=(i=Oi({},n)).params;return o&&"object"==typeof o&&(i.params=Oi({},o)),i}if(!i.path&&i.params&&t){(i=Oi({},i))._normalized=!0;var a=Oi(Oi({},t.params),i.params);if(t.name)i.name=t.name,i.params=a;else if(t.matched.length){var s=t.matched[t.matched.length-1].path;i.path=yo(s,a,t.path)}else 0;return i}var c=function(n){var t="",e="",r=n.indexOf("#");r>=0&&(t=n.slice(r),n=n.slice(0,r));var i=n.indexOf("?");return i>=0&&(e=n.slice(i+1),n=n.slice(0,i)),{path:n,query:e,hash:t}}(i.path||""),l=t&&t.path||"/",u=c.path?no(c.path,l,e||i.append):l,p=function(n,t,e){void 0===t&&(t={});var r,i=e||Ui;try{r=i(n||"")}catch(n){r={}}for(var o in t){var a=t[o];r[o]=Array.isArray(a)?a.map(Mi):Mi(a)}return r}(c.query,i.query,r&&r.options.parseQuery),f=i.hash||c.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:u,query:p,hash:f}}var bo,ko=function(){},$o={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(n){var t=this,e=this.$router,r=this.$route,i=e.resolve(this.to,r,this.append),o=i.location,a=i.route,s=i.href,c={},l=e.options.linkActiveClass,u=e.options.linkExactActiveClass,p=null==l?"router-link-active":l,f=null==u?"router-link-exact-active":u,d=null==this.activeClass?p:this.activeClass,h=null==this.exactActiveClass?f:this.exactActiveClass,m=a.redirectedFrom?Hi(null,wo(a.redirectedFrom),null,e):a;c[h]=Qi(r,m,this.exactPath),c[d]=this.exact||this.exactPath?c[h]:function(n,t){return 0===n.path.replace(Bi,"/").indexOf(t.path.replace(Bi,"/"))&&(!t.hash||n.hash===t.hash)&&function(n,t){for(var e in t)if(!(e in n))return!1;return!0}(n.query,t.query)}(r,m);var g=c[h]?this.ariaCurrentValue:null,v=function(n){So(n)&&(t.replace?e.replace(o,ko):e.push(o,ko))},_={click:So};Array.isArray(this.event)?this.event.forEach((function(n){_[n]=v})):_[this.event]=v;var x={class:c},y=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:s,route:a,navigate:v,isActive:c[d],isExactActive:c[h]});if(y){if(1===y.length)return y[0];if(y.length>1||!y.length)return 0===y.length?n():n("span",{},y)}if("a"===this.tag)x.on=_,x.attrs={href:s,"aria-current":g};else{var w=function n(t){var e;if(t)for(var r=0;r<t.length;r++){if("a"===(e=t[r]).tag)return e;if(e.children&&(e=n(e.children)))return e}}(this.$slots.default);if(w){w.isStatic=!1;var b=w.data=Oi({},w.data);for(var k in b.on=b.on||{},b.on){var $=b.on[k];k in _&&(b.on[k]=Array.isArray($)?$:[$])}for(var S in _)S in b.on?b.on[S].push(_[S]):b.on[S]=v;var z=w.data.attrs=Oi({},w.data.attrs);z.href=s,z["aria-current"]=g}else x.on=_}return n(this.tag,x,this.$slots.default)}};function So(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey||n.defaultPrevented||void 0!==n.button&&0!==n.button)){if(n.currentTarget&&n.currentTarget.getAttribute){var t=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return n.preventDefault&&n.preventDefault(),!0}}var zo="undefined"!=typeof window;function jo(n,t,e,r,i){var o=t||[],a=e||Object.create(null),s=r||Object.create(null);n.forEach((function(n){!function n(t,e,r,i,o,a){var s=i.path,c=i.name;0;var l=i.pathToRegexpOptions||{},u=function(n,t,e){e||(n=n.replace(/\/$/,""));if("/"===n[0])return n;if(null==t)return n;return to(t.path+"/"+n)}(s,o,l.strict);"boolean"==typeof i.caseSensitive&&(l.sensitive=i.caseSensitive);var p={path:u,regex:To(u,l),components:i.components||{default:i.component},alias:i.alias?"string"==typeof i.alias?[i.alias]:i.alias:[],instances:{},enteredCbs:{},name:c,parent:o,matchAs:a,redirect:i.redirect,beforeEnter:i.beforeEnter,meta:i.meta||{},props:null==i.props?{}:i.components?i.props:{default:i.props}};i.children&&i.children.forEach((function(i){var o=a?to(a+"/"+i.path):void 0;n(t,e,r,i,p,o)}));e[p.path]||(t.push(p.path),e[p.path]=p);if(void 0!==i.alias)for(var f=Array.isArray(i.alias)?i.alias:[i.alias],d=0;d<f.length;++d){0;var h={path:f[d],children:i.children};n(t,e,r,h,o,p.path||"/")}c&&(r[c]||(r[c]=p))}(o,a,s,n,i)}));for(var c=0,l=o.length;c<l;c++)"*"===o[c]&&(o.push(o.splice(c,1)[0]),l--,c--);return{pathList:o,pathMap:a,nameMap:s}}function To(n,t){return ro(n,[],t)}function Co(n,t){var e=jo(n),r=e.pathList,i=e.pathMap,o=e.nameMap;function a(n,e,a){var s=wo(n,e,!1,t),l=s.name;if(l){var u=o[l];if(!u)return c(null,s);var p=u.regex.keys.filter((function(n){return!n.optional})).map((function(n){return n.name}));if("object"!=typeof s.params&&(s.params={}),e&&"object"==typeof e.params)for(var f in e.params)!(f in s.params)&&p.indexOf(f)>-1&&(s.params[f]=e.params[f]);return s.path=yo(u.path,s.params),c(u,s,a)}if(s.path){s.params={};for(var d=0;d<r.length;d++){var h=r[d],m=i[h];if(Eo(m.regex,s.path,s.params))return c(m,s,a)}}return c(null,s)}function s(n,e){var r=n.redirect,i="function"==typeof r?r(Hi(n,e,null,t)):r;if("string"==typeof i&&(i={path:i}),!i||"object"!=typeof i)return c(null,e);var s=i,l=s.name,u=s.path,p=e.query,f=e.hash,d=e.params;if(p=s.hasOwnProperty("query")?s.query:p,f=s.hasOwnProperty("hash")?s.hash:f,d=s.hasOwnProperty("params")?s.params:d,l){o[l];return a({_normalized:!0,name:l,query:p,hash:f,params:d},void 0,e)}if(u){var h=function(n,t){return no(n,t.parent?t.parent.path:"/",!0)}(u,n);return a({_normalized:!0,path:yo(h,d),query:p,hash:f},void 0,e)}return c(null,e)}function c(n,e,r){return n&&n.redirect?s(n,r||e):n&&n.matchAs?function(n,t,e){var r=a({_normalized:!0,path:yo(e,t.params)});if(r){var i=r.matched,o=i[i.length-1];return t.params=r.params,c(o,t)}return c(null,t)}(0,e,n.matchAs):Hi(n,e,r,t)}return{match:a,addRoute:function(n,t){var e="object"!=typeof n?o[n]:void 0;jo([t||n],r,i,o,e),e&&e.alias.length&&jo(e.alias.map((function(n){return{path:n,children:[t]}})),r,i,o,e)},getRoutes:function(){return r.map((function(n){return i[n]}))},addRoutes:function(n){jo(n,r,i,o)}}}function Eo(n,t,e){var r=t.match(n);if(!r)return!1;if(!e)return!0;for(var i=1,o=r.length;i<o;++i){var a=n.keys[i-1];a&&(e[a.name||"pathMatch"]="string"==typeof r[i]?Di(r[i]):r[i])}return!0}var Po=zo&&window.performance&&window.performance.now?window.performance:Date;function Ao(){return Po.now().toFixed(3)}var Io=Ao();function Oo(){return Io}function No(n){return Io=n}var qo=Object.create(null);function Lo(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var n=window.location.protocol+"//"+window.location.host,t=window.location.href.replace(n,""),e=Oi({},window.history.state);return e.key=Oo(),window.history.replaceState(e,"",t),window.addEventListener("popstate",Mo),function(){window.removeEventListener("popstate",Mo)}}function Ro(n,t,e,r){if(n.app){var i=n.options.scrollBehavior;i&&n.app.$nextTick((function(){var o=function(){var n=Oo();if(n)return qo[n]}(),a=i.call(n,t,e,r?o:null);a&&("function"==typeof a.then?a.then((function(n){Go(n,o)})).catch((function(n){0})):Go(a,o))}))}}function Do(){var n=Oo();n&&(qo[n]={x:window.pageXOffset,y:window.pageYOffset})}function Mo(n){Do(),n.state&&n.state.key&&No(n.state.key)}function Uo(n){return Bo(n.x)||Bo(n.y)}function Fo(n){return{x:Bo(n.x)?n.x:window.pageXOffset,y:Bo(n.y)?n.y:window.pageYOffset}}function Bo(n){return"number"==typeof n}var Ho=/^#\d/;function Go(n,t){var e,r="object"==typeof n;if(r&&"string"==typeof n.selector){var i=Ho.test(n.selector)?document.getElementById(n.selector.slice(1)):document.querySelector(n.selector);if(i){var o=n.offset&&"object"==typeof n.offset?n.offset:{};t=function(n,t){var e=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{x:r.left-e.left-t.x,y:r.top-e.top-t.y}}(i,o={x:Bo((e=o).x)?e.x:0,y:Bo(e.y)?e.y:0})}else Uo(n)&&(t=Fo(n))}else r&&Uo(n)&&(t=Fo(n));t&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:t.x,top:t.y,behavior:n.behavior}):window.scrollTo(t.x,t.y))}var Wo,Vo=zo&&((-1===(Wo=window.navigator.userAgent).indexOf("Android 2.")&&-1===Wo.indexOf("Android 4.0")||-1===Wo.indexOf("Mobile Safari")||-1!==Wo.indexOf("Chrome")||-1!==Wo.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function Ko(n,t){Do();var e=window.history;try{if(t){var r=Oi({},e.state);r.key=Oo(),e.replaceState(r,"",n)}else e.pushState({key:No(Ao())},"",n)}catch(e){window.location[t?"replace":"assign"](n)}}function Qo(n){Ko(n,!0)}function Yo(n,t,e){var r=function(i){i>=n.length?e():n[i]?t(n[i],(function(){r(i+1)})):r(i+1)};r(0)}var Jo={redirected:2,aborted:4,cancelled:8,duplicated:16};function Xo(n,t){return na(n,t,Jo.redirected,'Redirected when going from "'+n.fullPath+'" to "'+function(n){if("string"==typeof n)return n;if("path"in n)return n.path;var t={};return ta.forEach((function(e){e in n&&(t[e]=n[e])})),JSON.stringify(t,null,2)}(t)+'" via a navigation guard.')}function Zo(n,t){return na(n,t,Jo.cancelled,'Navigation cancelled from "'+n.fullPath+'" to "'+t.fullPath+'" with a new navigation.')}function na(n,t,e,r){var i=new Error(r);return i._isRouter=!0,i.from=n,i.to=t,i.type=e,i}var ta=["params","query","hash"];function ea(n){return Object.prototype.toString.call(n).indexOf("Error")>-1}function ra(n,t){return ea(n)&&n._isRouter&&(null==t||n.type===t)}function ia(n){return function(t,e,r){var i=!1,o=0,a=null;oa(n,(function(n,t,e,s){if("function"==typeof n&&void 0===n.cid){i=!0,o++;var c,l=ca((function(t){var i;((i=t).__esModule||sa&&"Module"===i[Symbol.toStringTag])&&(t=t.default),n.resolved="function"==typeof t?t:bo.extend(t),e.components[s]=t,--o<=0&&r()})),u=ca((function(n){var t="Failed to resolve async component "+s+": "+n;a||(a=ea(n)?n:new Error(t),r(a))}));try{c=n(l,u)}catch(n){u(n)}if(c)if("function"==typeof c.then)c.then(l,u);else{var p=c.component;p&&"function"==typeof p.then&&p.then(l,u)}}})),i||r()}}function oa(n,t){return aa(n.map((function(n){return Object.keys(n.components).map((function(e){return t(n.components[e],n.instances[e],n,e)}))})))}function aa(n){return Array.prototype.concat.apply([],n)}var sa="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function ca(n){var t=!1;return function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];if(!t)return t=!0,n.apply(this,e)}}var la=function(n,t){this.router=n,this.base=function(n){if(!n)if(zo){var t=document.querySelector("base");n=(n=t&&t.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else n="/";"/"!==n.charAt(0)&&(n="/"+n);return n.replace(/\/$/,"")}(t),this.current=Wi,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function ua(n,t,e,r){var i=oa(n,(function(n,r,i,o){var a=function(n,t){"function"!=typeof n&&(n=bo.extend(n));return n.options[t]}(n,t);if(a)return Array.isArray(a)?a.map((function(n){return e(n,r,i,o)})):e(a,r,i,o)}));return aa(r?i.reverse():i)}function pa(n,t){if(t)return function(){return n.apply(t,arguments)}}la.prototype.listen=function(n){this.cb=n},la.prototype.onReady=function(n,t){this.ready?n():(this.readyCbs.push(n),t&&this.readyErrorCbs.push(t))},la.prototype.onError=function(n){this.errorCbs.push(n)},la.prototype.transitionTo=function(n,t,e){var r,i=this;try{r=this.router.match(n,this.current)}catch(n){throw this.errorCbs.forEach((function(t){t(n)})),n}var o=this.current;this.confirmTransition(r,(function(){i.updateRoute(r),t&&t(r),i.ensureURL(),i.router.afterHooks.forEach((function(n){n&&n(r,o)})),i.ready||(i.ready=!0,i.readyCbs.forEach((function(n){n(r)})))}),(function(n){e&&e(n),n&&!i.ready&&(ra(n,Jo.redirected)&&o===Wi||(i.ready=!0,i.readyErrorCbs.forEach((function(t){t(n)}))))}))},la.prototype.confirmTransition=function(n,t,e){var r=this,i=this.current;this.pending=n;var o,a,s=function(n){!ra(n)&&ea(n)&&(r.errorCbs.length?r.errorCbs.forEach((function(t){t(n)})):console.error(n)),e&&e(n)},c=n.matched.length-1,l=i.matched.length-1;if(Qi(n,i)&&c===l&&n.matched[c]===i.matched[l])return this.ensureURL(),n.hash&&Ro(this.router,i,n,!1),s(((a=na(o=i,n,Jo.duplicated,'Avoided redundant navigation to current location: "'+o.fullPath+'".')).name="NavigationDuplicated",a));var u=function(n,t){var e,r=Math.max(n.length,t.length);for(e=0;e<r&&n[e]===t[e];e++);return{updated:t.slice(0,e),activated:t.slice(e),deactivated:n.slice(e)}}(this.current.matched,n.matched),p=u.updated,f=u.deactivated,d=u.activated,h=[].concat(function(n){return ua(n,"beforeRouteLeave",pa,!0)}(f),this.router.beforeHooks,function(n){return ua(n,"beforeRouteUpdate",pa)}(p),d.map((function(n){return n.beforeEnter})),ia(d)),m=function(t,e){if(r.pending!==n)return s(Zo(i,n));try{t(n,i,(function(t){!1===t?(r.ensureURL(!0),s(function(n,t){return na(n,t,Jo.aborted,'Navigation aborted from "'+n.fullPath+'" to "'+t.fullPath+'" via a navigation guard.')}(i,n))):ea(t)?(r.ensureURL(!0),s(t)):"string"==typeof t||"object"==typeof t&&("string"==typeof t.path||"string"==typeof t.name)?(s(Xo(i,n)),"object"==typeof t&&t.replace?r.replace(t):r.push(t)):e(t)}))}catch(n){s(n)}};Yo(h,m,(function(){Yo(function(n){return ua(n,"beforeRouteEnter",(function(n,t,e,r){return function(n,t,e){return function(r,i,o){return n(r,i,(function(n){"function"==typeof n&&(t.enteredCbs[e]||(t.enteredCbs[e]=[]),t.enteredCbs[e].push(n)),o(n)}))}}(n,e,r)}))}(d).concat(r.router.resolveHooks),m,(function(){if(r.pending!==n)return s(Zo(i,n));r.pending=null,t(n),r.router.app&&r.router.app.$nextTick((function(){Ji(n)}))}))}))},la.prototype.updateRoute=function(n){this.current=n,this.cb&&this.cb(n)},la.prototype.setupListeners=function(){},la.prototype.teardown=function(){this.listeners.forEach((function(n){n()})),this.listeners=[],this.current=Wi,this.pending=null};var fa=function(n){function t(t,e){n.call(this,t,e),this._startLocation=da(this.base)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var t=this.router,e=t.options.scrollBehavior,r=Vo&&e;r&&this.listeners.push(Lo());var i=function(){var e=n.current,i=da(n.base);n.current===Wi&&i===n._startLocation||n.transitionTo(i,(function(n){r&&Ro(t,n,e,!0)}))};window.addEventListener("popstate",i),this.listeners.push((function(){window.removeEventListener("popstate",i)}))}},t.prototype.go=function(n){window.history.go(n)},t.prototype.push=function(n,t,e){var r=this,i=this.current;this.transitionTo(n,(function(n){Ko(to(r.base+n.fullPath)),Ro(r.router,n,i,!1),t&&t(n)}),e)},t.prototype.replace=function(n,t,e){var r=this,i=this.current;this.transitionTo(n,(function(n){Qo(to(r.base+n.fullPath)),Ro(r.router,n,i,!1),t&&t(n)}),e)},t.prototype.ensureURL=function(n){if(da(this.base)!==this.current.fullPath){var t=to(this.base+this.current.fullPath);n?Ko(t):Qo(t)}},t.prototype.getCurrentLocation=function(){return da(this.base)},t}(la);function da(n){var t=window.location.pathname,e=t.toLowerCase(),r=n.toLowerCase();return!n||e!==r&&0!==e.indexOf(to(r+"/"))||(t=t.slice(n.length)),(t||"/")+window.location.search+window.location.hash}var ha=function(n){function t(t,e,r){n.call(this,t,e),r&&function(n){var t=da(n);if(!/^\/#/.test(t))return window.location.replace(to(n+"/#"+t)),!0}(this.base)||ma()}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var t=this.router.options.scrollBehavior,e=Vo&&t;e&&this.listeners.push(Lo());var r=function(){var t=n.current;ma()&&n.transitionTo(ga(),(function(r){e&&Ro(n.router,r,t,!0),Vo||xa(r.fullPath)}))},i=Vo?"popstate":"hashchange";window.addEventListener(i,r),this.listeners.push((function(){window.removeEventListener(i,r)}))}},t.prototype.push=function(n,t,e){var r=this,i=this.current;this.transitionTo(n,(function(n){_a(n.fullPath),Ro(r.router,n,i,!1),t&&t(n)}),e)},t.prototype.replace=function(n,t,e){var r=this,i=this.current;this.transitionTo(n,(function(n){xa(n.fullPath),Ro(r.router,n,i,!1),t&&t(n)}),e)},t.prototype.go=function(n){window.history.go(n)},t.prototype.ensureURL=function(n){var t=this.current.fullPath;ga()!==t&&(n?_a(t):xa(t))},t.prototype.getCurrentLocation=function(){return ga()},t}(la);function ma(){var n=ga();return"/"===n.charAt(0)||(xa("/"+n),!1)}function ga(){var n=window.location.href,t=n.indexOf("#");return t<0?"":n=n.slice(t+1)}function va(n){var t=window.location.href,e=t.indexOf("#");return(e>=0?t.slice(0,e):t)+"#"+n}function _a(n){Vo?Ko(va(n)):window.location.hash=n}function xa(n){Vo?Qo(va(n)):window.location.replace(va(n))}var ya=function(n){function t(t,e){n.call(this,t,e),this.stack=[],this.index=-1}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.push=function(n,t,e){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index+1).concat(n),r.index++,t&&t(n)}),e)},t.prototype.replace=function(n,t,e){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index).concat(n),t&&t(n)}),e)},t.prototype.go=function(n){var t=this,e=this.index+n;if(!(e<0||e>=this.stack.length)){var r=this.stack[e];this.confirmTransition(r,(function(){var n=t.current;t.index=e,t.updateRoute(r),t.router.afterHooks.forEach((function(t){t&&t(r,n)}))}),(function(n){ra(n,Jo.duplicated)&&(t.index=e)}))}},t.prototype.getCurrentLocation=function(){var n=this.stack[this.stack.length-1];return n?n.fullPath:"/"},t.prototype.ensureURL=function(){},t}(la),wa=function(n){void 0===n&&(n={}),this.app=null,this.apps=[],this.options=n,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=Co(n.routes||[],this);var t=n.mode||"hash";switch(this.fallback="history"===t&&!Vo&&!1!==n.fallback,this.fallback&&(t="hash"),zo||(t="abstract"),this.mode=t,t){case"history":this.history=new fa(this,n.base);break;case"hash":this.history=new ha(this,n.base,this.fallback);break;case"abstract":this.history=new ya(this,n.base);break;default:0}},ba={currentRoute:{configurable:!0}};function ka(n,t){return n.push(t),function(){var e=n.indexOf(t);e>-1&&n.splice(e,1)}}wa.prototype.match=function(n,t,e){return this.matcher.match(n,t,e)},ba.currentRoute.get=function(){return this.history&&this.history.current},wa.prototype.init=function(n){var t=this;if(this.apps.push(n),n.$once("hook:destroyed",(function(){var e=t.apps.indexOf(n);e>-1&&t.apps.splice(e,1),t.app===n&&(t.app=t.apps[0]||null),t.app||t.history.teardown()})),!this.app){this.app=n;var e=this.history;if(e instanceof fa||e instanceof ha){var r=function(n){e.setupListeners(),function(n){var r=e.current,i=t.options.scrollBehavior;Vo&&i&&"fullPath"in n&&Ro(t,n,r,!1)}(n)};e.transitionTo(e.getCurrentLocation(),r,r)}e.listen((function(n){t.apps.forEach((function(t){t._route=n}))}))}},wa.prototype.beforeEach=function(n){return ka(this.beforeHooks,n)},wa.prototype.beforeResolve=function(n){return ka(this.resolveHooks,n)},wa.prototype.afterEach=function(n){return ka(this.afterHooks,n)},wa.prototype.onReady=function(n,t){this.history.onReady(n,t)},wa.prototype.onError=function(n){this.history.onError(n)},wa.prototype.push=function(n,t,e){var r=this;if(!t&&!e&&"undefined"!=typeof Promise)return new Promise((function(t,e){r.history.push(n,t,e)}));this.history.push(n,t,e)},wa.prototype.replace=function(n,t,e){var r=this;if(!t&&!e&&"undefined"!=typeof Promise)return new Promise((function(t,e){r.history.replace(n,t,e)}));this.history.replace(n,t,e)},wa.prototype.go=function(n){this.history.go(n)},wa.prototype.back=function(){this.go(-1)},wa.prototype.forward=function(){this.go(1)},wa.prototype.getMatchedComponents=function(n){var t=n?n.matched?n:this.resolve(n).route:this.currentRoute;return t?[].concat.apply([],t.matched.map((function(n){return Object.keys(n.components).map((function(t){return n.components[t]}))}))):[]},wa.prototype.resolve=function(n,t,e){var r=wo(n,t=t||this.history.current,e,this),i=this.match(r,t),o=i.redirectedFrom||i.fullPath;return{location:r,route:i,href:function(n,t,e){var r="hash"===e?"#"+t:t;return n?to(n+"/"+r):r}(this.history.base,o,this.mode),normalizedTo:r,resolved:i}},wa.prototype.getRoutes=function(){return this.matcher.getRoutes()},wa.prototype.addRoute=function(n,t){this.matcher.addRoute(n,t),this.history.current!==Wi&&this.history.transitionTo(this.history.getCurrentLocation())},wa.prototype.addRoutes=function(n){this.matcher.addRoutes(n),this.history.current!==Wi&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(wa.prototype,ba),wa.install=function n(t){if(!n.installed||bo!==t){n.installed=!0,bo=t;var e=function(n){return void 0!==n},r=function(n,t){var r=n.$options._parentVnode;e(r)&&e(r=r.data)&&e(r=r.registerRouteInstance)&&r(n,t)};t.mixin({beforeCreate:function(){e(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,r(this,this)},destroyed:function(){r(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("RouterView",Xi),t.component("RouterLink",$o);var i=t.config.optionMergeStrategies;i.beforeRouteEnter=i.beforeRouteLeave=i.beforeRouteUpdate=i.created}},wa.version="3.5.3",wa.isNavigationFailure=ra,wa.NavigationFailureType=Jo,wa.START_LOCATION=Wi,zo&&window.Vue&&window.Vue.use(wa);var $a=wa;e(207),e(152),e(232),e(117),e(234),e(118),e(119),e(235);function Sa(n){n.locales&&Object.keys(n.locales).forEach((function(t){n.locales[t].path=t})),Object.freeze(n)}e(62),e(77),e(103);function za(n){return(za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}var ja=e(54),Ta=(e(162),e(31),e(86),e(210),e(211),e(29),e(27),{NotFound:function(){return e.e(6).then(e.bind(null,419))},Layout:function(){return Promise.all([e.e(0),e.e(2)]).then(e.bind(null,418))}}),Ca={"v-7b757bff":function(){return e.e(8).then(e.bind(null,422))},"v-14d731a6":function(){return e.e(7).then(e.bind(null,423))},"v-50532a9c":function(){return e.e(9).then(e.bind(null,424))},"v-467f0776":function(){return e.e(10).then(e.bind(null,425))},"v-6cff0268":function(){return e.e(11).then(e.bind(null,426))},"v-16c65f6c":function(){return e.e(12).then(e.bind(null,427))},"v-1fb921c8":function(){return e.e(13).then(e.bind(null,428))},"v-79a75635":function(){return e.e(14).then(e.bind(null,429))},"v-fcb7d568":function(){return e.e(15).then(e.bind(null,430))},"v-66bdd3e8":function(){return e.e(16).then(e.bind(null,431))},"v-4ae56fbe":function(){return e.e(17).then(e.bind(null,432))},"v-75be7fd3":function(){return e.e(18).then(e.bind(null,433))},"v-0d5263ec":function(){return e.e(19).then(e.bind(null,434))},"v-4a574a03":function(){return e.e(23).then(e.bind(null,435))},"v-34f6f7a4":function(){return e.e(20).then(e.bind(null,436))},"v-cc890f28":function(){return e.e(21).then(e.bind(null,437))},"v-6695a75d":function(){return e.e(24).then(e.bind(null,438))},"v-33b03a91":function(){return e.e(25).then(e.bind(null,439))},"v-ee533d90":function(){return e.e(22).then(e.bind(null,440))}};function Ea(n){var t=Object.create(null);return function(e){return t[e]||(t[e]=n(e))}}var Pa=/-(\w)/g,Aa=Ea((function(n){return n.replace(Pa,(function(n,t){return t?t.toUpperCase():""}))})),Ia=/\B([A-Z])/g,Oa=Ea((function(n){return n.replace(Ia,"-$1").toLowerCase()})),Na=Ea((function(n){return n.charAt(0).toUpperCase()+n.slice(1)}));function qa(n,t){if(t)return n(t)?n(t):t.includes("-")?n(Na(Aa(t))):n(Na(t))||n(Oa(t))}var La=Object.assign({},Ta,Ca),Ra=function(n){return La[n]},Da=function(n){return Ca[n]},Ma=function(n){return Ta[n]},Ua=function(n){return Ii.component(n)};function Fa(n){return qa(Da,n)}function Ba(n){return qa(Ma,n)}function Ha(n){return qa(Ra,n)}function Ga(n){return qa(Ua,n)}function Wa(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return Promise.all(t.filter((function(n){return n})).map(function(){var n=Object(r.a)(regeneratorRuntime.mark((function n(t){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Ga(t)||!Ha(t)){n.next=5;break}return n.next=3,Ha(t)();case 3:e=n.sent,Ii.component(t,e.default);case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()))}function Va(n,t){"undefined"!=typeof window&&window.__VUEPRESS__&&(window.__VUEPRESS__[n]=t)}var Ka=e(114),Qa=(e(248),e(200),e(201),e(188)),Ya=e.n(Qa),Ja=e(189),Xa=e.n(Ja),Za={created:function(){if(this.siteMeta=this.$site.headTags.filter((function(n){return"meta"===Object(Ka.a)(n,1)[0]})).map((function(n){var t=Object(Ka.a)(n,2);t[0];return t[1]})),this.$ssrContext){var n=this.getMergedMetaTags();this.$ssrContext.title=this.$title,this.$ssrContext.lang=this.$lang,this.$ssrContext.pageMeta=(t=n)?t.map((function(n){var t="<meta";return Object.keys(n).forEach((function(e){t+=" ".concat(e,'="').concat(Xa()(n[e]),'"')})),t+">"})).join("\n    "):"",this.$ssrContext.canonicalLink=ts(this.$canonicalUrl)}var t},mounted:function(){this.currentMetaTags=Object(ja.a)(document.querySelectorAll("meta")),this.updateMeta(),this.updateCanonicalLink()},methods:{updateMeta:function(){document.title=this.$title,document.documentElement.lang=this.$lang;var n=this.getMergedMetaTags();this.currentMetaTags=es(n,this.currentMetaTags)},getMergedMetaTags:function(){var n=this.$page.frontmatter.meta||[];return Ya()([{name:"description",content:this.$description}],n,this.siteMeta,rs)},updateCanonicalLink:function(){ns(),this.$canonicalUrl&&document.head.insertAdjacentHTML("beforeend",ts(this.$canonicalUrl))}},watch:{$page:function(){this.updateMeta(),this.updateCanonicalLink()}},beforeDestroy:function(){es(null,this.currentMetaTags),ns()}};function ns(){var n=document.querySelector("link[rel='canonical']");n&&n.remove()}function ts(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n?'<link href="'.concat(n,'" rel="canonical" />'):""}function es(n,t){if(t&&Object(ja.a)(t).filter((function(n){return n.parentNode===document.head})).forEach((function(n){return document.head.removeChild(n)})),n)return n.map((function(n){var t=document.createElement("meta");return Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),document.head.appendChild(t),t}))}function rs(n){for(var t=0,e=["name","property","itemprop"];t<e.length;t++){var r=e[t];if(n.hasOwnProperty(r))return n[r]+r}return JSON.stringify(n)}e(116);var is=e(190),os={mounted:function(){window.addEventListener("scroll",this.onScroll)},methods:{onScroll:e.n(is)()((function(){this.setActiveHash()}),300),setActiveHash:function(){for(var n=this,t=[].slice.call(document.querySelectorAll(".sidebar-link")),e=[].slice.call(document.querySelectorAll(".header-anchor")).filter((function(n){return t.some((function(t){return t.hash===n.hash}))})),r=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),i=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),o=window.innerHeight+r,a=0;a<e.length;a++){var s=e[a],c=e[a+1],l=0===a&&0===r||r>=s.parentElement.offsetTop+10&&(!c||r<c.parentElement.offsetTop-10),u=decodeURIComponent(this.$route.hash);if(l&&u!==decodeURIComponent(s.hash)){var p=s;if(o===i)for(var f=a+1;f<e.length;f++)if(u===decodeURIComponent(e[f].hash))return;return this.$vuepress.$set("disableScrollBehavior",!0),void this.$router.replace(decodeURIComponent(p.hash),(function(){n.$nextTick((function(){n.$vuepress.$set("disableScrollBehavior",!1)}))}))}}}},beforeDestroy:function(){window.removeEventListener("scroll",this.onScroll)}},as=(e(104),e(84)),ss=e.n(as),cs=[Za,os,{mounted:function(){var n=this;ss.a.configure({showSpinner:!1}),this.$router.beforeEach((function(n,t,e){n.path===t.path||Ii.component(n.name)||ss.a.start(),e()})),this.$router.afterEach((function(){ss.a.done(),n.isSidebarOpen=!1}))}}],ls={name:"GlobalLayout",computed:{layout:function(){var n=this.getLayout();return Va("layout",n),Ii.component(n)}},methods:{getLayout:function(){if(this.$page.path){var n=this.$page.frontmatter.layout;return n&&(this.$vuepress.getLayoutAsyncComponent(n)||this.$vuepress.getVueComponent(n))?n:"Layout"}return"NotFound"}}},us=e(56),ps=Object(us.a)(ls,(function(){var n=this.$createElement;return(this._self._c||n)(this.layout,{tag:"component"})}),[],!1,null,null,null).exports;!function(n,t,e){var r;switch(t){case"components":n[t]||(n[t]={}),Object.assign(n[t],e);break;case"mixins":n[t]||(n[t]=[]),(r=n[t]).push.apply(r,Object(ja.a)(e));break;default:throw new Error("Unknown option name.")}}(ps,"mixins",cs);var fs=[{name:"v-7b757bff",path:"/nginx/01_nginxan-zhuang-ji-pei-zhi/1.nginxjian-jie.html",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-7b757bff").then(e)}},{path:"/Nginx/01_Nginxå®è£åéç½®/1.Nginxç®ä».html",redirect:"/nginx/01_nginxan-zhuang-ji-pei-zhi/1.nginxjian-jie.html"},{name:"v-14d731a6",path:"/javascript/tong-bu-yi-bu.html",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-14d731a6").then(e)}},{path:"/JavaScript/åæ­¥å¼æ­¥.html",redirect:"/javascript/tong-bu-yi-bu.html"},{name:"v-50532a9c",path:"/nginx/01_nginxan-zhuang-ji-pei-zhi/2.nginxan-zhuang.html",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-50532a9c").then(e)}},{path:"/Nginx/01_Nginxå®è£åéç½®/2.Nginxå®è£.html",redirect:"/nginx/01_nginxan-zhuang-ji-pei-zhi/2.nginxan-zhuang.html"},{name:"v-467f0776",path:"/nginx/01_nginxan-zhuang-ji-pei-zhi/3.nginxpei-zhi-wen-jian.html",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-467f0776").then(e)}},{path:"/Nginx/01_Nginxå®è£åéç½®/3.Nginxéç½®æä»¶.html",redirect:"/nginx/01_nginxan-zhuang-ji-pei-zhi/3.nginxpei-zhi-wen-jian.html"},{name:"v-6cff0268",path:"/nginx/02_nginxmo-kuai-guan-li/nginxchang-yong-mo-kuai-01.html",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-6cff0268").then(e)}},{path:"/Nginx/02_Nginxæ¨¡åç®¡ç/Nginxå¸¸ç¨æ¨¡å01.html",redirect:"/nginx/02_nginxmo-kuai-guan-li/nginxchang-yong-mo-kuai-01.html"},{name:"v-16c65f6c",path:"/nginx/02_nginxmo-kuai-guan-li/nginxchang-yong-mo-kuai-02.html",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-16c65f6c").then(e)}},{path:"/Nginx/02_Nginxæ¨¡åç®¡ç/Nginxå¸¸ç¨æ¨¡å02.html",redirect:"/nginx/02_nginxmo-kuai-guan-li/nginxchang-yong-mo-kuai-02.html"},{name:"v-1fb921c8",path:"/nginx/02_nginxmo-kuai-guan-li/nginxchang-yong-mo-kuai-03.html",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-1fb921c8").then(e)}},{path:"/Nginx/02_Nginxæ¨¡åç®¡ç/Nginxå¸¸ç¨æ¨¡å03.html",redirect:"/nginx/02_nginxmo-kuai-guan-li/nginxchang-yong-mo-kuai-03.html"},{name:"v-79a75635",path:"/nginx/03_lnmphuan-jing-bu-shu/1.nginxwang-zhan-fu-wu.html",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-79a75635").then(e)}},{path:"/Nginx/03_LNMPç¯å¢é¨ç½²/1.Nginxç½ç«æå¡.html",redirect:"/nginx/03_lnmphuan-jing-bu-shu/1.nginxwang-zhan-fu-wu.html"},{name:"v-fcb7d568",path:"/nginx/03_lnmphuan-jing-bu-shu/2.lnmphuan-jing-bu-shu.html",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-fcb7d568").then(e)}},{path:"/Nginx/03_LNMPç¯å¢é¨ç½²/2.LNMPç¯å¢é¨ç½².html",redirect:"/nginx/03_lnmphuan-jing-bu-shu/2.lnmphuan-jing-bu-shu.html"},{name:"v-66bdd3e8",path:"/nginx/04_nginxyou-hua-guan-li/1.-nginxyou-hua-ji-fang-dao-lian/nginxyou-hua-ji-fang-dao-lian.html",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-66bdd3e8").then(e)}},{path:"/Nginx/04_nginxä¼åç®¡ç/1. Nginxä¼ååé²çé¾/Nginxä¼ååé²çé¾.html",redirect:"/nginx/04_nginxyou-hua-guan-li/1.-nginxyou-hua-ji-fang-dao-lian/nginxyou-hua-ji-fang-dao-lian.html"},{name:"v-4ae56fbe",path:"/nginx/04_nginxyou-hua-guan-li/2.-nginx-rewrite/nginx-rewrite.html",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-4ae56fbe").then(e)}},{path:"/Nginx/04_nginxä¼åç®¡ç/2. Nginx Rewrite/Nginx Rewrite.html",redirect:"/nginx/04_nginxyou-hua-guan-li/2.-nginx-rewrite/nginx-rewrite.html"},{name:"v-75be7fd3",path:"/",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-75be7fd3").then(e)}},{path:"/index.html",redirect:"/"},{name:"v-0d5263ec",path:"/unicloud.html",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-0d5263ec").then(e)}},{path:"/uniCloud.html",redirect:"/unicloud.html"},{name:"v-4a574a03",path:"/han-shu-de-yi-xie-yan-jiu.html",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-4a574a03").then(e)}},{path:"/å½æ°çä¸äºç ç©¶.html",redirect:"/han-shu-de-yi-xie-yan-jiu.html"},{name:"v-34f6f7a4",path:"/dai-ma/chang-jian-css-dai-ma-ku.html",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-34f6f7a4").then(e)}},{path:"/ä»£ç /å¸¸è§ css ä»£ç åº.html",redirect:"/dai-ma/chang-jian-css-dai-ma-ku.html"},{name:"v-cc890f28",path:"/dai-ma/chang-jian-js-dai-ma-ku.html",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-cc890f28").then(e)}},{path:"/ä»£ç /å¸¸è§ js ä»£ç åº.html",redirect:"/dai-ma/chang-jian-js-dai-ma-ku.html"},{name:"v-6695a75d",path:"/shou-cang-wen-zhang/xie-gei-nu-peng-you-de-zhong-ji-qian-duan-mian-shi-mi-ji-han-xiang-xi-da-an-15kji-bie-.html",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-6695a75d").then(e)}},{path:"/æ¶èæç« /åç»å¥³æåçä¸­çº§åç«¯é¢è¯ç§ç±ï¼å«è¯¦ç»ç­æ¡ï¼15kçº§å«ï¼.html",redirect:"/shou-cang-wen-zhang/xie-gei-nu-peng-you-de-zhong-ji-qian-duan-mian-shi-mi-ji-han-xiang-xi-da-an-15kji-bie-.html"},{name:"v-33b03a91",path:"/mian-shi.html",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-33b03a91").then(e)}},{path:"/é¢è¯.html",redirect:"/mian-shi.html"},{name:"v-ee533d90",path:"/dai-ma/chang-jian-zheng-ze-dai-ma-ku.html",component:ps,beforeEnter:function(n,t,e){Wa("Layout","v-ee533d90").then(e)}},{path:"/ä»£ç /å¸¸è§ æ­£å ä»£ç åº.html",redirect:"/dai-ma/chang-jian-zheng-ze-dai-ma-ku.html"},{path:"*",component:ps}],ds={title:"ONEMUE Docs",description:"This is a Docs.",base:"/docs/",headTags:[],pages:[{title:"Nginxç®ä»",frontmatter:{},regularPath:"/Nginx/01_Nginx%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE/1.Nginx%E7%AE%80%E4%BB%8B.html",relativePath:"Nginx/01_Nginxå®è£åéç½®/1.Nginxç®ä».md",key:"v-7b757bff",path:"/nginx/01_nginxan-zhuang-ji-pei-zhi/1.nginxjian-jie.html",headers:[{level:2,title:"1. ä»ä¹æ¯Nginx",slug:"_1-ä»ä¹æ¯nginx",normalizedTitle:"1. ä»ä¹æ¯nginx",charIndex:14},{level:2,title:"2. Nginxè½åä»ä¹ï¼",slug:"_2-nginxè½åä»ä¹",normalizedTitle:"2. nginxè½åä»ä¹ï¼",charIndex:413},{level:3,title:"2.1 æ­£åä»£ç",slug:"_2-1-æ­£åä»£ç",normalizedTitle:"2.1 æ­£åä»£ç",charIndex:657},{level:3,title:"2.2 ååä»£ç",slug:"_2-2-ååä»£ç",normalizedTitle:"2.2 ååä»£ç",charIndex:810},{level:3,title:"2.3 Nginxååä»£çï¼ Webæå¡å¨çè°åº¦å¨",slug:"_2-3-nginxååä»£ç-webæå¡å¨çè°åº¦å¨",normalizedTitle:"2.3 nginxååä»£çï¼ webæå¡å¨çè°åº¦å¨",charIndex:1e3},{level:3,title:"2.4 ååä»£ççä½ç¨",slug:"_2-4-ååä»£ççä½ç¨",normalizedTitle:"2.4 ååä»£ççä½ç¨",charIndex:1330},{level:2,title:"3. Nginxæ ¸å¿ç¹ç¹",slug:"_3-nginxæ ¸å¿ç¹ç¹",normalizedTitle:"3. nginxæ ¸å¿ç¹ç¹",charIndex:1488},{level:3,title:"3.1 è·¨å¹³å°",slug:"_3-1-è·¨å¹³å°",normalizedTitle:"3.1 è·¨å¹³å°",charIndex:1505},{level:3,title:"3.2 éç½®å¼å¸¸ç®å",slug:"_3-2-éç½®å¼å¸¸ç®å",normalizedTitle:"3.2 éç½®å¼å¸¸ç®å",charIndex:1553},{level:3,title:"3.3 éé»å¡ãé«å¹¶åè¿æ¥",slug:"_3-3-éé»å¡ãé«å¹¶åè¿æ¥",normalizedTitle:"3.3 éé»å¡ãé«å¹¶åè¿æ¥",charIndex:1576},{level:3,title:"3.4 äºä»¶é©±å¨",slug:"_3-4-äºä»¶é©±å¨",normalizedTitle:"3.4 äºä»¶é©±å¨",charIndex:1981},{level:3,title:"3.5 æ»ç»ï¼",slug:"_3-5-æ»ç»",normalizedTitle:"3.5 æ»ç»ï¼",charIndex:2595}],headersStr:"1. ä»ä¹æ¯Nginx 2. Nginxè½åä»ä¹ï¼ 2.1 æ­£åä»£ç 2.2 ååä»£ç 2.3 Nginxååä»£çï¼ Webæå¡å¨çè°åº¦å¨ 2.4 ååä»£ççä½ç¨ 3. Nginxæ ¸å¿ç¹ç¹ 3.1 è·¨å¹³å° 3.2 éç½®å¼å¸¸ç®å 3.3 éé»å¡ãé«å¹¶åè¿æ¥ 3.4 äºä»¶é©±å¨ 3.5 æ»ç»ï¼",content:"# Nginxç®ä»\n\n\n# 1. ä»ä¹æ¯Nginx\n\nNginxæ¯ä¸ä¸ªé«æ§è½çHTTPåååä»£çæå¡å¨ï¼ä¹æ¯ä¸ä¸ªIMAP/POP3/SMTPä»£çæå¡å¨ã\n\nNginxæ¯ä¸æ¬¾è½»éçº§çWebæå¡å¨ååä»£çæå¡å¨ä»¥åçµå­é®ä»¶ä»£çæå¡å¨ï¼å¹¶å¨ä¸ä¸ªBSD-likeåè®®ä¸åè¡ãç±ä¿ç½æ¯çç¨åºè®¾è®¡å¸lgor Sysoevæå¼åï¼ä¾ä¿å½å¤§åçå¥å£ç½ç«åæç´¢å¼æRamblerä½¿ç¨ãå¶ç¹ç¹æ¯å æåå­å°ï¼å¹¶åè½åå¼ºï¼äºå®ä¸nginxçå¹¶åè½åç¡®å®å¨åç±»åçç½é¡µæå¡å¨ä¸­è¡¨ç°è¾å¥½ã\n\nNginxç¸è¾äºApache\\lighttpdå·æå æåå­å°ï¼ç¨³å®æ§é«ç­ä¼å¿ï¼å¹¶ä¸ä¾é å¹¶åè½åå¼ºï¼ä¸°å¯çæ¨¡ååºä»¥ååå¥½çµæ´»çéç½®èé»åãå¨Linuxæä½ç³»ç»ä¸ï¼nginxä½¿ç¨epolläºä»¶æ¨¡å,å¾çäºæ­¤ï¼nginxå¨Linuxæä½ç³»ç»ä¸æçç¸å½é«ãåæ¶Nginxå¨OpenBSDæFreeBSDæä½ç³»ç»ä¸éç¨ç±»ä¼¼äºEpollçé«æäºä»¶æ¨¡åkqueueã\n\n\n# 2. Nginxè½åä»ä¹ï¼\n\n1.HTTPæå¡å¨ ï¼åå«å¨éåç¦»ï¼\n\n2.ååä»£ç\n\n3.è´è½½åè¡¡\n\n * round-robin( [ËrÉËbÉªn]) è½®è¯¢\n * least-connected æå°è¿æ¥\n * ip-hash IPåå¸\n * Weighted load balancingï¼[ËbÃ¦lÉnsÉªÅ]ï¼ å æè´è½½å¹³è¡¡\n * fair (å¬å¹³ç)ï¼ç¬¬ä¸æ¹ï¼æºè½è°æ´åº¦ç®æ³\n * url_hash (ç¬¬ä¸æ¹) æç§è®¿é®çurlçhashç»æåéè¯·æ±\n\n4.æ­£åä»£ç\n\n\n# 2.1 æ­£åä»£ç\n\nç¨äºä»£çåé¨ç½ç»å¯¹Internetçè¿æ¥è¯·æ±ï¼å¦VPN/NAT),å®¢æ·ç«¯æå®ä»£çæå¡å¨,å¹¶å°æ¬æ¥è¦ç´æ¥åéç»ç®æ Webæå¡å¨çHTTPè¯·æ±ååéå°ä»£çæå¡å¨ä¸ï¼ç¶åç±ä»£çæå¡å¨å»è®¿é®Webæå¡å¨ï¼å¹¶å°Webæå¡å¨çResponsåä¼ ç»å®¢æç«¯ã\n\næ­£åä»£çæ¯ä¸ºå®¢æ·ç«¯æ¹æä¾æå¡ç\n\n\n# 2.2 ååä»£ç\n\nä¸æ­£åä»£çç¸åï¼å¦æå±åç½åInternet æä¾èµæºï¼å¹¶è®© lnternet ä¸çå¶ä»ç¨æ·å¯ä»¥è®¿é®å±åç½åèµæºï¼ä¹å¯ä»¥è®¾ç½®ä¸ä¸ªä»£çæå¡å¨ï¼å®æä¾çæå¡å¨å°±æ¯ååä»£çãååä»£çæå¡å¨æ¥åæ¥èªInternetçè¿æ¥ï¼ç¶åå°è¯·æ±è½¬åç»åé¨ç½ç»ä¸çæå¡å¨ï¼å¹¶å°Responseåä¼ ç» lnternet ä¸è¯·æ±è¿æ¥çå®¢æ·ç«¯ã\n\nååä»£çæ¯ä¸ºæå¡å¨æ¹æä¾æå¡ç\n\n\n# 2.3 Nginxååä»£çï¼ Webæå¡å¨çè°åº¦å¨\n\nååä»£ç(Reverse Proxy) æ¹å¼æ¯æä»¥ä»£çæå¡å¨æ¥æ¥åå®¢æ·ç«¯çè¿æ¥è¯·æ±ï¼ç¶åå°è¯·æ±è½¬åç»ç½ç»ä¸çwebæå¡å¨(å¯è½æ¯apacheã nginxã tomcatã iisç­) , å¹¶å°ä»webæå¡å¨ä¸å¾å°çç»æè¿åç»è¯·æ±è¿æ¥çå®¢æ·ç«¯ï¼æ­¤æ¶ä»£çæå¡å¨å¯¹å¤å°±è¡¨ç°ä¸ºä¸ä¸ªæå¡å¨ã\n\nååä»£çæå¡å¨ä»£çç½ç«Webæå¡å¨æ¥æ¶Httpè¯·æ±, å¯¹è¯·æ±è¿è¡è½¬åãèä¸nginxä½ä¸ºååä»£çæå¡å¨å¯ä»¥æ ¹æ®ç¨æ·è¯·æ±çåå®¹æè¯·æ±è½¬åç»åç«¯ä¸åçwebæå¡å¨ï¼ä¾å¦éå¨åç¦»ï¼åä¾å¦å¨nginxä¸åå»ºå¤ä¸ªèæä¸»æºï¼è¿æ ·å°±æåçåå°äºå¨æµè§å¨ä¸­è¾å¥ä¸ååå(url) çæ¶åè®¿é®åç«¯çä¸åwebæå¡å¨æwebç¾¤éã\n\n\n# 2.4 ååä»£ççä½ç¨\n\n * ä¿æ¤ç½ç«å®å¨ï¼ ä»»ä½æ¥èªInternetçè¯·æ±é½å¿é¡»åç»è¿ä»£çæå¡å¨ï¼\n * éè¿éç½®ç¼å­åè½å éWebè¯·æ±ï¼å¯ä»¥ç¼å­çå®Webæå¡å¨ä¸çæäºéæèµæºï¼ åè½»çå®webæå¡å¨çè´è½½ååï¼\n * å®ç°è´è½½åè¡¡ï¼åå½è´è½½åè¡¡æå¡å¨åè¡¡å°ååè¯·æ±ï¼å¹³åéç¾¤ä¸­åä¸ªæå¡å¨çè´è½½ååï¼\n\n\n# 3. Nginxæ ¸å¿ç¹ç¹\n\n\n# 3.1 è·¨å¹³å°\n\nNginx å¯ä»¥å¨å¤§å¤æ°OSç¼è¯è¿è¡ï¼èä¸ä¹æwindowsççæ¬ï¼\n\n\n# 3.2 éç½®å¼å¸¸ç®å\n\néå¸¸å®¹æä¸æ\n\n\n# 3.3 éé»å¡ãé«å¹¶åè¿æ¥\n\nå®æ¹æµè¯è½å¤æ¯æ5ä¸å¹¶åè¿æ¥ï¼å¨å®éçäº§ç¯å¢ä¸­è·å°2 ~ 3ä¸å¹¶åè¿æ¥æ°ã(è¿å¾çäºNginxä½¿ç¨äºææ°çepollæ¨¡å) ;\n\næ³¨ï¼å¯¹äºä¸ä¸ä¸ªWebæå¡å¨æ¥è¯´ï¼é¦åçä¸ä¸ªè¯·æ±çåºæ¬è¿ç¨: å»ºç«è¿æ¥ââæ¥æ¶æ°æ®ââåéæ°æ®ï¼å¨ç³»ç»åºå±çæ¥ï¼ä¸è¿°è¿ç¨ (å»ºç«è¿æ¥ââæ¥æ¶æ°æ®ââåéæ°æ®) å¨ç³»ç»åºå±å°±æ¯è¯»åäºä»¶ã\n\nå¦æéç¨é»å¡è°ç¨çæ¹å¼ï¼å½è¯»åäºä»¶æ²¡æåå¤å¥½æ¶ï¼é£ä¹å°±åªè½ç­å¾ï¼å½åçº¿ç¨è¢«æèµ·ï¼ç­äºä»¶åå¤å¥½äºï¼æè½è¿è¡è¯»åäºä»¶ã\n\nå¦æéç¨éé»å¡è°ç¨çæ¹å¼ï¼äºä»¶é©¬ä¸è¿åï¼åè¯ä½ äºä»¶è¿æ²¡åå¤å¥½å¢ï¼è¿ä¼åæ¥å§ãè¿ä¸ä¼ï¼åæ¥æ£æ¥ä¸ä¸äºä»¶ï¼ç´å°äºä»¶åå¤å¥½äºä¸ºæ­¢ï¼å¨è¿æé´ï¼ä½ å°±å¯ä»¥åå»åå¶å®äºæï¼ç¶ååæ¥ççäºä»¶å¥½äºæ²¡ãè½ç¶ä¸é»å¡äºï¼ä½ä½ å¾ä¸æ¶å°è¿æ¥æ£æ¥ä¸ä¸äºä»¶çç¶æ,ä½ å¯ä»¥åæ´å¤çäºæäºï¼ä½å¸¦æ¥çå¼éä¹æ¯ä¸å°çãéé»å¡è°ç¨æå¨ä¸è½ç«å»å¾å°ç»æä¹åï¼è¯¥è°ç¨ä¸ä¼é»å¡å½åçº¿ç¨\n\n\n# 3.4 äºä»¶é©±å¨\n\néä¿¡æºå¶éç¨epollæ¨¡åï¼æ¯ææ´å¤§çå¹¶åè¿æ¥ã\n\néé»å¡éè¿ä¸æ­æ£æ¥äºä»¶çç¶ææ¥å¤æ­æ¯å¦è¿è¡è¯»åæä½ï¼è¿æ ·å¸¦æ¥çå¼éå¾å¤§ï¼å æ­¤å°±æäºå¼æ­¥éé»å¡äºä»¶å¤çæºå¶ãè¿ç§æºå¶è®©ä½ å¯ä»¥åæ¶çæ§å¤ä¸ªäºä»¶ï¼è°ç¨ä»ä»¬æ¯éé»å¡çï¼ä½å¯ä»¥è®¾ç½®è¶æ¶æ¶é´ï¼å¨è¶æ¶æ¶é´ä¹åï¼å¦ææäºä»¶åå¤å¥½äºï¼å°±è¿åãè¿ç§æºå¶è§£å³äºä¸é¢é»å¡è°ç¨ä¸éé»å¡è°ç¨çä¸¤ä¸ªé®é¢ã\n\nä»¥epolæ¨¡åä¸ºä¾:å½äºä»¶æ²¡æåå¤å¥½æ¶ï¼å°±æ¾å¥epoll(éå)éé¢ãå¦ææäºä»¶åå¤å¥½äºï¼é£ä¹å°±å»å¤çï¼å½äºä»¶æ²¡æåå¤å¥½æ¶ï¼æå¨epolléé¢ç­çãè¿æ ·ï¼æä»¬å°±å¯ä»¥å¹¶åå¤çå¤§éçå¹¶åäºï¼å½ç¶ï¼è¿éçå¹¶åè¯·æ±ï¼æ¯ææªå¤çå®çè¯·æ±ãçº¿ç¨åªæä¸ ä¸ªï¼æä»¥åæ¶è½å¤ççè¯·æ±å½ç¶åªæä¸ä¸ªäºï¼åªæ¯å¨è¯·æ±ä¹é´è¿è¡ä¸æ­å°åæ¢èå·²ï¼åæ¢ä¹æ¯å ä¸ºå¼æ­¥äºä»¶æ«åå¤å¥½ï¼èä¸»å¨è®©åºçãè¿éçåæ¢æ¯æ²¡æä»»ä½ä»£ä»·ï¼ä½ å¯ä»¥çè§£ä¸ºå¾ªç¯å¤çå¤ä¸ªåå¤å¥½çäºä»¶ã\n\nåå¤çº¿ç¨æ¹å¼ç¸æ¯ï¼è¿ç§äºä»¶å¤çæ¹å¼æ¯æå¾å¤§çä¼å¿çï¼ä¸éè¦åå»ºçº¿ç¨ï¼æ¯ä¸ªè¯·æ±å ç¨çåå­ä¹å¾å°ï¼æ²¡æä¸ä¸æåæ¢ï¼äºä»¶å¤çéå¸¸çè½»éçº§ï¼å¹¶åæ°åå¤ä¹ä¸ä¼å¯¼è´æ è°çèµæºæµªè´¹(ä¸ä¸æåæ¢)ãå¯¹äºapacheæå¡å¨ï¼æ¯ä¸ªè¯·æ±ä¼ç¬å ä¸ä¸ªå·¥ä½çº¿ç¨ï¼å½å¹¶åæ°ä¸å°å åæ¶ï¼å°±åæ¶æå åççº¿ç¨å¨å¤çè¯·æ±äºãè¿å¯¹æä½ç³»ç»æ¥è¯´ï¼æ¯ä¸ªä¸å°çææï¼å ä¸ºçº¿ç¨å¸¦æ¥çåå­å ç¨éå¸¸å¤§ï¼çº¿ç¨çä¸ä¸æåæ¢å¸¦æ¥çcpuå¼éå¾å¤§ï¼èªç¶æ§è½å°±ä¸ä¸å»ï¼ä»èå¯¼è´å¨é«å¹¶ååºæ¯ä¸æ§è½ä¸éä¸¥éã\n\n\n# 3.5 æ»ç»ï¼\n\néè¿å¼æ­¥éé»å¡çäºæå¤çæºå¶ï¼Nginxå®ç°ç±è¿ç¨å¾ªç¯å¤çå¤ä¸ªåå¤å¥½çäºä»¶ï¼ä»èå®ç°é«å¹¶ååè½»éåã\n\n# 3.5.1 Master/Workerç»æ\n\nä¸ä¸ªmasterè¿ç¨ï¼çæä¸ä¸ªæå¤ä¸ªworkerè¿ç¨\n\n\n\nMaster-Workerè®¾è®¡æ¨¡å¼ä¸»è¦åå«ä¸¤ä¸ªä¸»è¦ç»ä»¶ Master åWorkerï¼ Master ç»´æ¤çWorkeréåï¼å°è¯·æ±ä¸åå°å¤ä¸ªWorkerå¹¶è¡æ§è¡ï¼Workerä¸»è¦è¿è¡å®éé»è¾è®¡ç®ï¼å¹¶å°ç»æè¿åç»Masterã\n\n 1. Nginxå¨å¯å¨åï¼ä¼æä¸ä¸ªmaster è¿ç¨åå¤ä¸ªç¸äºç¬ç«ç worker è¿ç¨ã\n\n 2. æ¥æ¶æ¥èªå¤ççä¿¡å·ï¼åå workerè¿ç¨åéä¿¡å·ï¼æ¯ä¸ªè¿ç¨é½æå¯è½æ¥å¤çè¿ä¸ªè¿æ¥ã\n\n 3. masterè¿ç¨è½çæ§ workerè¿ç¨çè¿è¡ç¶æï¼å½ workerè¿ç¨éåºå(å¼å¸¸æåµä¸)ï¼ä¼èªå¨å¯å¨æ°ç workerè¿ç¨ã\n\n 4. å°workerè¿ç¨çæ°éè®¾ç½®æç­äºcpuçæ ¸æ°æ¯è¾åçã\n    \n    æ¥çæ ¸æ°å½ä»¤cat /proc/cpuinfo|grep -c 'processor'\n    \n    -c è¿åå­ç¬¦ä¸²çä¸ªæ°\n\nnginxéç¨è¿ç§è¿ç¨æ¨¡åæä»ä¹å¥½å¤? éç¨ç¬ç«çè¿ç¨ï¼å¯ä»¥è®©äºç¸ä¹é´ä¸ä¼å½±åï¼ä¸ä¸ªè¿ç¨éåºåï¼å¶å®è¿ç¨è¿å¨å·¥ä½ï¼æå¡ä¸ä¼ä¸­æ­ï¼Masterè¿ç¨åå¾å¿«éæ°å¯å¨æ°ç Workerè¿ç¨ãå½ç¶, Workerè¿ç¨çå¼å¸¸éåºï¼è¯å®æ¯ç¨åºæbugäºï¼å¼å¸¸éåºï¼ä¼å¯¼è´å½åWorkerä¸çææè¯·æ±å¤±è´¥ï¼ä¸è¿ä¸ä¼å½±åå°ææè¯·æ±,æä»¥éä½äºé£é©ã\n\n# 3.5.2 åå­æ¶èå°\n\nå¤çå¤§å¹¶åçè¯·æ±åå­æ¶èéå¸¸å°ãå¨3ä¸å¹¶åè¿æ¥ä¸ï¼å¼å¯ç10ä¸ªNginx è¿ç¨ææ¶è150Måå­ï¼15M*10=150M)\n\n# 3.5.3 åç½®çå¥åº·æ£æ¥åè½\n\nå¦æNginxä»£ççåç«¯çæå°Webæå¡å¨å®æºäºï¼ä¸ä¼å½±ååç«¯è®¿é®ã\n\n# 3.5.4 èçå¸¦å®½\n\næ¯æGZIPåç¼©ï¼å¯ä»¥æ·»å æµè§å¨æ¬å°ç¼å­çHeaderå¤´ã\n\n# 3.5.5 ç¨³å®æ§é«\n\nç¨äºååä»£çï¼å®æºçæ¦çå¾®ä¹å¶å¾®ã",normalizedContent:"# nginxç®ä»\n\n\n# 1. ä»ä¹æ¯nginx\n\nnginxæ¯ä¸ä¸ªé«æ§è½çhttpåååä»£çæå¡å¨ï¼ä¹æ¯ä¸ä¸ªimap/pop3/smtpä»£çæå¡å¨ã\n\nnginxæ¯ä¸æ¬¾è½»éçº§çwebæå¡å¨ååä»£çæå¡å¨ä»¥åçµå­é®ä»¶ä»£çæå¡å¨ï¼å¹¶å¨ä¸ä¸ªbsd-likeåè®®ä¸åè¡ãç±ä¿ç½æ¯çç¨åºè®¾è®¡å¸lgor sysoevæå¼åï¼ä¾ä¿å½å¤§åçå¥å£ç½ç«åæç´¢å¼æramblerä½¿ç¨ãå¶ç¹ç¹æ¯å æåå­å°ï¼å¹¶åè½åå¼ºï¼äºå®ä¸nginxçå¹¶åè½åç¡®å®å¨åç±»åçç½é¡µæå¡å¨ä¸­è¡¨ç°è¾å¥½ã\n\nnginxç¸è¾äºapache\\lighttpdå·æå æåå­å°ï¼ç¨³å®æ§é«ç­ä¼å¿ï¼å¹¶ä¸ä¾é å¹¶åè½åå¼ºï¼ä¸°å¯çæ¨¡ååºä»¥ååå¥½çµæ´»çéç½®èé»åãå¨linuxæä½ç³»ç»ä¸ï¼nginxä½¿ç¨epolläºä»¶æ¨¡å,å¾çäºæ­¤ï¼nginxå¨linuxæä½ç³»ç»ä¸æçç¸å½é«ãåæ¶nginxå¨openbsdæfreebsdæä½ç³»ç»ä¸éç¨ç±»ä¼¼äºepollçé«æäºä»¶æ¨¡åkqueueã\n\n\n# 2. nginxè½åä»ä¹ï¼\n\n1.httpæå¡å¨ ï¼åå«å¨éåç¦»ï¼\n\n2.ååä»£ç\n\n3.è´è½½åè¡¡\n\n * round-robin( [ËrÉËbÉªn]) è½®è¯¢\n * least-connected æå°è¿æ¥\n * ip-hash ipåå¸\n * weighted load balancingï¼[ËbÃ¦lÉnsÉªÅ]ï¼ å æè´è½½å¹³è¡¡\n * fair (å¬å¹³ç)ï¼ç¬¬ä¸æ¹ï¼æºè½è°æ´åº¦ç®æ³\n * url_hash (ç¬¬ä¸æ¹) æç§è®¿é®çurlçhashç»æåéè¯·æ±\n\n4.æ­£åä»£ç\n\n\n# 2.1 æ­£åä»£ç\n\nç¨äºä»£çåé¨ç½ç»å¯¹internetçè¿æ¥è¯·æ±ï¼å¦vpn/nat),å®¢æ·ç«¯æå®ä»£çæå¡å¨,å¹¶å°æ¬æ¥è¦ç´æ¥åéç»ç®æ webæå¡å¨çhttpè¯·æ±ååéå°ä»£çæå¡å¨ä¸ï¼ç¶åç±ä»£çæå¡å¨å»è®¿é®webæå¡å¨ï¼å¹¶å°webæå¡å¨çresponsåä¼ ç»å®¢æç«¯ã\n\næ­£åä»£çæ¯ä¸ºå®¢æ·ç«¯æ¹æä¾æå¡ç\n\n\n# 2.2 ååä»£ç\n\nä¸æ­£åä»£çç¸åï¼å¦æå±åç½åinternet æä¾èµæºï¼å¹¶è®© lnternet ä¸çå¶ä»ç¨æ·å¯ä»¥è®¿é®å±åç½åèµæºï¼ä¹å¯ä»¥è®¾ç½®ä¸ä¸ªä»£çæå¡å¨ï¼å®æä¾çæå¡å¨å°±æ¯ååä»£çãååä»£çæå¡å¨æ¥åæ¥èªinternetçè¿æ¥ï¼ç¶åå°è¯·æ±è½¬åç»åé¨ç½ç»ä¸çæå¡å¨ï¼å¹¶å°responseåä¼ ç» lnternet ä¸è¯·æ±è¿æ¥çå®¢æ·ç«¯ã\n\nååä»£çæ¯ä¸ºæå¡å¨æ¹æä¾æå¡ç\n\n\n# 2.3 nginxååä»£çï¼ webæå¡å¨çè°åº¦å¨\n\nååä»£ç(reverse proxy) æ¹å¼æ¯æä»¥ä»£çæå¡å¨æ¥æ¥åå®¢æ·ç«¯çè¿æ¥è¯·æ±ï¼ç¶åå°è¯·æ±è½¬åç»ç½ç»ä¸çwebæå¡å¨(å¯è½æ¯apacheã nginxã tomcatã iisç­) , å¹¶å°ä»webæå¡å¨ä¸å¾å°çç»æè¿åç»è¯·æ±è¿æ¥çå®¢æ·ç«¯ï¼æ­¤æ¶ä»£çæå¡å¨å¯¹å¤å°±è¡¨ç°ä¸ºä¸ä¸ªæå¡å¨ã\n\nååä»£çæå¡å¨ä»£çç½ç«webæå¡å¨æ¥æ¶httpè¯·æ±, å¯¹è¯·æ±è¿è¡è½¬åãèä¸nginxä½ä¸ºååä»£çæå¡å¨å¯ä»¥æ ¹æ®ç¨æ·è¯·æ±çåå®¹æè¯·æ±è½¬åç»åç«¯ä¸åçwebæå¡å¨ï¼ä¾å¦éå¨åç¦»ï¼åä¾å¦å¨nginxä¸åå»ºå¤ä¸ªèæä¸»æºï¼è¿æ ·å°±æåçåå°äºå¨æµè§å¨ä¸­è¾å¥ä¸ååå(url) çæ¶åè®¿é®åç«¯çä¸åwebæå¡å¨æwebç¾¤éã\n\n\n# 2.4 ååä»£ççä½ç¨\n\n * ä¿æ¤ç½ç«å®å¨ï¼ ä»»ä½æ¥èªinternetçè¯·æ±é½å¿é¡»åç»è¿ä»£çæå¡å¨ï¼\n * éè¿éç½®ç¼å­åè½å éwebè¯·æ±ï¼å¯ä»¥ç¼å­çå®webæå¡å¨ä¸çæäºéæèµæºï¼ åè½»çå®webæå¡å¨çè´è½½ååï¼\n * å®ç°è´è½½åè¡¡ï¼åå½è´è½½åè¡¡æå¡å¨åè¡¡å°ååè¯·æ±ï¼å¹³åéç¾¤ä¸­åä¸ªæå¡å¨çè´è½½ååï¼\n\n\n# 3. nginxæ ¸å¿ç¹ç¹\n\n\n# 3.1 è·¨å¹³å°\n\nnginx å¯ä»¥å¨å¤§å¤æ°osç¼è¯è¿è¡ï¼èä¸ä¹æwindowsççæ¬ï¼\n\n\n# 3.2 éç½®å¼å¸¸ç®å\n\néå¸¸å®¹æä¸æ\n\n\n# 3.3 éé»å¡ãé«å¹¶åè¿æ¥\n\nå®æ¹æµè¯è½å¤æ¯æ5ä¸å¹¶åè¿æ¥ï¼å¨å®éçäº§ç¯å¢ä¸­è·å°2 ~ 3ä¸å¹¶åè¿æ¥æ°ã(è¿å¾çäºnginxä½¿ç¨äºææ°çepollæ¨¡å) ;\n\næ³¨ï¼å¯¹äºä¸ä¸ä¸ªwebæå¡å¨æ¥è¯´ï¼é¦åçä¸ä¸ªè¯·æ±çåºæ¬è¿ç¨: å»ºç«è¿æ¥ââæ¥æ¶æ°æ®ââåéæ°æ®ï¼å¨ç³»ç»åºå±çæ¥ï¼ä¸è¿°è¿ç¨ (å»ºç«è¿æ¥ââæ¥æ¶æ°æ®ââåéæ°æ®) å¨ç³»ç»åºå±å°±æ¯è¯»åäºä»¶ã\n\nå¦æéç¨é»å¡è°ç¨çæ¹å¼ï¼å½è¯»åäºä»¶æ²¡æåå¤å¥½æ¶ï¼é£ä¹å°±åªè½ç­å¾ï¼å½åçº¿ç¨è¢«æèµ·ï¼ç­äºä»¶åå¤å¥½äºï¼æè½è¿è¡è¯»åäºä»¶ã\n\nå¦æéç¨éé»å¡è°ç¨çæ¹å¼ï¼äºä»¶é©¬ä¸è¿åï¼åè¯ä½ äºä»¶è¿æ²¡åå¤å¥½å¢ï¼è¿ä¼åæ¥å§ãè¿ä¸ä¼ï¼åæ¥æ£æ¥ä¸ä¸äºä»¶ï¼ç´å°äºä»¶åå¤å¥½äºä¸ºæ­¢ï¼å¨è¿æé´ï¼ä½ å°±å¯ä»¥åå»åå¶å®äºæï¼ç¶ååæ¥ççäºä»¶å¥½äºæ²¡ãè½ç¶ä¸é»å¡äºï¼ä½ä½ å¾ä¸æ¶å°è¿æ¥æ£æ¥ä¸ä¸äºä»¶çç¶æ,ä½ å¯ä»¥åæ´å¤çäºæäºï¼ä½å¸¦æ¥çå¼éä¹æ¯ä¸å°çãéé»å¡è°ç¨æå¨ä¸è½ç«å»å¾å°ç»æä¹åï¼è¯¥è°ç¨ä¸ä¼é»å¡å½åçº¿ç¨\n\n\n# 3.4 äºä»¶é©±å¨\n\néä¿¡æºå¶éç¨epollæ¨¡åï¼æ¯ææ´å¤§çå¹¶åè¿æ¥ã\n\néé»å¡éè¿ä¸æ­æ£æ¥äºä»¶çç¶ææ¥å¤æ­æ¯å¦è¿è¡è¯»åæä½ï¼è¿æ ·å¸¦æ¥çå¼éå¾å¤§ï¼å æ­¤å°±æäºå¼æ­¥éé»å¡äºä»¶å¤çæºå¶ãè¿ç§æºå¶è®©ä½ å¯ä»¥åæ¶çæ§å¤ä¸ªäºä»¶ï¼è°ç¨ä»ä»¬æ¯éé»å¡çï¼ä½å¯ä»¥è®¾ç½®è¶æ¶æ¶é´ï¼å¨è¶æ¶æ¶é´ä¹åï¼å¦ææäºä»¶åå¤å¥½äºï¼å°±è¿åãè¿ç§æºå¶è§£å³äºä¸é¢é»å¡è°ç¨ä¸éé»å¡è°ç¨çä¸¤ä¸ªé®é¢ã\n\nä»¥epolæ¨¡åä¸ºä¾:å½äºä»¶æ²¡æåå¤å¥½æ¶ï¼å°±æ¾å¥epoll(éå)éé¢ãå¦ææäºä»¶åå¤å¥½äºï¼é£ä¹å°±å»å¤çï¼å½äºä»¶æ²¡æåå¤å¥½æ¶ï¼æå¨epolléé¢ç­çãè¿æ ·ï¼æä»¬å°±å¯ä»¥å¹¶åå¤çå¤§éçå¹¶åäºï¼å½ç¶ï¼è¿éçå¹¶åè¯·æ±ï¼æ¯ææªå¤çå®çè¯·æ±ãçº¿ç¨åªæä¸ ä¸ªï¼æä»¥åæ¶è½å¤ççè¯·æ±å½ç¶åªæä¸ä¸ªäºï¼åªæ¯å¨è¯·æ±ä¹é´è¿è¡ä¸æ­å°åæ¢èå·²ï¼åæ¢ä¹æ¯å ä¸ºå¼æ­¥äºä»¶æ«åå¤å¥½ï¼èä¸»å¨è®©åºçãè¿éçåæ¢æ¯æ²¡æä»»ä½ä»£ä»·ï¼ä½ å¯ä»¥çè§£ä¸ºå¾ªç¯å¤çå¤ä¸ªåå¤å¥½çäºä»¶ã\n\nåå¤çº¿ç¨æ¹å¼ç¸æ¯ï¼è¿ç§äºä»¶å¤çæ¹å¼æ¯æå¾å¤§çä¼å¿çï¼ä¸éè¦åå»ºçº¿ç¨ï¼æ¯ä¸ªè¯·æ±å ç¨çåå­ä¹å¾å°ï¼æ²¡æä¸ä¸æåæ¢ï¼äºä»¶å¤çéå¸¸çè½»éçº§ï¼å¹¶åæ°åå¤ä¹ä¸ä¼å¯¼è´æ è°çèµæºæµªè´¹(ä¸ä¸æåæ¢)ãå¯¹äºapacheæå¡å¨ï¼æ¯ä¸ªè¯·æ±ä¼ç¬å ä¸ä¸ªå·¥ä½çº¿ç¨ï¼å½å¹¶åæ°ä¸å°å åæ¶ï¼å°±åæ¶æå åççº¿ç¨å¨å¤çè¯·æ±äºãè¿å¯¹æä½ç³»ç»æ¥è¯´ï¼æ¯ä¸ªä¸å°çææï¼å ä¸ºçº¿ç¨å¸¦æ¥çåå­å ç¨éå¸¸å¤§ï¼çº¿ç¨çä¸ä¸æåæ¢å¸¦æ¥çcpuå¼éå¾å¤§ï¼èªç¶æ§è½å°±ä¸ä¸å»ï¼ä»èå¯¼è´å¨é«å¹¶ååºæ¯ä¸æ§è½ä¸éä¸¥éã\n\n\n# 3.5 æ»ç»ï¼\n\néè¿å¼æ­¥éé»å¡çäºæå¤çæºå¶ï¼nginxå®ç°ç±è¿ç¨å¾ªç¯å¤çå¤ä¸ªåå¤å¥½çäºä»¶ï¼ä»èå®ç°é«å¹¶ååè½»éåã\n\n# 3.5.1 master/workerç»æ\n\nä¸ä¸ªmasterè¿ç¨ï¼çæä¸ä¸ªæå¤ä¸ªworkerè¿ç¨\n\n\n\nmaster-workerè®¾è®¡æ¨¡å¼ä¸»è¦åå«ä¸¤ä¸ªä¸»è¦ç»ä»¶ master åworkerï¼ master ç»´æ¤çworkeréåï¼å°è¯·æ±ä¸åå°å¤ä¸ªworkerå¹¶è¡æ§è¡ï¼workerä¸»è¦è¿è¡å®éé»è¾è®¡ç®ï¼å¹¶å°ç»æè¿åç»masterã\n\n 1. nginxå¨å¯å¨åï¼ä¼æä¸ä¸ªmaster è¿ç¨åå¤ä¸ªç¸äºç¬ç«ç worker è¿ç¨ã\n\n 2. æ¥æ¶æ¥èªå¤ççä¿¡å·ï¼åå workerè¿ç¨åéä¿¡å·ï¼æ¯ä¸ªè¿ç¨é½æå¯è½æ¥å¤çè¿ä¸ªè¿æ¥ã\n\n 3. masterè¿ç¨è½çæ§ workerè¿ç¨çè¿è¡ç¶æï¼å½ workerè¿ç¨éåºå(å¼å¸¸æåµä¸)ï¼ä¼èªå¨å¯å¨æ°ç workerè¿ç¨ã\n\n 4. å°workerè¿ç¨çæ°éè®¾ç½®æç­äºcpuçæ ¸æ°æ¯è¾åçã\n    \n    æ¥çæ ¸æ°å½ä»¤cat /proc/cpuinfo|grep -c 'processor'\n    \n    -c è¿åå­ç¬¦ä¸²çä¸ªæ°\n\nnginxéç¨è¿ç§è¿ç¨æ¨¡åæä»ä¹å¥½å¤? éç¨ç¬ç«çè¿ç¨ï¼å¯ä»¥è®©äºç¸ä¹é´ä¸ä¼å½±åï¼ä¸ä¸ªè¿ç¨éåºåï¼å¶å®è¿ç¨è¿å¨å·¥ä½ï¼æå¡ä¸ä¼ä¸­æ­ï¼masterè¿ç¨åå¾å¿«éæ°å¯å¨æ°ç workerè¿ç¨ãå½ç¶, workerè¿ç¨çå¼å¸¸éåºï¼è¯å®æ¯ç¨åºæbugäºï¼å¼å¸¸éåºï¼ä¼å¯¼è´å½åworkerä¸çææè¯·æ±å¤±è´¥ï¼ä¸è¿ä¸ä¼å½±åå°ææè¯·æ±,æä»¥éä½äºé£é©ã\n\n# 3.5.2 åå­æ¶èå°\n\nå¤çå¤§å¹¶åçè¯·æ±åå­æ¶èéå¸¸å°ãå¨3ä¸å¹¶åè¿æ¥ä¸ï¼å¼å¯ç10ä¸ªnginx è¿ç¨ææ¶è150måå­ï¼15m*10=150m)\n\n# 3.5.3 åç½®çå¥åº·æ£æ¥åè½\n\nå¦ænginxä»£ççåç«¯çæå°webæå¡å¨å®æºäºï¼ä¸ä¼å½±ååç«¯è®¿é®ã\n\n# 3.5.4 èçå¸¦å®½\n\næ¯ægzipåç¼©ï¼å¯ä»¥æ·»å æµè§å¨æ¬å°ç¼å­çheaderå¤´ã\n\n# 3.5.5 ç¨³å®æ§é«\n\nç¨äºååä»£çï¼å®æºçæ¦çå¾®ä¹å¶å¾®ã",charsets:{cjk:!0}},{title:"Event Loop (å¹¶åæ¨¡åä¸äºä»¶å¾ªç¯)",frontmatter:{},regularPath:"/JavaScript/%E5%90%8C%E6%AD%A5%E5%BC%82%E6%AD%A5.html",relativePath:"JavaScript/åæ­¥å¼æ­¥.md",key:"v-14d731a6",path:"/javascript/tong-bu-yi-bu.html",headers:[{level:2,title:"åºç¡æ¦å¿µ",slug:"åºç¡æ¦å¿µ",normalizedTitle:"åºç¡æ¦å¿µ",charIndex:86},{level:3,title:"æ ",slug:"æ ",normalizedTitle:"æ ",charIndex:95},{level:3,title:"å ",slug:"å ",normalizedTitle:"å ",charIndex:130},{level:3,title:"é",slug:"é",normalizedTitle:"é",charIndex:73}],headersStr:"åºç¡æ¦å¿µ æ  å  é",content:"# Event Loop (å¹¶åæ¨¡åä¸äºä»¶å¾ªç¯)\n\nJavaScriptæä¸ä¸ªåºäºäºä»¶å¾ªç¯çå¹¶åæ¨¡åï¼äºä»¶å¾ªç¯è´è´£æ§è¡ä»£ç ãæ¶éåå¤çäºä»¶ä»¥åæ§è¡éåä¸­çå­ä»»å¡ã\n\n\n# åºç¡æ¦å¿µ\n\n\n# æ \n\nå½æ°çè°ç¨å½¢æäºè¥å¹²å¸§ç»æçæ ï¼æ¢ç¶æ¯æ å°±æåè¿ååºã\n\n\n# å \n\nå¯¹è±¡è¢«åéå¨å ä¸­ï¼å æ¯ä¸ä¸ªç¨æ¥è¡¨ç¤ºä¸å¤§åï¼éå¸¸æ¯éç»æåçï¼åå­åºåçè®¡ç®æºæ¯è¯­ã\n\n\n# é",normalizedContent:"# event loop (å¹¶åæ¨¡åä¸äºä»¶å¾ªç¯)\n\njavascriptæä¸ä¸ªåºäºäºä»¶å¾ªç¯çå¹¶åæ¨¡åï¼äºä»¶å¾ªç¯è´è´£æ§è¡ä»£ç ãæ¶éåå¤çäºä»¶ä»¥åæ§è¡éåä¸­çå­ä»»å¡ã\n\n\n# åºç¡æ¦å¿µ\n\n\n# æ \n\nå½æ°çè°ç¨å½¢æäºè¥å¹²å¸§ç»æçæ ï¼æ¢ç¶æ¯æ å°±æåè¿ååºã\n\n\n# å \n\nå¯¹è±¡è¢«åéå¨å ä¸­ï¼å æ¯ä¸ä¸ªç¨æ¥è¡¨ç¤ºä¸å¤§åï¼éå¸¸æ¯éç»æåçï¼åå­åºåçè®¡ç®æºæ¯è¯­ã\n\n\n# é",charsets:{cjk:!0}},{title:"Nginxå®è£",frontmatter:{},regularPath:"/Nginx/01_Nginx%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE/2.Nginx%E5%AE%89%E8%A3%85.html",relativePath:"Nginx/01_Nginxå®è£åéç½®/2.Nginxå®è£.md",key:"v-50532a9c",path:"/nginx/01_nginxan-zhuang-ji-pei-zhi/2.nginxan-zhuang.html",headers:[{level:2,title:"1. YUMæ¹å¼è¿è¡å®è£",slug:"_1-yumæ¹å¼è¿è¡å®è£",normalizedTitle:"1. yumæ¹å¼è¿è¡å®è£",charIndex:14},{level:3,title:"1.1è®¾ç½®nginx YUMæº",slug:"_1-1è®¾ç½®nginx-yumæº",normalizedTitle:"1.1è®¾ç½®nginx yumæº",charIndex:31},{level:3,title:"1.2 å®è£nginxæå¡ï¼ä¼å®è£1.16.0çæ¬",slug:"_1-2-å®è£nginxæå¡-ä¼å®è£1-16-0çæ¬",normalizedTitle:"1.2 å®è£nginxæå¡ï¼ä¼å®è£1.16.0çæ¬",charIndex:570},{level:3,title:"1.3 è®¾ç½®nginxå¼æºå¯å¨",slug:"_1-3-è®¾ç½®nginxå¼æºå¯å¨",normalizedTitle:"1.3 è®¾ç½®nginxå¼æºå¯å¨",charIndex:622},{level:3,title:"1.4 é²ç«å¢æ¾è¡htppæå¡",slug:"_1-4-é²ç«å¢æ¾è¡htppæå¡",normalizedTitle:"1.4 é²ç«å¢æ¾è¡htppæå¡",charIndex:1503},{level:3,title:"1.5 æµè¯æ¯å¦å¯ä»¥è®¿é®nginx",slug:"_1-5-æµè¯æ¯å¦å¯ä»¥è®¿é®nginx",normalizedTitle:"1.5 æµè¯æ¯å¦å¯ä»¥è®¿é®nginx",charIndex:1627},{level:3,title:"1.6 å è½½å¨ææ¨¡å",slug:"_1-6-å è½½å¨ææ¨¡å",normalizedTitle:"1.6 å è½½å¨ææ¨¡å",charIndex:1680},{level:2,title:"2. ç¼è¯å®è£Nginx",slug:"_2-ç¼è¯å®è£nginx",normalizedTitle:"2. ç¼è¯å®è£nginx",charIndex:2173},{level:3,title:"2.1 åå¤å·¥ä½",slug:"_2-1-åå¤å·¥ä½",normalizedTitle:"2.1 åå¤å·¥ä½",charIndex:2313},{level:3,title:"2.2 ç¼è¯å¹¶å®è£",slug:"_2-2-ç¼è¯å¹¶å®è£",normalizedTitle:"2.2 ç¼è¯å¹¶å®è£",charIndex:3239},{level:3,title:"æ³¨ï¼",slug:"æ³¨",normalizedTitle:"æ³¨ï¼",charIndex:6106}],headersStr:"1. YUMæ¹å¼è¿è¡å®è£ 1.1è®¾ç½®nginx YUMæº 1.2 å®è£nginxæå¡ï¼ä¼å®è£1.16.0çæ¬ 1.3 è®¾ç½®nginxå¼æºå¯å¨ 1.4 é²ç«å¢æ¾è¡htppæå¡ 1.5 æµè¯æ¯å¦å¯ä»¥è®¿é®nginx 1.6 å è½½å¨ææ¨¡å 2. ç¼è¯å®è£Nginx 2.1 åå¤å·¥ä½ 2.2 ç¼è¯å¹¶å®è£ æ³¨ï¼",content:"# Nginxå®è£\n\n\n# 1. YUMæ¹å¼è¿è¡å®è£\n\n\n# 1.1è®¾ç½®nginx YUMæº\n\nå®æ¹yumæºï¼http://nginx.org/en/linux_packages.html#RHEL-CentOS\n\n$ yum install yum-utils\n$ vim /etc/yum.repos.d/nginx.repo \n[nginx-stable]\nname=nginx stable repo\nbaseurl=http://nginx.org/packages/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\n\n[nginx-mainline]\nname=nginx mainline repo\nbaseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=0\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\n\n\n\n# 1.2 å®è£nginxæå¡ï¼ä¼å®è£1.16.0çæ¬\n\n$ yum install nginx\n\n\n\n# 1.3 è®¾ç½®nginxå¼æºå¯å¨\n\n$ systemctl enable nginx.service\n$ systemctl start nginx.service\n$ systemctl status nginx.service\nâ nginx.service - nginx - high performance web server\n   Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; vendor preset: disabled)\n   Active: active (running) since Mon 2020-04-13 10:59:12 EDT; 14s ago\n     Docs: http://nginx.org/en/docs/\n  Process: 20145 ExecStart=/usr/sbin/nginx -c /etc/nginx/nginx.conf (code=exited, status=0/SUCCESS)\n Main PID: 20146 (nginx)\n   CGroup: /system.slice/nginx.service\n           ââ20146 nginx: master process /usr/sbin/nginx -c /etc/nginx/nginx....\n           ââ20147 nginx: worker process\n\nApr 13 10:59:12 localhost.localdomain systemd[1]: Starting nginx - high perfo...\nApr 13 10:59:12 localhost.localdomain systemd[1]: Started nginx - high perfor...\nHint: Some lines were ellipsized, use -l to show in full.\n\n\n\n# 1.4 é²ç«å¢æ¾è¡htppæå¡\n\n$ firewall-cmd --add-service=http --permanent      \n$ firewall-cmd --reload\n$ firewall-cmd --list-all\n\n\n\n# 1.5 æµè¯æ¯å¦å¯ä»¥è®¿é®nginx\n\n$ curl http://192.168.58.142\n\n\n\n# 1.6 å è½½å¨ææ¨¡å\n\nnginxåæ¯ä½¿ç¨æææ¨¡åæå»ºçï¼è¿äºæ¨¡åä¸éè¦é¢å¤çåºæ¥é¿åé¢å¤çä¾èµæ§ãä»çæ¬1.9.11å¼å§ï¼nginxæ¯æå¨ææ¨¡åï¼ä»¥ä¸æ¨¡åæå»ºä¸ºå¨æçï¼å¹¶ä½ä¸ºåç¬çåæä¾ï¼\n\nnginx-module-geoip\nnginx-module-image-filter\nnginx-module-njs\nnginx-module-perl\nnginx-module-xslt\n\n\nå®è£å¨ææ¨¡å\n\n$ yum install nginx-module-image-filter -y\n\n\næ¨¡åä¼å®è£å¨/usr/lib64/nginx/modules/ç®å½ä¸­\n\n$ ls /usr/lib64/nginx/modules/\nngx_http_image_filter_module-debug.so\nngx_http_image_filter_module.so\n\n\nå¨éç½®æä»¶ä¸­å è½½æ¨¡åï¼è¦å¨mainä¸ä¸æä¸­éç½®ï¼å¨ nginx.conf ä¸­æä¸æ¹åå¥ï¼\n\nload_module modules/ngx_http_image_filter_module.so;\n\n\n\n# 2. ç¼è¯å®è£Nginx\n\nNginxå®ç½æä¾äºä¸ä¸ªç±»åççæ¬ï¼\n\n 1. Mainline versionï¼nginxçä¸»åçæ¬ï¼ä¸ºå¼åç\n 2. Stable versionï¼ç¨³å®çï¼å¨å®éçäº§è¿ç¨ä¸­éæ©æ­¤çæ¬è¿è¡å®è£\n 3. Legacy versionï¼åå²çæ¬\n\n\n# 2.1 åå¤å·¥ä½\n\n * å³é­selinux\n\n$ setenforce 0\n$ sed -i  's/SELINUX=enforcing/SELINUX=disable/g' /etc/selinux/config\n\n\n * åå»ºç¨æ·åç»\n\n$ groupadd www \n$ useradd -M -g www -s /sbin/nologin www\n$ id www\nuid=1000(www) gid=1000(www) groups=1000(www)\n\n\n * å®è£ä¸äºä¾èµåº\n\né¦åä¸è½½gccç¼è¯å¨ä»¥ånginxä¸äºæ¨¡åçä¾èµåºï¼éå¸¸æpcreåº ï¼æ¯ærewriteæ¨¡åï¼ï¼zlibï¼æ¯ægzipæ¨¡åï¼åºï¼openssl (æ¯æsslæ¨¡å)åºç­ãè¿äºåºå¯ä»¥ç¼è¯å®è£ï¼ä¹å¯ä»¥yumå®è£ï¼è¿ééæ©yumå®è£ã\n\n$ yum install gcc gcc-c++ pcre pcre-devel  zlib zlib-devel openssl openssl-devel -y\n\n\n * ä¸è½½æºç åå¹¶è§£å\n\n$ wget http://nginx.org/download/nginx-1.16.0.tar.gz\n$ tar zxvf nginx-1.16.0.tar.gz -C /usr/src/\n\n\n * å®è£2ä¸ªç¬¬ä¸æ¹æ¨¡å\n   \n   ä½¿ç¨nginx-sticky-moduleæ©å±æ¨¡åå®ç°Cookieä¼è¯é»è´´ï¼ä¿æä¼è¯ï¼\n   \n   ä½¿ç¨ngx_cache_purge å®ç°æ´å¼ºå¤§çç¼å­æ¸é¤åè½\n\n$ wget https://github.com/FRiCKLE/ngx_cache_purge/archive/master.zip\n$ unzip master.zip\n$ mv ngx_cache_purge-master/ /usr/src/\n$ wget -c https://bitbucket.org/nginx-goodies/nginx-sticky-module-ng/get/08a395c66e42.zip\n$ unzip 08a395c66e42.zip -d /usr/src/  \n\n\n\n# 2.2 ç¼è¯å¹¶å®è£\n\n * ä½¿ç¨configureèæ¬èªå¨çæMakefileæä»¶\n\n$ cd /usr/src/nginx-1.16.0/\n$ ./configure --prefix=/usr/local/nginx1.16 --user=www --group=www \\\n> --with-http_stub_status_module \\\n> --with-http_realip_module \\\n> --with-http_ssl_module \\\n> --with-http_gzip_static_module \\\n> --http-client-body-temp-path=/var/tmp/nginx/client \\\n> --http-proxy-temp-path=/var/tmp/nginx/proxy \\\n> --http-fastcgi-temp-path=/var/tmp/nginx/fcgi \\\n> --with-pcre \\\n> --with-http_flv_module \\\n> --add-module=../ngx_cache_purge-master \\\n> --add-module=../nginx-goodies-nginx-sticky-module-ng-08a395c66e42\n\n\n * ç¼è¯å¹¶å®è£\n\n $ make\n $ make install\n\n\n * å®æåä¼å\n\n$ ln -s /usr/local/nginx1.16/sbin/nginx /usr/local/sbin/\n$ nginx -t\n$ mkdir /var/tmp/nginx/client -p\n$ chown -R www:www /var/tmp/nginx/\n$ nginx -t\nnginx: the configuration file /usr/local/nginx1.16/conf/nginx.conf syntax is ok\nnginx: configuration file /usr/local/nginx1.16/conf/nginx.conf test is successful\n$ nginx   #å¯å¨æå¡\n$ netstat -antp | grep nginx\ntcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      16830/nginx: master \n$ nginx -s reload    #éå¯æå¡\n$ nginx -s stop      #åæ­¢æå¡\n\n\n\n * çæsystemedå¯å¨èæ¬\n\n$ vim /usr/lib/systemd/system/nginx.service\n[Unit]\n# å¯¹æå¡çè¯´æ\nDescription=nginx - high performance web server   \n# ææ¡£\nDocumentation=http://nginx.org/en/docs/\n# å¦æè¯¥å­æ®µæå®ç Unit ä¹è¦å¯å¨ï¼é£ä¹å¿é¡»å¨å½å Unit ä¹åå¯å¨\nAfter=network-online.target remote-fs.target nss-lookup.target\n# ä¸å½å Unit éåçå¶ä» Unitï¼å¦æå®ä»¬æ²¡æè¿è¡ï¼å½å Unit ä¸ä¼å¯å¨å¤±è´¥\nWants=network-online.target\n\n[Service]\n# å¯å¨æ¹å¼\nType=forking\n#PIDæä»¶çè·¯å¾\nPIDFile=/usr/local/nginx1.16/logs/nginx.pid\n#å¯å¨å½ä»¤\nExecStart=/usr/local/sbin/nginx -c /usr/local/nginx1.16/conf/nginx.conf\n#éå¯å½ä»¤\nExecReload=/bin/kill -s HUP $MAINPID\n#åæ­¢å½ä»¤\nExecStop=/bin/kill -s TERM $MAINPID\n#å¯å¨æ¨¡å¼\n[Install]\n# WantedByçå¼æ¯ä¸ä¸ªæå¤ä¸ª Targetï¼å½å Unit æ¿æ´»æ¶ï¼enableï¼ç¬¦å·é¾æ¥ä¼æ¾å¥/etc/systemd/systemç®å½ä¸é¢ä»¥ Target å + .wantsåç¼ææçå­ç®å½ä¸­\nWantedBy=multi-user.target \n\n$ systemctl daemon-reload\n$ systemctl enable nginx.service\n$ systemctl restart nginx.service\n$ systemctl status nginx.service\nâ nginx.service - nginx - high performance web server\n   Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; vendor preset: disabled)\n   Active: active (running) since äº 2020-04-14 18:07:38 CST; 21s ago\n     Docs: http://nginx.org/en/docs/\n  Process: 16967 ExecStart=/usr/local/sbin/nginx -c /usr/local/nginx1.16/conf/nginx.conf (code=exited, status=0/SUCCESS)\n Main PID: 16968 (nginx)\n   CGroup: /system.slice/nginx.service\n           ââ16968 nginx: master process /usr/local/sbin/nginx -c /usr/local/...\n           ââ16969 nginx: worker process\n\n4æ 14 18:07:38 localhost.localdomain systemd[1]: Starting nginx - high perf...\n4æ 14 18:07:38 localhost.localdomain systemd[1]: Can't open PID file /usr/l...\n4æ 14 18:07:38 localhost.localdomain systemd[1]: Started nginx - high perfo...\nHint: Some lines were ellipsized, use -l to show in full.\n\n\n\n# æ³¨ï¼\n\nå¦æä½ æ³å¨å·²ç»å®è£å¥½çnginxä¸æ·»å ç¬¬ä¸æ¹æ¨¡åï¼ä¾ç¶éè¦éæ°ç¼è¯ï¼ä½ä¸ºäºä¸è¦çä½ åæçéç½®ï¼è¯·ä¸è¦ make installï¼èæ¯ç´æ¥æ·è´å¯æ§è¡æä»¶:\n\næ¥çåæçç¼è¯éç½®\n\n$ nginx -V\n\n\néæ°ç¼è¯\n\n$ ./configure --add-module=....     #ç¬¬ä¸æ¹æ¨¡å\n\n$ make            #make åä¸è¦make install ï¼æ¹ä¸ºæå¨æ·è´ï¼åå¤ä»½\n\n$ cp /usr/local/nginx1.16/sbin/nginx /usr/local/nginx1.16/sbin/nginx.bak\n\n$ cp objs/nginx /usr/local/nginx1.16/sbin/nginx\n",normalizedContent:"# nginxå®è£\n\n\n# 1. yumæ¹å¼è¿è¡å®è£\n\n\n# 1.1è®¾ç½®nginx yumæº\n\nå®æ¹yumæºï¼http://nginx.org/en/linux_packages.html#rhel-centos\n\n$ yum install yum-utils\n$ vim /etc/yum.repos.d/nginx.repo \n[nginx-stable]\nname=nginx stable repo\nbaseurl=http://nginx.org/packages/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\n\n[nginx-mainline]\nname=nginx mainline repo\nbaseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=0\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\n\n\n\n# 1.2 å®è£nginxæå¡ï¼ä¼å®è£1.16.0çæ¬\n\n$ yum install nginx\n\n\n\n# 1.3 è®¾ç½®nginxå¼æºå¯å¨\n\n$ systemctl enable nginx.service\n$ systemctl start nginx.service\n$ systemctl status nginx.service\nâ nginx.service - nginx - high performance web server\n   loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; vendor preset: disabled)\n   active: active (running) since mon 2020-04-13 10:59:12 edt; 14s ago\n     docs: http://nginx.org/en/docs/\n  process: 20145 execstart=/usr/sbin/nginx -c /etc/nginx/nginx.conf (code=exited, status=0/success)\n main pid: 20146 (nginx)\n   cgroup: /system.slice/nginx.service\n           ââ20146 nginx: master process /usr/sbin/nginx -c /etc/nginx/nginx....\n           ââ20147 nginx: worker process\n\napr 13 10:59:12 localhost.localdomain systemd[1]: starting nginx - high perfo...\napr 13 10:59:12 localhost.localdomain systemd[1]: started nginx - high perfor...\nhint: some lines were ellipsized, use -l to show in full.\n\n\n\n# 1.4 é²ç«å¢æ¾è¡htppæå¡\n\n$ firewall-cmd --add-service=http --permanent      \n$ firewall-cmd --reload\n$ firewall-cmd --list-all\n\n\n\n# 1.5 æµè¯æ¯å¦å¯ä»¥è®¿é®nginx\n\n$ curl http://192.168.58.142\n\n\n\n# 1.6 å è½½å¨ææ¨¡å\n\nnginxåæ¯ä½¿ç¨æææ¨¡åæå»ºçï¼è¿äºæ¨¡åä¸éè¦é¢å¤çåºæ¥é¿åé¢å¤çä¾èµæ§ãä»çæ¬1.9.11å¼å§ï¼nginxæ¯æå¨ææ¨¡åï¼ä»¥ä¸æ¨¡åæå»ºä¸ºå¨æçï¼å¹¶ä½ä¸ºåç¬çåæä¾ï¼\n\nnginx-module-geoip\nnginx-module-image-filter\nnginx-module-njs\nnginx-module-perl\nnginx-module-xslt\n\n\nå®è£å¨ææ¨¡å\n\n$ yum install nginx-module-image-filter -y\n\n\næ¨¡åä¼å®è£å¨/usr/lib64/nginx/modules/ç®å½ä¸­\n\n$ ls /usr/lib64/nginx/modules/\nngx_http_image_filter_module-debug.so\nngx_http_image_filter_module.so\n\n\nå¨éç½®æä»¶ä¸­å è½½æ¨¡åï¼è¦å¨mainä¸ä¸æä¸­éç½®ï¼å¨ nginx.conf ä¸­æä¸æ¹åå¥ï¼\n\nload_module modules/ngx_http_image_filter_module.so;\n\n\n\n# 2. ç¼è¯å®è£nginx\n\nnginxå®ç½æä¾äºä¸ä¸ªç±»åççæ¬ï¼\n\n 1. mainline versionï¼nginxçä¸»åçæ¬ï¼ä¸ºå¼åç\n 2. stable versionï¼ç¨³å®çï¼å¨å®éçäº§è¿ç¨ä¸­éæ©æ­¤çæ¬è¿è¡å®è£\n 3. legacy versionï¼åå²çæ¬\n\n\n# 2.1 åå¤å·¥ä½\n\n * å³é­selinux\n\n$ setenforce 0\n$ sed -i  's/selinux=enforcing/selinux=disable/g' /etc/selinux/config\n\n\n * åå»ºç¨æ·åç»\n\n$ groupadd www \n$ useradd -m -g www -s /sbin/nologin www\n$ id www\nuid=1000(www) gid=1000(www) groups=1000(www)\n\n\n * å®è£ä¸äºä¾èµåº\n\né¦åä¸è½½gccç¼è¯å¨ä»¥ånginxä¸äºæ¨¡åçä¾èµåºï¼éå¸¸æpcreåº ï¼æ¯ærewriteæ¨¡åï¼ï¼zlibï¼æ¯ægzipæ¨¡åï¼åºï¼openssl (æ¯æsslæ¨¡å)åºç­ãè¿äºåºå¯ä»¥ç¼è¯å®è£ï¼ä¹å¯ä»¥yumå®è£ï¼è¿ééæ©yumå®è£ã\n\n$ yum install gcc gcc-c++ pcre pcre-devel  zlib zlib-devel openssl openssl-devel -y\n\n\n * ä¸è½½æºç åå¹¶è§£å\n\n$ wget http://nginx.org/download/nginx-1.16.0.tar.gz\n$ tar zxvf nginx-1.16.0.tar.gz -c /usr/src/\n\n\n * å®è£2ä¸ªç¬¬ä¸æ¹æ¨¡å\n   \n   ä½¿ç¨nginx-sticky-moduleæ©å±æ¨¡åå®ç°cookieä¼è¯é»è´´ï¼ä¿æä¼è¯ï¼\n   \n   ä½¿ç¨ngx_cache_purge å®ç°æ´å¼ºå¤§çç¼å­æ¸é¤åè½\n\n$ wget https://github.com/frickle/ngx_cache_purge/archive/master.zip\n$ unzip master.zip\n$ mv ngx_cache_purge-master/ /usr/src/\n$ wget -c https://bitbucket.org/nginx-goodies/nginx-sticky-module-ng/get/08a395c66e42.zip\n$ unzip 08a395c66e42.zip -d /usr/src/  \n\n\n\n# 2.2 ç¼è¯å¹¶å®è£\n\n * ä½¿ç¨configureèæ¬èªå¨çæmakefileæä»¶\n\n$ cd /usr/src/nginx-1.16.0/\n$ ./configure --prefix=/usr/local/nginx1.16 --user=www --group=www \\\n> --with-http_stub_status_module \\\n> --with-http_realip_module \\\n> --with-http_ssl_module \\\n> --with-http_gzip_static_module \\\n> --http-client-body-temp-path=/var/tmp/nginx/client \\\n> --http-proxy-temp-path=/var/tmp/nginx/proxy \\\n> --http-fastcgi-temp-path=/var/tmp/nginx/fcgi \\\n> --with-pcre \\\n> --with-http_flv_module \\\n> --add-module=../ngx_cache_purge-master \\\n> --add-module=../nginx-goodies-nginx-sticky-module-ng-08a395c66e42\n\n\n * ç¼è¯å¹¶å®è£\n\n $ make\n $ make install\n\n\n * å®æåä¼å\n\n$ ln -s /usr/local/nginx1.16/sbin/nginx /usr/local/sbin/\n$ nginx -t\n$ mkdir /var/tmp/nginx/client -p\n$ chown -r www:www /var/tmp/nginx/\n$ nginx -t\nnginx: the configuration file /usr/local/nginx1.16/conf/nginx.conf syntax is ok\nnginx: configuration file /usr/local/nginx1.16/conf/nginx.conf test is successful\n$ nginx   #å¯å¨æå¡\n$ netstat -antp | grep nginx\ntcp        0      0 0.0.0.0:80              0.0.0.0:*               listen      16830/nginx: master \n$ nginx -s reload    #éå¯æå¡\n$ nginx -s stop      #åæ­¢æå¡\n\n\n\n * çæsystemedå¯å¨èæ¬\n\n$ vim /usr/lib/systemd/system/nginx.service\n[unit]\n# å¯¹æå¡çè¯´æ\ndescription=nginx - high performance web server   \n# ææ¡£\ndocumentation=http://nginx.org/en/docs/\n# å¦æè¯¥å­æ®µæå®ç unit ä¹è¦å¯å¨ï¼é£ä¹å¿é¡»å¨å½å unit ä¹åå¯å¨\nafter=network-online.target remote-fs.target nss-lookup.target\n# ä¸å½å unit éåçå¶ä» unitï¼å¦æå®ä»¬æ²¡æè¿è¡ï¼å½å unit ä¸ä¼å¯å¨å¤±è´¥\nwants=network-online.target\n\n[service]\n# å¯å¨æ¹å¼\ntype=forking\n#pidæä»¶çè·¯å¾\npidfile=/usr/local/nginx1.16/logs/nginx.pid\n#å¯å¨å½ä»¤\nexecstart=/usr/local/sbin/nginx -c /usr/local/nginx1.16/conf/nginx.conf\n#éå¯å½ä»¤\nexecreload=/bin/kill -s hup $mainpid\n#åæ­¢å½ä»¤\nexecstop=/bin/kill -s term $mainpid\n#å¯å¨æ¨¡å¼\n[install]\n# wantedbyçå¼æ¯ä¸ä¸ªæå¤ä¸ª targetï¼å½å unit æ¿æ´»æ¶ï¼enableï¼ç¬¦å·é¾æ¥ä¼æ¾å¥/etc/systemd/systemç®å½ä¸é¢ä»¥ target å + .wantsåç¼ææçå­ç®å½ä¸­\nwantedby=multi-user.target \n\n$ systemctl daemon-reload\n$ systemctl enable nginx.service\n$ systemctl restart nginx.service\n$ systemctl status nginx.service\nâ nginx.service - nginx - high performance web server\n   loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; vendor preset: disabled)\n   active: active (running) since äº 2020-04-14 18:07:38 cst; 21s ago\n     docs: http://nginx.org/en/docs/\n  process: 16967 execstart=/usr/local/sbin/nginx -c /usr/local/nginx1.16/conf/nginx.conf (code=exited, status=0/success)\n main pid: 16968 (nginx)\n   cgroup: /system.slice/nginx.service\n           ââ16968 nginx: master process /usr/local/sbin/nginx -c /usr/local/...\n           ââ16969 nginx: worker process\n\n4æ 14 18:07:38 localhost.localdomain systemd[1]: starting nginx - high perf...\n4æ 14 18:07:38 localhost.localdomain systemd[1]: can't open pid file /usr/l...\n4æ 14 18:07:38 localhost.localdomain systemd[1]: started nginx - high perfo...\nhint: some lines were ellipsized, use -l to show in full.\n\n\n\n# æ³¨ï¼\n\nå¦æä½ æ³å¨å·²ç»å®è£å¥½çnginxä¸æ·»å ç¬¬ä¸æ¹æ¨¡åï¼ä¾ç¶éè¦éæ°ç¼è¯ï¼ä½ä¸ºäºä¸è¦çä½ åæçéç½®ï¼è¯·ä¸è¦ make installï¼èæ¯ç´æ¥æ·è´å¯æ§è¡æä»¶:\n\næ¥çåæçç¼è¯éç½®\n\n$ nginx -v\n\n\néæ°ç¼è¯\n\n$ ./configure --add-module=....     #ç¬¬ä¸æ¹æ¨¡å\n\n$ make            #make åä¸è¦make install ï¼æ¹ä¸ºæå¨æ·è´ï¼åå¤ä»½\n\n$ cp /usr/local/nginx1.16/sbin/nginx /usr/local/nginx1.16/sbin/nginx.bak\n\n$ cp objs/nginx /usr/local/nginx1.16/sbin/nginx\n",charsets:{cjk:!0}},{title:"Nginxéç½®æä»¶ç»æ",frontmatter:{},regularPath:"/Nginx/01_Nginx%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE/3.Nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.html",relativePath:"Nginx/01_Nginxå®è£åéç½®/3.Nginxéç½®æä»¶.md",key:"v-467f0776",path:"/nginx/01_nginxan-zhuang-ji-pei-zhi/3.nginxpei-zhi-wen-jian.html",headers:[{level:2,title:"1. æä»¤ï¼dircetives [dÉªËrÉktÉªvz]ï¼",slug:"_1-æä»¤-dircetives-dÉªËrÉktÉªvz",normalizedTitle:"1. æä»¤ï¼dircetives [dÉªËrÉktÉªvz]ï¼",charIndex:459},{level:2,title:"2. ç¹å®åè½çéç½®æä»¶",slug:"_2-ç¹å®åè½çéç½®æä»¶",normalizedTitle:"2. ç¹å®åè½çéç½®æä»¶",charIndex:683},{level:2,title:"3. ä¸ä¸æï¼contextsï¼",slug:"_3-ä¸ä¸æ-contexts",normalizedTitle:"3. ä¸ä¸æï¼contextsï¼",charIndex:882},{level:3,title:"main ï¼å¨å±åï¼",slug:"main-å¨å±å",normalizedTitle:"main ï¼å¨å±åï¼",charIndex:1082},{level:3,title:"eventså",slug:"eventså",normalizedTitle:"eventså",charIndex:1182},{level:3,title:"httpå",slug:"httpå",normalizedTitle:"httpå",charIndex:1275},{level:3,title:"serverå",slug:"serverå",normalizedTitle:"serverå",charIndex:1384},{level:3,title:"mailå",slug:"mailå",normalizedTitle:"mailå",charIndex:1460},{level:3,title:"streamå",slug:"streamå",normalizedTitle:"streamå",charIndex:1482},{level:2,title:"4. å®æ´çéç½®æä»¶ç»æå¦å¾æç¤º",slug:"_4-å®æ´çéç½®æä»¶ç»æå¦å¾æç¤º",normalizedTitle:"4. å®æ´çéç½®æä»¶ç»æå¦å¾æç¤º",charIndex:1509},{level:2,title:"5. èææå¡ï¼virtual serversï¼",slug:"_5-èææå¡-virtual-servers",normalizedTitle:"5. èææå¡ï¼virtual serversï¼",charIndex:1532},{level:2,title:"6. ç»§æ¿ï¼inheritance [ÉªnËherÉªtÉns]ï¼",slug:"_6-ç»§æ¿-inheritance-ÉªnËherÉªtÉns",normalizedTitle:"6. ç»§æ¿ï¼inheritance [ÉªnËherÉªtÉns]ï¼",charIndex:2732},{level:2,title:"7. éç½®å¸åæ¡ä¾",slug:"_7-éç½®å¸åæ¡ä¾",normalizedTitle:"7. éç½®å¸åæ¡ä¾",charIndex:2862},{level:3,title:"1.webç«ç¹",slug:"_1-webç«ç¹",normalizedTitle:"1.webç«ç¹",charIndex:2876},{level:3,title:"2.è´è½½å¹³è¡¡å¨",slug:"_2-è´è½½å¹³è¡¡å¨",normalizedTitle:"2.è´è½½å¹³è¡¡å¨",charIndex:3362},{level:3,title:"3.HTTPå®å¨ç«ç¹",slug:"_3-httpå®å¨ç«ç¹",normalizedTitle:"3.httpå®å¨ç«ç¹",charIndex:3652},{level:3,title:"æ³¨ï¼å»ºç«æµç¨",slug:"æ³¨-å»ºç«æµç¨",normalizedTitle:"æ³¨ï¼å»ºç«æµç¨",charIndex:3957}],headersStr:"1. æä»¤ï¼dircetives [dÉªËrÉktÉªvz]ï¼ 2. ç¹å®åè½çéç½®æä»¶ 3. ä¸ä¸æï¼contextsï¼ main ï¼å¨å±åï¼ eventså httpå serverå mailå streamå 4. å®æ´çéç½®æä»¶ç»æå¦å¾æç¤º 5. èææå¡ï¼virtual serversï¼ 6. ç»§æ¿ï¼inheritance [ÉªnËherÉªtÉns]ï¼ 7. éç½®å¸åæ¡ä¾ 1.webç«ç¹ 2.è´è½½å¹³è¡¡å¨ 3.HTTPå®å¨ç«ç¹ æ³¨ï¼å»ºç«æµç¨",content:"# Nginxéç½®æä»¶ç»æ\n\nnginxéç½®æä»¶çåå­æ¯nginx.confã ä¸è¬ä½äº /etc/nginxç®å½ï¼ææ¶åä¹ä¼ä½äº/usr/local/nginx/confã /usr/local/etc/nginxä¸\n\n# ä¿®æ¹æ¹æ³\n# aux æ¾ç¤ºææåå«å¶ä»ä½¿ç¨èçè¡ç¨\n$ ps aux | grep nginx\n\n# $ cat /proc/cpuinfo|grep -c 'processor'\n# 4\n\n$ vim /etc/nginx/nginx.conf\nworker_processes  auto;\n\n$ nginx -t\nnginx: the configuration file /etc/nginx/nginx.conf syntax is ok\nnginx: configuration file /etc/nginx/nginx.conf test is successful\n\n$ systemctl restart nginx\n$ ps aux | grep nginx\n\n\n\n# 1. æä»¤ï¼dircetives [dÉªËrÉktÉªvz]ï¼\n\néç½®æä»¶ç±æä»¤åå¶åæ°ç»æï¼ç®åçåè¡æä»¤ä»¥åå·ç»å°¾ï¼å¶å®çæä»¤åå½äºå®¹å¨çåè½ï¼å°ç¸å³æä»¤ç»åå¨ä¸èµ·ï¼ç¨å¤§æ¬å·{}åå«èµ·æ¥ï¼éå¸¸ç§°ä¹ä¸ºå(block) ãä¸é¢æ¯ä¸äºç®åæä»¤çä¾å­:\n\nuser                nobadyï¼\nerror_log           logs/error.log notice;\nworker_processes    1;\n\n\n\n# 2. ç¹å®åè½çéç½®æä»¶\n\nä¸ºäºä½¿éç½®æ´æäºç»´æ¤ï¼æä»¬å»ºè®®æ¨å°å¶æåä¸ºå­å¨å¨ /etc/nginx/conf.dç®å½ä¸­çç¹å®åè½çæä»¶ï¼å¹¶ä½¿ç¨ä¸»nginx.confæä»¶ä¸­çincludeæä»¤æ¥å¼ç¨å¶ä¸­çåå®¹ãç¹å®åè½çæä»¶åèã\n\ninclude conf.d/http;\ninclude conf.d/stream;\ninclude conf.d/exchange-enhanced;\n\n\n\n# 3. ä¸ä¸æï¼contextsï¼\n\nä¸äºé¡¶çº§æä»¤ ï¼ç§°ä¸ºä¸ä¸æï¼å°éç¨äºä¸åæµéç±»åçæä»¤ç»åå¨ä¸èµ·ï¼\n\n * events- General connection processing\n * http - HTTP traffic\n * mail - Mail traffic\n * stream - TCP and UDP traffic\n\nå¨è¿äºä¸ä¸æä¹å¤æ¾ç½®ç§°ä¸ºå¨mainä¸ä¸æä¸­ã\n\n\n# main ï¼å¨å±åï¼\n\néç½®å½±ånginxå¨å±çæä»¤ãä¸è¬æè¿è¡nginxæå¡å¨çç¨æ·ç»ï¼nginxè¿ç¨pidå­æ¾è·¯å¾ï¼æ¥å¿å­æ¾è·¯å¾ï¼éç½®æä»¶å¼å¥ï¼åè®¸çæworker processæ°ç­ã\n\n\n# eventså\n\néç½®å½±ånginxæå¡å¨æä¸ç¨æ·çç½ç»è¿æ¥ãææ¯ä¸ªè¿ç¨çæå¤§è¿æ¥æ°,éååªç§äºä»¶é©±å¨æ¨¡åå¤çè¿æ¥è¯·æ±ï¼æ¯å¦åè®¸åæ¶æ¥åå¤ä¸ªç½è·¯è¿æ¥ï¼å¼å¯å¤ä¸ªç½ç»è¿æ¥åºååç­ã\n\n\n# httpå\n\nå¯ä»¥åµå¥å¤ä¸ªserver,éç½®ä»£ç,ç¼å­ï¼æ¥å¿å®ä¹ç­ç»å¤§å¤æ°åè½åç¬¬ä¸æ¹æ¨¡åçéç½®ãå¦æä»¶å¼å¥ï¼mime-typeå®ä¹ï¼æ¥å¿èªå®ä¹ï¼æ¯å¦ä½¿ç¨sendfileä¼ è¾æä»¶,è¿æ¥è¶æ¶æ¶é´ï¼åè¿æ¥è¯·æ±æ°ç­\n\n\n# serverå\n\néç½®èæä¸»æºçç¸å³åæ°ï¼ä¸ä¸ªhttpä¸­å¯ä»¥æå¤ä¸ªserver\n\nlocationå\n\néç½®è¯·æ±çè·¯ç±ï¼ä»¥ååç§é¡µé¢çå¤çæåµ\n\n\n# mailå\n\néç½®å¤çmailæµé\n\n\n# streamå\n\néç½®å¤çTCPåUDPæµé\n\n\n# 4. å®æ´çéç½®æä»¶ç»æå¦å¾æç¤º\n\n\n\n\n# 5. èææå¡ï¼virtual serversï¼\n\nå¨æ¯ä¸ä¸ªæµéå¤ççä¸ä¸æä¸­,å¯ä»¥åå«ä¸ä¸ªæèå¤ä¸ªserverå, å®ä¹èææå¡æ¥æ§å¶å¤çè¯·æ±,åå«å¨serverä¸ä¸æä¸­çæä»¤æ ¹æ®æµéç±»åä¸åèä¸åã\n\nå¯¹äºHTTPæµé(httpä¸ä¸æ)ï¼æ¯ä¸ªserveræä»¤æ§å¶å¯¹ç¹å®åæèIPå°åçèµæºè¯·æ±å¤çã å¨serverä¸ä¸æä¸­çä¸ä¸ªæå¤ä¸ªlocationä¸ä¸æå®ä¹å¦ä½å¤æå®çURIéåã\n\nå¯¹äºé®ä»¶åTCP/UDPæµé(mailåstreamä¸ä¸æ) , æ¯ä¸ä¸ªserveræä»¤é½æ§å¶å°è¾¾ç¹å®TCPç«¯å£æUNIXå¥æ¥å­çæµéçå¤çã\n\nå·æå¤ä¸ªä¸ä¸æçéç½®æä»¶æ ·ä¾\n\nä»¥ä¸éç½®è¯´æäºä¸ä¸æçå¦ä½ä½¿ç¨\n\nuser nobody; # a directive in the 'main' contextï¼âmainâä¸ä¸æä¸­çæä»¤ï¼\nevents {\n    # configuration of connection processingï¼è¿æ¥å¤çéç½®ï¼\n}\nhttp {\n    # Configuration specific to HTTP and affecting a11 virtual servers\n    # ï¼ç¹å®äºHTTPçéç½®å¹¶å½±åa11èææå¡å¨ï¼\n    server {\n        # configuration of HTTP virtual server 1 ï¼HTTPèææå¡å¨1çéç½®ï¼\n        location /one {\n            # configuration for processing URIS starting with ' /one '\n            #ï¼å¤çä»¥'/one'å¼å¤´çuriçéç½®ï¼\n        }\n        1ocation /two {\n            # configuration for processing URIS starting with' /two '\n            #ï¼å¤çä»¥'/two'å¼å¤´çuriçéç½®ï¼\n        }\n    }\n    \n    server {\n        # configuration of HTTP virtual server 2ï¼HTTPèææå¡å¨2çéç½®ï¼\n     }\n}\n\nstream {\n     # Configuration specific to TCP/UDP and affecting a11 virtual servers\n     #ï¼ç¹å®äºTCP/UDPå¹¶å½±åa11èææå¡å¨çéç½®ï¼\n     server {\n          # configuration of TCP virtual server 1ï¼TCPèææå¡å¨1çéç½®ï¼\n     }\n}\n\n\n\n# 6. ç»§æ¿ï¼inheritance [ÉªnËherÉªtÉns]ï¼\n\nä¸è¬æ¥è¯´ï¼å­ä¸ä¸æ(åå«å¨å¦ä¸ä¸ªä¸ä¸æ(å¶ç¶ä¸ä¸æ)ä¸­)ç»§æ¿ç¶çº§åå«çæä»¤è®¾ç½®ãæäºæä»¤å¯ä»¥åºç°å¨å¤ä¸ªä¸ä¸æä¸­ï¼å¨è¿ç§æåµä¸ï¼æ¨å¯ä»¥éè¿å¨å­ä¸ä¸æä¸­åå«è¯¥æä»¤æ¥éåä»ç¶çº§ç»§æ¿çè®¾ç½®ã\n\n\n# 7. éç½®å¸åæ¡ä¾\n\n\n# 1.webç«ç¹\n\nä¸ä¸ªç®åçphpç«ç¹éç½®\n\nserver {\n    listen       80;\n    server_name example.org www.example.org;\n    root         /data/www;\n    \n    location / {\n        index    index.html index.php;\n    }\n    \n     location ~* \\. (gif|jpg|png)$ {\n          expires 30d;\n     } \n     \n    location ~ \\.php$ {\n        fastcgi_pass local host:9000;\n        fastcgi_param SCRIPT_FILENAME\n                        $document_root$fastcgi_script_name;\n        include         fastcgi_params;\n    } \n}\n\n\n\n# 2.è´è½½å¹³è¡¡å¨\n\nç®åè´è½½å¹³è¡¡éç½®æ ·ä¾\n\nhttp {\n    upstream myapp1 {\n          server srv1.example.com;\n          server srv2.example.com;\n          server srv3.example.com;\n    }\n   \n    server {\n        listen 80;\n        \n        location / {\n             proxy_ pass http://myapp1;\n        }\n    }\n}\n\n\n\n# 3.HTTPå®å¨ç«ç¹\n\nä¸ä¸ªç®åçHTTP/HTTPSç«ç¹ (certificate [sÉrËtÉªfÉªkÉt , sÉrËtÉªfÉªkeÉªt] è¯æ;è¯æä¹¦;)\n\nserver {\n    listen                80;\n    listen                443 ssl;\n    server_ name          www.example.com;\n    ssl_certificate      www.example.com.crt;\n    ssl_certificate_key www.example.com.key;\n    ...\n}\n\n\n\n# æ³¨ï¼å»ºç«æµç¨\n\n 1. æ³¨ååå\n 2. éæ©å»ºç«æå¡åä¸»æº\n 3. ååè§£æ\n 4. ç½ç«å¤æ¡\n 5. httpsè¯ä¹¦éç½®\n 6. ç½ç«ä¸çº¿",normalizedContent:"# nginxéç½®æä»¶ç»æ\n\nnginxéç½®æä»¶çåå­æ¯nginx.confã ä¸è¬ä½äº /etc/nginxç®å½ï¼ææ¶åä¹ä¼ä½äº/usr/local/nginx/confã /usr/local/etc/nginxä¸\n\n# ä¿®æ¹æ¹æ³\n# aux æ¾ç¤ºææåå«å¶ä»ä½¿ç¨èçè¡ç¨\n$ ps aux | grep nginx\n\n# $ cat /proc/cpuinfo|grep -c 'processor'\n# 4\n\n$ vim /etc/nginx/nginx.conf\nworker_processes  auto;\n\n$ nginx -t\nnginx: the configuration file /etc/nginx/nginx.conf syntax is ok\nnginx: configuration file /etc/nginx/nginx.conf test is successful\n\n$ systemctl restart nginx\n$ ps aux | grep nginx\n\n\n\n# 1. æä»¤ï¼dircetives [dÉªËrÉktÉªvz]ï¼\n\néç½®æä»¶ç±æä»¤åå¶åæ°ç»æï¼ç®åçåè¡æä»¤ä»¥åå·ç»å°¾ï¼å¶å®çæä»¤åå½äºå®¹å¨çåè½ï¼å°ç¸å³æä»¤ç»åå¨ä¸èµ·ï¼ç¨å¤§æ¬å·{}åå«èµ·æ¥ï¼éå¸¸ç§°ä¹ä¸ºå(block) ãä¸é¢æ¯ä¸äºç®åæä»¤çä¾å­:\n\nuser                nobadyï¼\nerror_log           logs/error.log notice;\nworker_processes    1;\n\n\n\n# 2. ç¹å®åè½çéç½®æä»¶\n\nä¸ºäºä½¿éç½®æ´æäºç»´æ¤ï¼æä»¬å»ºè®®æ¨å°å¶æåä¸ºå­å¨å¨ /etc/nginx/conf.dç®å½ä¸­çç¹å®åè½çæä»¶ï¼å¹¶ä½¿ç¨ä¸»nginx.confæä»¶ä¸­çincludeæä»¤æ¥å¼ç¨å¶ä¸­çåå®¹ãç¹å®åè½çæä»¶åèã\n\ninclude conf.d/http;\ninclude conf.d/stream;\ninclude conf.d/exchange-enhanced;\n\n\n\n# 3. ä¸ä¸æï¼contextsï¼\n\nä¸äºé¡¶çº§æä»¤ ï¼ç§°ä¸ºä¸ä¸æï¼å°éç¨äºä¸åæµéç±»åçæä»¤ç»åå¨ä¸èµ·ï¼\n\n * events- general connection processing\n * http - http traffic\n * mail - mail traffic\n * stream - tcp and udp traffic\n\nå¨è¿äºä¸ä¸æä¹å¤æ¾ç½®ç§°ä¸ºå¨mainä¸ä¸æä¸­ã\n\n\n# main ï¼å¨å±åï¼\n\néç½®å½±ånginxå¨å±çæä»¤ãä¸è¬æè¿è¡nginxæå¡å¨çç¨æ·ç»ï¼nginxè¿ç¨pidå­æ¾è·¯å¾ï¼æ¥å¿å­æ¾è·¯å¾ï¼éç½®æä»¶å¼å¥ï¼åè®¸çæworker processæ°ç­ã\n\n\n# eventså\n\néç½®å½±ånginxæå¡å¨æä¸ç¨æ·çç½ç»è¿æ¥ãææ¯ä¸ªè¿ç¨çæå¤§è¿æ¥æ°,éååªç§äºä»¶é©±å¨æ¨¡åå¤çè¿æ¥è¯·æ±ï¼æ¯å¦åè®¸åæ¶æ¥åå¤ä¸ªç½è·¯è¿æ¥ï¼å¼å¯å¤ä¸ªç½ç»è¿æ¥åºååç­ã\n\n\n# httpå\n\nå¯ä»¥åµå¥å¤ä¸ªserver,éç½®ä»£ç,ç¼å­ï¼æ¥å¿å®ä¹ç­ç»å¤§å¤æ°åè½åç¬¬ä¸æ¹æ¨¡åçéç½®ãå¦æä»¶å¼å¥ï¼mime-typeå®ä¹ï¼æ¥å¿èªå®ä¹ï¼æ¯å¦ä½¿ç¨sendfileä¼ è¾æä»¶,è¿æ¥è¶æ¶æ¶é´ï¼åè¿æ¥è¯·æ±æ°ç­\n\n\n# serverå\n\néç½®èæä¸»æºçç¸å³åæ°ï¼ä¸ä¸ªhttpä¸­å¯ä»¥æå¤ä¸ªserver\n\nlocationå\n\néç½®è¯·æ±çè·¯ç±ï¼ä»¥ååç§é¡µé¢çå¤çæåµ\n\n\n# mailå\n\néç½®å¤çmailæµé\n\n\n# streamå\n\néç½®å¤çtcpåudpæµé\n\n\n# 4. å®æ´çéç½®æä»¶ç»æå¦å¾æç¤º\n\n\n\n\n# 5. èææå¡ï¼virtual serversï¼\n\nå¨æ¯ä¸ä¸ªæµéå¤ççä¸ä¸æä¸­,å¯ä»¥åå«ä¸ä¸ªæèå¤ä¸ªserverå, å®ä¹èææå¡æ¥æ§å¶å¤çè¯·æ±,åå«å¨serverä¸ä¸æä¸­çæä»¤æ ¹æ®æµéç±»åä¸åèä¸åã\n\nå¯¹äºhttpæµé(httpä¸ä¸æ)ï¼æ¯ä¸ªserveræä»¤æ§å¶å¯¹ç¹å®åæèipå°åçèµæºè¯·æ±å¤çã å¨serverä¸ä¸æä¸­çä¸ä¸ªæå¤ä¸ªlocationä¸ä¸æå®ä¹å¦ä½å¤æå®çuriéåã\n\nå¯¹äºé®ä»¶åtcp/udpæµé(mailåstreamä¸ä¸æ) , æ¯ä¸ä¸ªserveræä»¤é½æ§å¶å°è¾¾ç¹å®tcpç«¯å£æunixå¥æ¥å­çæµéçå¤çã\n\nå·æå¤ä¸ªä¸ä¸æçéç½®æä»¶æ ·ä¾\n\nä»¥ä¸éç½®è¯´æäºä¸ä¸æçå¦ä½ä½¿ç¨\n\nuser nobody; # a directive in the 'main' contextï¼âmainâä¸ä¸æä¸­çæä»¤ï¼\nevents {\n    # configuration of connection processingï¼è¿æ¥å¤çéç½®ï¼\n}\nhttp {\n    # configuration specific to http and affecting a11 virtual servers\n    # ï¼ç¹å®äºhttpçéç½®å¹¶å½±åa11èææå¡å¨ï¼\n    server {\n        # configuration of http virtual server 1 ï¼httpèææå¡å¨1çéç½®ï¼\n        location /one {\n            # configuration for processing uris starting with ' /one '\n            #ï¼å¤çä»¥'/one'å¼å¤´çuriçéç½®ï¼\n        }\n        1ocation /two {\n            # configuration for processing uris starting with' /two '\n            #ï¼å¤çä»¥'/two'å¼å¤´çuriçéç½®ï¼\n        }\n    }\n    \n    server {\n        # configuration of http virtual server 2ï¼httpèææå¡å¨2çéç½®ï¼\n     }\n}\n\nstream {\n     # configuration specific to tcp/udp and affecting a11 virtual servers\n     #ï¼ç¹å®äºtcp/udpå¹¶å½±åa11èææå¡å¨çéç½®ï¼\n     server {\n          # configuration of tcp virtual server 1ï¼tcpèææå¡å¨1çéç½®ï¼\n     }\n}\n\n\n\n# 6. ç»§æ¿ï¼inheritance [ÉªnËherÉªtÉns]ï¼\n\nä¸è¬æ¥è¯´ï¼å­ä¸ä¸æ(åå«å¨å¦ä¸ä¸ªä¸ä¸æ(å¶ç¶ä¸ä¸æ)ä¸­)ç»§æ¿ç¶çº§åå«çæä»¤è®¾ç½®ãæäºæä»¤å¯ä»¥åºç°å¨å¤ä¸ªä¸ä¸æä¸­ï¼å¨è¿ç§æåµä¸ï¼æ¨å¯ä»¥éè¿å¨å­ä¸ä¸æä¸­åå«è¯¥æä»¤æ¥éåä»ç¶çº§ç»§æ¿çè®¾ç½®ã\n\n\n# 7. éç½®å¸åæ¡ä¾\n\n\n# 1.webç«ç¹\n\nä¸ä¸ªç®åçphpç«ç¹éç½®\n\nserver {\n    listen       80;\n    server_name example.org www.example.org;\n    root         /data/www;\n    \n    location / {\n        index    index.html index.php;\n    }\n    \n     location ~* \\. (gif|jpg|png)$ {\n          expires 30d;\n     } \n     \n    location ~ \\.php$ {\n        fastcgi_pass local host:9000;\n        fastcgi_param script_filename\n                        $document_root$fastcgi_script_name;\n        include         fastcgi_params;\n    } \n}\n\n\n\n# 2.è´è½½å¹³è¡¡å¨\n\nç®åè´è½½å¹³è¡¡éç½®æ ·ä¾\n\nhttp {\n    upstream myapp1 {\n          server srv1.example.com;\n          server srv2.example.com;\n          server srv3.example.com;\n    }\n   \n    server {\n        listen 80;\n        \n        location / {\n             proxy_ pass http://myapp1;\n        }\n    }\n}\n\n\n\n# 3.httpå®å¨ç«ç¹\n\nä¸ä¸ªç®åçhttp/httpsç«ç¹ (certificate [sÉrËtÉªfÉªkÉt , sÉrËtÉªfÉªkeÉªt] è¯æ;è¯æä¹¦;)\n\nserver {\n    listen                80;\n    listen                443 ssl;\n    server_ name          www.example.com;\n    ssl_certificate      www.example.com.crt;\n    ssl_certificate_key www.example.com.key;\n    ...\n}\n\n\n\n# æ³¨ï¼å»ºç«æµç¨\n\n 1. æ³¨ååå\n 2. éæ©å»ºç«æå¡åä¸»æº\n 3. ååè§£æ\n 4. ç½ç«å¤æ¡\n 5. httpsè¯ä¹¦éç½®\n 6. ç½ç«ä¸çº¿",charsets:{cjk:!0}},{title:"Nginxå¸¸ç¨æ¨¡åä¸",frontmatter:{},regularPath:"/Nginx/02_Nginx%E6%A8%A1%E5%9D%97%E7%AE%A1%E7%90%86/Nginx%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%9701.html",relativePath:"Nginx/02_Nginxæ¨¡åç®¡ç/Nginxå¸¸ç¨æ¨¡å01.md",key:"v-6cff0268",path:"/nginx/02_nginxmo-kuai-guan-li/nginxchang-yong-mo-kuai-01.html",headers:[{level:2,title:"1ãæ ¸å¿åè½(Core functionality)",slug:"_1ãæ ¸å¿åè½-core-functionality",normalizedTitle:"1ãæ ¸å¿åè½(core functionality)",charIndex:768},{level:2,title:"2ãhttpæ ¸å¿æ¨¡å ï¼ngx httpcore_moduleï¼",slug:"_2ãhttpæ ¸å¿æ¨¡å-ngx-http-core-module",normalizedTitle:"2ãhttpæ ¸å¿æ¨¡å ï¼ngx httpcore_moduleï¼",charIndex:null},{level:2,title:"3ï¼è®¿é®æ§å¶æ¨¡å",slug:"_3-è®¿é®æ§å¶æ¨¡å",normalizedTitle:"3ï¼è®¿é®æ§å¶æ¨¡å",charIndex:10604},{level:2,title:"4ãç¨æ·è®¤è¯æ¨¡å(ngx http auth basic_ module)",slug:"_4ãç¨æ·è®¤è¯æ¨¡å-ngx-http-auth-basic-module",normalizedTitle:"4ãç¨æ·è®¤è¯æ¨¡å(ngx http auth basic_ module)",charIndex:null},{level:2,title:"5ãåºæ¬ç¶ææ¥çæ¨¡å(ngxhttpstubstatusmodule)",slug:"_5ãåºæ¬ç¶ææ¥çæ¨¡å-ngx-http-stub-status-module",normalizedTitle:"5ãåºæ¬ç¶ææ¥çæ¨¡å(ngxhttpstubstatusmodule)",charIndex:null}],headersStr:"1ãæ ¸å¿åè½(Core functionality) 2ãhttpæ ¸å¿æ¨¡å ï¼ngx httpcore_moduleï¼ 3ï¼è®¿é®æ§å¶æ¨¡å 4ãç¨æ·è®¤è¯æ¨¡å(ngx http auth basic_ module) 5ãåºæ¬ç¶ææ¥çæ¨¡å(ngxhttpstubstatusmodule)",content:'# Nginxå¸¸ç¨æ¨¡åä¸\n\nNginxç±åæ ¸åæ¨¡åç»æãNginxæ¬èº«åçå·¥ä½å®éå¾å°ï¼å½å®æ¥å°ä¸ä¸ªHTTPè¯·æ±æ¶ï¼å®ä»ä»æ¯éè¿æ¥æ¾éç½®æä»¶å°æ­¤æ¬¡è¯·æ±æ å°å°ä¸ä¸ªlocation block,èæ­¤locationä¸­æéç½®çåä¸ªæä»¤åä¼å¯å¨ä¸åçæ¨¡åå»å®æå·¥ä½ï¼å æ­¤æ¨¡åå¯ä»¥çåNginxçæ­£çå³å¨å·¥ä½è. éå¸¸ä¸ä¸ªlocationä¸­çæä»¤ä¼æ¶åä¸ä¸ªhandleræ¨¡ååå¤ä¸ªfilteræ¨¡å(å½ç¶ï¼å¤ä¸ªlocationå¯ä»¥å¤ç¨åä¸ä¸ªæ¨¡å) ã handleræ¨¡åè´è´£å¤çè¯·æ±,å®æååºåå®¹ççæï¼èfilteræ¨¡åå¯¹ååºåå®¹è¿è¡å¤çãç¨æ·æ ¹æ®èªå·±çéè¦æå¼åçæ¨¡åé½å±äºç¬¬ä¸æ¹æ¨¡åãæ­£æ¯æäºè¿ä¹å¤æ¨¡åçæ¯æï¼Nginxçåè½æä¼å¦æ­¤å¼ºå¤§ã\n\nNginxçæ¨¡åä»ç»æä¸åä¸ºæ ¸å¿æ¨¡åãåºç¡æ¨¡ååç¬¬ä¸æ¹æ¨¡å:\n\n * æ ¸å¿æ¨¡å: HTTPæ¨¡åãEVENTæ¨¡ååMAILæ¨¡å;\n * åºç¡æ¨¡å: HTTP Accessæ¨¡åãHTTP FastCGIæ¨¡åãHTTP Proxyæ¨¡ååHTTP Rewriteæ¨¡å;\n * ç¬¬ä¸æ¹æ¨¡å: HTTP Upstream Request Hashæ¨¡åã Noticeæ¨¡ååHTTP Access Keyæ¨¡åã\n\nNginxçæ¨¡åä»åè½ä¸åä¸ºå¦ä¸ä¸ç±»:\n\n * Handlers (å¤çå¨æ¨¡å)ï¼æ­¤ç±»æ¨¡åç´æ¥å¤çè¯·æ±,å¹¶è¿è¡è¾åºåå®¹åä¿®æ¹headersä¿¡æ¯ç­æä½ãHandlerså¤çå¨æ¨¡åè¬åªè½æä¸ä¸ª;\n * Filters (è¿æ»¤å¨æ¨¡å)ï¼æ­¤ç±»æ¨¡åä¸»è¦å¯¹å¶ä»å¤çå¨æ¨¡åè¾åºçåå®¹è¿è¡ä¿®æ¹æä½,æåNginxè¾åº;\n * Proxies (ä»£çç±»æ¨¡å)ï¼æ­¤ç±»æ¨¡åæ¯NginxçHTTP Upstreamä¹ç±»çæ¨¡åï¼è¿äºæ¨¡åä¸»è¦ä¸åç«¯ä¸äºæå¡æ¯å¦FastCG|ç­è¿è¡äº¤äºï¼å®ç°æå¡ä»£çåè´è½½åè¡¡ç­åè½ã\n\n\n# 1ãæ ¸å¿åè½(Core functionality)\n\nfunctionality [ËfÊÅkÊÉËnÃ¦lÉti] åè½\n\n * worker_processes\n\nSyntax: worker_processes number | auto;\nDefault: worker_processes 1;\nContext: main\n\n\næä½³å¼åå³äºè®¸å¤å ç´ ï¼åæ¬(ä½ä¸éäº) CPUæ ¸å¿çæ°éãå­å¨æ°æ®çç¡¬çé©±å¨å¨çæ°éåè´è½½æ¨¡å¼ãä¸è¬å°å¶è®¾ç½®ä¸ºå¯ç¨CPUæ ¸å¿çæ°éã\n\n * worker_cpu_affinity ( [ÉËfÉªnÉti] )\n\nSyntax: worker_cpu_affinity cpumask ...;\n\t    worker_cpu_affinity auto [cpumask];\nDefault: -\nContext: main\n\n\nå°å·¥ä½è¿ç¨ç»å®å°CPUéãæ¯ä¸ªCPUéç±åè®¸çCPUçä½æ©ç è¡¨ç¤ºãåºè¯¥ä¸ºæ¯ä¸ªå·¥ä½è¿ç¨å®ä¹ä¸ä¸ªåç¬çéåãé»è®¤æåµä¸,å·¥ä½è¿ç¨ä¸ç»å®å°ä»»ä½ç¹å®çCPUãè¯¥æä»¤ä»å¨FreeBSDåLinuxä¸å¯ç¨ã\n\nä¾å¦:\n\nworker_processes 4;\nworker_cpu_affinity 0001 0010 0100 1000;\n#å°æ¯ä¸ªå·¥ä½è¿ç¨ç»å®å°åç¬çCPU\n\nworker_processes 2;\nworker_cpu_affinity 0101 1010;\n#å°ç¬¬ä¸ä¸ªå·¥ä½è¿ç¨ç»å®å°CPU0/CPU2,å°ç¬¬äºä¸ªå·¥ä½è¿ç¨ç»å®å°CPU1/CPU3ï¼è¿ä¸ªä¾å­éç¨äºè¶çº¿ç¨æåµ\n\nworker_processes auto;\nworker_cpu_affinity auto;\n#1.9.10çæ¬ååè®¸å°å·¥ä½è¿ç¨èªå¨ç»å®å°å¯ç¨çCPU\n\n\n * worker_priority ( [praÉªËÉËrÉti])\n\nSyntax: worker_priority number;\nDefault: worker_priority 0;\nContext: main\n\n\nä¸ºå·¥ä½è¿ç¨å®ä¹è°åº¦ä¼åçº§ï¼å°±åç±niceå½ä»¤æ§è¡ä¸æ ·: è´æ°è¡¨ç¤ºä¼åçº§æ´é«ãåè®¸èå´éå¸¸å¨20å°20ä¹é´\n\n * worker_rlimit_nofile\n\nSyntax: worker_rlimit_nofile number;\nDefault: -\nContext: main\n\n\næ´æ¹å·¥ä½è¿ç¨çæå¤§æå¼æä»¶æ°(rlimit_nofile)éå¶ï¼é»è®¤è¾å°ï¼çäº§ç¯å¢ä¸è¬éè¦è°é«ï¼å¦: 65535.ï¼éè¦åæ¶ä¿®æ¹linuxåä¸æ¶é´å¼å¯çæä»¶æ°ï¼\n\n# ä¿®æ¹linuxçåä¸æ¶é´æå¤å¯å¼å¯çæä»¶æ°\n$ ulimit -n 65535\n# å¦æéè¦æ°¸ä¹ä¿®æ¹ åéè¦ä¿®æ¹éç½®æä»¶/etc/security/limits.conf\n* soft nofile 65536      # open files  (-n)\n* hard nofile 65536\n \n* soft nproc 65565\n* hard nproc 65565       # max user processes   (-u)\n\n\n * worker_connection\n\nSyntax: worker_connections number;\nDefault: worker_connections 1024;\nContext: events\n\n\nè®¾ç½®è½å¤è¢«ä¸ä¸ªå·¥ä½è¿ç¨æå¼çæå¤§å¹¶åè¿æ¥æ°ãåºè¯¥è®°ä½ï¼è¿ä¸ªæ°å­åæ¬ææè¿æ¥(ä¾å¦ï¼ä¸ä»£çæå¡å¨çè¿æ¥ç­)ï¼èä¸ä»ä»æ¯ä¸å®¢æ·æºçè¿æ¥ãå¦ä¸ä¸ªéè¦èèçé®é¢æ¯ï¼å®éåæ¶è¿æ¥çæ°éä¸è½è¶è¿æå¼æä»¶çæå¤§æ°éçå½åéå¶( worker_rlimit_nofile.) ã\n\n * use\n\nSyntax: use method;\nDefault: -\nContext: events\n\n\næå®è¦ä½¿ç¨çè¿æ¥å¤çæ¹æ³ãéå¸¸ä¸éè¦æ¾å¼å°æå®å®ï¼å ä¸ºnginxé»è®¤ä½¿ç¨æææçæ¹æ³ãå¦: useepoll;\n\n * accept_mutex ï¼ [ÉkËsept] //,mjuË ËtÉks// æ¥åäºæ¥ï¼\n\nSyntax: accept_mutex on|off;\nDefault: accept_mutex off;\nContext: events\n\n\nå¦æå¯ç¨:onï¼å·¥ä½è¿ç¨å°è½®æµæ¥åæ°çè¿æ¥ãå¦åå°éç¥ææå·¥ä½è¿ç¨æå³æ°è¿æ¥çä¿¡æ¯ï¼ä½åªæä¸ä¸ªè¿ç¨å¯ä»¥è·å¾è¿æ¥ãå¦ææ°è¿æ¥çæ°éè¾ä½ï¼åæäºå·¥ä½è¿ç¨å¯è½ä¼æµªè´¹ç³»ç»èµæºãå¨çæ¬1.11.3ä¹åï¼é»è®¤å¼ä¸ºonãå¹¶åå¤çæ¶åå»ºè®®å¼å¯ã\n\n\n# 2ãhttpæ ¸å¿æ¨¡å ï¼ngx _http_core_moduleï¼\n\n * http\n\nSyntax: http { ... }\nDefault: -\nContext: main\n\n\næä¾éç½®æä»¶ä¸ä¸æï¼å¶éé¢æå®HTTPæå¡å¨æä»¤\n\n * server\n\nSyntax: server { ... }\nDefault: -\nContext: http\n\n\néç½®èæä¸»æºãåºäºIPçååºäºååçèæä¸»æºãlistenæä»¤æè¿°äºæ¥æ¶è¿æ¥çææå°ååç«¯å£ , server_nameæä»¤ååºäºææçååã\n\n * listen\n\nSyntax: listen address [:port] [defau1t_server] [ss1] [http2 | spdy]\n[proxy_protoco1] [setfib=number] [fastopen=number] [backlog=number]\n[rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind]\n[ipv6only=on|off] [reuseport] [so_keepalive=on|off| [keepid1e] : [keepintv1]:[keepcnt]];\nlisten port [default_server] [ss1] [http2|spdy] [proxy_protoco1]\n[setfib=number] [fastopen=number] [backlog=number] [rcvbuf=size] [sndbuf=size]\n[accept_filter=filter] [deferred] [bind] [ipv6only=on|off] [reuseport]\n[so_keepalive=on|off|[keepid1e] : [keepintv1] : [keepcnt]];\nlisten unix:path [default_server] [ssl] [http2|spdy] [proxy_protoco1]\n[backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred]\n[bind] [so_keepalive=on|off|[keepidle]:[keepintv1]:[keepcnt]];\nDefault: listen *:80 | *:8000; #é»è®¤å¼\nContext: server #ä½¿ç¨å­æ®µï¼server\n\n\nè®¾ç½®IPçå°ååç«¯å£ï¼ææå¡å¨å°æ¥åè¯·æ±çUnixåå¥æ¥å­çè·¯å¾,ä¾å¦:\n\nlisten 127.0.0.1:8000;\nlisten 127.0.0.1;\nlisten 8000;\nlisten *:8000;\nlisten localhost:8000;\n# ipv6å°åæ ¼å¼ï¼0.7.36ï¼å¨ä¸ä¸ªæ¹æ¬å·ä¸­æå®ï¼\nlisten [::]:8000;\nlisten [fe80::1];\n# 0.8.21çæ¬ä»¥ånginxå¯ä»¥çå¬unixå¥æ¥å£ï¼\nlisten unix:/tmp/nginx1.sock;\n\n\n * server_name\n\nSyntax: server_name name ...;\nDefault: server_name "";\nContext: server\n\n\nè®¾ç½®èææå¡å¨çåå­ãä¾å¦:\n\nserver {\nserver_name example.com www.example.com;\n}\n#æå¡å¨åç§°å¯ä»¥åæ¬æå·("*") æ¥æ¿æ¢åç§°çç¬¬ä¸é¨åææåä¸é¨å:\nserver {\nserver_name example.com * .example.com www.example.*;\n}\n\n#æ¯æ~èµ·å§çå­ç¬¦åæ­£åè¡¨è¾¾å¼æ¨¡å¼å¹éï¼æ§è½åå æç¨\nserver {\nserver_name www.example.com~^www\\d+\\.example\\.com$; # \\dè¡¨ç¤º[0-9]\n}\n\n\nå¹éä¼åçº§æºå¶ä»é«å°ä½:\n\n 1. é¦åæ¯å­ç¬¦ä¸²ç²¾ç¡®å¹éå¦:https://www.cnblogs.com/ykzou/p/5840729.html\n 2. å·¦ä¾§ééç¬¦å¦ï¼*.demo\n 3. å³ä¾§ééç¬¦å¦ï¼demo.*\n 4. æ­£åè¡¨è¾¾å¼å¦ï¼-^.*.demo\n 5. default_server\n\n * root\n\nSyntax: root path;\nDefault: root html;\nContext: http, server, location, if in location\n\n\nè®¾ç½®è¯·æ±çæ ¹ç®å½ï¼ä¾å¦ï¼\n\nlocation /i/ {\n\troot /data/w3;\n}\n# /data/w3/i/top.gifæä»¶å°ååº"/i/top.gif"è¯·æ±èåé\n# è·¯å¾å¼å¯ä»¥åå«åéï¼é¤äº$document_rootå$realpath_rootã\n\n\n * alias [ËeÉªliÉs]\n\nSyntax: alias path;\nDefault: -\nContextï¼1ocation\n\n\nå®ä¹æå®çlocationçä¸ä¸ªæ¿æ¢\n\nlocation /i/ {\n\talias /data/w3/images/;\n}\n#å¯¹äº"/i/top.gif"çè¯·æ±,å°åéæä»¶/data/w3/images/top.gifã\n#è·¯å¾å¼å¯ä»¥åå«åéï¼é¤äº$document_rootå$realpath_root\n#aliasåé¢å¿é¡»è¦ç¨ "/" ç»æï¼å¦åä¼æ¾ä¸å°æä»¶\n#å¦æaliaséç½®å¨æ­£åå¹éçlocationåï¼åæ­£åè¡¨è¾¾å¼ä¸­å¿é¡»åå«æè·è¯­å¥(ä¹å°±æ¯æ¬å·())ï¼\n#èä¸aliaséç½®ä¸­ä¹è¦å¼ç¨è¿äºæè·å¼ãå¦:\nlocation ~ ^/users/(.+\\.(?:gif|jpe?g|png))$ {\n\talias /data/w3/images/$1;\n}\n\n\n# å³äºaliasårootçåºå«ï¼ \n# rootåaliasæ¯ç³»ç»æä»¶è·¯å¾çè®¾ç½®ã \n# rootç¨æ¥è®¾ç½®æ ¹ç®å½ï¼èaliasç¨æ¥éç½®å½åæä»¶çç®å½ã\n\nlocation /img/ {\n    alias /var/www/image/;\n}\n#è¥æç§ä¸è¿°éç½®çè¯ï¼åè®¿é®/img/ç®å½éé¢çæä»¶æ¶ï¼ningxä¼èªå¨å»/var/www/image/ç®å½æ¾æä»¶\nlocation /img/ {\n    root /var/www/image;\n}\n#è¥æç§è¿ç§éç½®çè¯ï¼åè®¿é®/img/ç®å½ä¸çæä»¶æ¶ï¼nginxä¼å»/var/www/image/img/ç®å½ä¸æ¾æä»¶ã\n\n\n * location\n\nSyntax: location [ = | ~ | ~* | ^~ ] uri { ... }\n\tlocation @name { ... }\nDefault: -\nContext: server, location\n\n\næ ¹æ®è¯·æ±çURIè®¾ç½®éç½®ã å¨ä¸ä¸ªserverä¸­locationéç½®æ®µå¯å­å¨å¤ä¸ªï¼ç¨äºå®ç°URIå°æä»¶ç³»ç»çè·¯å¾æ å°ï¼\n\nå¹éå­ç¬¦ä¸²åä¸ºä¸¤ç§ï¼æ®éå­ç¬¦ä¸² (literal string) åæ­£åè¡¨è¾¾å¼ (regular expression) ï¼å¶ä¸­ ~ å ~* ç¨äºæ­£åè¡¨è¾¾å¼ï¼å¶ä»åç¼åæ ä»»ä½åç¼é½ç¨äºæ®éå­ç¬¦ä¸²ã\n\nå¹éé¡ºåºæ¯\n\n 1. åå¹éæ®éå­ç¬¦ä¸²ï¼å°ç¸å¯¹æç²¾ç¡®çå¹éææ¶å­å¨ï¼\n 2. ç¶åæç§éç½®æä»¶ä¸­çå£°æé¡ºåºè¿è¡æ­£åè¡¨è¾¾å¼å¹éï¼åªè¦å¹éå°ä¸æ¡æ­£åè¡¨è¾¾å¼ï¼ååæ­¢å¹éï¼åæ­£åè¡¨è¾¾å¼ä¸ºå¹éç»æ;\n 3. å¦ææææ­£åè¡¨è¾¾å¼é½å¹éä¸ä¸,åå1ä¸­å­å¨çç»æï¼\n 4. å¦ææ®éå­ç¬¦ä¸²åæ­£åè¡¨è¾¾å¼é½å¹éä¸ä¸ï¼åæ¥404 NOT FOUND\n 5. "^~ "å"="é½è½é»æ­¢ç»§ç»­æç´¢æ­£ålocationãä¸åç¹æ¯"^~âä¾ç¶éµå®"æå¤§åç¼"å¹éè§åï¼ç¶è"="ä¸æ¯"æå¤§åç¼âï¼èæ¯å¿é¡»æ¯ä¸¥æ ¼å¹é\n 6. åªè¦éå°"å®å¨å¹éï¼exact match[ÉªÉ¡ËzÃ¦kt mÃ¦tÊ]ï¼"ï¼å³ä½¿æ®élocation æ²¡æå¸¦"="æ"^~"åç¼ï¼ä¹ä¸æ ·ä¼ç»æ­¢åé¢çå¹éã\n\nä¾å¦:\n\nlocation = /uri\t\t=å¼å¤´è¡¨ç¤ºç²¾ç¡®åç¼å¹éï¼åªæå®å¨å¹éæè½çæã\nlocation ^~ /uri\t^~å¼å¤´è¡¨ç¤ºæ®éå­ç¬¦ä¸²å¹éä¸ä»¥åä¸åè¿è¡æ­£åå¹éã\nlocation ~ pattern\t~å¼å¤´è¡¨ç¤ºåºåå¤§å°åçæ­£åå¹éã\nlocation ~* pattern\t~*å¼å¤´è¡¨ç¤ºä¸åºåå¤§å°åçæ­£åå¹éã\nlocation /uri\tä¸å¸¦ä»»ä½ä¿®é¥°ç¬¦ï¼è¡¨ç¤ºåç¼å¹éã\nlocation /\téç¨å¹éï¼ä»»ä½æªå¹éå°å¶ä»locationçè¯·æ±é½ä¼å¹éå°ã\n\n\néç½®ä¸¾ä¾ï¼\n\nlocation = / {\n\t[ configuration A ]\n}\n\nlocation / {\n\t[ configuration B ]\n}\n\nlocation /documents/ {\n\t[ configuration C ]\n}\n\nlocation ^~ /images/ {\n\t[ configuration D ]\n}\n\nlocation ~* \\. (gif | jpg | jpeg)$ {\n\t[ configuration E ]\n}\n    \n# "/"è¯·æ±å¹éconfiguration A:\n# "/index.html"è¯·æ±å¹éconfiguration B:\n# "/documents/document. . html"è¯·æ±å¹éconfiguration C:\n# "/images/1.gif"è¯·æ±å¹éconfiguration D: \n# "/documents/1.jpg"è¯·æ±å¹éconfiguration Eã\n\n# æ³¨æ:æ­£åå¹éä¼æ ¹æ®å¹éé¡ºåºï¼æ¾å°ç¬¬ä¸ä¸ªå¹éçæ­£åè¡¨è¾¾å¼åå°åæ­¢æç´¢ã\n# æ®éå­ç¬¦ä¸²å¹éåæ è§é¡ºåºï¼åªä¼éæ©æç²¾ç¡®çå¹éã\n\n\n * tcp_nodelay ï¼delay [dÉªËleÉª] å»¶è¿ï¼\n\nSyntax: tcp_nodelay on | off;\nDefault: tcp_nodelay on;\ncontext: http, server, location\n\n\nå½è¿æ¥è½¬æ¢ä¸ºä¿ææ´»å¨(keep-alive)ç¶ææ¶ï¼å¯ç¨è¯¥éé¡¹ãæ­¤å¤ï¼å®å¨SSLè¿æ¥ãæ ç¼å²ä»£çåWebSocketä»£çä¸ä¹è¦å¯ç¨ãï¼è¿ä¸ªéé¡¹ä»å¨å°è¿æ¥è½¬åä¸ºé¿è¿æ¥çæ¶åæè¢«å¯ç¨ãï¼ï¼éè¦é¢ç¹çåéä¸äºå°åæ°æ®å¹¶ä¸ä¸å¸ææ¾ç½®ç¼å²åºèæ¯ç´æ¥åéæ¶å¼å¯ï¼\n\n * tcp_nopushï¼push [pÊÊ]ï¼\n\nSyntax: tcp_nopush on | off;\nDefault: tcp_nopush off;\ncontext: http, server, location\n\n\nå¯ç¨æç¦FreeBSDä¸çtcp_nopush socketéé¡¹æLinuxä¸çtcp_cork socketéé¡¹ãåªæå¨ä½¿ç¨sendfileæ¶æå¯ç¨è¿äºéé¡¹ãï¼å¶åè½åtcp_nodelayåè½æ­£å¥½ç¸åï¼\n\n * senfile\n\nSyntax: sendfile on | off;\nDefault: sendfile off;\nContext: http, server, location, if in location\n\n\nå¯ç¨æç¦ç¨sendfile()çä½¿ç¨ãä»nginx 0.8.12åFreeBSD 5.2.1å¼å§ï¼AIOï¼å³Asyncéé»å¡ï¼æ¯å¼æ­¥éé»å¡çIOï¼å¯ç¨äºé¢å è½½sendfile()çæ°æ®ã\n\nä¸å¼å¯sendfile(): ç¡¬ç >> kernel buffer >> user buffer >> kernel socket buffer >>åè®®æ \n\nå¼å¯sendfile(): ç¡¬ç >> kernel buffer (å¿«éæ·è´å°ker nelsocket buffer) >>åè®®æ \n\nå½ Nginxæ¯ä¸ä¸ªéææä»¶æå¡å¨çæ¶åï¼å¼å¯sendfileéç½®é¡¹è½å¤§å¤§æé«Nginxçæ§è½ã\n\nä¾å¦:\n\nlocation /video/ {\n\tsendfile\ton;\n\ttcp_ nopush\ton;\n\taio\t\t    on;\n}\n\n\n * server_tokens\n\nSyntax: server_tokens on | off | build | string;\nDefault: server_tokens on;\ncontext: http, server, location\n\n\nå¨éè¯¯é¡µåâæå¡å¨âååºå¤´å­æ®µä¸­å¯ç¨æç¦ç¨ååºnginxçæ¬ã\n\n * error_page\n\nSyntax: error_page code ... [=[response]] uri;\nDefault: -\nContext: http, server, location, if in location\n\n\nå®ä¹ä¸ºæå®éè¯¯æ¾ç¤ºçURIãURIå¼å¯ä»¥åå«åéã\n\nä¾å¦:\n\nerror_page 404\t\t/404.html;\nerror_page 500 502 503 504 /50x.html;\n\n# è¿å°å¯¼è´åé¨éå®åå°æå®çURI,å®¢æ·ç«¯è¯·æ±æ¹æ³æ´æ¹ä¸º"GET" (å¯¹äºé¤"GET"å"HEAD"ä¹å¤çæææ¹æ³)ã\n# æ­¤å¤ï¼å¯ä»¥ä½¿ç¨"=response"è¯­æ³å°ååºä»£ç æ´æ¹ä¸ºå¶ä»ä»£ç ï¼ä¾å¦:\nror_page 404 =200 /empty.gif;\n\n\n * keepalive_timeout\n\nSyntax: keepalive_timeout timeout [header_timeout];\nDefault: keepalive_timeout 75s;\nContext: http, server, location\n\n\nè®¾å®å®¢æ·ç«¯ä¿æè¿æ¥è¶æ¶æ¶é¿ï¼0è¡¨ç¤ºç¦æ­¢ã MozillaåKonquerorå¯ä»¥è¯å«ï¼ MSIEèªå·±ä¼å¨60såå³é­è¿æ¥ã\n\nKonqueror ï¼å­åæ´ï¼æ¯ KDE æ¡é¢ç³»ç»çä¸é¨åï¼ä¸»è¦ç¨äº Linux å BSDå®¶æçæä½ç³»ç»ãå¨å¾®è½¯ç Windows ç³»ç»ä¸ï¼ä¹æé¶æä½¿ç¨ï¼å½ç¶åè½ç¸å¯¹æéãKonquerorä¸»è¦ç¨äºæä»¶ç®¡çãæµè§ï¼ä»¥åç½é¡µæµè§ãKonqueror æç§ GPL è¿è¡åå¸ã\n\n * keepalive_requests\n\nSyntax: keepalive_requests number;\nDefault: keepalive_requests 100;\nContext: http, server, location\n\n\nè®¾ç½®éè¿ä¸ä¸ªä¿ææ´»å¨è¿æ¥å¯ä»¥æä¾æå¡çæå¤§è¯·æ±æ°ãå¨ååºæå¤§è¯·æ±æ°åï¼è¿æ¥å°å³é­ã\n\n * keepalive_disable\n\nSyntax: keepalive_disable none | browser ...;\nDefault: keepalive_disab1e msie6;\nContext: http, server, location\n\n\nç¦æ­¢ä¸é£äºè¡ä¸ºä¸æ­£å¸¸çæµè§å¨ä¿ææ´»å¨è¿æ¥ã\n\n * send_timeout\n\nSyntax: send_timeout time;\nDefault: send_timeout 60s;\nContext: http, server, location\n\n\nè®¾ç½®åå®¢æ·ç«¯åéååºçè¶æ¶æ¶é´ãè¶æ¶ä»å¨ä¸¤ä¸ªè¿ç»­çåå¥æä½ä¹é´è®¾ç½®ï¼ä¸ç¨äºä¼ è¾æ´ä¸ªååºãå¦æå®¢æ·ç«¯å¨æ­¤æ¶é´åæªæ¶å°ä»»ä½åå®¹ï¼åè¿æ¥å°å³é­ã\n\n * client_body_buffer_size\n\nSyntax: client_body_buffer_size size;\nDefault: client_body_buffer_size 8k |16k;\nContext: http, server, location\n\n\nè®¾ç½®è¯»åå®¢æ·ç«¯è¯·æ±bodyé¨åçbufferå¤§å°ãå¦æè¯·æ±bodyå¤§äºç¼å²åºï¼åæ´ä¸ªbodyæå¶é¨åå°åå¥ä¸´æ¶æä»¶ãé»è®¤æåµä¸ï¼ç¼å²åºå¤§å°ç­äºä¸¤ä¸ªåå­é¡µãx86å¹³å°é»è®¤æ¯8kï¼x86_ 64å¹³å°æ¯16kã\n\n * client_body_temp_path\n\nSyntax: client_body_temp_path path [1evel1 [1evel2 [leve13]]];\nDefault: client_body_temp_path client_body_temp;\nContext: http, server, location\n\n\nå®ä¹ç¨äºå­å¨ä¿å­å®¢æ·ç«¯è¯·æ±bodyçä¸´æ¶æä»¶çç®å½ãæå®ç®å½ä¸æå¤å¯ä»¥ä½¿ç¨ä¸çº§å­ç®å½å±æ¬¡ç»æãä¾å¦:\n\n# è¿éçlevel1,2,3å¦ææå¼å°±ä»£è¡¨å­å¨ä¸çº§ï¼äºçº§ï¼ä¸çº§å­ç®å½ã\n# ç®å½åæ¯ç±æ°å­è¿è¡å½åçï¼æä»¥è¿éçå·ä½çå¼å°±æ¯ä»£è¡¨ç®å½åçæ°å­ä½æ°\nclient_body_temp_path /spoo1/nginx/client_temp 1 2;\n# ä¸´æ¶æä»¶çè·¯å¾å¯è½çèµ·æ¥åä¸é¢æç¤º:\n/spoo1/nginx/client_temp/7/45/00000123457\n\n\n * client_max_body_size\n\nSyntax: client_max_body_size size;\nDefault: client_max_body_size 1m;\nContext: http, server, location\n\n\nè®¾ç½®å®¢æ·ç«¯è¯·æ±bodyé¨åçæå¤§å¼ãæå®å¨è¯·æ±å¤´ç"Content-Length"åºåã å¦æè¶åºè¿ä¸ªå¼ï¼åè¿å413éè¯¯ãå°å¤§å°è®¾ç½®ä¸º0å°ç¦ç¨å¯¹å®¢æ·ç«¯è¯·æ±bodyå¤§å°çæ£æ¥ã\n\n * limit_rate ([reÉªt])\n\nSyntax: limit_rate rate;\nDefault: limit_rate 0;\ncontext: http, server, location, if in location\n\n\néå¶ååºç»å®¢æ·ç«¯çä¼ è¾éçï¼åä½æ¯bytes/second,é»è®¤å¼0è¡¨ç¤ºæ éå¶ã\n\n * limit_except ( [ÉªkËsept] )\n\nsyntax: limit_except method ... { ... }\nDefault: -\nContext: location\n\n\néå¶å¨locationåä½¿ç¨çhttpæ¹æ³ãæ¹æ³åæ¬: GET, HEAD, POST, PUT, DELETE, MKCOL, COPY, MOVE,OPTIONS, PROPFIND, PROPPATCH, LOCK, UNLOCK, PATCHãåè®¸GETæ¹æ³æ¶, HEADæ¹æ³ä¹ä¼è¢«åè®¸ãä¾å¦:\n\nï¼allow [ÉËlaÊ] deny [dÉªËnaÉª] ï¼\n\nlimit_except GET {\n\tallow 192.168.1.0/24;\n\tdeny all;\n}\n#é¤äºGETåHEADä¹å¤å¶å®æ¹æ³ä»åè®¸192.168.1.0/24ç½æ®µä¸»æºä½¿ç¨\n\n\n\n# 3ï¼è®¿é®æ§å¶æ¨¡å\n\næ­¤æ¨¡ååè®¸éå¶å¯¹ç¹å®å®¢æ·æºå°åçè®¿é®\n\n * allow\n\nSyntax: allow address | CIDR | unix: | all;\nDefault: -\nContext: http, server, location, limit_except\n\n\næå®åè®¸è®¿é®çå°åæç½æ ¼\n\n * deny\n\nSyntax: deny address | CIDR | unix: | a11;\nDefault: -\nContext: http, server, location, limit_except\n\n\næå®æç»çå°åæç½ç»\n\nä¾å¦:\n\nlocation / {\n\tdeny 192.168.1.1;\n\tallow 192.168.1.0/24;\n\tallow 10.1.1.0/16;\n\tallow 2001:0db8::/32;\n\tdeny all;\n}\n# è§åæé¡ºåºæ£æ¥ï¼ç´å°æ¾å°ç¬¬ä¸ä¸ªå¹éé¡¹ã\n\n\n\n# 4ãç¨æ·è®¤è¯æ¨¡å(ngx_ http_ auth basic_ module)\n\næ­¤æ¨¡åä½¿ç¨HTTP Basic Authenticationåè®®éå¶å¯¹èµæºçè®¿é®ï¼éè¿ç¨æ·ååå¯ç æ¹å¼ã\n\n * auth_basic\n\nsyntax: auth_basic string | off;\nDefault: auth_basic off;\nContext: http, server, location, limit_except\n\n\næ¿æ´»åå³é­è®¤è¯åè½ã\n\n * auth_basic_user_file\n\nSyntax: auth_basic_user_file file;\nDefault: -\nContext: http, server, location, limit_except\n\n\næå®ä¿å­ç¨æ·ååå¯ç çæä»¶ãæ ¼å¼å¦ä¸:\n\n# comment\nname1: password1\nname2: password2:comment\nname3: password3\n\n# ä¹å¯ä»¥ä½¿ç¨å¯æãå¯ä»¥éè¿ä½¿ç¨apatchçhtpasswdå½ä»¤(http-toolsæä¾)\n# æèopenssl passwdå½ä»¤\n\n\néç½®æ¡ä¾ï¼\n\nlocation /admin/ {\n\tauth_basic "Admin Area";\n\tauth_basic_user_file /etc/nginx/.ngxpasswd;\n}\n\nlocation / {\n\tauth_basic\t"closed site";\n\tauth_basic_user_file conf/htpasswd;\n}\n\n\n\n# 5ãåºæ¬ç¶ææ¥çæ¨¡å(ngx_http_stub_status_module)\n\næä¾å¯¹åºæ¬ç¶æä¿¡æ¯çè®¿é®\n\n * stub_status\n\nSyntax: stub_status;\nDefault: -\nContext: server, location\n\n\nå¨1.7.5ä¹åççæ¬:"stub_status on"ã éç½®æ¡ä¾:\n\nlocation = /basic_status {\n\tstub_status;\nlocation /status {\n\tstub_status;\n\tallow 172.16.0.0/16;\n\tdeny all;\n}\n# è¾åºnginxçåºæ¬ç¶æä¿¡æ¯\n# Active connections:å½åç¶æ, æ´»å¨ç¶æçè¿æ¥æ°\n# accepts: ç»è®¡æ»å¼, å·²ç»æ¥åçå®¢æ·ç«¯è¯·æ±çæ»æ°\n# handled: ç»è®¡æ»å¼, å·²ç»å¤çå®æçå®¢æ·ç«¯è¯·æ±çæ»æ°\n# requests: ç»è®¡æ»å¼, å®¢æ·ç«¯åæ¥çæ»çè¯·æ±æ°\n# Reading: å½åç¶æ, æ­£å¨è¯»åå®¢æ·ç«¯è¯·æ±æ¥æé¦é¨çè¿æ¥çè¿æ¥æ°\n# writing: å½åç¶æ, æ­£å¨åå®¢æ·ç«¯åéååºæ¥æè¿ç¨ä¸­çè¿æ¥æ°\n# waiting: å½åç¶æ, æ­£å¨ç­å¾å®¢æ·ç«¯ååºè¯·æ±çç©ºé²è¿æ¥æ°\n',normalizedContent:'# nginxå¸¸ç¨æ¨¡åä¸\n\nnginxç±åæ ¸åæ¨¡åç»æãnginxæ¬èº«åçå·¥ä½å®éå¾å°ï¼å½å®æ¥å°ä¸ä¸ªhttpè¯·æ±æ¶ï¼å®ä»ä»æ¯éè¿æ¥æ¾éç½®æä»¶å°æ­¤æ¬¡è¯·æ±æ å°å°ä¸ä¸ªlocation block,èæ­¤locationä¸­æéç½®çåä¸ªæä»¤åä¼å¯å¨ä¸åçæ¨¡åå»å®æå·¥ä½ï¼å æ­¤æ¨¡åå¯ä»¥çånginxçæ­£çå³å¨å·¥ä½è. éå¸¸ä¸ä¸ªlocationä¸­çæä»¤ä¼æ¶åä¸ä¸ªhandleræ¨¡ååå¤ä¸ªfilteræ¨¡å(å½ç¶ï¼å¤ä¸ªlocationå¯ä»¥å¤ç¨åä¸ä¸ªæ¨¡å) ã handleræ¨¡åè´è´£å¤çè¯·æ±,å®æååºåå®¹ççæï¼èfilteræ¨¡åå¯¹ååºåå®¹è¿è¡å¤çãç¨æ·æ ¹æ®èªå·±çéè¦æå¼åçæ¨¡åé½å±äºç¬¬ä¸æ¹æ¨¡åãæ­£æ¯æäºè¿ä¹å¤æ¨¡åçæ¯æï¼nginxçåè½æä¼å¦æ­¤å¼ºå¤§ã\n\nnginxçæ¨¡åä»ç»æä¸åä¸ºæ ¸å¿æ¨¡åãåºç¡æ¨¡ååç¬¬ä¸æ¹æ¨¡å:\n\n * æ ¸å¿æ¨¡å: httpæ¨¡åãeventæ¨¡ååmailæ¨¡å;\n * åºç¡æ¨¡å: http accessæ¨¡åãhttp fastcgiæ¨¡åãhttp proxyæ¨¡ååhttp rewriteæ¨¡å;\n * ç¬¬ä¸æ¹æ¨¡å: http upstream request hashæ¨¡åã noticeæ¨¡ååhttp access keyæ¨¡åã\n\nnginxçæ¨¡åä»åè½ä¸åä¸ºå¦ä¸ä¸ç±»:\n\n * handlers (å¤çå¨æ¨¡å)ï¼æ­¤ç±»æ¨¡åç´æ¥å¤çè¯·æ±,å¹¶è¿è¡è¾åºåå®¹åä¿®æ¹headersä¿¡æ¯ç­æä½ãhandlerså¤çå¨æ¨¡åè¬åªè½æä¸ä¸ª;\n * filters (è¿æ»¤å¨æ¨¡å)ï¼æ­¤ç±»æ¨¡åä¸»è¦å¯¹å¶ä»å¤çå¨æ¨¡åè¾åºçåå®¹è¿è¡ä¿®æ¹æä½,æånginxè¾åº;\n * proxies (ä»£çç±»æ¨¡å)ï¼æ­¤ç±»æ¨¡åæ¯nginxçhttp upstreamä¹ç±»çæ¨¡åï¼è¿äºæ¨¡åä¸»è¦ä¸åç«¯ä¸äºæå¡æ¯å¦fastcg|ç­è¿è¡äº¤äºï¼å®ç°æå¡ä»£çåè´è½½åè¡¡ç­åè½ã\n\n\n# 1ãæ ¸å¿åè½(core functionality)\n\nfunctionality [ËfÊÅkÊÉËnÃ¦lÉti] åè½\n\n * worker_processes\n\nsyntax: worker_processes number | auto;\ndefault: worker_processes 1;\ncontext: main\n\n\næä½³å¼åå³äºè®¸å¤å ç´ ï¼åæ¬(ä½ä¸éäº) cpuæ ¸å¿çæ°éãå­å¨æ°æ®çç¡¬çé©±å¨å¨çæ°éåè´è½½æ¨¡å¼ãä¸è¬å°å¶è®¾ç½®ä¸ºå¯ç¨cpuæ ¸å¿çæ°éã\n\n * worker_cpu_affinity ( [ÉËfÉªnÉti] )\n\nsyntax: worker_cpu_affinity cpumask ...;\n\t    worker_cpu_affinity auto [cpumask];\ndefault: -\ncontext: main\n\n\nå°å·¥ä½è¿ç¨ç»å®å°cpuéãæ¯ä¸ªcpuéç±åè®¸çcpuçä½æ©ç è¡¨ç¤ºãåºè¯¥ä¸ºæ¯ä¸ªå·¥ä½è¿ç¨å®ä¹ä¸ä¸ªåç¬çéåãé»è®¤æåµä¸,å·¥ä½è¿ç¨ä¸ç»å®å°ä»»ä½ç¹å®çcpuãè¯¥æä»¤ä»å¨freebsdålinuxä¸å¯ç¨ã\n\nä¾å¦:\n\nworker_processes 4;\nworker_cpu_affinity 0001 0010 0100 1000;\n#å°æ¯ä¸ªå·¥ä½è¿ç¨ç»å®å°åç¬çcpu\n\nworker_processes 2;\nworker_cpu_affinity 0101 1010;\n#å°ç¬¬ä¸ä¸ªå·¥ä½è¿ç¨ç»å®å°cpu0/cpu2,å°ç¬¬äºä¸ªå·¥ä½è¿ç¨ç»å®å°cpu1/cpu3ï¼è¿ä¸ªä¾å­éç¨äºè¶çº¿ç¨æåµ\n\nworker_processes auto;\nworker_cpu_affinity auto;\n#1.9.10çæ¬ååè®¸å°å·¥ä½è¿ç¨èªå¨ç»å®å°å¯ç¨çcpu\n\n\n * worker_priority ( [praÉªËÉËrÉti])\n\nsyntax: worker_priority number;\ndefault: worker_priority 0;\ncontext: main\n\n\nä¸ºå·¥ä½è¿ç¨å®ä¹è°åº¦ä¼åçº§ï¼å°±åç±niceå½ä»¤æ§è¡ä¸æ ·: è´æ°è¡¨ç¤ºä¼åçº§æ´é«ãåè®¸èå´éå¸¸å¨20å°20ä¹é´\n\n * worker_rlimit_nofile\n\nsyntax: worker_rlimit_nofile number;\ndefault: -\ncontext: main\n\n\næ´æ¹å·¥ä½è¿ç¨çæå¤§æå¼æä»¶æ°(rlimit_nofile)éå¶ï¼é»è®¤è¾å°ï¼çäº§ç¯å¢ä¸è¬éè¦è°é«ï¼å¦: 65535.ï¼éè¦åæ¶ä¿®æ¹linuxåä¸æ¶é´å¼å¯çæä»¶æ°ï¼\n\n# ä¿®æ¹linuxçåä¸æ¶é´æå¤å¯å¼å¯çæä»¶æ°\n$ ulimit -n 65535\n# å¦æéè¦æ°¸ä¹ä¿®æ¹ åéè¦ä¿®æ¹éç½®æä»¶/etc/security/limits.conf\n* soft nofile 65536      # open files  (-n)\n* hard nofile 65536\n \n* soft nproc 65565\n* hard nproc 65565       # max user processes   (-u)\n\n\n * worker_connection\n\nsyntax: worker_connections number;\ndefault: worker_connections 1024;\ncontext: events\n\n\nè®¾ç½®è½å¤è¢«ä¸ä¸ªå·¥ä½è¿ç¨æå¼çæå¤§å¹¶åè¿æ¥æ°ãåºè¯¥è®°ä½ï¼è¿ä¸ªæ°å­åæ¬ææè¿æ¥(ä¾å¦ï¼ä¸ä»£çæå¡å¨çè¿æ¥ç­)ï¼èä¸ä»ä»æ¯ä¸å®¢æ·æºçè¿æ¥ãå¦ä¸ä¸ªéè¦èèçé®é¢æ¯ï¼å®éåæ¶è¿æ¥çæ°éä¸è½è¶è¿æå¼æä»¶çæå¤§æ°éçå½åéå¶( worker_rlimit_nofile.) ã\n\n * use\n\nsyntax: use method;\ndefault: -\ncontext: events\n\n\næå®è¦ä½¿ç¨çè¿æ¥å¤çæ¹æ³ãéå¸¸ä¸éè¦æ¾å¼å°æå®å®ï¼å ä¸ºnginxé»è®¤ä½¿ç¨æææçæ¹æ³ãå¦: useepoll;\n\n * accept_mutex ï¼ [ÉkËsept] //,mjuË ËtÉks// æ¥åäºæ¥ï¼\n\nsyntax: accept_mutex on|off;\ndefault: accept_mutex off;\ncontext: events\n\n\nå¦æå¯ç¨:onï¼å·¥ä½è¿ç¨å°è½®æµæ¥åæ°çè¿æ¥ãå¦åå°éç¥ææå·¥ä½è¿ç¨æå³æ°è¿æ¥çä¿¡æ¯ï¼ä½åªæä¸ä¸ªè¿ç¨å¯ä»¥è·å¾è¿æ¥ãå¦ææ°è¿æ¥çæ°éè¾ä½ï¼åæäºå·¥ä½è¿ç¨å¯è½ä¼æµªè´¹ç³»ç»èµæºãå¨çæ¬1.11.3ä¹åï¼é»è®¤å¼ä¸ºonãå¹¶åå¤çæ¶åå»ºè®®å¼å¯ã\n\n\n# 2ãhttpæ ¸å¿æ¨¡å ï¼ngx _http_core_moduleï¼\n\n * http\n\nsyntax: http { ... }\ndefault: -\ncontext: main\n\n\næä¾éç½®æä»¶ä¸ä¸æï¼å¶éé¢æå®httpæå¡å¨æä»¤\n\n * server\n\nsyntax: server { ... }\ndefault: -\ncontext: http\n\n\néç½®èæä¸»æºãåºäºipçååºäºååçèæä¸»æºãlistenæä»¤æè¿°äºæ¥æ¶è¿æ¥çææå°ååç«¯å£ , server_nameæä»¤ååºäºææçååã\n\n * listen\n\nsyntax: listen address [:port] [defau1t_server] [ss1] [http2 | spdy]\n[proxy_protoco1] [setfib=number] [fastopen=number] [backlog=number]\n[rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind]\n[ipv6only=on|off] [reuseport] [so_keepalive=on|off| [keepid1e] : [keepintv1]:[keepcnt]];\nlisten port [default_server] [ss1] [http2|spdy] [proxy_protoco1]\n[setfib=number] [fastopen=number] [backlog=number] [rcvbuf=size] [sndbuf=size]\n[accept_filter=filter] [deferred] [bind] [ipv6only=on|off] [reuseport]\n[so_keepalive=on|off|[keepid1e] : [keepintv1] : [keepcnt]];\nlisten unix:path [default_server] [ssl] [http2|spdy] [proxy_protoco1]\n[backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred]\n[bind] [so_keepalive=on|off|[keepidle]:[keepintv1]:[keepcnt]];\ndefault: listen *:80 | *:8000; #é»è®¤å¼\ncontext: server #ä½¿ç¨å­æ®µï¼server\n\n\nè®¾ç½®ipçå°ååç«¯å£ï¼ææå¡å¨å°æ¥åè¯·æ±çunixåå¥æ¥å­çè·¯å¾,ä¾å¦:\n\nlisten 127.0.0.1:8000;\nlisten 127.0.0.1;\nlisten 8000;\nlisten *:8000;\nlisten localhost:8000;\n# ipv6å°åæ ¼å¼ï¼0.7.36ï¼å¨ä¸ä¸ªæ¹æ¬å·ä¸­æå®ï¼\nlisten [::]:8000;\nlisten [fe80::1];\n# 0.8.21çæ¬ä»¥ånginxå¯ä»¥çå¬unixå¥æ¥å£ï¼\nlisten unix:/tmp/nginx1.sock;\n\n\n * server_name\n\nsyntax: server_name name ...;\ndefault: server_name "";\ncontext: server\n\n\nè®¾ç½®èææå¡å¨çåå­ãä¾å¦:\n\nserver {\nserver_name example.com www.example.com;\n}\n#æå¡å¨åç§°å¯ä»¥åæ¬æå·("*") æ¥æ¿æ¢åç§°çç¬¬ä¸é¨åææåä¸é¨å:\nserver {\nserver_name example.com * .example.com www.example.*;\n}\n\n#æ¯æ~èµ·å§çå­ç¬¦åæ­£åè¡¨è¾¾å¼æ¨¡å¼å¹éï¼æ§è½åå æç¨\nserver {\nserver_name www.example.com~^www\\d+\\.example\\.com$; # \\dè¡¨ç¤º[0-9]\n}\n\n\nå¹éä¼åçº§æºå¶ä»é«å°ä½:\n\n 1. é¦åæ¯å­ç¬¦ä¸²ç²¾ç¡®å¹éå¦:https://www.cnblogs.com/ykzou/p/5840729.html\n 2. å·¦ä¾§ééç¬¦å¦ï¼*.demo\n 3. å³ä¾§ééç¬¦å¦ï¼demo.*\n 4. æ­£åè¡¨è¾¾å¼å¦ï¼-^.*.demo\n 5. default_server\n\n * root\n\nsyntax: root path;\ndefault: root html;\ncontext: http, server, location, if in location\n\n\nè®¾ç½®è¯·æ±çæ ¹ç®å½ï¼ä¾å¦ï¼\n\nlocation /i/ {\n\troot /data/w3;\n}\n# /data/w3/i/top.gifæä»¶å°ååº"/i/top.gif"è¯·æ±èåé\n# è·¯å¾å¼å¯ä»¥åå«åéï¼é¤äº$document_rootå$realpath_rootã\n\n\n * alias [ËeÉªliÉs]\n\nsyntax: alias path;\ndefault: -\ncontextï¼1ocation\n\n\nå®ä¹æå®çlocationçä¸ä¸ªæ¿æ¢\n\nlocation /i/ {\n\talias /data/w3/images/;\n}\n#å¯¹äº"/i/top.gif"çè¯·æ±,å°åéæä»¶/data/w3/images/top.gifã\n#è·¯å¾å¼å¯ä»¥åå«åéï¼é¤äº$document_rootå$realpath_root\n#aliasåé¢å¿é¡»è¦ç¨ "/" ç»æï¼å¦åä¼æ¾ä¸å°æä»¶\n#å¦æaliaséç½®å¨æ­£åå¹éçlocationåï¼åæ­£åè¡¨è¾¾å¼ä¸­å¿é¡»åå«æè·è¯­å¥(ä¹å°±æ¯æ¬å·())ï¼\n#èä¸aliaséç½®ä¸­ä¹è¦å¼ç¨è¿äºæè·å¼ãå¦:\nlocation ~ ^/users/(.+\\.(?:gif|jpe?g|png))$ {\n\talias /data/w3/images/$1;\n}\n\n\n# å³äºaliasårootçåºå«ï¼ \n# rootåaliasæ¯ç³»ç»æä»¶è·¯å¾çè®¾ç½®ã \n# rootç¨æ¥è®¾ç½®æ ¹ç®å½ï¼èaliasç¨æ¥éç½®å½åæä»¶çç®å½ã\n\nlocation /img/ {\n    alias /var/www/image/;\n}\n#è¥æç§ä¸è¿°éç½®çè¯ï¼åè®¿é®/img/ç®å½éé¢çæä»¶æ¶ï¼ningxä¼èªå¨å»/var/www/image/ç®å½æ¾æä»¶\nlocation /img/ {\n    root /var/www/image;\n}\n#è¥æç§è¿ç§éç½®çè¯ï¼åè®¿é®/img/ç®å½ä¸çæä»¶æ¶ï¼nginxä¼å»/var/www/image/img/ç®å½ä¸æ¾æä»¶ã\n\n\n * location\n\nsyntax: location [ = | ~ | ~* | ^~ ] uri { ... }\n\tlocation @name { ... }\ndefault: -\ncontext: server, location\n\n\næ ¹æ®è¯·æ±çuriè®¾ç½®éç½®ã å¨ä¸ä¸ªserverä¸­locationéç½®æ®µå¯å­å¨å¤ä¸ªï¼ç¨äºå®ç°uriå°æä»¶ç³»ç»çè·¯å¾æ å°ï¼\n\nå¹éå­ç¬¦ä¸²åä¸ºä¸¤ç§ï¼æ®éå­ç¬¦ä¸² (literal string) åæ­£åè¡¨è¾¾å¼ (regular expression) ï¼å¶ä¸­ ~ å ~* ç¨äºæ­£åè¡¨è¾¾å¼ï¼å¶ä»åç¼åæ ä»»ä½åç¼é½ç¨äºæ®éå­ç¬¦ä¸²ã\n\nå¹éé¡ºåºæ¯\n\n 1. åå¹éæ®éå­ç¬¦ä¸²ï¼å°ç¸å¯¹æç²¾ç¡®çå¹éææ¶å­å¨ï¼\n 2. ç¶åæç§éç½®æä»¶ä¸­çå£°æé¡ºåºè¿è¡æ­£åè¡¨è¾¾å¼å¹éï¼åªè¦å¹éå°ä¸æ¡æ­£åè¡¨è¾¾å¼ï¼ååæ­¢å¹éï¼åæ­£åè¡¨è¾¾å¼ä¸ºå¹éç»æ;\n 3. å¦ææææ­£åè¡¨è¾¾å¼é½å¹éä¸ä¸,åå1ä¸­å­å¨çç»æï¼\n 4. å¦ææ®éå­ç¬¦ä¸²åæ­£åè¡¨è¾¾å¼é½å¹éä¸ä¸ï¼åæ¥404 not found\n 5. "^~ "å"="é½è½é»æ­¢ç»§ç»­æç´¢æ­£ålocationãä¸åç¹æ¯"^~âä¾ç¶éµå®"æå¤§åç¼"å¹éè§åï¼ç¶è"="ä¸æ¯"æå¤§åç¼âï¼èæ¯å¿é¡»æ¯ä¸¥æ ¼å¹é\n 6. åªè¦éå°"å®å¨å¹éï¼exact match[ÉªÉ¡ËzÃ¦kt mÃ¦tÊ]ï¼"ï¼å³ä½¿æ®élocation æ²¡æå¸¦"="æ"^~"åç¼ï¼ä¹ä¸æ ·ä¼ç»æ­¢åé¢çå¹éã\n\nä¾å¦:\n\nlocation = /uri\t\t=å¼å¤´è¡¨ç¤ºç²¾ç¡®åç¼å¹éï¼åªæå®å¨å¹éæè½çæã\nlocation ^~ /uri\t^~å¼å¤´è¡¨ç¤ºæ®éå­ç¬¦ä¸²å¹éä¸ä»¥åä¸åè¿è¡æ­£åå¹éã\nlocation ~ pattern\t~å¼å¤´è¡¨ç¤ºåºåå¤§å°åçæ­£åå¹éã\nlocation ~* pattern\t~*å¼å¤´è¡¨ç¤ºä¸åºåå¤§å°åçæ­£åå¹éã\nlocation /uri\tä¸å¸¦ä»»ä½ä¿®é¥°ç¬¦ï¼è¡¨ç¤ºåç¼å¹éã\nlocation /\téç¨å¹éï¼ä»»ä½æªå¹éå°å¶ä»locationçè¯·æ±é½ä¼å¹éå°ã\n\n\néç½®ä¸¾ä¾ï¼\n\nlocation = / {\n\t[ configuration a ]\n}\n\nlocation / {\n\t[ configuration b ]\n}\n\nlocation /documents/ {\n\t[ configuration c ]\n}\n\nlocation ^~ /images/ {\n\t[ configuration d ]\n}\n\nlocation ~* \\. (gif | jpg | jpeg)$ {\n\t[ configuration e ]\n}\n    \n# "/"è¯·æ±å¹éconfiguration a:\n# "/index.html"è¯·æ±å¹éconfiguration b:\n# "/documents/document. . html"è¯·æ±å¹éconfiguration c:\n# "/images/1.gif"è¯·æ±å¹éconfiguration d: \n# "/documents/1.jpg"è¯·æ±å¹éconfiguration eã\n\n# æ³¨æ:æ­£åå¹éä¼æ ¹æ®å¹éé¡ºåºï¼æ¾å°ç¬¬ä¸ä¸ªå¹éçæ­£åè¡¨è¾¾å¼åå°åæ­¢æç´¢ã\n# æ®éå­ç¬¦ä¸²å¹éåæ è§é¡ºåºï¼åªä¼éæ©æç²¾ç¡®çå¹éã\n\n\n * tcp_nodelay ï¼delay [dÉªËleÉª] å»¶è¿ï¼\n\nsyntax: tcp_nodelay on | off;\ndefault: tcp_nodelay on;\ncontext: http, server, location\n\n\nå½è¿æ¥è½¬æ¢ä¸ºä¿ææ´»å¨(keep-alive)ç¶ææ¶ï¼å¯ç¨è¯¥éé¡¹ãæ­¤å¤ï¼å®å¨sslè¿æ¥ãæ ç¼å²ä»£çåwebsocketä»£çä¸ä¹è¦å¯ç¨ãï¼è¿ä¸ªéé¡¹ä»å¨å°è¿æ¥è½¬åä¸ºé¿è¿æ¥çæ¶åæè¢«å¯ç¨ãï¼ï¼éè¦é¢ç¹çåéä¸äºå°åæ°æ®å¹¶ä¸ä¸å¸ææ¾ç½®ç¼å²åºèæ¯ç´æ¥åéæ¶å¼å¯ï¼\n\n * tcp_nopushï¼push [pÊÊ]ï¼\n\nsyntax: tcp_nopush on | off;\ndefault: tcp_nopush off;\ncontext: http, server, location\n\n\nå¯ç¨æç¦freebsdä¸çtcp_nopush socketéé¡¹ælinuxä¸çtcp_cork socketéé¡¹ãåªæå¨ä½¿ç¨sendfileæ¶æå¯ç¨è¿äºéé¡¹ãï¼å¶åè½åtcp_nodelayåè½æ­£å¥½ç¸åï¼\n\n * senfile\n\nsyntax: sendfile on | off;\ndefault: sendfile off;\ncontext: http, server, location, if in location\n\n\nå¯ç¨æç¦ç¨sendfile()çä½¿ç¨ãä»nginx 0.8.12åfreebsd 5.2.1å¼å§ï¼aioï¼å³asyncéé»å¡ï¼æ¯å¼æ­¥éé»å¡çioï¼å¯ç¨äºé¢å è½½sendfile()çæ°æ®ã\n\nä¸å¼å¯sendfile(): ç¡¬ç >> kernel buffer >> user buffer >> kernel socket buffer >>åè®®æ \n\nå¼å¯sendfile(): ç¡¬ç >> kernel buffer (å¿«éæ·è´å°ker nelsocket buffer) >>åè®®æ \n\nå½ nginxæ¯ä¸ä¸ªéææä»¶æå¡å¨çæ¶åï¼å¼å¯sendfileéç½®é¡¹è½å¤§å¤§æé«nginxçæ§è½ã\n\nä¾å¦:\n\nlocation /video/ {\n\tsendfile\ton;\n\ttcp_ nopush\ton;\n\taio\t\t    on;\n}\n\n\n * server_tokens\n\nsyntax: server_tokens on | off | build | string;\ndefault: server_tokens on;\ncontext: http, server, location\n\n\nå¨éè¯¯é¡µåâæå¡å¨âååºå¤´å­æ®µä¸­å¯ç¨æç¦ç¨ååºnginxçæ¬ã\n\n * error_page\n\nsyntax: error_page code ... [=[response]] uri;\ndefault: -\ncontext: http, server, location, if in location\n\n\nå®ä¹ä¸ºæå®éè¯¯æ¾ç¤ºçuriãuriå¼å¯ä»¥åå«åéã\n\nä¾å¦:\n\nerror_page 404\t\t/404.html;\nerror_page 500 502 503 504 /50x.html;\n\n# è¿å°å¯¼è´åé¨éå®åå°æå®çuri,å®¢æ·ç«¯è¯·æ±æ¹æ³æ´æ¹ä¸º"get" (å¯¹äºé¤"get"å"head"ä¹å¤çæææ¹æ³)ã\n# æ­¤å¤ï¼å¯ä»¥ä½¿ç¨"=response"è¯­æ³å°ååºä»£ç æ´æ¹ä¸ºå¶ä»ä»£ç ï¼ä¾å¦:\nror_page 404 =200 /empty.gif;\n\n\n * keepalive_timeout\n\nsyntax: keepalive_timeout timeout [header_timeout];\ndefault: keepalive_timeout 75s;\ncontext: http, server, location\n\n\nè®¾å®å®¢æ·ç«¯ä¿æè¿æ¥è¶æ¶æ¶é¿ï¼0è¡¨ç¤ºç¦æ­¢ã mozillaåkonquerorå¯ä»¥è¯å«ï¼ msieèªå·±ä¼å¨60såå³é­è¿æ¥ã\n\nkonqueror ï¼å­åæ´ï¼æ¯ kde æ¡é¢ç³»ç»çä¸é¨åï¼ä¸»è¦ç¨äº linux å bsdå®¶æçæä½ç³»ç»ãå¨å¾®è½¯ç windows ç³»ç»ä¸ï¼ä¹æé¶æä½¿ç¨ï¼å½ç¶åè½ç¸å¯¹æéãkonquerorä¸»è¦ç¨äºæä»¶ç®¡çãæµè§ï¼ä»¥åç½é¡µæµè§ãkonqueror æç§ gpl è¿è¡åå¸ã\n\n * keepalive_requests\n\nsyntax: keepalive_requests number;\ndefault: keepalive_requests 100;\ncontext: http, server, location\n\n\nè®¾ç½®éè¿ä¸ä¸ªä¿ææ´»å¨è¿æ¥å¯ä»¥æä¾æå¡çæå¤§è¯·æ±æ°ãå¨ååºæå¤§è¯·æ±æ°åï¼è¿æ¥å°å³é­ã\n\n * keepalive_disable\n\nsyntax: keepalive_disable none | browser ...;\ndefault: keepalive_disab1e msie6;\ncontext: http, server, location\n\n\nç¦æ­¢ä¸é£äºè¡ä¸ºä¸æ­£å¸¸çæµè§å¨ä¿ææ´»å¨è¿æ¥ã\n\n * send_timeout\n\nsyntax: send_timeout time;\ndefault: send_timeout 60s;\ncontext: http, server, location\n\n\nè®¾ç½®åå®¢æ·ç«¯åéååºçè¶æ¶æ¶é´ãè¶æ¶ä»å¨ä¸¤ä¸ªè¿ç»­çåå¥æä½ä¹é´è®¾ç½®ï¼ä¸ç¨äºä¼ è¾æ´ä¸ªååºãå¦æå®¢æ·ç«¯å¨æ­¤æ¶é´åæªæ¶å°ä»»ä½åå®¹ï¼åè¿æ¥å°å³é­ã\n\n * client_body_buffer_size\n\nsyntax: client_body_buffer_size size;\ndefault: client_body_buffer_size 8k |16k;\ncontext: http, server, location\n\n\nè®¾ç½®è¯»åå®¢æ·ç«¯è¯·æ±bodyé¨åçbufferå¤§å°ãå¦æè¯·æ±bodyå¤§äºç¼å²åºï¼åæ´ä¸ªbodyæå¶é¨åå°åå¥ä¸´æ¶æä»¶ãé»è®¤æåµä¸ï¼ç¼å²åºå¤§å°ç­äºä¸¤ä¸ªåå­é¡µãx86å¹³å°é»è®¤æ¯8kï¼x86_ 64å¹³å°æ¯16kã\n\n * client_body_temp_path\n\nsyntax: client_body_temp_path path [1evel1 [1evel2 [leve13]]];\ndefault: client_body_temp_path client_body_temp;\ncontext: http, server, location\n\n\nå®ä¹ç¨äºå­å¨ä¿å­å®¢æ·ç«¯è¯·æ±bodyçä¸´æ¶æä»¶çç®å½ãæå®ç®å½ä¸æå¤å¯ä»¥ä½¿ç¨ä¸çº§å­ç®å½å±æ¬¡ç»æãä¾å¦:\n\n# è¿éçlevel1,2,3å¦ææå¼å°±ä»£è¡¨å­å¨ä¸çº§ï¼äºçº§ï¼ä¸çº§å­ç®å½ã\n# ç®å½åæ¯ç±æ°å­è¿è¡å½åçï¼æä»¥è¿éçå·ä½çå¼å°±æ¯ä»£è¡¨ç®å½åçæ°å­ä½æ°\nclient_body_temp_path /spoo1/nginx/client_temp 1 2;\n# ä¸´æ¶æä»¶çè·¯å¾å¯è½çèµ·æ¥åä¸é¢æç¤º:\n/spoo1/nginx/client_temp/7/45/00000123457\n\n\n * client_max_body_size\n\nsyntax: client_max_body_size size;\ndefault: client_max_body_size 1m;\ncontext: http, server, location\n\n\nè®¾ç½®å®¢æ·ç«¯è¯·æ±bodyé¨åçæå¤§å¼ãæå®å¨è¯·æ±å¤´ç"content-length"åºåã å¦æè¶åºè¿ä¸ªå¼ï¼åè¿å413éè¯¯ãå°å¤§å°è®¾ç½®ä¸º0å°ç¦ç¨å¯¹å®¢æ·ç«¯è¯·æ±bodyå¤§å°çæ£æ¥ã\n\n * limit_rate ([reÉªt])\n\nsyntax: limit_rate rate;\ndefault: limit_rate 0;\ncontext: http, server, location, if in location\n\n\néå¶ååºç»å®¢æ·ç«¯çä¼ è¾éçï¼åä½æ¯bytes/second,é»è®¤å¼0è¡¨ç¤ºæ éå¶ã\n\n * limit_except ( [ÉªkËsept] )\n\nsyntax: limit_except method ... { ... }\ndefault: -\ncontext: location\n\n\néå¶å¨locationåä½¿ç¨çhttpæ¹æ³ãæ¹æ³åæ¬: get, head, post, put, delete, mkcol, copy, move,options, propfind, proppatch, lock, unlock, patchãåè®¸getæ¹æ³æ¶, headæ¹æ³ä¹ä¼è¢«åè®¸ãä¾å¦:\n\nï¼allow [ÉËlaÊ] deny [dÉªËnaÉª] ï¼\n\nlimit_except get {\n\tallow 192.168.1.0/24;\n\tdeny all;\n}\n#é¤äºgetåheadä¹å¤å¶å®æ¹æ³ä»åè®¸192.168.1.0/24ç½æ®µä¸»æºä½¿ç¨\n\n\n\n# 3ï¼è®¿é®æ§å¶æ¨¡å\n\næ­¤æ¨¡ååè®¸éå¶å¯¹ç¹å®å®¢æ·æºå°åçè®¿é®\n\n * allow\n\nsyntax: allow address | cidr | unix: | all;\ndefault: -\ncontext: http, server, location, limit_except\n\n\næå®åè®¸è®¿é®çå°åæç½æ ¼\n\n * deny\n\nsyntax: deny address | cidr | unix: | a11;\ndefault: -\ncontext: http, server, location, limit_except\n\n\næå®æç»çå°åæç½ç»\n\nä¾å¦:\n\nlocation / {\n\tdeny 192.168.1.1;\n\tallow 192.168.1.0/24;\n\tallow 10.1.1.0/16;\n\tallow 2001:0db8::/32;\n\tdeny all;\n}\n# è§åæé¡ºåºæ£æ¥ï¼ç´å°æ¾å°ç¬¬ä¸ä¸ªå¹éé¡¹ã\n\n\n\n# 4ãç¨æ·è®¤è¯æ¨¡å(ngx_ http_ auth basic_ module)\n\næ­¤æ¨¡åä½¿ç¨http basic authenticationåè®®éå¶å¯¹èµæºçè®¿é®ï¼éè¿ç¨æ·ååå¯ç æ¹å¼ã\n\n * auth_basic\n\nsyntax: auth_basic string | off;\ndefault: auth_basic off;\ncontext: http, server, location, limit_except\n\n\næ¿æ´»åå³é­è®¤è¯åè½ã\n\n * auth_basic_user_file\n\nsyntax: auth_basic_user_file file;\ndefault: -\ncontext: http, server, location, limit_except\n\n\næå®ä¿å­ç¨æ·ååå¯ç çæä»¶ãæ ¼å¼å¦ä¸:\n\n# comment\nname1: password1\nname2: password2:comment\nname3: password3\n\n# ä¹å¯ä»¥ä½¿ç¨å¯æãå¯ä»¥éè¿ä½¿ç¨apatchçhtpasswdå½ä»¤(http-toolsæä¾)\n# æèopenssl passwdå½ä»¤\n\n\néç½®æ¡ä¾ï¼\n\nlocation /admin/ {\n\tauth_basic "admin area";\n\tauth_basic_user_file /etc/nginx/.ngxpasswd;\n}\n\nlocation / {\n\tauth_basic\t"closed site";\n\tauth_basic_user_file conf/htpasswd;\n}\n\n\n\n# 5ãåºæ¬ç¶ææ¥çæ¨¡å(ngx_http_stub_status_module)\n\næä¾å¯¹åºæ¬ç¶æä¿¡æ¯çè®¿é®\n\n * stub_status\n\nsyntax: stub_status;\ndefault: -\ncontext: server, location\n\n\nå¨1.7.5ä¹åççæ¬:"stub_status on"ã éç½®æ¡ä¾:\n\nlocation = /basic_status {\n\tstub_status;\nlocation /status {\n\tstub_status;\n\tallow 172.16.0.0/16;\n\tdeny all;\n}\n# è¾åºnginxçåºæ¬ç¶æä¿¡æ¯\n# active connections:å½åç¶æ, æ´»å¨ç¶æçè¿æ¥æ°\n# accepts: ç»è®¡æ»å¼, å·²ç»æ¥åçå®¢æ·ç«¯è¯·æ±çæ»æ°\n# handled: ç»è®¡æ»å¼, å·²ç»å¤çå®æçå®¢æ·ç«¯è¯·æ±çæ»æ°\n# requests: ç»è®¡æ»å¼, å®¢æ·ç«¯åæ¥çæ»çè¯·æ±æ°\n# reading: å½åç¶æ, æ­£å¨è¯»åå®¢æ·ç«¯è¯·æ±æ¥æé¦é¨çè¿æ¥çè¿æ¥æ°\n# writing: å½åç¶æ, æ­£å¨åå®¢æ·ç«¯åéååºæ¥æè¿ç¨ä¸­çè¿æ¥æ°\n# waiting: å½åç¶æ, æ­£å¨ç­å¾å®¢æ·ç«¯ååºè¯·æ±çç©ºé²è¿æ¥æ°\n',charsets:{cjk:!0}},{title:"Nginxå¸¸ç¨æ¨¡åäº",frontmatter:{},regularPath:"/Nginx/02_Nginx%E6%A8%A1%E5%9D%97%E7%AE%A1%E7%90%86/Nginx%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%9702.html",relativePath:"Nginx/02_Nginxæ¨¡åç®¡ç/Nginxå¸¸ç¨æ¨¡å02.md",key:"v-16c65f6c",path:"/nginx/02_nginxmo-kuai-guan-li/nginxchang-yong-mo-kuai-02.html",headers:[{level:2,title:"1ãæ¥å¿è®°å½æ¨¡åï¼ngxhttplog_moduleï¼",slug:"_1ãæ¥å¿è®°å½æ¨¡å-ngx-http-log-module",normalizedTitle:"1ãæ¥å¿è®°å½æ¨¡åï¼ngxhttplog_moduleï¼",charIndex:null},{level:2,title:"2ãåç¼©ç¸å³éç½®ï¼ngxhttpgzip_moduleï¼",slug:"_2ãåç¼©ç¸å³éç½®-ngx-http-gzip-module",normalizedTitle:"2ãåç¼©ç¸å³éç½®ï¼ngxhttpgzip_moduleï¼",charIndex:null},{level:2,title:"3ãHTTPæ¨¡åï¼ngxhttpssl_moduleï¼",slug:"_3ãhttpæ¨¡å-ngx-http-ssl-module",normalizedTitle:"3ãhttpæ¨¡åï¼ngxhttpssl_moduleï¼",charIndex:null},{level:2,title:"4ãååä»£çæ¨¡å(ngxhttp proxy_ module)",slug:"_4ãååä»£çæ¨¡å-ngx-http-proxy-module",normalizedTitle:"4ãååä»£çæ¨¡å(ngxhttp proxy_ module)",charIndex:null},{level:2,title:"5ãphpç¸å³æ¨¡å(ngx http fastcgi module)",slug:"_5ãphpç¸å³æ¨¡å-ngx-http-fastcgi-module",normalizedTitle:"5ãphpç¸å³æ¨¡å(ngx http fastcgi module)",charIndex:null},{level:3,title:"åºæ¬ç¸å³ç¥è¯",slug:"åºæ¬ç¸å³ç¥è¯",normalizedTitle:"åºæ¬ç¸å³ç¥è¯",charIndex:7724}],headersStr:"1ãæ¥å¿è®°å½æ¨¡åï¼ngxhttplog_moduleï¼ 2ãåç¼©ç¸å³éç½®ï¼ngxhttpgzip_moduleï¼ 3ãHTTPæ¨¡åï¼ngxhttpssl_moduleï¼ 4ãååä»£çæ¨¡å(ngxhttp proxy_ module) 5ãphpç¸å³æ¨¡å(ngx http fastcgi module) åºæ¬ç¸å³ç¥è¯",content:'# Nginxå¸¸ç¨æ¨¡åäº\n\n\n# 1ãæ¥å¿è®°å½æ¨¡åï¼ngx_http_log_moduleï¼\n\nä»¥æå®æ ¼å¼åå¥è¯·æ±æ¥å¿ã\n\n * access_log\n\nSyntax: access_log path [format [buffer=size] [gzip[=level]] [flush=time] [if=condition]];\n\taccess_log off;\nDefault: access_log logs/access.log combined;\nContext: http, server, location, if in location, limit_except\n\n\nè®¾ç½®æ¥å¿åå¥çè·¯å¾ãæ ¼å¼åéç½®ãä¾å¦:\n\naccess_log /path/to/log.gz combined gzip flush=5m;\n# å¦æå¸ægzipæ­£å¸¸å·¥ä½, nginxå¿é¡»æå»ºzlibåº\n\n\n * log_format\n\nSyntax: log_format name [escape=default | json | none] string ...;\nDefault: log_format combined "...";\nContext: http\n\n\næå®æ¥å¿çæ ¼å¼ãæ¥å¿æ ¼å¼å¯ä»¥åå«å¬å±åéåä»å¨æ¥å¿åå¥æ¶å­å¨çåéã\n\néç½®ï¼\n\nlog_format compression \'$remote_addr - $remote_user [$time_local]\'\n\t\t\t\t\t \'"$request" $status $bytes_sent\'\n   \t\t\t\t\t \'"$http_referer" "$http_user_agent" \t\t\t\t\t\t\t "$gzip_ratio"\';\naccess_log /spool/logs/nginx-access.log compression buffer=32k;\n\n#jsonæ ¼å¼æ¥å¿:\nlog_format json \'{"@timestamp":"$time_iso8601",\'\n\t\t\t   \'"client_ip":"$remote_addr",\'\n\t\t\t   "size":$body_bytes_sent,\'\n\t\t\t   \'"responsetime":$request_time,\n\t\t\t   \'"upstreamtime": "$upstream_response_time",\'\n\t\t\t   "upstreamhost": "$upstream_addr",\'\n\t\t\t   \'"http_host":"$host",\'\n\t\t\t   \'"method": "$request_method",\'\n\t\t\t   \'"request_uri": "$request_uri",\'\n\t\t\t   \'"xff": "$http_x_forwarded_for",\'\n\t\t\t   \'"referrer": "$http_referer",\'\n\t\t\t   \'"agent": "$http_user_agent",\'\n\t\t\t   \'"status":"$status"}\';\n\n\n * open_log_file_cache\n\nSyntax: open_log_file_cache max=N [inactive=time] [min_uses=N] [valid=time]; \nopen_log_file_cache off;\nDefault: open_log_file_cache off;\nContext: http, server, location\n\n\nå®ä¹ä¸ä¸ªç¼å­ï¼ç¨äºå­å¨åç§°ä¸­åå«åéçå¸¸ç¨æ¥å¿çæä»¶æè¿°ç¬¦ãç¼å­å¸¸ç¨æ¥å¿æä»¶ç¸å³çåæ°æ®ä¿¡æ¯ã(å¯¹äºæ¯ä¸æ¡æ¥å¿è®°å½ï¼é½å°æ¯åæå¼æä»¶ï¼ååå¥æ¥å¿ï¼ç¶åå³é­ã)\n\nopen_log_file_cache max=1000 inactive=20s valid=1m min_uses=2;\n# max:ç¼å­çæå¤§æä»¶æè¿°ç¬¦æ°é\n# min_uses:å¨inactiveå®ä¹çæ¶é´åï¼åè®¸æè¿°ç¬¦å¨ç¼å­ä¸­ä¿ææå¼ç¶æçæå°æä»¶ä½¿ç¨æ°\n# inactive:å¦æå¨æ­¤æé´æ²¡æè®¿é®ï¼åå³é­ç¼å­æè¿°ç¬¦çæ¶é´:\n# valid:æ­¤æ¶é´è¶æ¶åï¼ä¼æ£æ¥æä»¶è¿æ¯å¦å·æç¸åçåå­ãéªæ­£ç¼å­ä¸­åç¼å­é¡¹æ¯å¦ä¸ºæ´»å¨é¡¹çæ¶é´é´éã\n\n\n\n# 2ãåç¼©ç¸å³éç½®ï¼ngx_http_gzip_moduleï¼\n\næ¯ä¸ä¸ªä½¿ç¨"gzip"æ¹æ³åç¼©ååºçè¿æ»¤å¨ãè¿éå¸¸æå©äºå°ä¼ è¾æ°æ®çå¤§å°åå°ä¸åçè³æ´å¤ã\n\n * gzip\n\nSyntax: gzip on | off;\nDefault: gzip off;\nContext: http, server, location, if in location\n\n\nä¸ºååºå¼å¯æèåæ¶gzipåç¼©\n\n * gzip_comp_level\n\nSyntax: gzip_comp_level level;\nDefault: gzip_comp_level 1;\nContext: http, server, location\n\n\nè®¾ç½®ååºåç¼©çgzipçº§å«ï¼èå´1-9\n\n * gzip_buffers\n\nSyntax: gzip_buffers number size;\nDefault: gzip_buffers 32 4k | 16 8k;\nContext: http,server, location\n\n\nè®¾ç½®å®ç°åç¼©åè½æ¶ç¼å²åºæ°éåæ¯ä¸ªç¼å­åºçå¤§å°ãsizeé»è®¤å¤§å°ç­åäºä¸ä¸ªåå­é¡µ, 4Kæ8Kï¼åå³äºå¹³å°ã\n\n * gzip_disable\n\nSyntax: gzip_disable regex ...;\nDefault: -\nContext: http, server, location\n\n\nåæ¶å¯¹å¹éå°çå®¢æ·ç«¯æµè§å¨çååºæ¥æçgzipåç¼©ã\n\n * gzip_http_version\n\nsyntax: gzip_http_version 1.0 | 1.1;\nDefault: gzip_http_version 1.1;\nContext: http, server, location\n\n\nè®¾ç½®åç¼©ååºæ¶ï¼æéçè¯·æ±çæå°HTTPçæ¬ã\n\n * gzip_min_length\n\nSyntax: gzip_min_length length;\nDefault: gzip_min_length 20;\nContext: http, server, location\n\n\nè®¾ç½®å°è¢«gzipå¤ççååºçæå°é¿åº¦ãé¿åº¦ä»ä»"Content-Length"ååºå¤´å­æ®µç¡®å®ã\n\n * gzip_types\n\nSyntax: gzip_types mime-type ...;\nDefault: gzip_types text/html;\nContext: http, server, location\n\n\né¤äº"text/html"ä¹å¤ï¼è¿åè®¸å¯¹æå®çmimeç±»åè¿è¡gzipå¤çã ç¹æ®å¼"*"å¹éä»»ä½MIMEç±»å(0.8.29) å¸¦æâtext/html"ç±»åçååºæ»æ¯è¢«åç¼©ã\n\n * gzip_vary\n\nSyntax: gzip_vary on | off;\nDefault: gzip_vary off;\nContext: http, server, location\n\n\nå¦ægzip,gzip_ staticægunzipæ¯æ´»è·çï¼å¼å¯æå³é­å¨ååºå¤´æå¥"Vary:Accept-Encoding"åºåã(ç»ä»£çæå¡å¨ç¨çï¼æçæµè§å¨æ¯æåç¼©ï¼æçä¸æ¯æï¼æä»¥é¿åæµªè´¹ä¸æ¯æçä¹åç¼©ï¼æä»¥æ ¹æ®å®¢æ·ç«¯çHTTPå¤´æ¥å¤æ­ï¼æ¯å¦éè¦åç¼©)\n\n * gzip_proxied\n\nSyntax: gzip_proxied off | expired | no-cache | no-store | private | no_last_modified | no_etag | auth | any ...;\nDefault: gzip_proxied off; \nContext: http, server , location\n\n\nä¾èµäºè¯·æ±åååºï¼å¼å¯å¯¹ä»£çè¯·æ±çgzipåç¼©ãè¯·æ±æ¯è¢«ä»£çè¯·æ±çç¡®å®æ¯çè¯·æ±å¤´ä¸­æ¯å¦åºç°"Via"åºåã\n\n * ååµåé$gzip_ratio\n\nå®ç°åç¼©æ¯ï¼è®¡ç®ä¸ºåå§ååºå¤§å°ååç¼©ååºå¤§å°ä¹é´çæ¯çï¼å¯ä»¥ç¨äºæ¥å¿ã\n\n * éç½®\n\ngzip\t\ton; \ngzip_min_length 1000;\ngzip_proxied\texpired no-cache no-store private auth;\ngzip_types\t\ttext/plain application/xml;\n----------------------------------\n\ngzip on:\n\ngzip_comp_level 6;\ngzip_http_version 1.1;\ngzip_vary on;\ngzip_min_length 1024;\ngzip_buffers 16 8k;\ngzip_proxied any;\ngzip_disable "MSIE[1-6]\\.(?!.*SVl)";\ngzip_types text/xml text/plain text/css application/javascript application/xml\napplication/json;\n\n\n\n# 3ãHTTPæ¨¡åï¼ngx_http_ssl_moduleï¼\n\næ­¤æ¨¡åæä¾å¯¹HTTPSçå¿è¦æ¯æãæ¨¡åé»è®¤æ²¡æå®è£ï¼éè¦éè¿--with-http_ssl_ moduleéç½®åæ°æ¿æ´»ãè¿ä¸ªæ¨¡åéè¦OpenSSLåºæ¯æã\n\n * ssl\n\nSyntax: ssl on | off;\nDefault: ssl off;\nContext: http, server\n\n\nè¯¥æä»¤å¨1.15.0çä¸­è¢«åºå¼ãåºæ¹ä¸ºä½¿ç¨listenæä»¤çsslåæ°\n\n * ssl_certificate ( [sÉrËtÉªfÉªkÉt , sÉrËtÉªfÉªkeÉªt] )\n\nSyntax: ssl_certificate file;\nDefault: -\nContext: http, server\n\n\nä¸ºç»å®çèææå¡å¨æå®å·æPEMæ ¼å¼è¯ä¹¦çæä»¶ãå¦æé¤äºä¸»è¯ä¹¦ä¹å¤è¿åºæå®ä¸­é´è¯ä¹¦,ååºæä»¥ä¸é¡ºåºå¨åä¸æä»¶ä¸­æå®è¯ä¹¦ï¼é¦åæ¯ä¸»è¯ä¹¦,ç¶åæ¯ä¸­é´è¯ä¹¦ãPEMæ ¼å¼çå¯é¥å¯ä»¥æ¾å¨åä¸ä¸ªæä»¶ä¸­ã ä»çæ¬1.11.0å¼å§ï¼å¯ä»¥å¤æ¬¡æå®æ­¤æä»¤ä»¥å è½½ä¸åç±»åçè¯ä¹¦,ä¾å¦RSAåECDSAï¼\n\nserver {\n\tlisten\t\t\t\t443 ssl;\n\tserver_name\t\t\texample.com;\n    \n\tssl_certificate\t\texample.com.rsa.crt;\n\tssl_certificate_key\texample.com.rsa.key;\n    \n\tssl_certificate\t\texample.com.ecdsa.crt;\n\tssl_certificate_key example.com.ecdsa.key;\n    \n    ...\n}\n\n\nåªæOpenSSL 1.0.2ææ´é«çæ¬æ¯æä¸åè¯ä¹¦çåç¬è¯ä¹¦é¾ãå¯¹äºæ§çæ¬ï¼åªè½ä½¿ç¨ä¸ä¸ªè¯ä¹¦é¾ãåºè¯¥è®°ä½ï¼ç±äºHTTPSåè®®å¯¹æå¤§äºæä½æ§çéå¶ï¼èææå¡å¨åºè¯¥ä¾¦å¬ä¸åçIPå°åã\n\n * sll_certificate_key\n\nSyntax: ssl_certificate_key file;\nDefault: -\nContext: http, server\n\n\næç¡®ä¸ºèææå¡å¨æå®ä¸ä¸ªå«æå å¯keyçPEMæ ¼å¼æä»¶ãå³è¯ä¹¦çç§é¥æä»¶ã\n\n * ssl_protocols\n\nSyntax: ssl_protocols [SSLv2] [SSLv3] [TLSv1] [TLSv1.1] [TLSv1.2] [TLSv1.3];\nDefault: ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\nContext: http, server\n\n\nå¯ç¨æå®çåè®®ã\n\nä»å½ä½¿ç¨OpenSSL 1.0.1ææ´é«çæ¬æ¶ï¼TLSv1.1åTLSv1.2åæ°(1.1.13ï¼ 1.0.12) æèµ·ä½ç¨ãåªæå¨ä½¿ç¨äºç¨TLSv1.3æ¯ææå»ºçOpenSSL 1.1.1æ¶, TLSv1.3åæ°(1.13.0) æææã\n\n# æ¥çopensslçæ¬\n$ rpm -qa | grep openssl\n$ rpm -qi openssl\n\n\n * ssl_session_cache\n\nSyntax: ssl_session_cache off | none | [builtin[:size]] [shared:name:size];\nDefault: ssl_session_cache none;\nContext: http, server\n\n\nè®¾ç½®å­å¨ä¼è¯çç¼å­çç±»ååå¤§å°ãç¼å­å¯ä»¥æ¯ä»¥ä¸ä»»ä½ç±»å:\n\n * offï¼ä¸¥æ ¼ç¦æ­¢ä½¿ç¨ä¼è¯ç¼å­ï¼nginxæ¾å¼å°åè¯å®¢æ·æºä¼è¯ä¸è½è¢«éç¨ã\n * noneï¼ä¼è¯ç¼å­çä½¿ç¨è¢«ææå°ç¦æ­¢ï¼nginxåè¯å®¢æ·æºä¼è¯å¯ä»¥éç¨ï¼ä½å®éä¸ä¸ä¼å°ä¼è¯åæ°å­å¨å¨ç¼å­ä¸­ã\n * builtin: åç½®OpenSSLç¼å­ï¼ä»è¢«ä¸ä¸ªå·¥ä½è¿ç¨ä½¿ç¨ãç¼å­å¤§å°æ¯å¨ä¼è¯ä¸­æå®çãå¦ææ²¡æç»åºå¤§å°ï¼åç­äº20480ä¸ªä¼è¯ãä½¿ç¨åç½®ç¼å­å¯è½ä¼å¯¼è´åå­ç¢çã\n * shared: å¨ææå·¥ä½è¿ç¨ä¹é´å±äº«çç¼å­ãç¼å­å¤§å°ä»¥å­èä¸ºåä½ï¼ 1Må­èå¯ä»¥å­å¨å¤§çº¦4000ä¸ªä¼è¯ãæ¯ä¸ªå±äº«ç¼å­é½åºè¯¥æä¸ä¸ªä»»æåç§°ãå·æç¸ååç§°çç¼å­å¯ä»¥å¨å¤ä¸ªèææå¡å¨ä¸­ä½¿ç¨ã\n\nä¸¤ç§ç¼å­ç±»åé½å¯ä»¥åæ¶ä½¿ç¨ï¼ä½æ¯ï¼åªä½¿ç¨æ²¡æbuiltinç¼å­çsharedç¼å­åºè¯¥æ´é«æãä¾å¦:\n\nssl_session_cache builtin:1000 shared:SSL:10m;\n\n\n * ssl_session_timeout\n\nSyntax: ssl_session_timeout time;\nDefault: ssl_session_timeout 5m;\nContext: http, server\n\n\nå®¢æ·ç«¯å¯ä»¥éç¨ä¼è¯åæ°çæéã\n\n * éç½®æ¡ä¾\n\n\nä¸ºäºåå°å¤çå¨è´è½½ï¼å»ºè®®:\n1.å°å·¥ä½è¿ç¨æ°è®¾ç½®ä¸ºå¤çå¨æ°ï¼\n2.å¯ç¨keep-aliveè¿æ¥ï¼\n3.å¯ç¨å±äº«sessionç¼å­ï¼\n4.ç¦ç¨åç½®sessionç¼å­ï¼\n5.å¹¶å¯è½å»¶é¿ä¼è¯çå­æ¶é´(é»è®¤ä¸º5åé)\n"""\n\nworker_processes auto;\n\nhttp {\n\t...\n\tserver {\n\tlisten\t\t\t443 ssl;\n\tkeepalive_timeout\t\t70;\n        \n\tssl_protocols\t\tTLSv1 TLSv1.1 TLSv1.2;\n\tssl_ciphers\t\t\tAES128-SHA:AES256-SHA:RC4-SHA:DES-CBC3-SHA:RC4-MD5;\n\tssl_certificate\t\t/usr/1ocal/nginx/conf/cert.pem;\n\tssl_certificate_key /usr/1ocal/nginx/conf/cert.key;\n\tssl_session_cache\tshared:SSL:10m;\n\tssl_session_timeout 10m;\n\t\n    ...\n}\n\n\n\n# 4ãååä»£çæ¨¡å(ngx_http_ proxy_ module)\n\næ­¤æ¨¡ååè®¸å°è¯·æ±ä¼ éå°å¶å®çæå¡å¨ã\n\n * proxy_pass\n\nSyntax: proxy_pass URL;\nDefault: -\nContext: location,\tif in location, limit_except\n\n\nè®¾ç½®ä¸ä¸ªè¢«ä»£çæå¡å¨çåè®®åå°åä»¥åéé¡¹URIï¼å°å¶æ å°å°ä¸ä¸ªlocationãåè®®å¯ä»¥æå®"http"æ"https"ãå°åå¯ä»¥æå®ä¸ºååæIPå°åï¼ä»¥åå¯éç«¯å£:\n\nproxy_pass http://localhost:8000/uri/;\n\n\næå®UNIX socketè·¯å¾æ¶,è·¯å¾åºæ¾å°å³é®å­:unixåé¢ï¼å¹¶ç¨åå·æ¬èµ·æ¥ã\n\nproxy_pass unix:/tmp/backend.socket:/uri/;\n\n\nå¦æååè§£æä¸ºå¤ä¸ªå°åï¼åææå°åå°ä»¥è½®è¯¢(round-robin) æ¹å¼ä½¿ç¨ãæ­¤å¤,å¯ä»¥å°å°åæå®ä¸ºæå¡å¨ç»ã\n\nåæ°å¼ä¸è½åå«åéãå¨è¿ç§æåµä¸ï¼å¦æå°å°åæå®ä¸ºååï¼åä¼å¨ææè¿°çæå¡å¨ç»ä¸­æç´¢è¯¥åç§°,å¦ææ¾ä¸å°ï¼åä½¿ç¨è§£æç¨åºç¡®å®è¯¥åç§°ã\n\nè¯·æ±URlæå¦ä¸æ¹å¼ä¼ éå°æå¡å¨:\n\n * å¦æproxy_ passæå®äºURIï¼é£ä¹æ åè¯·æ±URIä¸­å¹éäºlocationçé¨åè¦è¢«æä»¤ä¸­æå®çURlæ¿ä»£ã\n\nlocation /name/ {\n\tproxy_pass http://127.0.0.1/remote/;\n}\n\n\n * å¦æproxy_passæ²¡ææå®URIï¼å½åå§è¯·æ±è¢«å¤çæ¶ï¼è¯·æ±URIå°ä»¥å®¢æ·ç«¯åéçç¸åå½¢å¼ä¼ éç»æå¡å¨;æèå½å¤çæ¹åçURIæ¶ï¼ä¼ éå®å¨è§èåçURIã(1.1.12ä¹åï¼åªä¼ éåå§çURI)\n\nlocation /some/path/ {\n\tproxy_pass http://127.0.0.1;\n}\n\n\nå¨æäºæåµä¸ï¼æ æ³ç¡®å®è¦æ¿æ¢çè¯·æ±URIé¨å:\n\nå½ä½¿ç¨æ­£åè¡¨è¾¾å¼æå®locationæ¶ï¼å¹¶ä¹å¨å½ålocationåï¼proxy_passåºè¯¥åæ²¡æURIçæå®ã å½locationä¸­ä½¿ç¨rewriteæä»¤æ´æ¹URIæ¶ï¼å°ä½¿ç¨ç¸åçéç½®æ¥å¤çè¯·æ±(break)ï¼\n\nlocation /name/ {\n\trewrite /name/([^/]+) /users?name=$l break;\n\tproxy_pass http://127.0.0.1;\n}\n# å¨è¿ç§æåµä¸ï¼å°å¿½ç¥æä»¤ä¸­æå®çURI,å¹¶å°å®å¨æ´æ¹çè¯·æ±URIä¼ éç»æå¡å¨ã\n\n\n * å½proxy_passä¸­ä½¿ç¨äºåéæ¶å¦æå¨æä»¤ä¸­æå®äºURI,åå¶ä¼ä¼ éç»æå¡å¨ï¼åå§è¯·æ±URIè¢«å¶æ¿æ¢ã\n\nlocation /name/ {\n\tproxy_pass http://127.0.0.1$request_uri;\n}\n\n\n\n# 5ãphpç¸å³æ¨¡å(ngx_ http_ fastcgi module)\n\nè¿ä¸ªæ¨¡ååè®¸ä¼ éä¸ä¸ªè¯·æ±ç»FastCGI Serverã\n\n\n# åºæ¬ç¸å³ç¥è¯\n\n# 1.ä»ä¹æ¯FastCGl\n\nFastCGlæ¯ä¸ä¸ªå¯ä¼¸ç¼©å°ãé«éå°å¨HTTP serveråå¨æèæ¬è¯­è¨é´éä¿¡çæ¥å£ãå¤æ°æµè¡çHTTP serveré½æ¯æFastCGI,åæ¬Apacheã Nginxålighttpdç­ã åæ¶, FastCGIä¹è¢«è®¸å¤èæ¬è¯­è¨æ¯æï¼å¶ä¸­å°±æPHPã\n\nFastCGIæ¥å£æ¹å¼éç¨C/Sç»æï¼å¯ä»¥å°HTTPæå¡å¨åèæ¬è§£ææå¡å¨åå¼,åæ¶å¨èæ¬è§£ææå¡å¨ä¸å¯å¨ä¸ä¸ªæèå¤ä¸ªèæ¬è§£æå®æ¤è¿ç¨ãå½HTTPæå¡å¨æ¯æ¬¡éå°å¨æç¨åºæ¶ï¼ å¯ä»¥å°å¶ç´æ¥äº¤ä»ç»FastCGlè¿ç¨æ¥æ§è¡ï¼ç¶åå°å¾å°çç»æè¿åç»æµè§å¨ãè¿ç§æ¹å¼å¯ä»¥è®©HTTPæå¡å¨ä¸ä¸å°å¤çéæè¯·æ±æèå°å¨æèæ¬æå¡å¨çç»æè¿åç»å®¢æ·ç«¯ï¼è¿å¨å¾å¤§ç¨åº¦ä¸æé«äºæ´ä¸ªåºç¨ç³»ç»çæ§è½ã\n\n# 2.Nginx+FastCGlè¿è¡åç\n\nNginxä¸æ¯æå¯¹å¤é¨ç¨åºçç´æ¥è°ç¨æèè§£æï¼ææçå¤é¨ç¨åº(åæ¬PHP)å¿é¡»éè¿FastCGæ¥å£æ¥è°ç¨ãFastCGIæ¥å£å¨Linux ä¸æ¯socket (è¿ä¸ªsocketå¯ä»¥æ¯æä»¶socket, ä¹å¯ä»¥æ¯ip socket)ãä¸ºäºè°ç¨CGlç¨åº,è¿éè¦ä¸ä¸ªFastCGlç wrapper (wrapperå¯ä»¥çè§£ä¸ºç¨äºå¯å¨å¦ä¸ä¸ªç¨åºçç¨åº) ï¼è¿ä¸ªwrapperç»å®å¨æä¸ªåºå®socketä¸,å¦ç«¯å£æèæä»¶socketãå½Nginxå°CGIè¯·æ±åéç»è¿ä¸ªsocketçæ¶åï¼éè¿FastCGIæ¥å£, wrapperæ¥æ¶å°è¯·æ±ï¼ç¶åæ´¾çåºä¸ä¸ªæ°ççº¿ç¨,è¿ä¸ªçº¿ç¨è°ç¨è§£éå¨æèå¤é¨ç¨åºå¤çèæ¬å¹¶è¯»åè¿åæ°æ®;æ¥çï¼wrapperåå°è¿åçæ°æ®éè¿FastCGlæ¥å£ï¼æ²¿çåºå®çsocketä¼ éç»Nginx;æå, Nginxå°è¿åçæ°æ®åéç»å®¢æ·ç«¯ãè¿å°±æ¯Nginx+FastCGlçæ´ä¸ªè¿ä½è¿ç¨ã\n\n\n\n# 3. spawn-fcgiä¸PHP-FPM\n\nFastCGIæ¥å£æ¹å¼å¨èæ¬è§£ææå¡å¨ä¸å¯å¨ä¸ä¸ªæèå¤ä¸ªå®æ¤è¿ç¨å¯¹å¨æèæ¬è¿è¡è§£æï¼è¿äºè¿ç¨å°±æ¯FastCGIè¿ç¨ç®¡çå¨ï¼æèç§°ä¸ºFastCGIå¼æã spawn-fcgjä¸PHP-FPMå°±æ¯æ¯æPHPçä¸¤ä¸ªFastCGlè¿ç¨ç®¡çå¨ã\n\nspawn-fcgiæ¯HTTPæå¡å¨lighttpdçä¸é¨åï¼ç®åå·²ç»ç¬ç«æä¸ºä¸ä¸ªé¡¹ç®,ä¸è¬ä¸lighttpdéåä½¿ç¨æ¥æ¯æPHPãä½æ¯lighttpdçspwan-fcgiå¨é«å¹¶åè®¿é®çæ¶åï¼ä¼åºç°åå­æ³æ¼çè³èªå¨éå¯FastCGçé®é¢ãNginxæ¯ä¸ªè½»éçº§çHTTP server,å¿é¡»åå©ç¬¬ä¸æ¹çFastCGå¤çå¨æå¯ä»¥å¯¹PHPè¿è¡è§£æ,å æ­¤Nginx+spawn-fcgiçç»åä¹å¯ä»¥å®ç°å¯¹PHPçè§£æã\n\nPHP-FPMä¹æ¯ä¸ä¸ªç¬¬ä¸æ¹çFastCGIè¿ç¨ç®¡çå¨ï¼å®æ¯ä½ä¸ºPHPçä¸ä¸ªè¡¥ä¸æ¥å¼åçï¼å¨å®è£çæ¶åä¹ éè¦åPHPæºç ä¸èµ·ç¼è¯ï¼ä¹å°±æ¯è¯´PHP-FPMè¢«ç¼è¯å°PHPåæ ¸ä¸­ï¼å æ­¤å¨å¤çæ§è½æ¹é¢æ´å ä¼ç§ãå æ¶PHP-FPMå¨å¤çé«å¹¶åæ¹é¢ä¹æ¯spawn-fcgiå¼æå¥½å¾å¤ï¼å æ­¤,æ¨èä½¿ç¨Nginx+PHP/PHP-FPMè¿ä¸ª ç»åå¯¹PHPè¿è¡è§£æã\n\nFastCGlçä¸»è¦ä¼ç¹æ¯æå¨æè¯­è¨åHTTP Serveråç¦»å¼æ¥ï¼æä»¥Nginxä¸PHP/PHP-FPMç»å¸¸è¢«é¨ç½²å¨ ä¸åçæå¡å¨ä¸ï¼ä»¥åæåç«¯Nginxæå¡å¨çåå,ä½¿Nginxä¸ä¸å¤çéæè¯·æ±åè½¬åå¨æè¯·æ±, èPHP/PHP- FPMæå¡å¨ä¸ä¸è§£æPHPå¨æè¯·æ±ã\n\n * fastcgi_pass\n\nSyntax: fastcgi_pass address;\nDefault: -\nContext: location, if in location\n\n\nè®¾ç½®FastCGI serverçå°åï¼å°åå¯ä»¥æ¯IPæèååå ä¸ç«¯å£å·ã\n\nfastcgi_pass localhost: 9000;\n\n#ä¹å¯ä»¥æ¯UNIX socketè·¯å¾\nfastcgi_pass unix:/tmp/fastcgi.socket;\n\n\nå¦æååè§£æä¸ºå¤ä¸ªå°åï¼åææå°åé½å°ä»¥å¾ªç¯æ¹å¼ä½¿ç¨ãæ­¤å¤,å¯ä»¥å°å°åæå®ä¸ºæå¡å¨ç»ãåæ°å¼ä¸è½åå«åéã\n\n * fastcgi_index\n\nSyntax: fastcgi_index name;\nDefault: -\nContext: http, server, location\n\n\nè®¾ç½®fastcgié»è®¤çä¸»é¡µèµæºæä»¶å\n\n * fastcgi_param\n\nSyntax: fastcgi_param parameter value [if_not_empty] ;\nDefault: -\nContext: http, server, location\n\n\nè®¾ç½®åºä¼ éç»FastCGIæå¡å¨çåæ°ãè¯¥å¼å¯ä»¥åå«ææ¬ãåéåå¶ç»åãå¦æå½åçº§å«æ²¡æå®ä¹,ä¼ä»ä¸ä¸çº§ç»§æ¿ã\n\nå¯¹äºPHPæ¥è¯´çæå°åéç½®:\n\nfastcgi_param SCRIPT_FILENAME /home/www/scripts/php$fastcgi_script_name;\nfastcgi_param QUERY_STRING\t\t$query_string;\n\n\nSCRIPT_ FILENAMEåæ°ç¨äºPHPç¡®å®è¯·æ±èæ¬çåå­ QUERY_ STRINGåæ°ç¨äºä¼ éè¯·æ±çåæ°\n\nå¯¹äºå¤çPOSTè¯·æ±çèæ¬ï¼è¿éè¦ä»¥ä¸ä¸ä¸ªåæ°:\n\nfastcgi_param REQUEST METHOD \t$request_method; ;\nfastcgi_param CONTENT_TYPE\t$content_type;\nfastcgi_param CONTENT_LENGTH\t$content_length;\n\n\nå¦æPHPç¼è¯æ¶ä½¿ç¨äº--enable-force-cgi-redirectéç½®åæ°ï¼åREDIRECT, _STATUSåæ°åºè¯¥ä½¿ç¨200å¼è¢«ä¼ é\n\nfastcgi_param REDIRECT_STATUS 200; \n\n\n * fastcgi_cache_path\n\nSyntax: fastcgi_cache_path path [levels=levels] [use_temp_path=on|off] \nkeys_zone=name:size [inactive=time]\n\t\t[max_size=size] [manager_files=number] [manager_sleep=time]\n[manager_threshold=time] [loader_fi1es=number]\n\t\t[1oader_sleep=time] [loader_threshold=time] [purger=on|off]\n[purger_files=number] [purger_sleep=time]\n\t\t[purger_thresho1d=time] ;\nDefault: -\nContext: http\n\n\nè®¾ç½®ç¼å­çè·¯å¾åå¶ä»åæ°ãç¼å­æ°æ®å­å¨å¨æä»¶ä¸­ãlevelsçç®å½å±çº§ä¸º1å°3çº§,æ¯çº§çåå¼ä¸º1æè2ï¼levels=1:2è¡¨ç¤ºå®ä¹ç2å±ç®å½ç»æï¼levels=1:2:2è¡¨ç¤ºå®ä¹ç3å±ç®å½ç»æã\n\nfastcgi_cache_path /data/nginx/cache levels=1:2 keys_zone=one:10m;\n\n\nç¼å­çæä»¶åçèµ·æ¥å¦ä¸:\n\n/data/nginx/cache/c/29/b7f54b2df7773722d382f4809d65029c\n\n\nä¸ä¸ªç¼å­ååºé¦ååå¥å°ä¸´æ¶æä»¶ï¼ç¶ååéå½åæ­¤æä»¶ï¼ä¸´æ¶æä»¶ç®å½æ¯å¦ä½¿ç¨ç±use_temp_pathåæ°å®ä¹çï¼å¦æè¿ä¸ªåæ°çç¥æèè®¾ç½®ä¸ºonï¼åä¸´æ¶æä»¶ç®å½ä¸ºfastcgi_temp_pathåæ°æå®çä½ç½®ï¼å¦æè®¾ç½®ä¸ºoffï¼åä¸´æ¶æä»¶å°ç´æ¥æ¾å¨ç¼å­ç®å½ä¸­ãæ­¤å¤ï¼æææ´»å¨keyåæå³æ°æ®çä¿¡æ¯é½å­å¨å¨å±äº«åå­åºåä¸­ï¼å¶åç§°åå¤§å°ç±keys_zoneåæ°éç½®ã1Må­èçåºåå¯ä»¥å­å¨å¤§çº¦8000ä¸ªkeyã\n\ninactiveåæ°æå®æ¶é´åæ²¡æè¢«è®¿é®çç¼å­æ°æ®å°è¢«æ¸é¤ï¼å¶é»è®¤å¼ä¸º10åéï¼\n\nmax_sizeåæ°è®¾ç½®æå¤§ç¼å­å¤§å°ï¼å¦æè¶åºï¼ç¼å­ç®¡çå¨å°å é¤æè¿æå°è¢«ä½¿ç¨çæ°æ®\n\n * fastcgi_cache\n\nSyntax: fastcgi_cache zone | off;\nDefault: fastcgi_cache off;\nContext: http, server, location\n\n\nå®ä¹ç¨äºç¼å­çä¸ä¸ªå±äº«åå­åºåï¼åä¸ä¸ªåºåå¯ä»¥è¢«ç¨äºå¤ä¸ªä½ç½®ï¼offåæ¶ç¼å­ç»§æ¿\n\n * fastcgi_cache_key\n\nSyntax: fastcgi_cache_key string;\nDefault: -\nContext: http, server, location\n\n\nå®ä¹ä¸ä¸ªç¼å­çkeyï¼ä¾å¦:\n\nfastcgi_cache_key localhost:9000$request_uri;\n\n\n * fastcgi_cache_methods\n\nSyntax: fastcgi_cache_methods GETI HEAD | POST ...;\nDefault: fastcgi_cache_methods GET HEAD;\nContext: http, server, location\n\n\nå®ä¹ç¼å­çå®¢æ·ç«¯çè¯·æ±æ¹æ³ï¼"GET"å"HEAD"æ¹æ³æ»æ¯è¢«ç¼å­ï¼å»ºè®®æ¾å¼ååºã\n\n * fastcgi_cache_min_uses\n\nSyntax: fastcgi_cache_min_uses number;\nDefault: fastcgi_cache_min_uses 1;\nContext: http, server, location\n\n\nå®ä¹ååºè¢«ç¼å­åçæå°è®¿é®æ¬¡æ°\n\n * fastcgi_keep_conn\n\nSyntax: fastcgi_keep_conn on | off;\nDefault: fastcgi_keep_conn off;\nContext: http, server, location\n\n\né»è®¤æåµä¸ï¼fastcgjæå¡å¨å°å¨åéååºåç«å³å³é­è¿æ¥ãå½è¯¥æä»¤è®¾ç½®ä¸ºonæ¶ï¼nginxå°æç¤ºfastcgiæå¡å¨ä¿æè¿æ¥æå¼å»ºè®®å¼å¯ã\n\n * fastcgi_cache_valid\n\nSyntax: fastcgi_cache_valid [code ...] time;\nDefault: -\nContext: http, server, location\n\n\nè®¾ç½®ä¸åçååºç çç¼å­æ¶é´ãä¾å¦:\n\nfastcgi_cache_valid 200 302 10m;\nfastcgi_cache_valid 404\t1m;\n\n\nååºç ä¸º200å302çç¼å­æ¶é´ä¸º10åéï¼404 ååºç ç¼å­æ¶é´ä¸º1åé\n\nfastcgi_cache_valid 5m;\n\n\nå¦æä»è®¾ç½®æ¶é´ï¼ååªæ200, 301, 302ååºç è¢«ç¼å­\n\nfastcgi_cache_valid 200 302 10m;\nfastcgi_cache_valid 301 1h;\nfastcgi_cache_valid any 1m;\n\n\nè¿å¯ä»¥æå®anyåæ°æ¥ç¼å­ä»»ä½ååº\n\nç¼å­åæ°ä¹å¯ä»¥ç´æ¥å¨ååºå¤´ä¸­è®¾ç½®ãè¿æ¯ä½¿ç¨æä»¤è®¾ç½®ç¼å­æ¶é´å·ææ´é«çä¼åçº§ãä¾å¦:å¦æå¤´åå«"Set-Cookie"å­æ®µï¼åä¸ä¼ç¼å­æ­¤ç±»ååºã\n\n# 4. è®¾ç½®FastCGl\n\nlocation / {\n\tfastcgi_pass localhost :9000;\n\tfastcgi_index index.php;\n    \n\tfastcgi_param SCRIPT_FILENAME /home/www/scripts/phpsfastcgi_script_name;\n\tfastcgi_param QUERY_STRING\t$query_string;\n\tfastcgi_param REQUEST METHOD $request_method;\n\tfastcgi_param CONTENT TYPE\t$content_type;\n\tfastcgi_param CONTENT_LENGTH $content_length;\n}\n\n\n# 5. è®¾ç½®ç¼å­çä¾å­\n\nhttp {\nfastcgi_cache_path /var/cache/nginx/fcgi_cache\nlevels=1:2:1 keys_zone=fcgicache:20m inactive=120s ;\n...\nserver {\n    location ~* \\. php$ {\n        ...\n        fastcgi_cache fcgicache;\n        fastcgi_cache_key $request_uri ;\n        fastcgi_cache_valid 200 302 10m;\n        fastcgi_cache_valid 301 lh;\n        fastcgi_cache_valid any lm;\n...\n}\n\n}\n',normalizedContent:'# nginxå¸¸ç¨æ¨¡åäº\n\n\n# 1ãæ¥å¿è®°å½æ¨¡åï¼ngx_http_log_moduleï¼\n\nä»¥æå®æ ¼å¼åå¥è¯·æ±æ¥å¿ã\n\n * access_log\n\nsyntax: access_log path [format [buffer=size] [gzip[=level]] [flush=time] [if=condition]];\n\taccess_log off;\ndefault: access_log logs/access.log combined;\ncontext: http, server, location, if in location, limit_except\n\n\nè®¾ç½®æ¥å¿åå¥çè·¯å¾ãæ ¼å¼åéç½®ãä¾å¦:\n\naccess_log /path/to/log.gz combined gzip flush=5m;\n# å¦æå¸ægzipæ­£å¸¸å·¥ä½, nginxå¿é¡»æå»ºzlibåº\n\n\n * log_format\n\nsyntax: log_format name [escape=default | json | none] string ...;\ndefault: log_format combined "...";\ncontext: http\n\n\næå®æ¥å¿çæ ¼å¼ãæ¥å¿æ ¼å¼å¯ä»¥åå«å¬å±åéåä»å¨æ¥å¿åå¥æ¶å­å¨çåéã\n\néç½®ï¼\n\nlog_format compression \'$remote_addr - $remote_user [$time_local]\'\n\t\t\t\t\t \'"$request" $status $bytes_sent\'\n   \t\t\t\t\t \'"$http_referer" "$http_user_agent" \t\t\t\t\t\t\t "$gzip_ratio"\';\naccess_log /spool/logs/nginx-access.log compression buffer=32k;\n\n#jsonæ ¼å¼æ¥å¿:\nlog_format json \'{"@timestamp":"$time_iso8601",\'\n\t\t\t   \'"client_ip":"$remote_addr",\'\n\t\t\t   "size":$body_bytes_sent,\'\n\t\t\t   \'"responsetime":$request_time,\n\t\t\t   \'"upstreamtime": "$upstream_response_time",\'\n\t\t\t   "upstreamhost": "$upstream_addr",\'\n\t\t\t   \'"http_host":"$host",\'\n\t\t\t   \'"method": "$request_method",\'\n\t\t\t   \'"request_uri": "$request_uri",\'\n\t\t\t   \'"xff": "$http_x_forwarded_for",\'\n\t\t\t   \'"referrer": "$http_referer",\'\n\t\t\t   \'"agent": "$http_user_agent",\'\n\t\t\t   \'"status":"$status"}\';\n\n\n * open_log_file_cache\n\nsyntax: open_log_file_cache max=n [inactive=time] [min_uses=n] [valid=time]; \nopen_log_file_cache off;\ndefault: open_log_file_cache off;\ncontext: http, server, location\n\n\nå®ä¹ä¸ä¸ªç¼å­ï¼ç¨äºå­å¨åç§°ä¸­åå«åéçå¸¸ç¨æ¥å¿çæä»¶æè¿°ç¬¦ãç¼å­å¸¸ç¨æ¥å¿æä»¶ç¸å³çåæ°æ®ä¿¡æ¯ã(å¯¹äºæ¯ä¸æ¡æ¥å¿è®°å½ï¼é½å°æ¯åæå¼æä»¶ï¼ååå¥æ¥å¿ï¼ç¶åå³é­ã)\n\nopen_log_file_cache max=1000 inactive=20s valid=1m min_uses=2;\n# max:ç¼å­çæå¤§æä»¶æè¿°ç¬¦æ°é\n# min_uses:å¨inactiveå®ä¹çæ¶é´åï¼åè®¸æè¿°ç¬¦å¨ç¼å­ä¸­ä¿ææå¼ç¶æçæå°æä»¶ä½¿ç¨æ°\n# inactive:å¦æå¨æ­¤æé´æ²¡æè®¿é®ï¼åå³é­ç¼å­æè¿°ç¬¦çæ¶é´:\n# valid:æ­¤æ¶é´è¶æ¶åï¼ä¼æ£æ¥æä»¶è¿æ¯å¦å·æç¸åçåå­ãéªæ­£ç¼å­ä¸­åç¼å­é¡¹æ¯å¦ä¸ºæ´»å¨é¡¹çæ¶é´é´éã\n\n\n\n# 2ãåç¼©ç¸å³éç½®ï¼ngx_http_gzip_moduleï¼\n\næ¯ä¸ä¸ªä½¿ç¨"gzip"æ¹æ³åç¼©ååºçè¿æ»¤å¨ãè¿éå¸¸æå©äºå°ä¼ è¾æ°æ®çå¤§å°åå°ä¸åçè³æ´å¤ã\n\n * gzip\n\nsyntax: gzip on | off;\ndefault: gzip off;\ncontext: http, server, location, if in location\n\n\nä¸ºååºå¼å¯æèåæ¶gzipåç¼©\n\n * gzip_comp_level\n\nsyntax: gzip_comp_level level;\ndefault: gzip_comp_level 1;\ncontext: http, server, location\n\n\nè®¾ç½®ååºåç¼©çgzipçº§å«ï¼èå´1-9\n\n * gzip_buffers\n\nsyntax: gzip_buffers number size;\ndefault: gzip_buffers 32 4k | 16 8k;\ncontext: http,server, location\n\n\nè®¾ç½®å®ç°åç¼©åè½æ¶ç¼å²åºæ°éåæ¯ä¸ªç¼å­åºçå¤§å°ãsizeé»è®¤å¤§å°ç­åäºä¸ä¸ªåå­é¡µ, 4kæ8kï¼åå³äºå¹³å°ã\n\n * gzip_disable\n\nsyntax: gzip_disable regex ...;\ndefault: -\ncontext: http, server, location\n\n\nåæ¶å¯¹å¹éå°çå®¢æ·ç«¯æµè§å¨çååºæ¥æçgzipåç¼©ã\n\n * gzip_http_version\n\nsyntax: gzip_http_version 1.0 | 1.1;\ndefault: gzip_http_version 1.1;\ncontext: http, server, location\n\n\nè®¾ç½®åç¼©ååºæ¶ï¼æéçè¯·æ±çæå°httpçæ¬ã\n\n * gzip_min_length\n\nsyntax: gzip_min_length length;\ndefault: gzip_min_length 20;\ncontext: http, server, location\n\n\nè®¾ç½®å°è¢«gzipå¤ççååºçæå°é¿åº¦ãé¿åº¦ä»ä»"content-length"ååºå¤´å­æ®µç¡®å®ã\n\n * gzip_types\n\nsyntax: gzip_types mime-type ...;\ndefault: gzip_types text/html;\ncontext: http, server, location\n\n\né¤äº"text/html"ä¹å¤ï¼è¿åè®¸å¯¹æå®çmimeç±»åè¿è¡gzipå¤çã ç¹æ®å¼"*"å¹éä»»ä½mimeç±»å(0.8.29) å¸¦æâtext/html"ç±»åçååºæ»æ¯è¢«åç¼©ã\n\n * gzip_vary\n\nsyntax: gzip_vary on | off;\ndefault: gzip_vary off;\ncontext: http, server, location\n\n\nå¦ægzip,gzip_ staticægunzipæ¯æ´»è·çï¼å¼å¯æå³é­å¨ååºå¤´æå¥"vary:accept-encoding"åºåã(ç»ä»£çæå¡å¨ç¨çï¼æçæµè§å¨æ¯æåç¼©ï¼æçä¸æ¯æï¼æä»¥é¿åæµªè´¹ä¸æ¯æçä¹åç¼©ï¼æä»¥æ ¹æ®å®¢æ·ç«¯çhttpå¤´æ¥å¤æ­ï¼æ¯å¦éè¦åç¼©)\n\n * gzip_proxied\n\nsyntax: gzip_proxied off | expired | no-cache | no-store | private | no_last_modified | no_etag | auth | any ...;\ndefault: gzip_proxied off; \ncontext: http, server , location\n\n\nä¾èµäºè¯·æ±åååºï¼å¼å¯å¯¹ä»£çè¯·æ±çgzipåç¼©ãè¯·æ±æ¯è¢«ä»£çè¯·æ±çç¡®å®æ¯çè¯·æ±å¤´ä¸­æ¯å¦åºç°"via"åºåã\n\n * ååµåé$gzip_ratio\n\nå®ç°åç¼©æ¯ï¼è®¡ç®ä¸ºåå§ååºå¤§å°ååç¼©ååºå¤§å°ä¹é´çæ¯çï¼å¯ä»¥ç¨äºæ¥å¿ã\n\n * éç½®\n\ngzip\t\ton; \ngzip_min_length 1000;\ngzip_proxied\texpired no-cache no-store private auth;\ngzip_types\t\ttext/plain application/xml;\n----------------------------------\n\ngzip on:\n\ngzip_comp_level 6;\ngzip_http_version 1.1;\ngzip_vary on;\ngzip_min_length 1024;\ngzip_buffers 16 8k;\ngzip_proxied any;\ngzip_disable "msie[1-6]\\.(?!.*svl)";\ngzip_types text/xml text/plain text/css application/javascript application/xml\napplication/json;\n\n\n\n# 3ãhttpæ¨¡åï¼ngx_http_ssl_moduleï¼\n\næ­¤æ¨¡åæä¾å¯¹httpsçå¿è¦æ¯æãæ¨¡åé»è®¤æ²¡æå®è£ï¼éè¦éè¿--with-http_ssl_ moduleéç½®åæ°æ¿æ´»ãè¿ä¸ªæ¨¡åéè¦opensslåºæ¯æã\n\n * ssl\n\nsyntax: ssl on | off;\ndefault: ssl off;\ncontext: http, server\n\n\nè¯¥æä»¤å¨1.15.0çä¸­è¢«åºå¼ãåºæ¹ä¸ºä½¿ç¨listenæä»¤çsslåæ°\n\n * ssl_certificate ( [sÉrËtÉªfÉªkÉt , sÉrËtÉªfÉªkeÉªt] )\n\nsyntax: ssl_certificate file;\ndefault: -\ncontext: http, server\n\n\nä¸ºç»å®çèææå¡å¨æå®å·æpemæ ¼å¼è¯ä¹¦çæä»¶ãå¦æé¤äºä¸»è¯ä¹¦ä¹å¤è¿åºæå®ä¸­é´è¯ä¹¦,ååºæä»¥ä¸é¡ºåºå¨åä¸æä»¶ä¸­æå®è¯ä¹¦ï¼é¦åæ¯ä¸»è¯ä¹¦,ç¶åæ¯ä¸­é´è¯ä¹¦ãpemæ ¼å¼çå¯é¥å¯ä»¥æ¾å¨åä¸ä¸ªæä»¶ä¸­ã ä»çæ¬1.11.0å¼å§ï¼å¯ä»¥å¤æ¬¡æå®æ­¤æä»¤ä»¥å è½½ä¸åç±»åçè¯ä¹¦,ä¾å¦rsaåecdsaï¼\n\nserver {\n\tlisten\t\t\t\t443 ssl;\n\tserver_name\t\t\texample.com;\n    \n\tssl_certificate\t\texample.com.rsa.crt;\n\tssl_certificate_key\texample.com.rsa.key;\n    \n\tssl_certificate\t\texample.com.ecdsa.crt;\n\tssl_certificate_key example.com.ecdsa.key;\n    \n    ...\n}\n\n\nåªæopenssl 1.0.2ææ´é«çæ¬æ¯æä¸åè¯ä¹¦çåç¬è¯ä¹¦é¾ãå¯¹äºæ§çæ¬ï¼åªè½ä½¿ç¨ä¸ä¸ªè¯ä¹¦é¾ãåºè¯¥è®°ä½ï¼ç±äºhttpsåè®®å¯¹æå¤§äºæä½æ§çéå¶ï¼èææå¡å¨åºè¯¥ä¾¦å¬ä¸åçipå°åã\n\n * sll_certificate_key\n\nsyntax: ssl_certificate_key file;\ndefault: -\ncontext: http, server\n\n\næç¡®ä¸ºèææå¡å¨æå®ä¸ä¸ªå«æå å¯keyçpemæ ¼å¼æä»¶ãå³è¯ä¹¦çç§é¥æä»¶ã\n\n * ssl_protocols\n\nsyntax: ssl_protocols [sslv2] [sslv3] [tlsv1] [tlsv1.1] [tlsv1.2] [tlsv1.3];\ndefault: ssl_protocols tlsv1 tlsv1.1 tlsv1.2;\ncontext: http, server\n\n\nå¯ç¨æå®çåè®®ã\n\nä»å½ä½¿ç¨openssl 1.0.1ææ´é«çæ¬æ¶ï¼tlsv1.1åtlsv1.2åæ°(1.1.13ï¼ 1.0.12) æèµ·ä½ç¨ãåªæå¨ä½¿ç¨äºç¨tlsv1.3æ¯ææå»ºçopenssl 1.1.1æ¶, tlsv1.3åæ°(1.13.0) æææã\n\n# æ¥çopensslçæ¬\n$ rpm -qa | grep openssl\n$ rpm -qi openssl\n\n\n * ssl_session_cache\n\nsyntax: ssl_session_cache off | none | [builtin[:size]] [shared:name:size];\ndefault: ssl_session_cache none;\ncontext: http, server\n\n\nè®¾ç½®å­å¨ä¼è¯çç¼å­çç±»ååå¤§å°ãç¼å­å¯ä»¥æ¯ä»¥ä¸ä»»ä½ç±»å:\n\n * offï¼ä¸¥æ ¼ç¦æ­¢ä½¿ç¨ä¼è¯ç¼å­ï¼nginxæ¾å¼å°åè¯å®¢æ·æºä¼è¯ä¸è½è¢«éç¨ã\n * noneï¼ä¼è¯ç¼å­çä½¿ç¨è¢«ææå°ç¦æ­¢ï¼nginxåè¯å®¢æ·æºä¼è¯å¯ä»¥éç¨ï¼ä½å®éä¸ä¸ä¼å°ä¼è¯åæ°å­å¨å¨ç¼å­ä¸­ã\n * builtin: åç½®opensslç¼å­ï¼ä»è¢«ä¸ä¸ªå·¥ä½è¿ç¨ä½¿ç¨ãç¼å­å¤§å°æ¯å¨ä¼è¯ä¸­æå®çãå¦ææ²¡æç»åºå¤§å°ï¼åç­äº20480ä¸ªä¼è¯ãä½¿ç¨åç½®ç¼å­å¯è½ä¼å¯¼è´åå­ç¢çã\n * shared: å¨ææå·¥ä½è¿ç¨ä¹é´å±äº«çç¼å­ãç¼å­å¤§å°ä»¥å­èä¸ºåä½ï¼ 1må­èå¯ä»¥å­å¨å¤§çº¦4000ä¸ªä¼è¯ãæ¯ä¸ªå±äº«ç¼å­é½åºè¯¥æä¸ä¸ªä»»æåç§°ãå·æç¸ååç§°çç¼å­å¯ä»¥å¨å¤ä¸ªèææå¡å¨ä¸­ä½¿ç¨ã\n\nä¸¤ç§ç¼å­ç±»åé½å¯ä»¥åæ¶ä½¿ç¨ï¼ä½æ¯ï¼åªä½¿ç¨æ²¡æbuiltinç¼å­çsharedç¼å­åºè¯¥æ´é«æãä¾å¦:\n\nssl_session_cache builtin:1000 shared:ssl:10m;\n\n\n * ssl_session_timeout\n\nsyntax: ssl_session_timeout time;\ndefault: ssl_session_timeout 5m;\ncontext: http, server\n\n\nå®¢æ·ç«¯å¯ä»¥éç¨ä¼è¯åæ°çæéã\n\n * éç½®æ¡ä¾\n\n\nä¸ºäºåå°å¤çå¨è´è½½ï¼å»ºè®®:\n1.å°å·¥ä½è¿ç¨æ°è®¾ç½®ä¸ºå¤çå¨æ°ï¼\n2.å¯ç¨keep-aliveè¿æ¥ï¼\n3.å¯ç¨å±äº«sessionç¼å­ï¼\n4.ç¦ç¨åç½®sessionç¼å­ï¼\n5.å¹¶å¯è½å»¶é¿ä¼è¯çå­æ¶é´(é»è®¤ä¸º5åé)\n"""\n\nworker_processes auto;\n\nhttp {\n\t...\n\tserver {\n\tlisten\t\t\t443 ssl;\n\tkeepalive_timeout\t\t70;\n        \n\tssl_protocols\t\ttlsv1 tlsv1.1 tlsv1.2;\n\tssl_ciphers\t\t\taes128-sha:aes256-sha:rc4-sha:des-cbc3-sha:rc4-md5;\n\tssl_certificate\t\t/usr/1ocal/nginx/conf/cert.pem;\n\tssl_certificate_key /usr/1ocal/nginx/conf/cert.key;\n\tssl_session_cache\tshared:ssl:10m;\n\tssl_session_timeout 10m;\n\t\n    ...\n}\n\n\n\n# 4ãååä»£çæ¨¡å(ngx_http_ proxy_ module)\n\næ­¤æ¨¡ååè®¸å°è¯·æ±ä¼ éå°å¶å®çæå¡å¨ã\n\n * proxy_pass\n\nsyntax: proxy_pass url;\ndefault: -\ncontext: location,\tif in location, limit_except\n\n\nè®¾ç½®ä¸ä¸ªè¢«ä»£çæå¡å¨çåè®®åå°åä»¥åéé¡¹uriï¼å°å¶æ å°å°ä¸ä¸ªlocationãåè®®å¯ä»¥æå®"http"æ"https"ãå°åå¯ä»¥æå®ä¸ºååæipå°åï¼ä»¥åå¯éç«¯å£:\n\nproxy_pass http://localhost:8000/uri/;\n\n\næå®unix socketè·¯å¾æ¶,è·¯å¾åºæ¾å°å³é®å­:unixåé¢ï¼å¹¶ç¨åå·æ¬èµ·æ¥ã\n\nproxy_pass unix:/tmp/backend.socket:/uri/;\n\n\nå¦æååè§£æä¸ºå¤ä¸ªå°åï¼åææå°åå°ä»¥è½®è¯¢(round-robin) æ¹å¼ä½¿ç¨ãæ­¤å¤,å¯ä»¥å°å°åæå®ä¸ºæå¡å¨ç»ã\n\nåæ°å¼ä¸è½åå«åéãå¨è¿ç§æåµä¸ï¼å¦æå°å°åæå®ä¸ºååï¼åä¼å¨ææè¿°çæå¡å¨ç»ä¸­æç´¢è¯¥åç§°,å¦ææ¾ä¸å°ï¼åä½¿ç¨è§£æç¨åºç¡®å®è¯¥åç§°ã\n\nè¯·æ±urlæå¦ä¸æ¹å¼ä¼ éå°æå¡å¨:\n\n * å¦æproxy_ passæå®äºuriï¼é£ä¹æ åè¯·æ±uriä¸­å¹éäºlocationçé¨åè¦è¢«æä»¤ä¸­æå®çurlæ¿ä»£ã\n\nlocation /name/ {\n\tproxy_pass http://127.0.0.1/remote/;\n}\n\n\n * å¦æproxy_passæ²¡ææå®uriï¼å½åå§è¯·æ±è¢«å¤çæ¶ï¼è¯·æ±uriå°ä»¥å®¢æ·ç«¯åéçç¸åå½¢å¼ä¼ éç»æå¡å¨;æèå½å¤çæ¹åçuriæ¶ï¼ä¼ éå®å¨è§èåçuriã(1.1.12ä¹åï¼åªä¼ éåå§çuri)\n\nlocation /some/path/ {\n\tproxy_pass http://127.0.0.1;\n}\n\n\nå¨æäºæåµä¸ï¼æ æ³ç¡®å®è¦æ¿æ¢çè¯·æ±urié¨å:\n\nå½ä½¿ç¨æ­£åè¡¨è¾¾å¼æå®locationæ¶ï¼å¹¶ä¹å¨å½ålocationåï¼proxy_passåºè¯¥åæ²¡æuriçæå®ã å½locationä¸­ä½¿ç¨rewriteæä»¤æ´æ¹uriæ¶ï¼å°ä½¿ç¨ç¸åçéç½®æ¥å¤çè¯·æ±(break)ï¼\n\nlocation /name/ {\n\trewrite /name/([^/]+) /users?name=$l break;\n\tproxy_pass http://127.0.0.1;\n}\n# å¨è¿ç§æåµä¸ï¼å°å¿½ç¥æä»¤ä¸­æå®çuri,å¹¶å°å®å¨æ´æ¹çè¯·æ±uriä¼ éç»æå¡å¨ã\n\n\n * å½proxy_passä¸­ä½¿ç¨äºåéæ¶å¦æå¨æä»¤ä¸­æå®äºuri,åå¶ä¼ä¼ éç»æå¡å¨ï¼åå§è¯·æ±uriè¢«å¶æ¿æ¢ã\n\nlocation /name/ {\n\tproxy_pass http://127.0.0.1$request_uri;\n}\n\n\n\n# 5ãphpç¸å³æ¨¡å(ngx_ http_ fastcgi module)\n\nè¿ä¸ªæ¨¡ååè®¸ä¼ éä¸ä¸ªè¯·æ±ç»fastcgi serverã\n\n\n# åºæ¬ç¸å³ç¥è¯\n\n# 1.ä»ä¹æ¯fastcgl\n\nfastcglæ¯ä¸ä¸ªå¯ä¼¸ç¼©å°ãé«éå°å¨http serveråå¨æèæ¬è¯­è¨é´éä¿¡çæ¥å£ãå¤æ°æµè¡çhttp serveré½æ¯æfastcgi,åæ¬apacheã nginxålighttpdç­ã åæ¶, fastcgiä¹è¢«è®¸å¤èæ¬è¯­è¨æ¯æï¼å¶ä¸­å°±æphpã\n\nfastcgiæ¥å£æ¹å¼éç¨c/sç»æï¼å¯ä»¥å°httpæå¡å¨åèæ¬è§£ææå¡å¨åå¼,åæ¶å¨èæ¬è§£ææå¡å¨ä¸å¯å¨ä¸ä¸ªæèå¤ä¸ªèæ¬è§£æå®æ¤è¿ç¨ãå½httpæå¡å¨æ¯æ¬¡éå°å¨æç¨åºæ¶ï¼ å¯ä»¥å°å¶ç´æ¥äº¤ä»ç»fastcglè¿ç¨æ¥æ§è¡ï¼ç¶åå°å¾å°çç»æè¿åç»æµè§å¨ãè¿ç§æ¹å¼å¯ä»¥è®©httpæå¡å¨ä¸ä¸å°å¤çéæè¯·æ±æèå°å¨æèæ¬æå¡å¨çç»æè¿åç»å®¢æ·ç«¯ï¼è¿å¨å¾å¤§ç¨åº¦ä¸æé«äºæ´ä¸ªåºç¨ç³»ç»çæ§è½ã\n\n# 2.nginx+fastcglè¿è¡åç\n\nnginxä¸æ¯æå¯¹å¤é¨ç¨åºçç´æ¥è°ç¨æèè§£æï¼ææçå¤é¨ç¨åº(åæ¬php)å¿é¡»éè¿fastcgæ¥å£æ¥è°ç¨ãfastcgiæ¥å£å¨linux ä¸æ¯socket (è¿ä¸ªsocketå¯ä»¥æ¯æä»¶socket, ä¹å¯ä»¥æ¯ip socket)ãä¸ºäºè°ç¨cglç¨åº,è¿éè¦ä¸ä¸ªfastcglç wrapper (wrapperå¯ä»¥çè§£ä¸ºç¨äºå¯å¨å¦ä¸ä¸ªç¨åºçç¨åº) ï¼è¿ä¸ªwrapperç»å®å¨æä¸ªåºå®socketä¸,å¦ç«¯å£æèæä»¶socketãå½nginxå°cgiè¯·æ±åéç»è¿ä¸ªsocketçæ¶åï¼éè¿fastcgiæ¥å£, wrapperæ¥æ¶å°è¯·æ±ï¼ç¶åæ´¾çåºä¸ä¸ªæ°ççº¿ç¨,è¿ä¸ªçº¿ç¨è°ç¨è§£éå¨æèå¤é¨ç¨åºå¤çèæ¬å¹¶è¯»åè¿åæ°æ®;æ¥çï¼wrapperåå°è¿åçæ°æ®éè¿fastcglæ¥å£ï¼æ²¿çåºå®çsocketä¼ éç»nginx;æå, nginxå°è¿åçæ°æ®åéç»å®¢æ·ç«¯ãè¿å°±æ¯nginx+fastcglçæ´ä¸ªè¿ä½è¿ç¨ã\n\n\n\n# 3. spawn-fcgiä¸php-fpm\n\nfastcgiæ¥å£æ¹å¼å¨èæ¬è§£ææå¡å¨ä¸å¯å¨ä¸ä¸ªæèå¤ä¸ªå®æ¤è¿ç¨å¯¹å¨æèæ¬è¿è¡è§£æï¼è¿äºè¿ç¨å°±æ¯fastcgiè¿ç¨ç®¡çå¨ï¼æèç§°ä¸ºfastcgiå¼æã spawn-fcgjä¸php-fpmå°±æ¯æ¯æphpçä¸¤ä¸ªfastcglè¿ç¨ç®¡çå¨ã\n\nspawn-fcgiæ¯httpæå¡å¨lighttpdçä¸é¨åï¼ç®åå·²ç»ç¬ç«æä¸ºä¸ä¸ªé¡¹ç®,ä¸è¬ä¸lighttpdéåä½¿ç¨æ¥æ¯æphpãä½æ¯lighttpdçspwan-fcgiå¨é«å¹¶åè®¿é®çæ¶åï¼ä¼åºç°åå­æ³æ¼çè³èªå¨éå¯fastcgçé®é¢ãnginxæ¯ä¸ªè½»éçº§çhttp server,å¿é¡»åå©ç¬¬ä¸æ¹çfastcgå¤çå¨æå¯ä»¥å¯¹phpè¿è¡è§£æ,å æ­¤nginx+spawn-fcgiçç»åä¹å¯ä»¥å®ç°å¯¹phpçè§£æã\n\nphp-fpmä¹æ¯ä¸ä¸ªç¬¬ä¸æ¹çfastcgiè¿ç¨ç®¡çå¨ï¼å®æ¯ä½ä¸ºphpçä¸ä¸ªè¡¥ä¸æ¥å¼åçï¼å¨å®è£çæ¶åä¹ éè¦åphpæºç ä¸èµ·ç¼è¯ï¼ä¹å°±æ¯è¯´php-fpmè¢«ç¼è¯å°phpåæ ¸ä¸­ï¼å æ­¤å¨å¤çæ§è½æ¹é¢æ´å ä¼ç§ãå æ¶php-fpmå¨å¤çé«å¹¶åæ¹é¢ä¹æ¯spawn-fcgiå¼æå¥½å¾å¤ï¼å æ­¤,æ¨èä½¿ç¨nginx+php/php-fpmè¿ä¸ª ç»åå¯¹phpè¿è¡è§£æã\n\nfastcglçä¸»è¦ä¼ç¹æ¯æå¨æè¯­è¨åhttp serveråç¦»å¼æ¥ï¼æä»¥nginxä¸php/php-fpmç»å¸¸è¢«é¨ç½²å¨ ä¸åçæå¡å¨ä¸ï¼ä»¥åæåç«¯nginxæå¡å¨çåå,ä½¿nginxä¸ä¸å¤çéæè¯·æ±åè½¬åå¨æè¯·æ±, èphp/php- fpmæå¡å¨ä¸ä¸è§£æphpå¨æè¯·æ±ã\n\n * fastcgi_pass\n\nsyntax: fastcgi_pass address;\ndefault: -\ncontext: location, if in location\n\n\nè®¾ç½®fastcgi serverçå°åï¼å°åå¯ä»¥æ¯ipæèååå ä¸ç«¯å£å·ã\n\nfastcgi_pass localhost: 9000;\n\n#ä¹å¯ä»¥æ¯unix socketè·¯å¾\nfastcgi_pass unix:/tmp/fastcgi.socket;\n\n\nå¦æååè§£æä¸ºå¤ä¸ªå°åï¼åææå°åé½å°ä»¥å¾ªç¯æ¹å¼ä½¿ç¨ãæ­¤å¤,å¯ä»¥å°å°åæå®ä¸ºæå¡å¨ç»ãåæ°å¼ä¸è½åå«åéã\n\n * fastcgi_index\n\nsyntax: fastcgi_index name;\ndefault: -\ncontext: http, server, location\n\n\nè®¾ç½®fastcgié»è®¤çä¸»é¡µèµæºæä»¶å\n\n * fastcgi_param\n\nsyntax: fastcgi_param parameter value [if_not_empty] ;\ndefault: -\ncontext: http, server, location\n\n\nè®¾ç½®åºä¼ éç»fastcgiæå¡å¨çåæ°ãè¯¥å¼å¯ä»¥åå«ææ¬ãåéåå¶ç»åãå¦æå½åçº§å«æ²¡æå®ä¹,ä¼ä»ä¸ä¸çº§ç»§æ¿ã\n\nå¯¹äºphpæ¥è¯´çæå°åéç½®:\n\nfastcgi_param script_filename /home/www/scripts/php$fastcgi_script_name;\nfastcgi_param query_string\t\t$query_string;\n\n\nscript_ filenameåæ°ç¨äºphpç¡®å®è¯·æ±èæ¬çåå­ query_ stringåæ°ç¨äºä¼ éè¯·æ±çåæ°\n\nå¯¹äºå¤çpostè¯·æ±çèæ¬ï¼è¿éè¦ä»¥ä¸ä¸ä¸ªåæ°:\n\nfastcgi_param request method \t$request_method; ;\nfastcgi_param content_type\t$content_type;\nfastcgi_param content_length\t$content_length;\n\n\nå¦æphpç¼è¯æ¶ä½¿ç¨äº--enable-force-cgi-redirectéç½®åæ°ï¼åredirect, _statusåæ°åºè¯¥ä½¿ç¨200å¼è¢«ä¼ é\n\nfastcgi_param redirect_status 200; \n\n\n * fastcgi_cache_path\n\nsyntax: fastcgi_cache_path path [levels=levels] [use_temp_path=on|off] \nkeys_zone=name:size [inactive=time]\n\t\t[max_size=size] [manager_files=number] [manager_sleep=time]\n[manager_threshold=time] [loader_fi1es=number]\n\t\t[1oader_sleep=time] [loader_threshold=time] [purger=on|off]\n[purger_files=number] [purger_sleep=time]\n\t\t[purger_thresho1d=time] ;\ndefault: -\ncontext: http\n\n\nè®¾ç½®ç¼å­çè·¯å¾åå¶ä»åæ°ãç¼å­æ°æ®å­å¨å¨æä»¶ä¸­ãlevelsçç®å½å±çº§ä¸º1å°3çº§,æ¯çº§çåå¼ä¸º1æè2ï¼levels=1:2è¡¨ç¤ºå®ä¹ç2å±ç®å½ç»æï¼levels=1:2:2è¡¨ç¤ºå®ä¹ç3å±ç®å½ç»æã\n\nfastcgi_cache_path /data/nginx/cache levels=1:2 keys_zone=one:10m;\n\n\nç¼å­çæä»¶åçèµ·æ¥å¦ä¸:\n\n/data/nginx/cache/c/29/b7f54b2df7773722d382f4809d65029c\n\n\nä¸ä¸ªç¼å­ååºé¦ååå¥å°ä¸´æ¶æä»¶ï¼ç¶ååéå½åæ­¤æä»¶ï¼ä¸´æ¶æä»¶ç®å½æ¯å¦ä½¿ç¨ç±use_temp_pathåæ°å®ä¹çï¼å¦æè¿ä¸ªåæ°çç¥æèè®¾ç½®ä¸ºonï¼åä¸´æ¶æä»¶ç®å½ä¸ºfastcgi_temp_pathåæ°æå®çä½ç½®ï¼å¦æè®¾ç½®ä¸ºoffï¼åä¸´æ¶æä»¶å°ç´æ¥æ¾å¨ç¼å­ç®å½ä¸­ãæ­¤å¤ï¼æææ´»å¨keyåæå³æ°æ®çä¿¡æ¯é½å­å¨å¨å±äº«åå­åºåä¸­ï¼å¶åç§°åå¤§å°ç±keys_zoneåæ°éç½®ã1må­èçåºåå¯ä»¥å­å¨å¤§çº¦8000ä¸ªkeyã\n\ninactiveåæ°æå®æ¶é´åæ²¡æè¢«è®¿é®çç¼å­æ°æ®å°è¢«æ¸é¤ï¼å¶é»è®¤å¼ä¸º10åéï¼\n\nmax_sizeåæ°è®¾ç½®æå¤§ç¼å­å¤§å°ï¼å¦æè¶åºï¼ç¼å­ç®¡çå¨å°å é¤æè¿æå°è¢«ä½¿ç¨çæ°æ®\n\n * fastcgi_cache\n\nsyntax: fastcgi_cache zone | off;\ndefault: fastcgi_cache off;\ncontext: http, server, location\n\n\nå®ä¹ç¨äºç¼å­çä¸ä¸ªå±äº«åå­åºåï¼åä¸ä¸ªåºåå¯ä»¥è¢«ç¨äºå¤ä¸ªä½ç½®ï¼offåæ¶ç¼å­ç»§æ¿\n\n * fastcgi_cache_key\n\nsyntax: fastcgi_cache_key string;\ndefault: -\ncontext: http, server, location\n\n\nå®ä¹ä¸ä¸ªç¼å­çkeyï¼ä¾å¦:\n\nfastcgi_cache_key localhost:9000$request_uri;\n\n\n * fastcgi_cache_methods\n\nsyntax: fastcgi_cache_methods geti head | post ...;\ndefault: fastcgi_cache_methods get head;\ncontext: http, server, location\n\n\nå®ä¹ç¼å­çå®¢æ·ç«¯çè¯·æ±æ¹æ³ï¼"get"å"head"æ¹æ³æ»æ¯è¢«ç¼å­ï¼å»ºè®®æ¾å¼ååºã\n\n * fastcgi_cache_min_uses\n\nsyntax: fastcgi_cache_min_uses number;\ndefault: fastcgi_cache_min_uses 1;\ncontext: http, server, location\n\n\nå®ä¹ååºè¢«ç¼å­åçæå°è®¿é®æ¬¡æ°\n\n * fastcgi_keep_conn\n\nsyntax: fastcgi_keep_conn on | off;\ndefault: fastcgi_keep_conn off;\ncontext: http, server, location\n\n\né»è®¤æåµä¸ï¼fastcgjæå¡å¨å°å¨åéååºåç«å³å³é­è¿æ¥ãå½è¯¥æä»¤è®¾ç½®ä¸ºonæ¶ï¼nginxå°æç¤ºfastcgiæå¡å¨ä¿æè¿æ¥æå¼å»ºè®®å¼å¯ã\n\n * fastcgi_cache_valid\n\nsyntax: fastcgi_cache_valid [code ...] time;\ndefault: -\ncontext: http, server, location\n\n\nè®¾ç½®ä¸åçååºç çç¼å­æ¶é´ãä¾å¦:\n\nfastcgi_cache_valid 200 302 10m;\nfastcgi_cache_valid 404\t1m;\n\n\nååºç ä¸º200å302çç¼å­æ¶é´ä¸º10åéï¼404 ååºç ç¼å­æ¶é´ä¸º1åé\n\nfastcgi_cache_valid 5m;\n\n\nå¦æä»è®¾ç½®æ¶é´ï¼ååªæ200, 301, 302ååºç è¢«ç¼å­\n\nfastcgi_cache_valid 200 302 10m;\nfastcgi_cache_valid 301 1h;\nfastcgi_cache_valid any 1m;\n\n\nè¿å¯ä»¥æå®anyåæ°æ¥ç¼å­ä»»ä½ååº\n\nç¼å­åæ°ä¹å¯ä»¥ç´æ¥å¨ååºå¤´ä¸­è®¾ç½®ãè¿æ¯ä½¿ç¨æä»¤è®¾ç½®ç¼å­æ¶é´å·ææ´é«çä¼åçº§ãä¾å¦:å¦æå¤´åå«"set-cookie"å­æ®µï¼åä¸ä¼ç¼å­æ­¤ç±»ååºã\n\n# 4. è®¾ç½®fastcgl\n\nlocation / {\n\tfastcgi_pass localhost :9000;\n\tfastcgi_index index.php;\n    \n\tfastcgi_param script_filename /home/www/scripts/phpsfastcgi_script_name;\n\tfastcgi_param query_string\t$query_string;\n\tfastcgi_param request method $request_method;\n\tfastcgi_param content type\t$content_type;\n\tfastcgi_param content_length $content_length;\n}\n\n\n# 5. è®¾ç½®ç¼å­çä¾å­\n\nhttp {\nfastcgi_cache_path /var/cache/nginx/fcgi_cache\nlevels=1:2:1 keys_zone=fcgicache:20m inactive=120s ;\n...\nserver {\n    location ~* \\. php$ {\n        ...\n        fastcgi_cache fcgicache;\n        fastcgi_cache_key $request_uri ;\n        fastcgi_cache_valid 200 302 10m;\n        fastcgi_cache_valid 301 lh;\n        fastcgi_cache_valid any lm;\n...\n}\n\n}\n',charsets:{cjk:!0}},{title:"Nginxå¸¸ç¨æ¨¡åä¸",frontmatter:{},regularPath:"/Nginx/02_Nginx%E6%A8%A1%E5%9D%97%E7%AE%A1%E7%90%86/Nginx%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%9703.html",relativePath:"Nginx/02_Nginxæ¨¡åç®¡ç/Nginxå¸¸ç¨æ¨¡å03.md",key:"v-1fb921c8",path:"/nginx/02_nginxmo-kuai-guan-li/nginxchang-yong-mo-kuai-03.html",headers:[{level:2,title:"1ãè´è½½å¹³è¡¡æ¨¡å(ngxhttpupstream_module)",slug:"_1ãè´è½½å¹³è¡¡æ¨¡å-ngx-http-upstream-module",normalizedTitle:"1ãè´è½½å¹³è¡¡æ¨¡å(ngxhttpupstream_module)",charIndex:null},{level:2,title:"2. éå®åæ¨¡åï¼ngx http rewrite_ moduleï¼",slug:"_2-éå®åæ¨¡å-ngx-http-rewrite-module",normalizedTitle:"2. éå®åæ¨¡åï¼ngx http rewrite_ moduleï¼",charIndex:null},{level:2,title:"3.å¼ç¨æ¨¡åï¼ngxhttpreferer_moduleï¼",slug:"_3-å¼ç¨æ¨¡å-ngx-http-referer-module",normalizedTitle:"3.å¼ç¨æ¨¡åï¼ngxhttpreferer_moduleï¼",charIndex:null},{level:2,title:"4. ngx streamcore_ moduleæ¨¡å",slug:"_4-ngx-stream-core-moduleæ¨¡å",normalizedTitle:"4. ngx streamcore_ moduleæ¨¡å",charIndex:null},{level:2,title:"5. ngxstreamproxy_moduleæ¨¡å",slug:"_5-ngx-stream-proxy-moduleæ¨¡å",normalizedTitle:"5. ngxstreamproxy_moduleæ¨¡å",charIndex:null}],headersStr:"1ãè´è½½å¹³è¡¡æ¨¡å(ngxhttpupstream_module) 2. éå®åæ¨¡åï¼ngx http rewrite_ moduleï¼ 3.å¼ç¨æ¨¡åï¼ngxhttpreferer_moduleï¼ 4. ngx streamcore_ moduleæ¨¡å 5. ngxstreamproxy_moduleæ¨¡å",content:'# Nginxå¸¸ç¨æ¨¡åä¸\n\n\n# 1ãè´è½½å¹³è¡¡æ¨¡å(ngx_http_upstream_module)\n\nç¨äºå®ä¹æå¡å¨ç»ï¼è¿äºæå¡å¨ç»å¯ä»¥è¢«proxy_passï¼fastcgi_passï¼uwsgi_passï¼scgi_pass,memcached_passï¼grpc_passæä»¤å¼ç¨ã\n\n * upstream\n\nSyntax: upstream name { ... }\nDefault: -\nContext: http\n\n\nå®ä¹æå¡å¨ç»ï¼æå¡å¨å¯ä»¥ä¾¦å¬ä¸åçç«¯å£ï¼å¦å¤ï¼ä¾¦å¬TCPåUnix scoketçæå¡å¨å¯ä»¥æ··ç¨ãä¾å¦:\n\nupstream backend {\n\tserver backendl.example.com weight=5;\n\tserver 127.0.0.1:8080\tmax_fails=3 fail_timeout=30s;\n\tserver unix:/tmp/backend3;\n\tserver backupl.example.com backup;\n}\n\n\né»è®¤æåµä¸ï¼ä½¿ç¨å æè½®è¯¢å¹³è¡¡ç®æ³åéè¯·æ±ï¼ä¸é¢çä¾å­ä¸­ï¼å¦ææ7ä¸ªè¯·æ±ï¼åbackend1.example.comæå¡å¨ä¼åé5ä¸ªï¼ç¬¬äºä¸ªåç¬¬ä¸ä¸ªæå¡å¨ååéä¸ä¸ªï¼å¦æå¨ä¸æå¡å¨éä¿¡æé´åçéè¯¯ï¼åè¯·æ±å°ä¼ éå°ä¸ä¸ä¸ªæå¡å¨ï¼ä¾æ­¤ç±»æ¨ï¼ç´å°å°è¯ææè¿è¡ä¸­çæå¡å¨ä¸ºæ­¢ãå¦ææ æ³ä»ä»»ä½æå¡å¨è·å¾æåçååºï¼å®¢æ·ç«¯å°å¾å°backup1.example.comçååºã\n\n * server\n\nSyntax: server address [parameters]; \nDefault: -\nContext: upstream\n\n\nå®ä¹æå¡å¨å°ååå¶å®åæ°,å°åå¯ä»¥æ¯IPå°åæèååå å¯éç«¯å£ï¼ä¹å¯ä»¥æ¯ä½¿ç¨"unix\' å¼å¤´çUNIX socketè·¯å¾,ç«¯å£å¦ææ²¡ææå®ï¼é»è®¤ä¸º80ãä¸ä¸ªå¯ä»¥è§£æä¸ºå¤ä¸ªå°åçååä¸æ¬¡æ§å®ä¹äºå¤ä¸ªæå¡å¨ã\n\nè½å®ä¹çåæ°æï¼\n\n 1. weight=number : è®¾ç½®æéï¼é»è®¤æ¯1\n 2. max_conns=number : éå¶ä¸ä»£çæå¡å¨åæ¶è¿è¡æ´»å¨è¿æ¥çæå¤§æ°ç®,é»è®¤ä¸º0,æææ¯ä¸éå¶\n 3. max_fails=number : å¤±è´¥å°è¯æå¤§æ¬¡æ°ï¼è¶åºæ­¤å¤æå®çæ¬¡æ°æ¶ serverå°è¢«æ è®°ä¸ºä¸å¯ç¨ï¼é»è®¤ä¸º1\n 4. fail_timeout=time : åç«¯æå¡å¨æ è®°ä¸ºä¸å¯ç¨ç¶æçè¿æ¥è¶æ¶æ¶é¿ï¼é»è®¤10s\n 5. backup : æ è®°è¿ä¸ªæå¡å¨ä¸ºå¤ä»½æå¡å¨\n 6. down : å°æå¡å¨æ è®°ä¸ºæ°¸ä¹ä¸å¯ç¨ãéåip_hashä½¿ç¨ï¼å®ç°ç°åº¦åå¸ã\n\n * ip_hash\n\nSyntax: ip_hash;\nDefault: -\nContext: upstream\n\n\nä½¿ç¨ip_hashçè´è½½å¹³è¡¡æ¹å¼ãè¯¥æ¹æ³ç¡®ä¿æ¥èªåä¸å®¢æ·ç«¯çè¯·æ±æ»æ¯ä¼ éå°åä¸æå¡å¨ï¼é¤éè¯¥æå¡å¨ä¸å¯ç¨ãå¨åä¸ç§æåµä¸ï¼å®¢æ·æºè¯·æ±å°ä¼ éå°å¦ä¸ä¸ªæå¡å¨ã å¦æå¶ä¸­ä¸ä¸ªæå¡å¨éè¦ä¸´æ¶å é¤ï¼ååºä½¿ç¨downåæ°å¯¹å¶è¿è¡æ è®°ï¼ä»¥ä¿çå®¢æ·ç«¯IPå°åçå½ååå¸ã\n\nä¾å¦:\n\nupstream backend {\n\tip_hash;\n    \n\tserver backend1.example.com;\n\tserver backend2.example.com;\n\tserver backend3.example.com down;\n\tserver backend4.examp1e.com;\n}\n\n\n * least_conn\n\nSyntax: least_conn;\nDefault: -\nContext: upstream\n\n\næå°æ´»è·è¿æ¥è°åº¦ç®æ³ï¼åæ¶ä¹è¦èèæéï¼å¦æè¿æ¥æ°ç¸åï¼åä½¿ç¨å æè½®è¯¢å¹³è¡¡ç®æ³ã\n\n * least_time ï¼least [liËst] æå°çï¼\n\nSyntax: least_time header | last_byte [inflight];\nDefault: -\nContext: upstream\nThis di rective appeared in version 1.7.10.\n\n\nä»¥æå°çå¹³åååºæ¶é´åæå°çæ´»å¨è¿æ¥æ°åä¸ºè´è½½å¹³è¡¡ç®æ³ãåæ¶èèæå¡å¨çæéãå¦ææå¤ä¸ªè¿æ ·çæå¡å¨ï¼åä½¿ç¨å æå¾ªç¯å¹³è¡¡æ¹æ³ãåä¸çæ¬ææ¯æè¿ä¸ªæä»¤ã\n\n * hash\n\nSyntax: hash key [consistent] ;\nDefault: -\nContext: upstream\nThis di rective appeared in version 1.7.2.\n\n\nåºäºæå®çkeyçhashç®æ³æ¥å»ºç«client-serveræ å°è¡¨å®ç°å¯¹è¯·æ±çè°åº¦ï¼æ­¤å¤çkeyå¯ä»¥æ¯ææ¬ï¼åéæäºèç»åã\n\nä½ç¨ï¼å°è¯·æ±åç±»,å-ç±»è¯·æ±å°åå¾åä¸ä¸ªupstream serverï¼ä½¿ç¨consistentåæ°ï¼å°ä½¿ç¨ketamaä¸è´æ§hashç®æ³ï¼ éç¨äºåç«¯æ¯Cacheæå¡å¨ (å¦varnish) æ¶ä½¿ç¨ã\n\nhash $request_uri consistent;\nhash $remote_addr;\n\n\n * keepalive\n\nSyntax: keepalive connections;\nDefault: -\nContext: upstream\nThis di rective appeared in version 1.1.4.\n\n\nä¸ºå°ä¸æ¸¸æå¡å¨çè¿æ¥æ¿æ´»ç¼å­ãconnectionsåæ°ä¸ºåä¸æ¸¸æå¡å¨çç©ºé²ä¿æè¿æ¥çæå¤§æ°éã connectionsåæ°åºè¯¥è®¾ç½®ä¸ºè¶³å¤å°çæ°å­ï¼ä»¥ä¾¿ä¸æ¸¸æå¡å¨å¯ä»¥å¤çæ°çä¼ å¥è¿æ¥ã å¸¦keepaliveçmemcachedä¸æ¸¸éç½®ç¤ºä¾:\n\nupstream memcached_backend {\n\tserver 127.0.0.1:11211;\n\tserver 10.0.0.2:11211;\n    \n\tkeepalive 32;\n}\nserver {\n    ...\n\tlocation /memcached/ {\n\t\tset $memcached_key $uri;\n\t\tmemcached_pass memcached_backend;\n\t}\n}\n\n\n\nå¯¹äºHTTP , proxy_http_versionæä»¤åºè¯¥è®¾ç½®å°1.1,å¹¶ä¸"Connection"å¤´åºååºè¯¥è¢«æ¸ç©ºã\n\nupstream http_backend {\n\tserver 127.0.0.1:8080;\n\tkeepalive 16;\n}\nserver {\n    ...\n        \n\tlocation /http/ {\n\t\tproxy_pass http://http_backend;\n\t\tproxy_http_version 1.1; \n\t\tproxy_set_header Connection "";\n        ...\n\t}\n}\n\n\nå¯¹äºFastCGIæå¡å¨ï¼fastcgi_keep_connåºè¯¥è¢«è®¾ç½®onã\n\nupstream fastcgi_backend {\n\tserver 127.0.0.1:9000;\n\tkeepalive 8;\n}\n\nserver {\n    ...\n        \n\tlocation /fastcgi/ {\n\t\tfastcgi_pass fastcgi_backend;\n\t\tfastcgi_keep_conn on; \n\t}\n}\n\n\n\næ³¨ï¼è´è½½å¹³è¡¡æ¹æ³åºè¯¥å¨keepaliveæä»¤åé¢éç½®; SCGIåuwsgiåè®®æ²¡æä¿æè¿æ¥çæ¦å¿µã\n\n * health_check (nginx plusæ¯æçå¥åº·æ£æ¥æºå¶)\n * nginx_upstream_check_module (æ·å®å¼åçç¬¬ä¸æ¹å¥åº·æ£æ¥æ¨¡å)\n\nä¸è½½å°å: https://www.keepalived.org/download.html\n\néç½®æ¡ä¾ï¼\n\nupstream backend {\n\tserver backend1.example.com\tweight=5;\n\tserver backend2.example.com:8080;\n\tserver unix:/tmp/backend3;\n    \n\tserver backup1.example.com:8080\tbackup;\n\tserver backup2.example.com:8080 backup;\n}\nserver {\n\tlocation / {\n\t\tproxy_pass http://backend;\n\t}\n}\n\n\n\n# 2. éå®åæ¨¡åï¼ngx_ http_ rewrite_ moduleï¼\n\nè¿ä¸ªæ¨¡åä½¿ç¨PCREæ­£åè¡¨è¾¾å¼æ´æ¹è¯·æ±çURIï¼è¿åéå®åæä»¤å¹¶ææ¡ä»¶çéæ©éç½®ã\n\nbreakï¼ifï¼returnï¼rewriteï¼setæä»¤æ§è¡é¡ºåºå¦ä¸:\n\n * è¿ä¸ªæ¨¡åçæä»¤å¨serverçº§å«æ¯é¡ºåºæ§è¡\n\n * éå¤ ãåºäºè¯·æ±çURIæ¥æ¾å¯¹åºçä¸ä¸ªlocation ãå¨æ¾å°çlocationä¸­ï¼æ¨¡åæä»¤æé¡ºåºæ§è¡ ãå¦æè¯·æ±çURlè¢«éåï¼åå¾ªç¯éå¤,ä½ä¸è¶è¿10æ¬¡\n\n * break\n\nSyntax: break;\nDefault: -\ncontext: server, location, if\n\n\nåæ­¢å¤çå½åçngx-http-rewrite-moduleæä»¤éãå¦æè¯¥æä»¤æ¯å¨locationä¸­ï¼é£ä¹å¨è¿ä¸ªlocationä¸­ï¼å¯¹è¯·æ±çè¿ä¸æ­¥å¤çå°ç»§ç»­è¿è¡ã\n\nif ($slow) {\n\t1imit_rate 10k;\n\tbreak;\n}\n\n\n * if\n\nSyntax: if (condition) { ... }\nDefault: -\ncontext: server, location\n\n\nè¥æ¡ä»¶å¤æ­ä¸ºçï¼åæ§è¡è±æ¬å·åçæä»¤ï¼å¹¶ä¸å°æ¬å·åçéç½®åºç¨å°è¯·æ±ä¸ãifæä»¤ä¸­çéç½®æ¯ä»ä¸ä¸å±éç½®ä¸­ç»§æ¿çã\n\næ¡ä»¶å¤æ­å¼çæå¦âä¸ç§ç±»:\n\n * ä¸ä¸ªåéåãå¦æå¼ä¸ºç©ºæè0ï¼åä¸ºflase\n * æ¯è¾å­ç¬¦ä¸²åéä½¿ç¨"="å"!=â\n * æµè¯ä¸ä¸ªåéæ¯å¦ä¸ä¸ä¸ªæ­£åè¡¨è¾¾å¼å¹éï¼æ­£åè¡¨è¾¾å¼åä½¿ç¨"~"(åºåå¤§å°å)æ"~* "(ä¸åºåå¤§å°å)æä½ç¬¦ï¼æ­£åè¡¨è¾¾å¼è½ä½¿ç¨"$1å°$9"åéï¼ä»¥ä¾¿åé¢å¯ä»¥éå¤ä½¿ç¨ï¼ä¸å¹éï¼ä½¿ç¨"!~"å"!~*"æä½ç¬¦ï¼å¦ææ­£åè¡¨è¾¾å¼ä¸­å«æ"}"æ";"ç¬¦å·ï¼åºä½¿ç¨åå¼å·æåå¼å·å°æ­£åè¡¨è¾¾å¼æ¬èµ·æ¥ã\n * æµè¯ä¸ä¸ªæä»¶æ¯å¦å­å¨ä½¿ç¨"-f"å"!-f"\n * æµè¯ä¸ä¸ªç®å½æ¯å¦å­å¨ä½¿ç¨"-d"å"!-d"\n * æµè¯ä¸ä¸ªæä»¶ãç®å½ãæç¬¦å·é¾æ¥æä»¶æ¯å¦å­å¨ï¼ä½¿ç¨"-e"å"!-e"\n * æµè¯ä¸ä¸ªæä»¶æ¯å¦å¯æ§è¡ä½¿ç¨"-x"å"!-x"\n\nä¾å¦ï¼\n\nif ($http_user_agent ~ MSIE) {\n\trewrite ^(.*)$ /msie/$1 break;\n}\n\nif ($http_cookie ~* "id=([^;]+)(?:;|$)") {\n\tset $id $1;\n}\n\nif ($request_method = POST) {\n\treturn 405; \n}\n\nif ($slow) {\n\t1imit_rate 10k;\n}\n\nif ($invalid_referer) {\n\treturn 403 ;\n}\n\n\n$invalid_refereræ¯ä¸ä¸ªåå»ºåéï¼ç±valid_referersæä»¤è¿è¡è®¾ç½®\n\n * return\n\nSyntax:\t return code [text];\n\t\treturn code URL;\n\t\treturn URL;\nDefault: -\nContext: server, location, if\n\n\nåæ­¢å¤çï¼è¿åç¶æç codeç»å®¢æ·ç«¯ãè¿åéæ åç 444å°å³é­è¯¥è¿æ¥,èä¸ä¸åéååºheaderã\n\n * rewrite ï¼replacement [rÉªËpleÉªsmÉnt] æ¿æ¢ï¼\n\nSyntax: rewrite regex replacement [flag] ;\nDefault: -\nContext: server, location, if\n\n\nå¦æregexå¹éäºä¸ä¸ªè¯·æ±çURIï¼ è¯¥URIè¢«æ¿æ¢ä¸ºreplacementãrewrite æä»¤å¨éç½®æä»¶ä¸­æç§åºç°çé¡ºåºæ§è¡ãå¯ä½¿ç¨flagä¸­æ­¢è¿ä¸æ­¥çå¤çãå¦æreplacementä»¥"http://","https://"ä¸ºèµ·å§çå­ç¬¦ä¸²ï¼å°ä¸­æ­¢å¤çï¼å¹¶è¿åéå®åæä»¤ç»å®¢æ·ç«¯ã flagåæ°çå¼å¯ä»¥ä¸º:\n\nlaståæ­¢å½ångx_http_rewrite_moduleæ¨¡åæä»¤éçå¤çï¼å¹¶ä¸ºä¿®æ¹åçURlå¯»æ¾æ°çå¹éçlocation breakåæ­¢å½ångx_http_rewrite_moduleæ¨¡åæä»¤éçå¤çï¼ä¸breakæä»¤ä½ç¨ç¸å redirect è¿å302ä»£ç çä¸´æ¶éå®åï¼å½replacementä¸ä»¥"http://","https://"ä¸ºèµ·å§çå­ç¬¦ä¸²æ¶ä½¿ç¨ permanent è¿å301ä»£ç çæ°¸ä¹éå®å\n\nä¾å­ï¼\n\nif ($http_user_agent ~ MSIE) {\n\trewrite ^(.*)$ /msie/$1 break; \n}\n\nif ($http_cookie ~* "id=([^;]+)(?:;|$)") {\n\tset $id $1;\n}\n\nif ($request_method = POST) {\n\treturn 405;\n}\n\nif ($slow) {\n\t1imit_rate 10k;\n}\n\nif ($invalid_referer) {\nreturn 403; \n}\n\n\n$invalid_refereræ¯ä¸ä¸ªåå»ºåéï¼ç±valid_referersæä»¤è¿è¡è®¾ç½®\n\n * return\n\nSyntax:\t return code [text] ;\n\t\treturn code URL;\n\t\treturn URL;\nDefault: -\nContext: server, location, if\n\n\nåæ­¢å¤çï¼è¿åç¶æç codeç»å®¢æ·ç«¯ãè¿åéæ åç 444å°å³é­è¯¥è¿æ¥ï¼èä¸ä¸åéååºheaderã\n\n * rewrite\n\nSyntax: rewrite regex replacement [flag];\nDefault: -\nContext: server, location, if\n\n\nå¦æregexå¹éäºä¸ä¸ªè¯·æ±çURIï¼è¯¥URIè¢«æ¿æ¢ä¸ºreplacementãrewrite æä»¤å¨éç½®æä»¶ä¸­æç§åºç°çé¡ºåºæ§è¡ãå¯ä½¿ç¨flagä¸­æ­¢è¿ä¸æ­¥çå¤çãå¦æreplacementä»¥"http://","https/âä¸ºèµ·å§çå­ç¬¦ä¸²,å°ä¸­æ­¢å¤ç,å¹¶è¿åéå®åæä»¤ç»å®¢æ·ç«¯ã\n\nflagåæ°çå¼å¯ä»¥ä¸º:\n\n * laståæ­¢å½ångx_http_rewrite_moduleæ¨¡åæä»¤éçå¤çï¼å¹¶ä¸ºä¿®æ¹åçURIå¯»æ¾æ°çå¹éçlocation\n * breakåæ­¢å½ångx_http_rewrite_moduleæ¨¡åæä»¤éçå¤çï¼ä¸breakæä»¤ä½ç¨ç¸å\n * redirectè¿å302ä»£ç çä¸´æ¶éå®å,å½replacementä¸ä»¥htp://*,"https://"ä¸ºèµ·å§çå­ç¬¦ä¸²æ¶ä½¿ç¨\n * permanentè¿å301ä»£ç çæ°¸ä¹éå®å\n\nä¾å­ï¼\n\nserver {\n    ...\n\trewrite ^(/download/. *)/media/(.*)\\..*$ $1/mp3/$2.mp3 last;\n\trewrite ^(/download/. *)/audio/(.*)\\..*$ $1/mp3/$2.ra last;\n\treturn 403;\n    ...\n}\n\n\nä½å¦æè¿äºæä»¤è¢«æ¾å¥"/download/" locationåºåä¸­ï¼åºå°last flagæ¿æ¢ä¸ºbreakï¼å¦ånginxä¼ä¸æ­å¾ªç¯ï¼è¾¾å°10æ¬¡åï¼è¿å500 error\n\nlocation /download/ {\n\trewrite ^(/download/.*)/media/(.*)\\..*$ $l/mp3/$2.mp3 break;\n\trewrite ^(/download/.*)/audio/(.*)\\..*$ $l/mp3/$2.ra break;\n\treturn 403;\n}\n\n\nå¦æreplacementåå«è¯·æ±åæ°ï¼åæ¥çè¯·æ±åæ°å°è¢«è¿½å å¨åé¢ãå¦æä¸å¸æè¿½å åæ¥çè¯·æ±åæ°ï¼å¯å¨replacementå­ç¬¦ä¸²çæ«å°¾æ·»å ä¸ä¸ª"?âç¬¦å·ï¼ä¾å¦:\n\nrewrite ^/users/(.*)$ /show?user=$l? last;\n\n\n * rewrite_log\n\nSyntax: rewrite_log on | off;\nDefault: rewrite_log off;\ncontext: http, server, location, if\n\n\næ¯å¦å¼å¯ngx_http_rewrite_moduleæ¨¡åçæ¥å¿ï¼å¦æå¼å¯ï¼è¯¥æ¨¡åçæ¥å¿å°è¢«è®°å½è¿å¥error_logä¸­ï¼æ¥å¿ççº§å«ä¸ºnotice ï¼ [ËnoÊtÉªs] éç¥ï¼\n\n * set\n\nSyntax: set $variable value;\nDefault: -\nContext: server, location, if\n\n\nä¸ºåéèµå¼ãvalueå¯åå«ï¼ææ¬ï¼åéï¼æææ¬ååéçç»å\n\n\n# 3.å¼ç¨æ¨¡åï¼ngx_http_referer_moduleï¼\n\nç¨äºé»æ­¢"refererâå¤´å­æ®µä¸­å·ææ æå¼çè¯·æ±è®¿é®ç«ç¹ã\n\n * valid_refers\n\nSyntax: valid_referers none | blocked | server_names | string ...;\nDefault: -\nContext: server, location\n\n\nå®ä¹refereré¦é¨çåæ³å¯ç¨å¼ï¼ä¸è½å¹éçå°æ¯éæ³å¼ãæå®"refererâè¯·æ±å¤´å­æ®µå¼ï¼è¯¥å¼å°å¯¼è´åç½®åé$invalid_ refererä¸ºç©ºå­ç¬¦ä¸²ãå¦åï¼åéå¼ä¸º"1"ãæç´¢å¹éé¡¹ä¸åºåå¤§å°åãåæ°å¦ä¸:\n\n * none: è¯·æ±æ¥æé¦é¨æ²¡ærefereré¦é¨\n * blocked: "referer âå­æ®µå­å¨äºè¯·æ±å¤´ä¸­ï¼ä½å¶å¼å·²è¢«é²ç«å¢æä»£çæå¡å¨å é¤ï¼è¿äºå¼æ¯ä¸ä»¥"http://"æ"https://"å¼å¤´çå­ç¬¦ä¸²;\n * server_names: "referer"è¯·æ±å¤´å­æ®µåå«ä¸ä¸ªæå¡å¨åç§°ï¼\n * arbitrary string: ä»»æå­ç¬¦ä¸²ï¼å®ä¹æå¡å¨åç§°åä¸ä¸ªå¯éçURlåç¼ï¼å¼å¤´åç»å°¾å¯ä»¥ä½¿ç¨ "* "ï¼æ£æ¥æ¶ï¼å¿½ç¥"refererâå­æ®µçæå¡å¨ç«¯å£ãï¼arbitrary [ËÉËrbÉªtreri] ä»»æçï¼\n * regular expression: æ­£åè¡¨è¾¾å¼å¹éå°çå­ç¬¦ä¸²ãç¬¬ä¸ä¸ªç¬¦å·åºè¯¥æ¯"~"ã åºè¯¥æ³¨æ,è¡¨è¾¾å¼å°ä¸"http://"æ"https://"ä¹ åå¼å§çææ¬å¹éãï¼regular [ËreÉ¡jÉlÉr] æè§å¾ç expression [ÉªkËspreÊn]ï¼\n\néç½®ä¸¾ä¾ï¼\n\nvalid_referers none blocked server_names\n\t\t\t*.example.com example.* www.example.org/galleries/\n\t\t\t~\\.goog1e\\.;\nif ($invalid_referer) {\n\treturn 403;\n}\n\n\n\n# 4. ngx_ stream_core_ moduleæ¨¡å\n\nåºäºtcpæudpçæå¡è¿æ¥çååä»£çï¼å³å·¥ä½äºä¼ è¾å±çååä»£çæè°åº¦å¨ãæ­¤æ¨¡åä»1.9.0çå¼å§å¯ç¨ãè¿ä¸ªæ¨¡åå¨é»è®¤æåµä¸ä¸ä¼æå»ºï¼åºè¯¥ä½¿ç¨--with-streaméç½®åæ°æ¥å¯ç¨å®ã\n\n * listen\n\nè®¾ç½®æå¡å¨æ¥æ¶çå°ååç«¯å£ç»åï¼ä¹å¯ä»¥åªè®¾ç½®ç«¯å£\n\nSyntax: listen address:port [ssl] [udp] [proxy_protoco1] [backlog=number][rcvbuf=size] [sndbuf=size] [bind]\n\t\t[ipv6only=on | off] [reuseport] [so_ keepalive=on|off| [keepid1e]: \n[keepintvl]:[keepcnt]];\nDefault: -\nContext: server\n\n\n * ä¾å¦ï¼\n\nlisten 127.0.0.1:12345;\n1isten *:12345;\nlisten 12345;\t# same as *:12345\nlisten localhost:12345;\n\nlisten [::1] :12345;\nlisten [::]:12345;\n\nlisten unix:/var/run/nginx.sock;\n\nlisten 127.0.0.1:12345-12399;\nlisten 12345-12399;\n\n\néç½®æ¡ä¾ï¼\n\nworker_processes auto;\nerror_log /var/1og/nginx/error.log info;\n\nevents {\n\tworker_connections 1024;\n}\n\nstream {\n\tupstream backend {\n\t\thash $remote_addr consistent;\n        \n\t\tserver backendl.example.com:12345 weight=5;\n\t\tserver 127.0.0.1:12345\t\tmax_fails=3 fails_timeout=30s;\n\t\tserver unix:/tmp/backend3;\n    }\n\n    upstream dns {\n            server 192.168.0.1:53535;\n            server dns.example.com:53;\n    }\n\n    server {\n\n            listen 12345;\n            proxy_connect_timeout 1s;\n            proxy_timeout 3s;\n            proxy_pass backend;\n    }\n\n    # reuseport éç¨ç«¯å£ åä¸ä¸ªç«¯å£å¯ä»¥æå¤ä¸ªsocketåæ¶è¿è¡çå¬\n    \n    server {\n            listen 127.0.0.1:53 udp reuseport;\n            proxy_timeout 20s;\n            proxy_pass dns;\n    }\n\n    server {\n            listen [::1]:12345;\n            proxy_pass unix:/tmp/stream.socket;\n        }\n}\n\n\n\n# 5. ngx_stream_proxy_moduleæ¨¡å\n\nåè®¸ä»£çTCP/UDPåUNIX socketæ°æ®æµ\n\n * proxy_pass\n\nSyntax: proxy_pass address;\nDefault: -\nContext: server\n\n\nè®¾ç½®è¢«ä»£çæå¡å¨çå°åãå¯ä»¥æ¯ååæIPå°ååä¸ä¸ªç«¯å£ï¼æèUNIX socketè·¯å¾\n\nproxy-pass localhost:12345;\nproxy_pass unix:/tmp/stream.socket;\n\n\n * proxy_timeout\n\nSyntax: proxy_timeout timeout;\nDefault: proxy_timeout 10m;\nContext: stream, server\n\n\nè®¾ç½®å®¢æ·ç«¯æä»£çæå¡å¨è¿æ¥ä¸ä¸¤ä¸ªè¿ç»­è¯»æåæä½ä¹é´çè¶æ¶æ¶é´ãå¦æå¨è¿æ®µæ¶é´åæ²¡ææ°æ®ä¼ è¾ï¼åè¿æ¥å°å³é­ã\n\n * proxy_connect_timeout\n\nSyntax:\nproxy_connect_timeout time;\nDefault: proxy_connect_timeout 60s;\nContext: stream, server\n\n\nå®ä¹ä¸è¢«ä»£çæå¡å¨å»ºç«è¿æ¥çè¶æ¶æ¶é´\n\n * proxy_bind\n\nSyntax: proxy_bind address [transparent] | off;\nDefault: -\ncontext: stream, server\nThis di rective appeared in version 1.9.2.\n\n\næå®å°è¢«ä»£çæå¡å¨æ°æ®åçæºIPå°åãåæ°å¯ä»¥åå«åéï¼offè¡¨ç¤ºåæ¶ä»ä¸ä¸çº§çç»§æ¿éç½®ï¼ä»¥ä¾¿è®©ç³»ç»èªå¨åéæ¬å°çå°åã\n\ntransparentï¼[trÃ¦nsËpÃ¦rÉnt]éæçï¼å¯ç¨éæä»£ç\n\néæä»£ççæææ¯å®¢æ·ç«¯æ ¹æ¬ä¸éè¦ç¥éæä»£çæå¡å¨çå­å¨ãæ¢ç¶éæä»£çæ¯æç¥ä¸äºä»£ççå­å¨ï¼é£ä¹ééæä»£çå°±æ¯å¯ä»¥æç¥å°ä»£ççå­å¨äºï¼æç®åçæ¹å¼å°±æ¯ä½ è¦å»è®¿é®ç½ç«Aï¼å¨æ­£å¸¸æåµä¸ï¼ç½ç«Açå°è®¿é®æ¯æ¥èªäºä½ çç»ç«¯çï¼æ¯å¦æºIPå°åæ¯ä½ èªå·±æµè§å¨çï¼ï¼åå¦ä½ çç»ç«¯æ¯éè¿ä»£çæ¥è®¿é®ç½ç«Açï¼å¨æ®éééæä»£çæåµä¸ï¼ç½ç«Açå°è¯·æ±æ¯æ¥èªäºä½ çä»£çIPèçä¸å°ä½ è¿ä¸ªç»ç«¯ï¼å¨éæä»£çæåµä¸ï¼ç½ç«Aæç¥ä¸å°ä½ åå®ä¹é´ä¸­é´æä¸å±ä»£çï¼ç½ç«Açå°çè¯·æ±æ¯æ¥èªäºä½ çç»ç«¯å°åã\n\nproxy_bind $remote_addr transparent;\n\n\néç½®æ¡ä¾\n\nserver {\n\tlisten 127.0.0.1:12345;\n\tproxy_pass 127.0.0.1:8080; \n}\n\nserver {\n\tlisten 12345; \n\tproxy_connect_timeout 1s;\n\tproxy_timeout 1m;\n\tproxy_pass example.com:12345 ;\n}\n\nserver {\n\tlisten 53 udp reuseport;\n\tproxy_timeout 20s;\n\tproxy_pass dns.xample.com:53;\n}\n\nserver {\n\tlisten [::1]:12345;\n\tproxy_pass unix:/tmp/stream.socket;\n}\n\n\néå½ï¼PCREæ­£åè¡¨è¾¾å¼è¯­æ³\n\nå­ç¬¦            æè¿°\n\\             å°ä¸ä¸ä¸ªå­ç¬¦æ è®°ä¸ºä¸ä¸ªç¹æ®å­ç¬¦ï¼æä¸ä¸ªåä¹å­ç¬¦ï¼æä¸ä¸ªååå¼ç¨ï¼æä¸ä¸ªå«è¿å¶è½¬ä¹ç¬¦ãä¾å¦ï¼â\\nâå¹éä¸ä¸ªæ¢è¡ç¬¦ã\n^             å¹éè¾å¥å­ç¬¦ä¸²çå¼å§ä½ç½®ã\n$             å¹éè¾å¥å­ç¬¦ä¸²çç»æä½ç½®ã\n*             å¹éåé¢çå­è¡¨è¾¾å¼é¶æ¬¡æå¤æ¬¡ï¼ç­ä»·äº{0,}\n+             å¹éåé¢çå­è¡¨è¾¾å¼ä¸æ¬¡æå¤æ¬¡ï¼ç­ä»·äº{1,}\n?             å¹éåé¢çå­è¡¨è¾¾å¼é¶æ¬¡æä¸æ¬¡ï¼ç­ä»·äº{0,1}\n?             å½è¯¥å­ç¬¦ç´§è·å¨ä»»ä½ä¸ä¸ªå¶ä»éå¶ç¬¦(*,+,?,{n},{n,},{n,m})åé¢æ¶ï¼å¹éæ¨¡å¼æ¯éè´ªå©ªçãéè´ªå©ªæ¨¡å¼å°½å¯è½å°å°å¹éææç´¢çå­ç¬¦ä¸²ï¼èé»è®¤çè´ªå©ªæ¨¡å¼åå°½å¯è½å¤å°å¹éææç´¢çå­ç¬¦ä¸²ãä¾å¦ï¼å¯¹äºå­ç¬¦ä¸²âooooâ,âo+?âå°å¹éåä¸ªâoâ,èâo+âå°å¹éææçâoâã\n{n}           Næ¯ä¸ä¸ªéè´æ´æ°ï¼å¹éç¡®å®çnæ¬¡ã\n{n,}          Næ¯ä¸ä¸ªéè´æ´æ°ï¼è³å°å¹énæ¬¡ã\n{n,m}         Månåä¸ºéè´æ´æ°ï¼å¶ä¸­n<=mï¼æå°å¹énæ¬¡ä¸æå¤å¹émæ¬¡ã\n.             å¹éé¤â\\nâä¹å¤çä»»ä½åä¸ªå­ç¬¦ãè¦å¹éåæ¬â\\nâå¨åçä»»ä½å­ç¬¦ï¼è¯·ä½¿ç¨åâ[.\\n]âçæ¨¡å¼\n(pattern)     å¹épatternå¹¶è·åè¿ä¸å¹éã\n(?:pattern)   å¹épatternä½ä¸è·åå¹éç»æãè¿å¨ä½¿ç¨âæâå­ç¬¦(|)æ¥ç»åä¸ä¸ªæ¨¡å¼çåä¸ªé¨åæ¯å¾æç¨çãä¾å¦:âindustry|industriesâå°±å¯ä»¥ç¨âindustr(?:y|ies)âä»£æ¿\n(?=pattern)   æ­£åé¢æ¥ï¼å¨ä»»ä½å¹épatternçå­ç¬¦ä¸²å¼å§å¤å¹éæ¥æ¾å­ç¬¦ä¸²ãä¾å¦ï¼âWindows(?=95|98|NT|2000)âè½å¹éâWindows2000âä¸­çâWindowsâï¼ä½ä¸è½å¹éâWindows3.1âä¸­çâWindowsâã\n(?!pattern)   è´åé¢æ¥ï¼å¨ä»»ä½ä¸å¹épatternçå­ç¬¦ä¸²å¼å§å¤å¹éæ¥æ¾å­ç¬¦ä¸²ãä¾å¦ï¼âWindows(?!95|98|NT|2000)âè½å¹éâWindows3.1âä¸­çâWindowsâï¼ä½ä¸è½å¹éâWindows2000âä¸­çâWindowsâã\nx|y           å¹éxæyã\n[xyz]         å­ç¬¦éåï¼å¹éæåå«çä»»ä½ä¸ä¸ªå­ç¬¦ã\n[^xyz]        è´å¼å­ç¬¦éåï¼å¹éæªåå«çä»»æå­ç¬¦ã\n[a-z]         å­ç¬¦èå´ï¼å¹éæå®èå´åçä»»æå­ç¬¦ã\n[^a-z]        è´å¼å­ç¬¦èå´ï¼å¹éä»»ä½ä¸å¨æå®èå´åçä»»æå­ç¬¦ã\n\\b            å¹éä¸ä¸ªåè¯è¾¹çï¼ä¹å°±æ¯åè¯åç©ºæ ¼é´çä½ç½®ã\n\\B            å¹ééåè¯è¾¹çã\n\\cx           å¹éç±xææçæ§å¶å­ç¬¦ãXçå¼å¿é¡»ä¸ºA-Zæa-zä¹é´\n\\d            å¹éä¸ä¸ªæ°å­å­ç¬¦ãç­ä»·äº[0-9]\n\\D            å¹éä¸ä¸ªéæ°å­å­ç¬¦ãç­ä»·äº[^0-9]\n\\f            å¹éä¸ä¸ªæ¢é¡µç¬¦ãç­ä»·äº\\x0cå\\cL\n\\n            å¹éä¸ä¸ªæ¢è¡ç¬¦ãç­ä»·äº\\x0aå\\cJ\n\\r            å¹éä¸ä¸ªåè½¦ç¬¦ãç­ä»·äº\\x0då\\cM\n\\s            å¹éä»»ä½ç©ºç½å­ç¬¦ï¼åæ¬ç©ºæ ¼ãå¶è¡¨ç¬¦ãæ¢é¡µç¬¦ç­ã\n\\S            å¹éä»»ä½éç©ºç½ç¬¦ã\n\\t            å¹éä¸ä¸ªå¶è¡¨ç¬¦\n\\w            å¹éåæ¬ä¸åçº¿çä»»ä½åè¯å­ç¬¦ãç­ä»·äº[a-zA-Z0-9_]\n\\W            å¹éä»»ä½éåè¯å­ç¬¦ã\n\\xn           å¹énï¼å¶ä¸­nä¸ºåå­è¿å¶è½¬ä¹å¼ãä¾å¦â\\x41âå¹éâAâã\n\\num          å¹énumï¼å¶ä¸­numæ¯ä¸ä¸ªæ­£æ´æ°ãå¯¹æè·åçå¹éçå¼ç¨ãä¾å¦ï¼â(.)\\1â',normalizedContent:'# nginxå¸¸ç¨æ¨¡åä¸\n\n\n# 1ãè´è½½å¹³è¡¡æ¨¡å(ngx_http_upstream_module)\n\nç¨äºå®ä¹æå¡å¨ç»ï¼è¿äºæå¡å¨ç»å¯ä»¥è¢«proxy_passï¼fastcgi_passï¼uwsgi_passï¼scgi_pass,memcached_passï¼grpc_passæä»¤å¼ç¨ã\n\n * upstream\n\nsyntax: upstream name { ... }\ndefault: -\ncontext: http\n\n\nå®ä¹æå¡å¨ç»ï¼æå¡å¨å¯ä»¥ä¾¦å¬ä¸åçç«¯å£ï¼å¦å¤ï¼ä¾¦å¬tcpåunix scoketçæå¡å¨å¯ä»¥æ··ç¨ãä¾å¦:\n\nupstream backend {\n\tserver backendl.example.com weight=5;\n\tserver 127.0.0.1:8080\tmax_fails=3 fail_timeout=30s;\n\tserver unix:/tmp/backend3;\n\tserver backupl.example.com backup;\n}\n\n\né»è®¤æåµä¸ï¼ä½¿ç¨å æè½®è¯¢å¹³è¡¡ç®æ³åéè¯·æ±ï¼ä¸é¢çä¾å­ä¸­ï¼å¦ææ7ä¸ªè¯·æ±ï¼åbackend1.example.comæå¡å¨ä¼åé5ä¸ªï¼ç¬¬äºä¸ªåç¬¬ä¸ä¸ªæå¡å¨ååéä¸ä¸ªï¼å¦æå¨ä¸æå¡å¨éä¿¡æé´åçéè¯¯ï¼åè¯·æ±å°ä¼ éå°ä¸ä¸ä¸ªæå¡å¨ï¼ä¾æ­¤ç±»æ¨ï¼ç´å°å°è¯ææè¿è¡ä¸­çæå¡å¨ä¸ºæ­¢ãå¦ææ æ³ä»ä»»ä½æå¡å¨è·å¾æåçååºï¼å®¢æ·ç«¯å°å¾å°backup1.example.comçååºã\n\n * server\n\nsyntax: server address [parameters]; \ndefault: -\ncontext: upstream\n\n\nå®ä¹æå¡å¨å°ååå¶å®åæ°,å°åå¯ä»¥æ¯ipå°åæèååå å¯éç«¯å£ï¼ä¹å¯ä»¥æ¯ä½¿ç¨"unix\' å¼å¤´çunix socketè·¯å¾,ç«¯å£å¦ææ²¡ææå®ï¼é»è®¤ä¸º80ãä¸ä¸ªå¯ä»¥è§£æä¸ºå¤ä¸ªå°åçååä¸æ¬¡æ§å®ä¹äºå¤ä¸ªæå¡å¨ã\n\nè½å®ä¹çåæ°æï¼\n\n 1. weight=number : è®¾ç½®æéï¼é»è®¤æ¯1\n 2. max_conns=number : éå¶ä¸ä»£çæå¡å¨åæ¶è¿è¡æ´»å¨è¿æ¥çæå¤§æ°ç®,é»è®¤ä¸º0,æææ¯ä¸éå¶\n 3. max_fails=number : å¤±è´¥å°è¯æå¤§æ¬¡æ°ï¼è¶åºæ­¤å¤æå®çæ¬¡æ°æ¶ serverå°è¢«æ è®°ä¸ºä¸å¯ç¨ï¼é»è®¤ä¸º1\n 4. fail_timeout=time : åç«¯æå¡å¨æ è®°ä¸ºä¸å¯ç¨ç¶æçè¿æ¥è¶æ¶æ¶é¿ï¼é»è®¤10s\n 5. backup : æ è®°è¿ä¸ªæå¡å¨ä¸ºå¤ä»½æå¡å¨\n 6. down : å°æå¡å¨æ è®°ä¸ºæ°¸ä¹ä¸å¯ç¨ãéåip_hashä½¿ç¨ï¼å®ç°ç°åº¦åå¸ã\n\n * ip_hash\n\nsyntax: ip_hash;\ndefault: -\ncontext: upstream\n\n\nä½¿ç¨ip_hashçè´è½½å¹³è¡¡æ¹å¼ãè¯¥æ¹æ³ç¡®ä¿æ¥èªåä¸å®¢æ·ç«¯çè¯·æ±æ»æ¯ä¼ éå°åä¸æå¡å¨ï¼é¤éè¯¥æå¡å¨ä¸å¯ç¨ãå¨åä¸ç§æåµä¸ï¼å®¢æ·æºè¯·æ±å°ä¼ éå°å¦ä¸ä¸ªæå¡å¨ã å¦æå¶ä¸­ä¸ä¸ªæå¡å¨éè¦ä¸´æ¶å é¤ï¼ååºä½¿ç¨downåæ°å¯¹å¶è¿è¡æ è®°ï¼ä»¥ä¿çå®¢æ·ç«¯ipå°åçå½ååå¸ã\n\nä¾å¦:\n\nupstream backend {\n\tip_hash;\n    \n\tserver backend1.example.com;\n\tserver backend2.example.com;\n\tserver backend3.example.com down;\n\tserver backend4.examp1e.com;\n}\n\n\n * least_conn\n\nsyntax: least_conn;\ndefault: -\ncontext: upstream\n\n\næå°æ´»è·è¿æ¥è°åº¦ç®æ³ï¼åæ¶ä¹è¦èèæéï¼å¦æè¿æ¥æ°ç¸åï¼åä½¿ç¨å æè½®è¯¢å¹³è¡¡ç®æ³ã\n\n * least_time ï¼least [liËst] æå°çï¼\n\nsyntax: least_time header | last_byte [inflight];\ndefault: -\ncontext: upstream\nthis di rective appeared in version 1.7.10.\n\n\nä»¥æå°çå¹³åååºæ¶é´åæå°çæ´»å¨è¿æ¥æ°åä¸ºè´è½½å¹³è¡¡ç®æ³ãåæ¶èèæå¡å¨çæéãå¦ææå¤ä¸ªè¿æ ·çæå¡å¨ï¼åä½¿ç¨å æå¾ªç¯å¹³è¡¡æ¹æ³ãåä¸çæ¬ææ¯æè¿ä¸ªæä»¤ã\n\n * hash\n\nsyntax: hash key [consistent] ;\ndefault: -\ncontext: upstream\nthis di rective appeared in version 1.7.2.\n\n\nåºäºæå®çkeyçhashç®æ³æ¥å»ºç«client-serveræ å°è¡¨å®ç°å¯¹è¯·æ±çè°åº¦ï¼æ­¤å¤çkeyå¯ä»¥æ¯ææ¬ï¼åéæäºèç»åã\n\nä½ç¨ï¼å°è¯·æ±åç±»,å-ç±»è¯·æ±å°åå¾åä¸ä¸ªupstream serverï¼ä½¿ç¨consistentåæ°ï¼å°ä½¿ç¨ketamaä¸è´æ§hashç®æ³ï¼ éç¨äºåç«¯æ¯cacheæå¡å¨ (å¦varnish) æ¶ä½¿ç¨ã\n\nhash $request_uri consistent;\nhash $remote_addr;\n\n\n * keepalive\n\nsyntax: keepalive connections;\ndefault: -\ncontext: upstream\nthis di rective appeared in version 1.1.4.\n\n\nä¸ºå°ä¸æ¸¸æå¡å¨çè¿æ¥æ¿æ´»ç¼å­ãconnectionsåæ°ä¸ºåä¸æ¸¸æå¡å¨çç©ºé²ä¿æè¿æ¥çæå¤§æ°éã connectionsåæ°åºè¯¥è®¾ç½®ä¸ºè¶³å¤å°çæ°å­ï¼ä»¥ä¾¿ä¸æ¸¸æå¡å¨å¯ä»¥å¤çæ°çä¼ å¥è¿æ¥ã å¸¦keepaliveçmemcachedä¸æ¸¸éç½®ç¤ºä¾:\n\nupstream memcached_backend {\n\tserver 127.0.0.1:11211;\n\tserver 10.0.0.2:11211;\n    \n\tkeepalive 32;\n}\nserver {\n    ...\n\tlocation /memcached/ {\n\t\tset $memcached_key $uri;\n\t\tmemcached_pass memcached_backend;\n\t}\n}\n\n\n\nå¯¹äºhttp , proxy_http_versionæä»¤åºè¯¥è®¾ç½®å°1.1,å¹¶ä¸"connection"å¤´åºååºè¯¥è¢«æ¸ç©ºã\n\nupstream http_backend {\n\tserver 127.0.0.1:8080;\n\tkeepalive 16;\n}\nserver {\n    ...\n        \n\tlocation /http/ {\n\t\tproxy_pass http://http_backend;\n\t\tproxy_http_version 1.1; \n\t\tproxy_set_header connection "";\n        ...\n\t}\n}\n\n\nå¯¹äºfastcgiæå¡å¨ï¼fastcgi_keep_connåºè¯¥è¢«è®¾ç½®onã\n\nupstream fastcgi_backend {\n\tserver 127.0.0.1:9000;\n\tkeepalive 8;\n}\n\nserver {\n    ...\n        \n\tlocation /fastcgi/ {\n\t\tfastcgi_pass fastcgi_backend;\n\t\tfastcgi_keep_conn on; \n\t}\n}\n\n\n\næ³¨ï¼è´è½½å¹³è¡¡æ¹æ³åºè¯¥å¨keepaliveæä»¤åé¢éç½®; scgiåuwsgiåè®®æ²¡æä¿æè¿æ¥çæ¦å¿µã\n\n * health_check (nginx plusæ¯æçå¥åº·æ£æ¥æºå¶)\n * nginx_upstream_check_module (æ·å®å¼åçç¬¬ä¸æ¹å¥åº·æ£æ¥æ¨¡å)\n\nä¸è½½å°å: https://www.keepalived.org/download.html\n\néç½®æ¡ä¾ï¼\n\nupstream backend {\n\tserver backend1.example.com\tweight=5;\n\tserver backend2.example.com:8080;\n\tserver unix:/tmp/backend3;\n    \n\tserver backup1.example.com:8080\tbackup;\n\tserver backup2.example.com:8080 backup;\n}\nserver {\n\tlocation / {\n\t\tproxy_pass http://backend;\n\t}\n}\n\n\n\n# 2. éå®åæ¨¡åï¼ngx_ http_ rewrite_ moduleï¼\n\nè¿ä¸ªæ¨¡åä½¿ç¨pcreæ­£åè¡¨è¾¾å¼æ´æ¹è¯·æ±çuriï¼è¿åéå®åæä»¤å¹¶ææ¡ä»¶çéæ©éç½®ã\n\nbreakï¼ifï¼returnï¼rewriteï¼setæä»¤æ§è¡é¡ºåºå¦ä¸:\n\n * è¿ä¸ªæ¨¡åçæä»¤å¨serverçº§å«æ¯é¡ºåºæ§è¡\n\n * éå¤ ãåºäºè¯·æ±çuriæ¥æ¾å¯¹åºçä¸ä¸ªlocation ãå¨æ¾å°çlocationä¸­ï¼æ¨¡åæä»¤æé¡ºåºæ§è¡ ãå¦æè¯·æ±çurlè¢«éåï¼åå¾ªç¯éå¤,ä½ä¸è¶è¿10æ¬¡\n\n * break\n\nsyntax: break;\ndefault: -\ncontext: server, location, if\n\n\nåæ­¢å¤çå½åçngx-http-rewrite-moduleæä»¤éãå¦æè¯¥æä»¤æ¯å¨locationä¸­ï¼é£ä¹å¨è¿ä¸ªlocationä¸­ï¼å¯¹è¯·æ±çè¿ä¸æ­¥å¤çå°ç»§ç»­è¿è¡ã\n\nif ($slow) {\n\t1imit_rate 10k;\n\tbreak;\n}\n\n\n * if\n\nsyntax: if (condition) { ... }\ndefault: -\ncontext: server, location\n\n\nè¥æ¡ä»¶å¤æ­ä¸ºçï¼åæ§è¡è±æ¬å·åçæä»¤ï¼å¹¶ä¸å°æ¬å·åçéç½®åºç¨å°è¯·æ±ä¸ãifæä»¤ä¸­çéç½®æ¯ä»ä¸ä¸å±éç½®ä¸­ç»§æ¿çã\n\næ¡ä»¶å¤æ­å¼çæå¦âä¸ç§ç±»:\n\n * ä¸ä¸ªåéåãå¦æå¼ä¸ºç©ºæè0ï¼åä¸ºflase\n * æ¯è¾å­ç¬¦ä¸²åéä½¿ç¨"="å"!=â\n * æµè¯ä¸ä¸ªåéæ¯å¦ä¸ä¸ä¸ªæ­£åè¡¨è¾¾å¼å¹éï¼æ­£åè¡¨è¾¾å¼åä½¿ç¨"~"(åºåå¤§å°å)æ"~* "(ä¸åºåå¤§å°å)æä½ç¬¦ï¼æ­£åè¡¨è¾¾å¼è½ä½¿ç¨"$1å°$9"åéï¼ä»¥ä¾¿åé¢å¯ä»¥éå¤ä½¿ç¨ï¼ä¸å¹éï¼ä½¿ç¨"!~"å"!~*"æä½ç¬¦ï¼å¦ææ­£åè¡¨è¾¾å¼ä¸­å«æ"}"æ";"ç¬¦å·ï¼åºä½¿ç¨åå¼å·æåå¼å·å°æ­£åè¡¨è¾¾å¼æ¬èµ·æ¥ã\n * æµè¯ä¸ä¸ªæä»¶æ¯å¦å­å¨ä½¿ç¨"-f"å"!-f"\n * æµè¯ä¸ä¸ªç®å½æ¯å¦å­å¨ä½¿ç¨"-d"å"!-d"\n * æµè¯ä¸ä¸ªæä»¶ãç®å½ãæç¬¦å·é¾æ¥æä»¶æ¯å¦å­å¨ï¼ä½¿ç¨"-e"å"!-e"\n * æµè¯ä¸ä¸ªæä»¶æ¯å¦å¯æ§è¡ä½¿ç¨"-x"å"!-x"\n\nä¾å¦ï¼\n\nif ($http_user_agent ~ msie) {\n\trewrite ^(.*)$ /msie/$1 break;\n}\n\nif ($http_cookie ~* "id=([^;]+)(?:;|$)") {\n\tset $id $1;\n}\n\nif ($request_method = post) {\n\treturn 405; \n}\n\nif ($slow) {\n\t1imit_rate 10k;\n}\n\nif ($invalid_referer) {\n\treturn 403 ;\n}\n\n\n$invalid_refereræ¯ä¸ä¸ªåå»ºåéï¼ç±valid_referersæä»¤è¿è¡è®¾ç½®\n\n * return\n\nsyntax:\t return code [text];\n\t\treturn code url;\n\t\treturn url;\ndefault: -\ncontext: server, location, if\n\n\nåæ­¢å¤çï¼è¿åç¶æç codeç»å®¢æ·ç«¯ãè¿åéæ åç 444å°å³é­è¯¥è¿æ¥,èä¸ä¸åéååºheaderã\n\n * rewrite ï¼replacement [rÉªËpleÉªsmÉnt] æ¿æ¢ï¼\n\nsyntax: rewrite regex replacement [flag] ;\ndefault: -\ncontext: server, location, if\n\n\nå¦æregexå¹éäºä¸ä¸ªè¯·æ±çuriï¼ è¯¥uriè¢«æ¿æ¢ä¸ºreplacementãrewrite æä»¤å¨éç½®æä»¶ä¸­æç§åºç°çé¡ºåºæ§è¡ãå¯ä½¿ç¨flagä¸­æ­¢è¿ä¸æ­¥çå¤çãå¦æreplacementä»¥"http://","https://"ä¸ºèµ·å§çå­ç¬¦ä¸²ï¼å°ä¸­æ­¢å¤çï¼å¹¶è¿åéå®åæä»¤ç»å®¢æ·ç«¯ã flagåæ°çå¼å¯ä»¥ä¸º:\n\nlaståæ­¢å½ångx_http_rewrite_moduleæ¨¡åæä»¤éçå¤çï¼å¹¶ä¸ºä¿®æ¹åçurlå¯»æ¾æ°çå¹éçlocation breakåæ­¢å½ångx_http_rewrite_moduleæ¨¡åæä»¤éçå¤çï¼ä¸breakæä»¤ä½ç¨ç¸å redirect è¿å302ä»£ç çä¸´æ¶éå®åï¼å½replacementä¸ä»¥"http://","https://"ä¸ºèµ·å§çå­ç¬¦ä¸²æ¶ä½¿ç¨ permanent è¿å301ä»£ç çæ°¸ä¹éå®å\n\nä¾å­ï¼\n\nif ($http_user_agent ~ msie) {\n\trewrite ^(.*)$ /msie/$1 break; \n}\n\nif ($http_cookie ~* "id=([^;]+)(?:;|$)") {\n\tset $id $1;\n}\n\nif ($request_method = post) {\n\treturn 405;\n}\n\nif ($slow) {\n\t1imit_rate 10k;\n}\n\nif ($invalid_referer) {\nreturn 403; \n}\n\n\n$invalid_refereræ¯ä¸ä¸ªåå»ºåéï¼ç±valid_referersæä»¤è¿è¡è®¾ç½®\n\n * return\n\nsyntax:\t return code [text] ;\n\t\treturn code url;\n\t\treturn url;\ndefault: -\ncontext: server, location, if\n\n\nåæ­¢å¤çï¼è¿åç¶æç codeç»å®¢æ·ç«¯ãè¿åéæ åç 444å°å³é­è¯¥è¿æ¥ï¼èä¸ä¸åéååºheaderã\n\n * rewrite\n\nsyntax: rewrite regex replacement [flag];\ndefault: -\ncontext: server, location, if\n\n\nå¦æregexå¹éäºä¸ä¸ªè¯·æ±çuriï¼è¯¥uriè¢«æ¿æ¢ä¸ºreplacementãrewrite æä»¤å¨éç½®æä»¶ä¸­æç§åºç°çé¡ºåºæ§è¡ãå¯ä½¿ç¨flagä¸­æ­¢è¿ä¸æ­¥çå¤çãå¦æreplacementä»¥"http://","https/âä¸ºèµ·å§çå­ç¬¦ä¸²,å°ä¸­æ­¢å¤ç,å¹¶è¿åéå®åæä»¤ç»å®¢æ·ç«¯ã\n\nflagåæ°çå¼å¯ä»¥ä¸º:\n\n * laståæ­¢å½ångx_http_rewrite_moduleæ¨¡åæä»¤éçå¤çï¼å¹¶ä¸ºä¿®æ¹åçuriå¯»æ¾æ°çå¹éçlocation\n * breakåæ­¢å½ångx_http_rewrite_moduleæ¨¡åæä»¤éçå¤çï¼ä¸breakæä»¤ä½ç¨ç¸å\n * redirectè¿å302ä»£ç çä¸´æ¶éå®å,å½replacementä¸ä»¥htp://*,"https://"ä¸ºèµ·å§çå­ç¬¦ä¸²æ¶ä½¿ç¨\n * permanentè¿å301ä»£ç çæ°¸ä¹éå®å\n\nä¾å­ï¼\n\nserver {\n    ...\n\trewrite ^(/download/. *)/media/(.*)\\..*$ $1/mp3/$2.mp3 last;\n\trewrite ^(/download/. *)/audio/(.*)\\..*$ $1/mp3/$2.ra last;\n\treturn 403;\n    ...\n}\n\n\nä½å¦æè¿äºæä»¤è¢«æ¾å¥"/download/" locationåºåä¸­ï¼åºå°last flagæ¿æ¢ä¸ºbreakï¼å¦ånginxä¼ä¸æ­å¾ªç¯ï¼è¾¾å°10æ¬¡åï¼è¿å500 error\n\nlocation /download/ {\n\trewrite ^(/download/.*)/media/(.*)\\..*$ $l/mp3/$2.mp3 break;\n\trewrite ^(/download/.*)/audio/(.*)\\..*$ $l/mp3/$2.ra break;\n\treturn 403;\n}\n\n\nå¦æreplacementåå«è¯·æ±åæ°ï¼åæ¥çè¯·æ±åæ°å°è¢«è¿½å å¨åé¢ãå¦æä¸å¸æè¿½å åæ¥çè¯·æ±åæ°ï¼å¯å¨replacementå­ç¬¦ä¸²çæ«å°¾æ·»å ä¸ä¸ª"?âç¬¦å·ï¼ä¾å¦:\n\nrewrite ^/users/(.*)$ /show?user=$l? last;\n\n\n * rewrite_log\n\nsyntax: rewrite_log on | off;\ndefault: rewrite_log off;\ncontext: http, server, location, if\n\n\næ¯å¦å¼å¯ngx_http_rewrite_moduleæ¨¡åçæ¥å¿ï¼å¦æå¼å¯ï¼è¯¥æ¨¡åçæ¥å¿å°è¢«è®°å½è¿å¥error_logä¸­ï¼æ¥å¿ççº§å«ä¸ºnotice ï¼ [ËnoÊtÉªs] éç¥ï¼\n\n * set\n\nsyntax: set $variable value;\ndefault: -\ncontext: server, location, if\n\n\nä¸ºåéèµå¼ãvalueå¯åå«ï¼ææ¬ï¼åéï¼æææ¬ååéçç»å\n\n\n# 3.å¼ç¨æ¨¡åï¼ngx_http_referer_moduleï¼\n\nç¨äºé»æ­¢"refererâå¤´å­æ®µä¸­å·ææ æå¼çè¯·æ±è®¿é®ç«ç¹ã\n\n * valid_refers\n\nsyntax: valid_referers none | blocked | server_names | string ...;\ndefault: -\ncontext: server, location\n\n\nå®ä¹refereré¦é¨çåæ³å¯ç¨å¼ï¼ä¸è½å¹éçå°æ¯éæ³å¼ãæå®"refererâè¯·æ±å¤´å­æ®µå¼ï¼è¯¥å¼å°å¯¼è´åç½®åé$invalid_ refererä¸ºç©ºå­ç¬¦ä¸²ãå¦åï¼åéå¼ä¸º"1"ãæç´¢å¹éé¡¹ä¸åºåå¤§å°åãåæ°å¦ä¸:\n\n * none: è¯·æ±æ¥æé¦é¨æ²¡ærefereré¦é¨\n * blocked: "referer âå­æ®µå­å¨äºè¯·æ±å¤´ä¸­ï¼ä½å¶å¼å·²è¢«é²ç«å¢æä»£çæå¡å¨å é¤ï¼è¿äºå¼æ¯ä¸ä»¥"http://"æ"https://"å¼å¤´çå­ç¬¦ä¸²;\n * server_names: "referer"è¯·æ±å¤´å­æ®µåå«ä¸ä¸ªæå¡å¨åç§°ï¼\n * arbitrary string: ä»»æå­ç¬¦ä¸²ï¼å®ä¹æå¡å¨åç§°åä¸ä¸ªå¯éçurlåç¼ï¼å¼å¤´åç»å°¾å¯ä»¥ä½¿ç¨ "* "ï¼æ£æ¥æ¶ï¼å¿½ç¥"refererâå­æ®µçæå¡å¨ç«¯å£ãï¼arbitrary [ËÉËrbÉªtreri] ä»»æçï¼\n * regular expression: æ­£åè¡¨è¾¾å¼å¹éå°çå­ç¬¦ä¸²ãç¬¬ä¸ä¸ªç¬¦å·åºè¯¥æ¯"~"ã åºè¯¥æ³¨æ,è¡¨è¾¾å¼å°ä¸"http://"æ"https://"ä¹ åå¼å§çææ¬å¹éãï¼regular [ËreÉ¡jÉlÉr] æè§å¾ç expression [ÉªkËspreÊn]ï¼\n\néç½®ä¸¾ä¾ï¼\n\nvalid_referers none blocked server_names\n\t\t\t*.example.com example.* www.example.org/galleries/\n\t\t\t~\\.goog1e\\.;\nif ($invalid_referer) {\n\treturn 403;\n}\n\n\n\n# 4. ngx_ stream_core_ moduleæ¨¡å\n\nåºäºtcpæudpçæå¡è¿æ¥çååä»£çï¼å³å·¥ä½äºä¼ è¾å±çååä»£çæè°åº¦å¨ãæ­¤æ¨¡åä»1.9.0çå¼å§å¯ç¨ãè¿ä¸ªæ¨¡åå¨é»è®¤æåµä¸ä¸ä¼æå»ºï¼åºè¯¥ä½¿ç¨--with-streaméç½®åæ°æ¥å¯ç¨å®ã\n\n * listen\n\nè®¾ç½®æå¡å¨æ¥æ¶çå°ååç«¯å£ç»åï¼ä¹å¯ä»¥åªè®¾ç½®ç«¯å£\n\nsyntax: listen address:port [ssl] [udp] [proxy_protoco1] [backlog=number][rcvbuf=size] [sndbuf=size] [bind]\n\t\t[ipv6only=on | off] [reuseport] [so_ keepalive=on|off| [keepid1e]: \n[keepintvl]:[keepcnt]];\ndefault: -\ncontext: server\n\n\n * ä¾å¦ï¼\n\nlisten 127.0.0.1:12345;\n1isten *:12345;\nlisten 12345;\t# same as *:12345\nlisten localhost:12345;\n\nlisten [::1] :12345;\nlisten [::]:12345;\n\nlisten unix:/var/run/nginx.sock;\n\nlisten 127.0.0.1:12345-12399;\nlisten 12345-12399;\n\n\néç½®æ¡ä¾ï¼\n\nworker_processes auto;\nerror_log /var/1og/nginx/error.log info;\n\nevents {\n\tworker_connections 1024;\n}\n\nstream {\n\tupstream backend {\n\t\thash $remote_addr consistent;\n        \n\t\tserver backendl.example.com:12345 weight=5;\n\t\tserver 127.0.0.1:12345\t\tmax_fails=3 fails_timeout=30s;\n\t\tserver unix:/tmp/backend3;\n    }\n\n    upstream dns {\n            server 192.168.0.1:53535;\n            server dns.example.com:53;\n    }\n\n    server {\n\n            listen 12345;\n            proxy_connect_timeout 1s;\n            proxy_timeout 3s;\n            proxy_pass backend;\n    }\n\n    # reuseport éç¨ç«¯å£ åä¸ä¸ªç«¯å£å¯ä»¥æå¤ä¸ªsocketåæ¶è¿è¡çå¬\n    \n    server {\n            listen 127.0.0.1:53 udp reuseport;\n            proxy_timeout 20s;\n            proxy_pass dns;\n    }\n\n    server {\n            listen [::1]:12345;\n            proxy_pass unix:/tmp/stream.socket;\n        }\n}\n\n\n\n# 5. ngx_stream_proxy_moduleæ¨¡å\n\nåè®¸ä»£çtcp/udpåunix socketæ°æ®æµ\n\n * proxy_pass\n\nsyntax: proxy_pass address;\ndefault: -\ncontext: server\n\n\nè®¾ç½®è¢«ä»£çæå¡å¨çå°åãå¯ä»¥æ¯ååæipå°ååä¸ä¸ªç«¯å£ï¼æèunix socketè·¯å¾\n\nproxy-pass localhost:12345;\nproxy_pass unix:/tmp/stream.socket;\n\n\n * proxy_timeout\n\nsyntax: proxy_timeout timeout;\ndefault: proxy_timeout 10m;\ncontext: stream, server\n\n\nè®¾ç½®å®¢æ·ç«¯æä»£çæå¡å¨è¿æ¥ä¸ä¸¤ä¸ªè¿ç»­è¯»æåæä½ä¹é´çè¶æ¶æ¶é´ãå¦æå¨è¿æ®µæ¶é´åæ²¡ææ°æ®ä¼ è¾ï¼åè¿æ¥å°å³é­ã\n\n * proxy_connect_timeout\n\nsyntax:\nproxy_connect_timeout time;\ndefault: proxy_connect_timeout 60s;\ncontext: stream, server\n\n\nå®ä¹ä¸è¢«ä»£çæå¡å¨å»ºç«è¿æ¥çè¶æ¶æ¶é´\n\n * proxy_bind\n\nsyntax: proxy_bind address [transparent] | off;\ndefault: -\ncontext: stream, server\nthis di rective appeared in version 1.9.2.\n\n\næå®å°è¢«ä»£çæå¡å¨æ°æ®åçæºipå°åãåæ°å¯ä»¥åå«åéï¼offè¡¨ç¤ºåæ¶ä»ä¸ä¸çº§çç»§æ¿éç½®ï¼ä»¥ä¾¿è®©ç³»ç»èªå¨åéæ¬å°çå°åã\n\ntransparentï¼[trÃ¦nsËpÃ¦rÉnt]éæçï¼å¯ç¨éæä»£ç\n\néæä»£ççæææ¯å®¢æ·ç«¯æ ¹æ¬ä¸éè¦ç¥éæä»£çæå¡å¨çå­å¨ãæ¢ç¶éæä»£çæ¯æç¥ä¸äºä»£ççå­å¨ï¼é£ä¹ééæä»£çå°±æ¯å¯ä»¥æç¥å°ä»£ççå­å¨äºï¼æç®åçæ¹å¼å°±æ¯ä½ è¦å»è®¿é®ç½ç«aï¼å¨æ­£å¸¸æåµä¸ï¼ç½ç«açå°è®¿é®æ¯æ¥èªäºä½ çç»ç«¯çï¼æ¯å¦æºipå°åæ¯ä½ èªå·±æµè§å¨çï¼ï¼åå¦ä½ çç»ç«¯æ¯éè¿ä»£çæ¥è®¿é®ç½ç«açï¼å¨æ®éééæä»£çæåµä¸ï¼ç½ç«açå°è¯·æ±æ¯æ¥èªäºä½ çä»£çipèçä¸å°ä½ è¿ä¸ªç»ç«¯ï¼å¨éæä»£çæåµä¸ï¼ç½ç«aæç¥ä¸å°ä½ åå®ä¹é´ä¸­é´æä¸å±ä»£çï¼ç½ç«açå°çè¯·æ±æ¯æ¥èªäºä½ çç»ç«¯å°åã\n\nproxy_bind $remote_addr transparent;\n\n\néç½®æ¡ä¾\n\nserver {\n\tlisten 127.0.0.1:12345;\n\tproxy_pass 127.0.0.1:8080; \n}\n\nserver {\n\tlisten 12345; \n\tproxy_connect_timeout 1s;\n\tproxy_timeout 1m;\n\tproxy_pass example.com:12345 ;\n}\n\nserver {\n\tlisten 53 udp reuseport;\n\tproxy_timeout 20s;\n\tproxy_pass dns.xample.com:53;\n}\n\nserver {\n\tlisten [::1]:12345;\n\tproxy_pass unix:/tmp/stream.socket;\n}\n\n\néå½ï¼pcreæ­£åè¡¨è¾¾å¼è¯­æ³\n\nå­ç¬¦            æè¿°\n\\             å°ä¸ä¸ä¸ªå­ç¬¦æ è®°ä¸ºä¸ä¸ªç¹æ®å­ç¬¦ï¼æä¸ä¸ªåä¹å­ç¬¦ï¼æä¸ä¸ªååå¼ç¨ï¼æä¸ä¸ªå«è¿å¶è½¬ä¹ç¬¦ãä¾å¦ï¼â\\nâå¹éä¸ä¸ªæ¢è¡ç¬¦ã\n^             å¹éè¾å¥å­ç¬¦ä¸²çå¼å§ä½ç½®ã\n$             å¹éè¾å¥å­ç¬¦ä¸²çç»æä½ç½®ã\n*             å¹éåé¢çå­è¡¨è¾¾å¼é¶æ¬¡æå¤æ¬¡ï¼ç­ä»·äº{0,}\n+             å¹éåé¢çå­è¡¨è¾¾å¼ä¸æ¬¡æå¤æ¬¡ï¼ç­ä»·äº{1,}\n?             å¹éåé¢çå­è¡¨è¾¾å¼é¶æ¬¡æä¸æ¬¡ï¼ç­ä»·äº{0,1}\n?             å½è¯¥å­ç¬¦ç´§è·å¨ä»»ä½ä¸ä¸ªå¶ä»éå¶ç¬¦(*,+,?,{n},{n,},{n,m})åé¢æ¶ï¼å¹éæ¨¡å¼æ¯éè´ªå©ªçãéè´ªå©ªæ¨¡å¼å°½å¯è½å°å°å¹éææç´¢çå­ç¬¦ä¸²ï¼èé»è®¤çè´ªå©ªæ¨¡å¼åå°½å¯è½å¤å°å¹éææç´¢çå­ç¬¦ä¸²ãä¾å¦ï¼å¯¹äºå­ç¬¦ä¸²âooooâ,âo+?âå°å¹éåä¸ªâoâ,èâo+âå°å¹éææçâoâã\n{n}           næ¯ä¸ä¸ªéè´æ´æ°ï¼å¹éç¡®å®çnæ¬¡ã\n{n,}          næ¯ä¸ä¸ªéè´æ´æ°ï¼è³å°å¹énæ¬¡ã\n{n,m}         månåä¸ºéè´æ´æ°ï¼å¶ä¸­n<=mï¼æå°å¹énæ¬¡ä¸æå¤å¹émæ¬¡ã\n.             å¹éé¤â\\nâä¹å¤çä»»ä½åä¸ªå­ç¬¦ãè¦å¹éåæ¬â\\nâå¨åçä»»ä½å­ç¬¦ï¼è¯·ä½¿ç¨åâ[.\\n]âçæ¨¡å¼\n(pattern)     å¹épatternå¹¶è·åè¿ä¸å¹éã\n(?:pattern)   å¹épatternä½ä¸è·åå¹éç»æãè¿å¨ä½¿ç¨âæâå­ç¬¦(|)æ¥ç»åä¸ä¸ªæ¨¡å¼çåä¸ªé¨åæ¯å¾æç¨çãä¾å¦:âindustry|industriesâå°±å¯ä»¥ç¨âindustr(?:y|ies)âä»£æ¿\n(?=pattern)   æ­£åé¢æ¥ï¼å¨ä»»ä½å¹épatternçå­ç¬¦ä¸²å¼å§å¤å¹éæ¥æ¾å­ç¬¦ä¸²ãä¾å¦ï¼âwindows(?=95|98|nt|2000)âè½å¹éâwindows2000âä¸­çâwindowsâï¼ä½ä¸è½å¹éâwindows3.1âä¸­çâwindowsâã\n(?!pattern)   è´åé¢æ¥ï¼å¨ä»»ä½ä¸å¹épatternçå­ç¬¦ä¸²å¼å§å¤å¹éæ¥æ¾å­ç¬¦ä¸²ãä¾å¦ï¼âwindows(?!95|98|nt|2000)âè½å¹éâwindows3.1âä¸­çâwindowsâï¼ä½ä¸è½å¹éâwindows2000âä¸­çâwindowsâã\nx|y           å¹éxæyã\n[xyz]         å­ç¬¦éåï¼å¹éæåå«çä»»ä½ä¸ä¸ªå­ç¬¦ã\n[^xyz]        è´å¼å­ç¬¦éåï¼å¹éæªåå«çä»»æå­ç¬¦ã\n[a-z]         å­ç¬¦èå´ï¼å¹éæå®èå´åçä»»æå­ç¬¦ã\n[^a-z]        è´å¼å­ç¬¦èå´ï¼å¹éä»»ä½ä¸å¨æå®èå´åçä»»æå­ç¬¦ã\n\\b            å¹éä¸ä¸ªåè¯è¾¹çï¼ä¹å°±æ¯åè¯åç©ºæ ¼é´çä½ç½®ã\n\\b            å¹ééåè¯è¾¹çã\n\\cx           å¹éç±xææçæ§å¶å­ç¬¦ãxçå¼å¿é¡»ä¸ºa-zæa-zä¹é´\n\\d            å¹éä¸ä¸ªæ°å­å­ç¬¦ãç­ä»·äº[0-9]\n\\d            å¹éä¸ä¸ªéæ°å­å­ç¬¦ãç­ä»·äº[^0-9]\n\\f            å¹éä¸ä¸ªæ¢é¡µç¬¦ãç­ä»·äº\\x0cå\\cl\n\\n            å¹éä¸ä¸ªæ¢è¡ç¬¦ãç­ä»·äº\\x0aå\\cj\n\\r            å¹éä¸ä¸ªåè½¦ç¬¦ãç­ä»·äº\\x0då\\cm\n\\s            å¹éä»»ä½ç©ºç½å­ç¬¦ï¼åæ¬ç©ºæ ¼ãå¶è¡¨ç¬¦ãæ¢é¡µç¬¦ç­ã\n\\s            å¹éä»»ä½éç©ºç½ç¬¦ã\n\\t            å¹éä¸ä¸ªå¶è¡¨ç¬¦\n\\w            å¹éåæ¬ä¸åçº¿çä»»ä½åè¯å­ç¬¦ãç­ä»·äº[a-za-z0-9_]\n\\w            å¹éä»»ä½éåè¯å­ç¬¦ã\n\\xn           å¹énï¼å¶ä¸­nä¸ºåå­è¿å¶è½¬ä¹å¼ãä¾å¦â\\x41âå¹éâaâã\n\\num          å¹énumï¼å¶ä¸­numæ¯ä¸ä¸ªæ­£æ´æ°ãå¯¹æè·åçå¹éçå¼ç¨ãä¾å¦ï¼â(.)\\1â',charsets:{cjk:!0}},{title:"Nginxç½ç«æå¡",frontmatter:{},regularPath:"/Nginx/03_LNMP%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2/1.Nginx%E7%BD%91%E7%AB%99%E6%9C%8D%E5%8A%A1.html",relativePath:"Nginx/03_LNMPç¯å¢é¨ç½²/1.Nginxç½ç«æå¡.md",key:"v-79a75635",path:"/nginx/03_lnmphuan-jing-bu-shu/1.nginxwang-zhan-fu-wu.html",headers:[{level:2,title:"1. å®è£Nginx",slug:"_1-å®è£nginx",normalizedTitle:"1. å®è£nginx",charIndex:45},{level:2,title:"2. è°æ´éç½®æä»¶",slug:"_2-è°æ´éç½®æä»¶",normalizedTitle:"2. è°æ´éç½®æä»¶",charIndex:76},{level:3,title:"2.1 å¨å±éç½®",slug:"_2-1-å¨å±éç½®",normalizedTitle:"2.1 å¨å±éç½®",charIndex:215},{level:3,title:"2.2 I/Oäºä»¶éç½®",slug:"_2-2-i-oäºä»¶éç½®",normalizedTitle:"2.2 i/oäºä»¶éç½®",charIndex:549},{level:3,title:"2.3 HTTPéç½®",slug:"_2-3-httpéç½®",normalizedTitle:"2.3 httpéç½®",charIndex:875},{level:2,title:"3. è®¿é®ç¶æç»è®¡",slug:"_3-è®¿é®ç¶æç»è®¡",normalizedTitle:"3. è®¿é®ç¶æç»è®¡",charIndex:1986},{level:2,title:"4. Nginxè®¿é®æ§å¶",slug:"_4-nginxè®¿é®æ§å¶",normalizedTitle:"4. nginxè®¿é®æ§å¶",charIndex:2954},{level:3,title:"4.1 åºäºææçè®¿é®æ§å¶",slug:"_4-1-åºäºææçè®¿é®æ§å¶",normalizedTitle:"4.1 åºäºææçè®¿é®æ§å¶",charIndex:2971},{level:3,title:"4.2 åºäºå®¢æ·ç«¯çè®¿é®æ§å¶",slug:"_4-2-åºäºå®¢æ·ç«¯çè®¿é®æ§å¶",normalizedTitle:"4.2 åºäºå®¢æ·ç«¯çè®¿é®æ§å¶",charIndex:4053},{level:2,title:"5. èæä¸»æº",slug:"_5-èæä¸»æº",normalizedTitle:"5. èæä¸»æº",charIndex:4689},{level:3,title:"5.1 åºäºååçèæä¸»æº (ä½¿ç¨çæå¤)",slug:"_5-1-åºäºååçèæä¸»æº-ä½¿ç¨çæå¤",normalizedTitle:"5.1 åºäºååçèæä¸»æº (ä½¿ç¨çæå¤)",charIndex:4920},{level:3,title:"5.2 åºäºipçèæä¸»æº",slug:"_5-2-åºäºipçèæä¸»æº",normalizedTitle:"5.2 åºäºipçèæä¸»æº",charIndex:5689},{level:3,title:"5.3 åºäºç«¯å£çèæä¸»æº",slug:"_5-3-åºäºç«¯å£çèæä¸»æº",normalizedTitle:"5.3 åºäºç«¯å£çèæä¸»æº",charIndex:5989}],headersStr:"1. å®è£Nginx 2. è°æ´éç½®æä»¶ 2.1 å¨å±éç½® 2.2 I/Oäºä»¶éç½® 2.3 HTTPéç½® 3. è®¿é®ç¶æç»è®¡ 4. Nginxè®¿é®æ§å¶ 4.1 åºäºææçè®¿é®æ§å¶ 4.2 åºäºå®¢æ·ç«¯çè®¿é®æ§å¶ 5. èæä¸»æº 5.1 åºäºååçèæä¸»æº (ä½¿ç¨çæå¤) 5.2 åºäºipçèæä¸»æº 5.3 åºäºç«¯å£çèæä¸»æº",content:'# Nginxç½ç«æå¡\n\næ¬ç« èä¸»è¦ç®çæ¯éç½®Nginxæä¸ºä¸ä¸ªç½ç«server\n\n\n# 1. å®è£Nginx\n\nyumå®è£æèç¼è¯å®è£åå¯ä»¥\n\n\n# 2. è°æ´éç½®æä»¶\n\nå¨Nginxæå¡å¨çä¸»éç½®æä»¶/usr/local/nginx/conf/nginx.confä¸­ï¼åæ¬å¨å±éç½®ãI/Oäºä»¶éç½®åHTTPéç½®è¿ä¸å¤§ååå®¹ï¼éç½®è¯­å¥çæ ¼å¼ä¸º"æä»¤ å¼ï¼" (æ«å°¾ä»¥åå·è¡¨ç¤ºç»æ)ï¼ä»¥ " # " å¼å§çé¨åè¡¨ç¤ºæ³¨éã\n\n\n# 2.1 å¨å±éç½®\n\nç±åç§éç½®è¯­å¥ç»æï¼ä¸ä½¿ç¨ç¹å®ççå®æ è®°ãå¨å±éç½®é¨ååæ¬Nginxæå¡çè¿è¡ç¨æ·ãå·¥ä½è¿ç¨æ°ãéè¯¯æ¥å¿ãPIDå­æ¾ä½ç½®ç­åºæ¬è®¾ç½®ã\n\nuser nginx nginx;\t     \t# è¿è¡ç¨æ·åç»\nworker_processes auto;\t \t# å·¥ä½è¿ç¨æ°é\nworker_cpu_affinity auto;\t# å·¥ä½è¿ç¨èªå¨ç»å®å°ç¹å®CPU\nworker_rlimit_nofile 65535; # å·¥ä½è¿ç¨æå¼çæå¤§æä»¶æ°\n\nerror_log  /var/log/nginx/error.log warn;\t# éè¯¯æ¥å¿ä½ç½®\npid        /var/run/nginx.pid;\t\t\t   # PIDæä»¶ä½ç½®\n\n\n\n# 2.2 I/Oäºä»¶éç½®\n\nä½¿ç¨"events { }"çå®æ è®°ï¼ç¨æ¥æå®Nginxè¿ç¨çI/Oååºæ¨¡åãæ¯ä¸ªè¿ç¨çè¿æ¥æ°ç­è®¾ç½®ãå¯¹äº2.6åä»¥ä¸çæ¬çåæ ¸,å»ºè®®ä½¿ç¨epollæ¨¡åä»¥æé«æ§è½ï¼æ¯ä¸ªè¿ç¨çè¿æ¥æ°åºæ ¹æ®å®ééè¦æ¥å®ï¼ä¸è¬å¨1000ä»¥ä¸(é»è®¤ä¸º1024)ã\n\nevents {\n    use epoll;\t\t\t\t\t#ä½¿ç¨epollæ¨¡å\n    worker_connections  8192;\t #æ¯è¿ç¨å¤ç8192ä¸ªè¿æ¥ï¼é»è®¤ä¸º1024ï¼\n}\n\n\nè¥å·¥ä½è¿ç¨æ°ä¸º4ï¼æ¯ä¸ªè¿ç¨å¤ç8192ä¸ªè¿æ¥ï¼ååè®¸Nginxæ­£å¸¸æä¾æå¡çè¿æ¥æ°å·²è¶è¿3ä¸ä¸ª(8192*4=32768)ï¼å½ç¶å·ä½è¿è¦çæå¡å¨ç¡¬ä»¶ãç½ç»å¸¦å®½ç­ç©çæ¡ä»¶çæ§è½è¡¨ç°ã\n\n\n# 2.3 HTTPéç½®\n\nä½¿ç¨"http { }"çå®æ è®°ï¼åæ¬è®¿é®æ¥å¿ãHTTPç«¯å£ãç½é¡µç®å½ãé»è®¤å­ç¬¦éãè¿æ¥ä¿æï¼ä»¥ååé¢è¦è®²å°çèæWebä¸»æºãPHPè§£æç­ä¸ç³»åè®¾ç½®ï¼ å¶ä¸­å¤§é¨åéç½®è¯­å¥é½åå«å¨å­çå®æ è®°"server { }"åã\n\nhttp {\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n\n    log_format  main  \'$remote_addr - $remote_user [$time_local] "$request" \'\n                      \'$status $body_bytes_sent "$http_referer" \'\n                      \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n    access_log  /var/log/nginx/access.log  main;\t# è®¿é®æ¥å¿ä½ç½®\n\n    sendfile        on;\t\t\t# éææå¡å¨æ¶ï¼å¼å¯å¤§å¤§æåæ§è½\n    #tcp_nopush     on;\n\n\t#keepalive_timeout  0;\n    keepalive_timeout  65;\t\t# è¿æ¥ä¿æè¶æ¶äºä»¶\n\n    #gzip  on;\n\n\tserver {\n\t\tlisten\t\t80;\t\t# ä¾¦å¬å°å\n\t\tserver_name www.shengzhe.com;\t# ç½ç«åå\n\t\t\n\t\tcharset utf-8;\t\t# ç½é¡µçé»è®¤å­ç¬¦é\n\t\t\n\t\tlocation / {\t\t#æ ¹ç®å½éç½®\n\t\t\troot\thtml;\t#æ ¹ç®å½ä½ç½®\n\t\t\tindex\tindex.html index.html;\t# é»è®¤é¦é¡µ\n\t\t}\n        \n        error_page\t500 502 503 504\t/50x.html;\t# åé¨éè¯¯çåé¦é¡µé¢\n        location = /50x.html {\t#éè¯¯é¡µé¢çéç½®\n            root html;\n        }\n\t}\n}\n\n\nä¸è¿°éç½®ä¸­ï¼listenè¯­å¥åè®¸åæ¶éå®IPå°åï¼éç¨"IPå°åï¼ç«¯å£å½¢å¼ï¼root è¯­å¥ç¨æ¥è®¾ç½®ç¹å®è®¿é®ä½ç½®(å¦"location/"è¡¨ç¤ºæ ¹ç®å½)çç½é¡µææ¡£è·¯å¾ï¼é»è®¤ä¸ºNginxå®è£ç®å½ä¸çhtml/å­ç®å½ï¼æ ¹æ®éè¦å¯æ¹ä¸º/var/ww/htmlç­å¶ä»è·¯å¾ã\n\n\n# 3. è®¿é®ç¶æç»è®¡\n\nNginxåç½®äºHTTP_ STUB_ STATUSç¶æç»è®¡æ¨¡åï¼ç¨æ¥åé¦å½åçWebè®¿é®æåµï¼éç½®ç¼è¯åæ°æ¶å¯æ·»å  --with-http_stub_ status_module æ¥å¯ç¨æ­¤æ¨¡åæ¯æï¼å¯ä»¥ä½¿ç¨å½ä»¤ $ nginx /usr/local/nginx/sbin/nginx -Væ¥çå·²å®è£çNginxæ¯å¦åå«HTTP STUB _STATUSæ¨¡å( æèä½¿ç¨å½ä»¤$ nginx -V æ¥çå·²å®è£çæ¨¡å)ã\n\nè¦ä½¿ç¨Nginxçç¶æç»è®¡åè½ï¼é¤äºå¯ç¨åå»ºæ¨¡åä»¥å¤ï¼è¿éè¦ä¿®æ¹nginx.conféç½®æä»¶ï¼æå®è®¿é®ä½ç½®å¹¶æ·»å stub_ statuséç½®ä»£ç ã\n\nï¼yumå®è£éç½®æä»¶å¨/etc/nginx/conf.dç®å½ä¸ï¼\n\nserver {\n    listen       80;\n    server_name  localhost;\n\n    #charset koi8-r;\n    #access_log  /var/log/nginx/host.access.log  main;\n\n    location / {\n        root   /usr/share/nginx/html;\n        index  index.html index.htm;\n    }\n\n    #error_page  404              /404.html;\n\n    # redirect server error pages to the static page /50x.html\n    #\n    error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n        root   /usr/share/nginx/html;\n    }\n\n    location /status {\t#è®¿é®ä½ç½®ä¸º/status\n        stub_status;\t#æå¼ç¶æç»è®¡åè½\n        access_log off;  #å³é­æ­¤ä½ç½®çæ¥å¿è®°å½\n    }\n\n\næ°çéç½®çæä»¥åï¼å¨æµè§å¨ä¸­è®¿é®Nginxæå¡å¨ç/statusç½ç«ä½ç½®ï¼å¯ä»¥çå°å½åçç¶æç»è®¡ä¿¡æ¯ï¼\n\n\n\n\n# 4. Nginxè®¿é®æ§å¶\n\n\n# 4.1 åºäºææçè®¿é®æ§å¶\n\nNginxå¯ä»¥å®ç°åºäºç¨æ·ææçè®¿é®æ§å¶ï¼å½å®¢æ·ç«¯æ³è¦è®¿é®ç¸åºç½ç«æèç®å½æ¶ï¼è¦æ±ç¨æ·è¾å¥ç¨æ·ååå¯ç æè½æ­£å¸¸è®¿é®ï¼éç½®æ­¥éª¤å¦ä¸ï¼\n\n 1. çæç¨æ·å¯ç è®¤è¯æä»¶ã\n 2. ä¿®æ¹éç½®æä»¶ç¸å¯¹åºç®å½ï¼æ·»å è®¤è¯éç½®é¡¹ã\n 3. å¯å¨æå¡ï¼è®¿é®æµè¯ã\n\n * ä½¿ç¨htpasswdçæç¨æ·è®¤è¯æä»¶ï¼å¦ææ²¡æè¯¥å½ä»¤ï¼å¯ä½¿ç¨yumå®è£httpd-toolsè½¯ä»¶åã\n   \n   $ yum install httpd-tools -y\n   $ htpasswd -c passwd.db test\n   New password: \n   Re-type new password: \n   Adding password for user test\n   $ cat passwd.db\n   test:$apr1$sgQpKECK$MVHuob9Qgj53nK6RNXoaf.\n   \n\n * ä¿®æ¹å¯ç æä»¶çæéä¸º400ï¼å°ææèæ¹ä¸ºwwwï¼è®¾ç½®nginxçè¿è¡ç¨æ·è½å¤è¯»åã\n   \n    $ chmod 400 passwd.db \n    $ chown www passwd.db \n    $ ls -l passwd.db \n   -r--------. 1 www root 43 Apr 14 08:34 passwd.db\n   \n\n * ä¿®æ¹ä¸»éç½®æä»¶nginx.confï¼æ·»å ç¸åºè®¤è¯éç½®é¡¹ã\n   \n   location /status {\n           stub_status;\n           access_log off;\n           auth_basic "admin";\n           auth_basic_user_file /etc/nginx/conf.d/passwd.db;\n       }\n   \n\n * æ£æ¥è¯­æ³ï¼éå¯æå¡ã\n   \n   $ nginx -t\n   nginx: the configuration file /etc/nginx/nginx.conf syntax is ok\n   nginx: configuration file /etc/nginx/nginx.conf test is successful\n   $ systemctl restart nginx\n   \n\n * ç¨æµè§å¨è®¿é®ç½åï¼æ£éªæ§å¶ææï¼å¦å¾æç¤ºï¼\n   \n   \n   \n   éè¦è¾å¥ç¨æ·ååå¯ç è¿è¡è®¿é®ï¼éªè¯éè¿æè½è®¿é®å°é¡µé¢ã\n\n\n# 4.2 åºäºå®¢æ·ç«¯çè®¿é®æ§å¶\n\nåºäºå®¢æ·ç«¯çè®¿é®æ§å¶æ¯éè¿å®¢æ·ç«¯IPå°åï¼å³å®æ¯å¦åè®¸å¯¹é¡µé¢è®¿é®ãNginxåºäºå®¢æ·ç«¯çè®¿é®æ§å¶è§åå¦ä¸ï¼\n\n 1. denyIP/IPæ®µï¼æç»æä¸ªIPæIPæ®µçå®¢æ·ç«¯è®¿é®ã\n 2. allowIP/IPæ®µï¼åè®¸æä¸ªIPæIPæ®µçå®¢æ·ç«¯è®¿é®ã\n 3. è§åä»ä¸å¾ä¸æ§è¡ï¼å¦å¹éååæ­¢ï¼ä¸åå¾ä¸å¹éã\n\n * ä¿®æ¹ä¸»éç½®æä»¶nginx.confï¼æ·»å ç¸åºéç½®é¡¹\n   \n   location = /basic_status {\n           stub_status;\n           deny 192.168.57.1;\t\t    #æç»è¿ä¸ªå°å\n           allow 192.168.87.0/24;\t\t#åè®¸è¿ä¸ªç½æ®µ\n           deny all;\t\t\t\t   #æç»ææå¶ä»å°å\n       }\n   \n\n * éå¯æå¡\n   \n   $ nginx -t\n   nginx: the configuration file /etc/nginx/nginx.conf syntax is ok\n   nginx: configuration file /etc/nginx/nginx.conf test is successful\n   $ systemctl restart nginx\n   \n\n * ä½¿ç¨ 192.168.57.1å°åè®¿é®ï¼ä¸è½è®¿é®ï¼å¶ä»å°åå¯ä»¥\n   \n   \n\n\n# 5. èæä¸»æº\n\nå©ç¨èæä¸»æºï¼ä¸ç¨ä¸ºæ¯ä¸ªè¦è¿è¡çç½ç«æä¾-å°åç¬çNginxæå¡å¨æåç¬è¿è¡ä¸ç»Nginxè¿ç¨ï¼èæä¸»æºæä¾äºå¨åä¸å°æå¡å¨ï¼åä¸ç»Nginxè¿ç¨ä¸è¿è¡å¤ä¸ªç½ç«çåè½ãNginxå¯ä»¥éç½®å¤ç§ç±»åçèæä¸»æºï¼åå«æ¯åºäºIPçèæä¸»æºãåºäºååçèæä¸»æºãåºäºç«¯å£çèæä¸»æºã\n\nä½¿ç¨Nginxæ­å»ºèæä¸»æºæå¡å¨æ¶ï¼æ¯ä¸ªèæWebç«ç¹æ¥æç¬ç«ç"server{ }"éç½®æ®µï¼åèªçå¬çIPå°åãç«¯å£å·å¯ä»¥åç¬æå®ï¼å½ç¶ç½ç«åç§°ä¹æ¯ä¸åçã\n\n\n# 5.1 åºäºååçèæä¸»æº (ä½¿ç¨çæå¤)\n\néç½®æä»¶æ¡ä¾ï¼\n\nserver {\t\t\t# å å¥ www.bt.com\n    listen 80;\n    server_name www.bt.com;\t\t# çå¬åå\n    charset utf-8;\n    access_log logs/www.bt.access.log;\t# æ¥å¿æä»¶\n    location / {\n        root /var/www/html/btcom;\t# www.bt.com çå·¥ä½ç®å½\n        index index.html index.htm;\n    }\n\terror_page 500 502 503 504 /50x.html;\n\tlocation = 50x.html {\n\t\troot html;\n\t}\n}\nserver {\t\t\t# å å¥ www.test.com å¯¹åºçç«ç¹\n    listen 80;\n    server_name www.test.com;\t\t# çå¬åå\n    charset utf-8;\n    access_log logs/www.test.access.log;\t# æ¥å¿æä»¶\n    location / {\n        root /var/www/html/testcom;\t# www.test.com çå·¥ä½ç®å½\n        index index.html index.htm;\n    }\n\terror_page 500 502 503 504 /50x.html;\n\tlocation = 50x.html {\n\t\troot html;\n\t}\n}\n\n\n * é¦åå»ºç«2ä¸ªç½ç«çæ ¹ç®å½\n * ä¿®æ¹éç½®æä»¶å¦ä¸\n * å®¢æ·ç«¯ä½¿ç¨ååè®¿é®éªè¯å³å¯\n\n\n# 5.2 åºäºipçèæä¸»æº\n\néç½®æä»¶æ¡ä¾ï¼\n\nserver {\n\tlisten 192.168.9.158:80;\t# çå¬ 192.168.9.158\n\tserver_name 192.168.9.158:80;\n\t................ # çç¥åå®¹\n}\nserver {\n\tlisten 192.168.9.110:80;\t# çå¬ 192.168.9.110\n\tserver_name 192.168.9.110:80;\n\t................ # çç¥åå®¹\n}\n\n\n * é¦åç»æå¡å¨éç½®2ä¸ªä¸åçIPå°å\n * ä¿®æ¹éç½®æä»¶å¦ä¸\n * å®¢æ·ç«¯è®¿é®æµè¯å³å¯\n\n\n# 5.3 åºäºç«¯å£çèæä¸»æº\n\néç½®æä»¶æ¡ä¾ï¼\n\nserver {\n\tlisten 192.168.9.158:6666;\t# çå¬ 6666 ç«¯å£\n\tserver_name 192.168.9.158:6666;\t# ååä¹å¯\n\t................ # çç¥åå®¹\n}\nserver {\n\tlisten 192.168.9.158:8888;\t# çå¬ 8888 ç«¯å£\n\tserver_name 192.168.9.158:8888;\t# ååä¹å¯\n\t................ # çç¥åå®¹\n}\n\n\n * ä¿®æ¹éç½®æä»¶\n * é²ç«å¢æ¾è¡ä»¥ä¸ç«¯å£\n * å®¢æ·ç«¯ä½¿ç¨ä¸åçç«¯å£è¿è¡æµè¯å³å¯',normalizedContent:'# nginxç½ç«æå¡\n\næ¬ç« èä¸»è¦ç®çæ¯éç½®nginxæä¸ºä¸ä¸ªç½ç«server\n\n\n# 1. å®è£nginx\n\nyumå®è£æèç¼è¯å®è£åå¯ä»¥\n\n\n# 2. è°æ´éç½®æä»¶\n\nå¨nginxæå¡å¨çä¸»éç½®æä»¶/usr/local/nginx/conf/nginx.confä¸­ï¼åæ¬å¨å±éç½®ãi/oäºä»¶éç½®åhttpéç½®è¿ä¸å¤§ååå®¹ï¼éç½®è¯­å¥çæ ¼å¼ä¸º"æä»¤ å¼ï¼" (æ«å°¾ä»¥åå·è¡¨ç¤ºç»æ)ï¼ä»¥ " # " å¼å§çé¨åè¡¨ç¤ºæ³¨éã\n\n\n# 2.1 å¨å±éç½®\n\nç±åç§éç½®è¯­å¥ç»æï¼ä¸ä½¿ç¨ç¹å®ççå®æ è®°ãå¨å±éç½®é¨ååæ¬nginxæå¡çè¿è¡ç¨æ·ãå·¥ä½è¿ç¨æ°ãéè¯¯æ¥å¿ãpidå­æ¾ä½ç½®ç­åºæ¬è®¾ç½®ã\n\nuser nginx nginx;\t     \t# è¿è¡ç¨æ·åç»\nworker_processes auto;\t \t# å·¥ä½è¿ç¨æ°é\nworker_cpu_affinity auto;\t# å·¥ä½è¿ç¨èªå¨ç»å®å°ç¹å®cpu\nworker_rlimit_nofile 65535; # å·¥ä½è¿ç¨æå¼çæå¤§æä»¶æ°\n\nerror_log  /var/log/nginx/error.log warn;\t# éè¯¯æ¥å¿ä½ç½®\npid        /var/run/nginx.pid;\t\t\t   # pidæä»¶ä½ç½®\n\n\n\n# 2.2 i/oäºä»¶éç½®\n\nä½¿ç¨"events { }"çå®æ è®°ï¼ç¨æ¥æå®nginxè¿ç¨çi/oååºæ¨¡åãæ¯ä¸ªè¿ç¨çè¿æ¥æ°ç­è®¾ç½®ãå¯¹äº2.6åä»¥ä¸çæ¬çåæ ¸,å»ºè®®ä½¿ç¨epollæ¨¡åä»¥æé«æ§è½ï¼æ¯ä¸ªè¿ç¨çè¿æ¥æ°åºæ ¹æ®å®ééè¦æ¥å®ï¼ä¸è¬å¨1000ä»¥ä¸(é»è®¤ä¸º1024)ã\n\nevents {\n    use epoll;\t\t\t\t\t#ä½¿ç¨epollæ¨¡å\n    worker_connections  8192;\t #æ¯è¿ç¨å¤ç8192ä¸ªè¿æ¥ï¼é»è®¤ä¸º1024ï¼\n}\n\n\nè¥å·¥ä½è¿ç¨æ°ä¸º4ï¼æ¯ä¸ªè¿ç¨å¤ç8192ä¸ªè¿æ¥ï¼ååè®¸nginxæ­£å¸¸æä¾æå¡çè¿æ¥æ°å·²è¶è¿3ä¸ä¸ª(8192*4=32768)ï¼å½ç¶å·ä½è¿è¦çæå¡å¨ç¡¬ä»¶ãç½ç»å¸¦å®½ç­ç©çæ¡ä»¶çæ§è½è¡¨ç°ã\n\n\n# 2.3 httpéç½®\n\nä½¿ç¨"http { }"çå®æ è®°ï¼åæ¬è®¿é®æ¥å¿ãhttpç«¯å£ãç½é¡µç®å½ãé»è®¤å­ç¬¦éãè¿æ¥ä¿æï¼ä»¥ååé¢è¦è®²å°çèæwebä¸»æºãphpè§£æç­ä¸ç³»åè®¾ç½®ï¼ å¶ä¸­å¤§é¨åéç½®è¯­å¥é½åå«å¨å­çå®æ è®°"server { }"åã\n\nhttp {\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n\n    log_format  main  \'$remote_addr - $remote_user [$time_local] "$request" \'\n                      \'$status $body_bytes_sent "$http_referer" \'\n                      \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n    access_log  /var/log/nginx/access.log  main;\t# è®¿é®æ¥å¿ä½ç½®\n\n    sendfile        on;\t\t\t# éææå¡å¨æ¶ï¼å¼å¯å¤§å¤§æåæ§è½\n    #tcp_nopush     on;\n\n\t#keepalive_timeout  0;\n    keepalive_timeout  65;\t\t# è¿æ¥ä¿æè¶æ¶äºä»¶\n\n    #gzip  on;\n\n\tserver {\n\t\tlisten\t\t80;\t\t# ä¾¦å¬å°å\n\t\tserver_name www.shengzhe.com;\t# ç½ç«åå\n\t\t\n\t\tcharset utf-8;\t\t# ç½é¡µçé»è®¤å­ç¬¦é\n\t\t\n\t\tlocation / {\t\t#æ ¹ç®å½éç½®\n\t\t\troot\thtml;\t#æ ¹ç®å½ä½ç½®\n\t\t\tindex\tindex.html index.html;\t# é»è®¤é¦é¡µ\n\t\t}\n        \n        error_page\t500 502 503 504\t/50x.html;\t# åé¨éè¯¯çåé¦é¡µé¢\n        location = /50x.html {\t#éè¯¯é¡µé¢çéç½®\n            root html;\n        }\n\t}\n}\n\n\nä¸è¿°éç½®ä¸­ï¼listenè¯­å¥åè®¸åæ¶éå®ipå°åï¼éç¨"ipå°åï¼ç«¯å£å½¢å¼ï¼root è¯­å¥ç¨æ¥è®¾ç½®ç¹å®è®¿é®ä½ç½®(å¦"location/"è¡¨ç¤ºæ ¹ç®å½)çç½é¡µææ¡£è·¯å¾ï¼é»è®¤ä¸ºnginxå®è£ç®å½ä¸çhtml/å­ç®å½ï¼æ ¹æ®éè¦å¯æ¹ä¸º/var/ww/htmlç­å¶ä»è·¯å¾ã\n\n\n# 3. è®¿é®ç¶æç»è®¡\n\nnginxåç½®äºhttp_ stub_ statusç¶æç»è®¡æ¨¡åï¼ç¨æ¥åé¦å½åçwebè®¿é®æåµï¼éç½®ç¼è¯åæ°æ¶å¯æ·»å  --with-http_stub_ status_module æ¥å¯ç¨æ­¤æ¨¡åæ¯æï¼å¯ä»¥ä½¿ç¨å½ä»¤ $ nginx /usr/local/nginx/sbin/nginx -væ¥çå·²å®è£çnginxæ¯å¦åå«http stub _statusæ¨¡å( æèä½¿ç¨å½ä»¤$ nginx -v æ¥çå·²å®è£çæ¨¡å)ã\n\nè¦ä½¿ç¨nginxçç¶æç»è®¡åè½ï¼é¤äºå¯ç¨åå»ºæ¨¡åä»¥å¤ï¼è¿éè¦ä¿®æ¹nginx.conféç½®æä»¶ï¼æå®è®¿é®ä½ç½®å¹¶æ·»å stub_ statuséç½®ä»£ç ã\n\nï¼yumå®è£éç½®æä»¶å¨/etc/nginx/conf.dç®å½ä¸ï¼\n\nserver {\n    listen       80;\n    server_name  localhost;\n\n    #charset koi8-r;\n    #access_log  /var/log/nginx/host.access.log  main;\n\n    location / {\n        root   /usr/share/nginx/html;\n        index  index.html index.htm;\n    }\n\n    #error_page  404              /404.html;\n\n    # redirect server error pages to the static page /50x.html\n    #\n    error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n        root   /usr/share/nginx/html;\n    }\n\n    location /status {\t#è®¿é®ä½ç½®ä¸º/status\n        stub_status;\t#æå¼ç¶æç»è®¡åè½\n        access_log off;  #å³é­æ­¤ä½ç½®çæ¥å¿è®°å½\n    }\n\n\næ°çéç½®çæä»¥åï¼å¨æµè§å¨ä¸­è®¿é®nginxæå¡å¨ç/statusç½ç«ä½ç½®ï¼å¯ä»¥çå°å½åçç¶æç»è®¡ä¿¡æ¯ï¼\n\n\n\n\n# 4. nginxè®¿é®æ§å¶\n\n\n# 4.1 åºäºææçè®¿é®æ§å¶\n\nnginxå¯ä»¥å®ç°åºäºç¨æ·ææçè®¿é®æ§å¶ï¼å½å®¢æ·ç«¯æ³è¦è®¿é®ç¸åºç½ç«æèç®å½æ¶ï¼è¦æ±ç¨æ·è¾å¥ç¨æ·ååå¯ç æè½æ­£å¸¸è®¿é®ï¼éç½®æ­¥éª¤å¦ä¸ï¼\n\n 1. çæç¨æ·å¯ç è®¤è¯æä»¶ã\n 2. ä¿®æ¹éç½®æä»¶ç¸å¯¹åºç®å½ï¼æ·»å è®¤è¯éç½®é¡¹ã\n 3. å¯å¨æå¡ï¼è®¿é®æµè¯ã\n\n * ä½¿ç¨htpasswdçæç¨æ·è®¤è¯æä»¶ï¼å¦ææ²¡æè¯¥å½ä»¤ï¼å¯ä½¿ç¨yumå®è£httpd-toolsè½¯ä»¶åã\n   \n   $ yum install httpd-tools -y\n   $ htpasswd -c passwd.db test\n   new password: \n   re-type new password: \n   adding password for user test\n   $ cat passwd.db\n   test:$apr1$sgqpkeck$mvhuob9qgj53nk6rnxoaf.\n   \n\n * ä¿®æ¹å¯ç æä»¶çæéä¸º400ï¼å°ææèæ¹ä¸ºwwwï¼è®¾ç½®nginxçè¿è¡ç¨æ·è½å¤è¯»åã\n   \n    $ chmod 400 passwd.db \n    $ chown www passwd.db \n    $ ls -l passwd.db \n   -r--------. 1 www root 43 apr 14 08:34 passwd.db\n   \n\n * ä¿®æ¹ä¸»éç½®æä»¶nginx.confï¼æ·»å ç¸åºè®¤è¯éç½®é¡¹ã\n   \n   location /status {\n           stub_status;\n           access_log off;\n           auth_basic "admin";\n           auth_basic_user_file /etc/nginx/conf.d/passwd.db;\n       }\n   \n\n * æ£æ¥è¯­æ³ï¼éå¯æå¡ã\n   \n   $ nginx -t\n   nginx: the configuration file /etc/nginx/nginx.conf syntax is ok\n   nginx: configuration file /etc/nginx/nginx.conf test is successful\n   $ systemctl restart nginx\n   \n\n * ç¨æµè§å¨è®¿é®ç½åï¼æ£éªæ§å¶ææï¼å¦å¾æç¤ºï¼\n   \n   \n   \n   éè¦è¾å¥ç¨æ·ååå¯ç è¿è¡è®¿é®ï¼éªè¯éè¿æè½è®¿é®å°é¡µé¢ã\n\n\n# 4.2 åºäºå®¢æ·ç«¯çè®¿é®æ§å¶\n\nåºäºå®¢æ·ç«¯çè®¿é®æ§å¶æ¯éè¿å®¢æ·ç«¯ipå°åï¼å³å®æ¯å¦åè®¸å¯¹é¡µé¢è®¿é®ãnginxåºäºå®¢æ·ç«¯çè®¿é®æ§å¶è§åå¦ä¸ï¼\n\n 1. denyip/ipæ®µï¼æç»æä¸ªipæipæ®µçå®¢æ·ç«¯è®¿é®ã\n 2. allowip/ipæ®µï¼åè®¸æä¸ªipæipæ®µçå®¢æ·ç«¯è®¿é®ã\n 3. è§åä»ä¸å¾ä¸æ§è¡ï¼å¦å¹éååæ­¢ï¼ä¸åå¾ä¸å¹éã\n\n * ä¿®æ¹ä¸»éç½®æä»¶nginx.confï¼æ·»å ç¸åºéç½®é¡¹\n   \n   location = /basic_status {\n           stub_status;\n           deny 192.168.57.1;\t\t    #æç»è¿ä¸ªå°å\n           allow 192.168.87.0/24;\t\t#åè®¸è¿ä¸ªç½æ®µ\n           deny all;\t\t\t\t   #æç»ææå¶ä»å°å\n       }\n   \n\n * éå¯æå¡\n   \n   $ nginx -t\n   nginx: the configuration file /etc/nginx/nginx.conf syntax is ok\n   nginx: configuration file /etc/nginx/nginx.conf test is successful\n   $ systemctl restart nginx\n   \n\n * ä½¿ç¨ 192.168.57.1å°åè®¿é®ï¼ä¸è½è®¿é®ï¼å¶ä»å°åå¯ä»¥\n   \n   \n\n\n# 5. èæä¸»æº\n\nå©ç¨èæä¸»æºï¼ä¸ç¨ä¸ºæ¯ä¸ªè¦è¿è¡çç½ç«æä¾-å°åç¬çnginxæå¡å¨æåç¬è¿è¡ä¸ç»nginxè¿ç¨ï¼èæä¸»æºæä¾äºå¨åä¸å°æå¡å¨ï¼åä¸ç»nginxè¿ç¨ä¸è¿è¡å¤ä¸ªç½ç«çåè½ãnginxå¯ä»¥éç½®å¤ç§ç±»åçèæä¸»æºï¼åå«æ¯åºäºipçèæä¸»æºãåºäºååçèæä¸»æºãåºäºç«¯å£çèæä¸»æºã\n\nä½¿ç¨nginxæ­å»ºèæä¸»æºæå¡å¨æ¶ï¼æ¯ä¸ªèæwebç«ç¹æ¥æç¬ç«ç"server{ }"éç½®æ®µï¼åèªçå¬çipå°åãç«¯å£å·å¯ä»¥åç¬æå®ï¼å½ç¶ç½ç«åç§°ä¹æ¯ä¸åçã\n\n\n# 5.1 åºäºååçèæä¸»æº (ä½¿ç¨çæå¤)\n\néç½®æä»¶æ¡ä¾ï¼\n\nserver {\t\t\t# å å¥ www.bt.com\n    listen 80;\n    server_name www.bt.com;\t\t# çå¬åå\n    charset utf-8;\n    access_log logs/www.bt.access.log;\t# æ¥å¿æä»¶\n    location / {\n        root /var/www/html/btcom;\t# www.bt.com çå·¥ä½ç®å½\n        index index.html index.htm;\n    }\n\terror_page 500 502 503 504 /50x.html;\n\tlocation = 50x.html {\n\t\troot html;\n\t}\n}\nserver {\t\t\t# å å¥ www.test.com å¯¹åºçç«ç¹\n    listen 80;\n    server_name www.test.com;\t\t# çå¬åå\n    charset utf-8;\n    access_log logs/www.test.access.log;\t# æ¥å¿æä»¶\n    location / {\n        root /var/www/html/testcom;\t# www.test.com çå·¥ä½ç®å½\n        index index.html index.htm;\n    }\n\terror_page 500 502 503 504 /50x.html;\n\tlocation = 50x.html {\n\t\troot html;\n\t}\n}\n\n\n * é¦åå»ºç«2ä¸ªç½ç«çæ ¹ç®å½\n * ä¿®æ¹éç½®æä»¶å¦ä¸\n * å®¢æ·ç«¯ä½¿ç¨ååè®¿é®éªè¯å³å¯\n\n\n# 5.2 åºäºipçèæä¸»æº\n\néç½®æä»¶æ¡ä¾ï¼\n\nserver {\n\tlisten 192.168.9.158:80;\t# çå¬ 192.168.9.158\n\tserver_name 192.168.9.158:80;\n\t................ # çç¥åå®¹\n}\nserver {\n\tlisten 192.168.9.110:80;\t# çå¬ 192.168.9.110\n\tserver_name 192.168.9.110:80;\n\t................ # çç¥åå®¹\n}\n\n\n * é¦åç»æå¡å¨éç½®2ä¸ªä¸åçipå°å\n * ä¿®æ¹éç½®æä»¶å¦ä¸\n * å®¢æ·ç«¯è®¿é®æµè¯å³å¯\n\n\n# 5.3 åºäºç«¯å£çèæä¸»æº\n\néç½®æä»¶æ¡ä¾ï¼\n\nserver {\n\tlisten 192.168.9.158:6666;\t# çå¬ 6666 ç«¯å£\n\tserver_name 192.168.9.158:6666;\t# ååä¹å¯\n\t................ # çç¥åå®¹\n}\nserver {\n\tlisten 192.168.9.158:8888;\t# çå¬ 8888 ç«¯å£\n\tserver_name 192.168.9.158:8888;\t# ååä¹å¯\n\t................ # çç¥åå®¹\n}\n\n\n * ä¿®æ¹éç½®æä»¶\n * é²ç«å¢æ¾è¡ä»¥ä¸ç«¯å£\n * å®¢æ·ç«¯ä½¿ç¨ä¸åçç«¯å£è¿è¡æµè¯å³å¯',charsets:{cjk:!0}},{title:"LNMPç¯å¢é¨ç½²",frontmatter:{},regularPath:"/Nginx/03_LNMP%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2/2.LNMP%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2.html",relativePath:"Nginx/03_LNMPç¯å¢é¨ç½²/2.LNMPç¯å¢é¨ç½².md",key:"v-fcb7d568",path:"/nginx/03_lnmphuan-jing-bu-shu/2.lnmphuan-jing-bu-shu.html",headers:[{level:2,title:"1. å®è£æä½ç³»ç»",slug:"_1-å®è£æä½ç³»ç»",normalizedTitle:"1. å®è£æä½ç³»ç»",charIndex:177},{level:2,title:"2.ç³»ç»åå§åéç½®",slug:"_2-ç³»ç»åå§åéç½®",normalizedTitle:"2.ç³»ç»åå§åéç½®",charIndex:414},{level:2,title:"3. å®è£éç½®Nginxç½ç«æå¡å¨",slug:"_3-å®è£éç½®nginxç½ç«æå¡å¨",normalizedTitle:"3. å®è£éç½®nginxç½ç«æå¡å¨",charIndex:1344},{level:3,title:"3.1 å®è£nginxæå¡",slug:"_3-1-å®è£nginxæå¡",normalizedTitle:"3.1 å®è£nginxæå¡",charIndex:1366},{level:3,title:"3.2 è°æ´nginxéç½®æä»¶",slug:"_3-2-è°æ´nginxéç½®æä»¶",normalizedTitle:"3.2 è°æ´nginxéç½®æä»¶",charIndex:3137},{level:2,title:"4.å®è£éç½®MySQLæ°æ®åºæå¡å¨",slug:"_4-å®è£éç½®mysqlæ°æ®åºæå¡å¨",normalizedTitle:"4.å®è£éç½®mysqlæ°æ®åºæå¡å¨",charIndex:6650},{level:3,title:"4.1 å®è£mysqlæº",slug:"_4-1-å®è£mysqlæº",normalizedTitle:"4.1 å®è£mysqlæº",charIndex:6921},{level:3,title:"4.2 å®è£mysqlæ°æ®åº",slug:"_4-2-å®è£mysqlæ°æ®åº",normalizedTitle:"4.2 å®è£mysqlæ°æ®åº",charIndex:7130},{level:3,title:"4.3 MySQLæ°æ®åºåå§å(ä»MySQL 5.7å¼å§)",slug:"_4-3-mysqlæ°æ®åºåå§å-ä»mysql-5-7å¼å§",normalizedTitle:"4.3 mysqlæ°æ®åºåå§å(ä»mysql 5.7å¼å§)",charIndex:8377},{level:3,title:"4.4 éç½®å¼æºå¯å¨mysqlæå¡",slug:"_4-4-éç½®å¼æºå¯å¨mysqlæå¡",normalizedTitle:"4.4 éç½®å¼æºå¯å¨mysqlæå¡",charIndex:9036},{level:2,title:"5. å®è£éç½®PHPç¯å¢",slug:"_5-å®è£éç½®phpç¯å¢",normalizedTitle:"5. å®è£éç½®phpç¯å¢",charIndex:9781},{level:3,title:"5.1 å®è£php7çYUMæº",slug:"_5-1-å®è£php7çyumæº",normalizedTitle:"5.1 å®è£php7çyumæº",charIndex:9798},{level:3,title:"5.2 å®è£PHP7.2",slug:"_5-2-å®è£php7-2",normalizedTitle:"5.2 å®è£php7.2",charIndex:9970},{level:3,title:"5.3 å®è£php-fpmå¹¶å¯å¨",slug:"_5-3-å®è£php-fpmå¹¶å¯å¨",normalizedTitle:"5.3 å®è£php-fpmå¹¶å¯å¨",charIndex:10114},{level:3,title:"5.4 è°æ´php-fpm éç½®æä»¶",slug:"_5-4-è°æ´php-fpm-éç½®æä»¶",normalizedTitle:"5.4 è°æ´php-fpm éç½®æä»¶",charIndex:11001},{level:3,title:"5.5 è°æ´nginxéç½®æä»¶",slug:"_5-5-è°æ´nginxéç½®æä»¶",normalizedTitle:"5.5 è°æ´nginxéç½®æä»¶",charIndex:11088},{level:3,title:"5.6 åå»ºMySQLæ°æ®åºç®¡çå",slug:"_5-6-åå»ºmysqlæ°æ®åºç®¡çå",normalizedTitle:"5.6 åå»ºmysqlæ°æ®åºç®¡çå",charIndex:11762},{level:2,title:"6.LNMPç¯å¢æµè¯",slug:"_6-lnmpç¯å¢æµè¯",normalizedTitle:"6.lnmpç¯å¢æµè¯",charIndex:12023},{level:3,title:"6.1 æµè¯LNMPç¯å¢",slug:"_6-1-æµè¯lnmpç¯å¢",normalizedTitle:"6.1 æµè¯lnmpç¯å¢",charIndex:12038},{level:3,title:"6.2 æµè¯æ¯å¦å¯ä»¥è¿æ¥MySQLæ°æ®åºæä»¶",slug:"_6-2-æµè¯æ¯å¦å¯ä»¥è¿æ¥mysqlæ°æ®åºæä»¶",normalizedTitle:"6.2 æµè¯æ¯å¦å¯ä»¥è¿æ¥mysqlæ°æ®åºæä»¶",charIndex:12138},{level:2,title:"7. é¨ç½²å¼æºè®ºåDiscuz",slug:"_7-é¨ç½²å¼æºè®ºådiscuz",normalizedTitle:"7. é¨ç½²å¼æºè®ºådiscuz",charIndex:12388},{level:3,title:"7.1 ä¸è½½Discuzè®ºåæä»¶",slug:"_7-1-ä¸è½½discuzè®ºåæä»¶",normalizedTitle:"7.1 ä¸è½½discuzè®ºåæä»¶",charIndex:12408},{level:3,title:"7.2 å»ºç«Discuzè®ºåæç¨æ°æ®åº",slug:"_7-2-å»ºç«discuzè®ºåæç¨æ°æ®åº",normalizedTitle:"7.2 å»ºç«discuzè®ºåæç¨æ°æ®åº",charIndex:12744},{level:3,title:"7.3 å®è£Discuzè®ºå",slug:"_7-3-å®è£discuzè®ºå",normalizedTitle:"7.3 å®è£discuzè®ºå",charIndex:13354},{level:3,title:"7.4 å¯ä»¥ä½¿ç¨è®ºåç®¡çåadminç¨æ·åè®ºåç®¡ç",slug:"_7-4-å¯ä»¥ä½¿ç¨è®ºåç®¡çåadminç¨æ·åè®ºåç®¡ç",normalizedTitle:"7.4 å¯ä»¥ä½¿ç¨è®ºåç®¡çåadminç¨æ·åè®ºåç®¡ç",charIndex:13752}],headersStr:"1. å®è£æä½ç³»ç» 2.ç³»ç»åå§åéç½® 3. å®è£éç½®Nginxç½ç«æå¡å¨ 3.1 å®è£nginxæå¡ 3.2 è°æ´nginxéç½®æä»¶ 4.å®è£éç½®MySQLæ°æ®åºæå¡å¨ 4.1 å®è£mysqlæº 4.2 å®è£mysqlæ°æ®åº 4.3 MySQLæ°æ®åºåå§å(ä»MySQL 5.7å¼å§) 4.4 éç½®å¼æºå¯å¨mysqlæå¡ 5. å®è£éç½®PHPç¯å¢ 5.1 å®è£php7çYUMæº 5.2 å®è£PHP7.2 5.3 å®è£php-fpmå¹¶å¯å¨ 5.4 è°æ´php-fpm éç½®æä»¶ 5.5 è°æ´nginxéç½®æä»¶ 5.6 åå»ºMySQLæ°æ®åºç®¡çå 6.LNMPç¯å¢æµè¯ 6.1 æµè¯LNMPç¯å¢ 6.2 æµè¯æ¯å¦å¯ä»¥è¿æ¥MySQLæ°æ®åºæä»¶ 7. é¨ç½²å¼æºè®ºåDiscuz 7.1 ä¸è½½Discuzè®ºåæä»¶ 7.2 å»ºç«Discuzè®ºåæç¨æ°æ®åº 7.3 å®è£Discuzè®ºå 7.4 å¯ä»¥ä½¿ç¨è®ºåç®¡çåadminç¨æ·åè®ºåç®¡ç",content:"# LNMPç¯å¢é¨ç½²\n\nLNMPæ¯æä¸ç»éå¸¸ä¸ èµ·ä½¿ç¨æ¥è¿è¡å¨æç½ç«æèæå¡å¨çèªç±è½¯ä»¶åç§°é¦å­æ¯ç¼©åãLæLinuxï¼NæNginxï¼Mä¸è¬æMySQLï¼ä¹å¯ä»¥æMariaDB, Pä¸è¬æPHPï¼ä¹å¯ä»¥æPerlæPythonã å¯ä»¥å¨ç¬ç«ä¸»æºä¸è½»æ¾çå®è£LNMPçäº§ç¯å¢ãæ¬æ¡ä¾ä¸»è¦ä»ç»LNMPæ¡æ¶å®è£æ¹æ³ä»¥åé¨ç½²Discuzç¤¾åºè®ºååºç¨ã\n\n\n# 1. å®è£æä½ç³»ç»\n\n * ä½¿ç¨VMware workstationæ°å»ºèææº\n\n * å®è£CentOS7.5ç³»ç»ï¼æå°åå®è£ï¼è®°å¾è¦éä¸­å¼åå·¥å·(development tools)\n\n * å®è£bash-completionä»¥ä¾¿å¯ä»¥å½ä»¤è¡¥å¨\n   \n   $ yum install bash-completion -y\n   \n\n * å®è£vimç­åºç¡å\n   \n   $ yum install vim wget net-tools curl -y\n   \n\n\n# 2.ç³»ç»åå§åéç½®\n\n * Linux ç³»ç»èµæºè°é\n   \n   $ cat /etc/security/limits.conf \n   *               soft    nofile            65535\n   *               soft    nofile            65535\n   \n\n * ä¿®æ¹ä¸»æºåå­\n   \n   $ hostnamectl set-hostname www.lnmp.com\n   \n\n * éç½®ç½ç»ãè®¾ç½®åºå®IPå°åï¼ç½å³åDNSæå¡å¨å°å\n   \n   $ nmcli connection modify ens33 ipv4.addresses 192.168.154.137/24 ipv4.gateway 192.168.154.2 ipv4.dns 192.168.154.2 autoconnect yes\n   $ nmcli connection up ens33\n   Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/5)\n   \n\n * å³é­Selinux\n   \n   $ vi /etc/selinux/config\n   SELINUX=disabled\n   \n\n * yumæºçéç½®ï¼å¯ä»¥æ ¹æ®ä¸å¡éæ±æ¥å®è£epelã nginxã remiæºï¼ä¸ä¿®æ¹éç½®åæ°ã\n   \n   $ yum install epel-release -y\n   $ rpm -ivh http://rpms.remirepo.net/enterprise/remi-release-7.rpm\n   $ vi remi.repo\n   [epel]\n   enabled=1\n   \n\n * DNS è§£æååè®¾ç½®\n   \n   $ cat /etc/resolve.conf \n   nameserver 192.168.154.2\n   nameserver 202.106.0.20\n   \n\n\n# 3. å®è£éç½®Nginxç½ç«æå¡å¨\n\n\n# 3.1 å®è£nginxæå¡\n\n * è®¾ç½®nginx yumæº\n   \n   $ yum install yum-utils -y\n   $ cat /etc/yum.repos.d/nginx.repo \n   [nginx-stable]\n   name=nginx stable repo\n   baseurl=http://nginx.org/packages/centos/$releasever/$basearch/\n   gpgcheck=1\n   enabled=1\n   gpgkey=https://nginx.org/keys/nginx_signing.key\n   \n   [nginx-mainline]\n   name=nginx mainline repo\n   baseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/\n   gpgcheck=1\n   enabled=0\n   gpgkey=https://nginx.org/keys/nginx_signing.key\n   \n\n * å®è£nginxæå¡ï¼ä¼å®è£1.16.0çæ¬\n   \n   $ yum install nginx -y\n   \n\n * è®¾ç½®nginxå¼æºå¯å¨å¹¶å¼å¯nginxæå¡\n   \n   $ systemctl enable nginx\n   Created symlink from /etc/systemd/system/multi-user.target.wants/nginx.service to /usr/lib/systemd/system/nginx.service.\n   $ systemctl start nginx\n   $ systemctl status nginx\n   â nginx.service - nginx - high performance web server\n      Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; vendor preset: disabled)\n      Active: active (running) since Tue 2020-04-14 12:01:46 EDT; 6s ago\n        Docs: http://nginx.org/en/docs/\n     Process: 20355 ExecStart=/usr/sbin/nginx -c /etc/nginx/nginx.conf (code=exited, status=0/SUCCESS)\n    Main PID: 20356 (nginx)\n      CGroup: /system.slice/nginx.service\n              ââ20356 nginx: master process /usr/sbin/nginx -c /etc/nginx/nginx.conf\n              ââ20357 nginx: worker process\n   \n   Apr 14 12:01:46 www.lnmp.com systemd[1]: Starting nginx - high performance web server...\n   Apr 14 12:01:46 www.lnmp.com systemd[1]: Started nginx - high performance web server.\n   \n\n * é²ç«å¢æ¾è¡httpæå¡\n   \n   $ firewall-cmd --add-service=http --permanent\n   success\n   $ firewall-cmd --add-service=http\n   success\n   \n\n * æµè¯æ¯å¤å¯ä»¥è®¿é®nginx\n   \n   $ curl 192.168.154.137\n   \n   \n   æèæ¾ä¸ªå®¢æ·ç«¯ï¼ä½¿ç¨æµè§å¨è®¿é®æå¡å¨å°å\n\n\n# 3.2 è°æ´nginxéç½®æä»¶\n\n(æä»¶å¤¹ædefault.confånginx.conf)\n\n$ vim /etc/nginx/nginx.conf\nuser  nginx nginx;\nworker_processes  4;\nworker_cpu_affinity 00000001 00000010 00000100 00001000;\nworker_rlimit_nofile 65535;\n\nerror_log  /var/log/nginx/error.log warn;\npid        /var/run/nginx.pid;\n\n\nevents {\n    use epoll;\n    worker_connections  10240;\n}\n\n\nhttp {\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n    server_names_hash_bucket_size 128;\n    client_header_buffer_size 2k;\n    large_client_header_buffers 4 4k;\n    client_max_body_size 8m;\n\n    log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n                      '$status $body_bytes_sent \"$http_referer\" '\n                      '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    access_log  /var/log/nginx/access.log  main;\n\n    sendfile        on;\n    tcp_nopush     on;\n    tcp_nodelay on;\n    keepalive_timeout  65;\n    fastcgi_cache_path /etc/nginx/fastcgi_cache levels=1:2 keys_zone=TEST:10m inactive=5m;\n    fastcgi_cache_key http://$host$request_uri;\n    fastcgi_connect_timeout 300;\n    fastcgi_send_timeout 300;\n    fastcgi_read_timeout 300;\n    fastcgi_buffer_size 4k;\n    fastcgi_buffers 8 4k;\n    fastcgi_busy_buffers_size 8k;\n    fastcgi_temp_file_write_size 8k;\n    fastcgi_cache TEST;\n    fastcgi_cache_valid 200 302 1h;\n    fastcgi_cache_valid 301 1d;\n    fastcgi_cache_valid any 1m;\n    fastcgi_cache_min_uses 1;\n    fastcgi_cache_use_stale error timeout invalid_header http_500;\n    open_file_cache max=204800 inactive=20s;\n    open_file_cache_min_uses 1;\n    open_file_cache_valid 30s;\n\n    gzip  on;\n    gzip_min_length 1k;\n    gzip_buffers 4 16k;\n    gzip_http_version 1.0;\n    gzip_comp_level 2;\n    gzip_types text/plain application/x-javascript text/css application/xml;\n    gzip_vary on;\n\n    include /etc/nginx/conf.d/*.conf;\n}\n\n\n$ vim /etc/nginx/conf.d/default.conf\nserver {\n    listen       80;\n    server_name  www.lnmp.com;\n\n    #charset koi8-r;\n    #access_log  /var/log/nginx/host.access.log  main;\n\n    location / {\n        root   /usr/share/nginx/html;\n        index  index.html index.htm;\n    }\n    location /status\n    {\n        stub_status on;\n    }\n\n    #error_page  404              /404.html;\n\n    # redirect server error pages to the static page /50x.html\n    #\n    error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n        root   /opt/nginx/html;\n    }\n    location ~ .*/.(gif|jpg|gpeg|png|bmp|swf|js|css)$\n    {\n        expires 30d;\n    }\n\n    # proxy the PHP scripts to Apache listening on 127.0.0.1:80\n    #\n    #location ~ \\.php$ {\n    #    proxy_pass   http://127.0.0.1;\n    #}\n\n    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n    #\n    #location ~ \\.php$ {\n    #    root           html;\n    #    fastcgi_pass   127.0.0.1:9000;\n    #    fastcgi_index  index.php;\n    #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;\n    #    include        fastcgi_params;\n    #}\n\n    # deny access to .htaccess files, if Apache's document root\n    # concurs with nginx's one\n    #\n    #location ~ /\\.ht {\n    #    deny  all;\n    #}\n}\n\n\n * ç±äºæ´æ¹äºæ ¹ç®å½ï¼æä»¥éè¦åå»ºæ°çæ ¹ç®å½\n   \n   $ mkdir /opt/nginx/html -p\n   $ cp /usr/share/nginx/html/* /opt/nginx/html/\n   $ ll /opt/nginx/html/\n   total 8\n   -rw-r--r--. 1 root root 494 Apr 14 12:48 50x.html\n   -rw-r--r--. 1 root root 612 Apr 14 12:48 index.html\n   \n\n * æ¹åäºæå¡éç½®æä»¶ï¼æä»¥éè¦éæ°å¯å¨æå¡\n   \n   $ nginx -t #æ£æµéç½®æä»¶è¯­æ³æ¯å¦æéè¯¯\n   $ systemctl restart nginx\n   $ systemctl status nginx\n   \n\n\n# 4.å®è£éç½®MySQLæ°æ®åºæå¡å¨\n\nMySQLæ¯ç®åä½¿ç¨æåä¿¡èµåå¹¿æ³ä½¿ç¨çå¼æºæ°æ®åºå¹³å°ãå¨çåå¤§æåæ¬¢è¿åé«æµéçç½ç«ä¸­æ10ä¸ªä¾èµäºMySQLãMySQL 8.0éè¿æä¾å¨é¢çæ¹è¿å»ºç«å¨è¿ä¸å¿å¤´ä¸ï¼æ¨å¨ä½¿åæ°çDBAåå¼åäººåè½å¤å¨ææ°ä¸ä»£çå¼åæ¡æ¶åç¡¬ä»¶ä¸åå»ºåé¨ç½²ä¸ä¸ä»£Webï¼åµå¥å¼ï¼ç§»å¨åäº/ SaaS/ PaaS/ DBaaSåºç¨ç¨åºå¹³å°ãMySQL 8.0äº®ç¹åæ¬ï¼\n\n * MySQLææ¡£å­å¨\n * äº¤ææ°æ®å­å¸\n * SQLè§è²\n * é»è®¤ä¸ºutf8mb4\n * å¬ç¨è¡¨è¡¨è¾¾å¼\n * çªå£åè½\n * ä»¥åæ´å¤\n\n\n# 4.1 å®è£mysqlæº\n\n * ä¸è½½MySQL YUM ä»åºï¼\n   \n   $ wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm\n   \n\n * å®è£MySQL YUM ä»åºï¼\n   \n   $ rpm -Uvh mysql80-community-release-el7-3.noarch.rpm\n   \n\n\n# 4.2 å®è£mysqlæ°æ®åº\n\n * é»è®¤å®è£ææ°GAçMySQL\n\n * å¯ä»¥éè¿è¿è¡ä»¥ä¸å½ä»¤å¹¶æ£æ¥å¶è¾åºæ¥éªè¯æ¯å¦å·²å¯ç¨åç¦ç¨äºæ­£ç¡®çå­å­å¨åº\n   \n   $ yum repolist enabled | grep mysql\n   Repository 'epel' is missing name in configuration, using id\n   Repository epel is listed more than once in the configuration\n   mysql-connectors-community/x86_64 MySQL Connectors Community                 141\n   mysql-tools-community/x86_64      MySQL Tools Community                      105\n   mysql80-community/x86_64          MySQL 8.0 Community Server                 161\n   \n\n * å®è£MySQL\n   \n   $ yum remove mariadb-libs -y\n   $ yum install mysql-community-server -y\n   $ systemctl start mysqld\n   $ systemctl status mysqld\n   â mysqld.service - MySQL Server\n      Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)\n      Active: active (running) since Tue 2020-04-14 13:18:59 EDT; 16s ago\n        Docs: man:mysqld(8)\n              http://dev.mysql.com/doc/refman/en/using-systemd.html\n    Main PID: 21009 (mysqld)\n      Status: \"Server is operational\"\n      CGroup: /system.slice/mysqld.service\n              ââ21009 /usr/sbin/mysqld\n   \n   Apr 14 13:18:55 www.lnmp.com systemd[1]: Starting MySQL Server...\n   Apr 14 13:18:59 www.lnmp.com systemd[1]: Started MySQL Server.\n   \n\n\n# 4.3 MySQLæ°æ®åºåå§å(ä»MySQL 5.7å¼å§)\n\nå¨æå¡å¨åå§å¯å¨æ¶ï¼å¦ææå¡å¨çæ°æ®ç®å½ä¸ºç©ºï¼åä¼åçä»¥ä¸æåµï¼\n\n * æå¡å¨å·²åå§åã\n\n * å¨æ°æ®ç®å½ä¸­çæSSLè¯ä¹¦åå¯é¥æä»¶ã\n\n * è¯¥validate_ passwordæä»¶å®è£å¹¶å¯ç¨ã\n\n * å°'root'@'localhost åå»ºä¸ä¸ªè¶çº§ç¨æ·å¸æ·ã è®¾ç½®è¶çº§ç¨æ·çå¯ç å¹¶å°å¶å­å¨å¨éè¯¯æ¥å¿æä»¶ä¸­ãè¦æ¾ç¤ºå®ï¼è¯·ä½¿ç¨ä»¥ä¸å½ä»¤ï¼\n   \n   $ grep 'temporary password' /var/log/mysqld.log\n   2020-04-14T17:18:57.123362Z 5 [Note] [MY-010454] [Server] A temporary password is generated for root@localhost: tqlbNLQ*v5j1\n   \n   \n   â éè¿ä½¿ç¨çæçä¸´æ¶å¯ç ç»å½å¹¶ä¸ºè¶çº§ç¨æ·å¸æ·è®¾ç½®èªå®ä¹å¯ç ï¼å°½å¿«æ´æ¹rootå¯ç ï¼\n   \n   $ mysql -uroot -ptqlbNLQ*v5j1\n   # è¿å¥æ°æ®åºåæ´æ¹å¯ç \n   > alter user 'root'@'localhost' identified by 'Com.123456';\n   # æ³¨æ: MySQLçvalidate_ password æä»¶é»è®¤å®è£ãè¿å°è¦æ±å¯ç åå«è³å°ä¸ä¸ªå¤§åå­æ¯ï¼ä¸ä¸ªå°åå­æ¯ï¼ä¸ä¸ªæ°å­åä¸ä¸ªç¹æ®å­ç¬¦ï¼å¹¶ä¸å¯ç æ»é¿åº¦è³å°ä¸º8ä¸ªå­ç¬¦ã\n   \n\n\n# 4.4 éç½®å¼æºå¯å¨mysqlæå¡\n\n$ systemctl enable mysqld\n$ systemctl restart mysqld\n$ systemctl status mysqld\nâ mysqld.service - MySQL Server\n   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)\n   Active: active (running) since Wed 2020-04-15 07:38:02 EDT; 6s ago\n     Docs: man:mysqld(8)\n           http://dev.mysql.com/doc/refman/en/using-systemd.html\n  Process: 21314 ExecStartPre=/usr/bin/mysqld_pre_systemd (code=exited, status=0/SUCCESS)\n Main PID: 21338 (mysqld)\n   Status: \"Server is operational\"\n   CGroup: /system.slice/mysqld.service\n           ââ21338 /usr/sbin/mysqld\n\nApr 15 07:38:01 www.lnmp.com systemd[1]: Starting MySQL Server...\nApr 15 07:38:02 www.lnmp.com systemd[1]: Started MySQL Server.\n\n\n\n# 5. å®è£éç½®PHPç¯å¢\n\n\n# 5.1 å®è£php7çYUMæº\n\n$ rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\n$ rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm\n\n\n\n# 5.2 å®è£PHP7.2\n\n$ yum install php72w php72w-cli php72w-common php72w-gd php72w-ldap php72w-mbstring php72w-mcrypt php72w-mysql php72w-pdo -y\n\n\n\n# 5.3 å®è£php-fpmå¹¶å¯å¨\n\n$ yum install php72w-fpm php72w-opcache -y\n$ systemctl enable php-fpm\n$ systemctl start php-fpm\n$ systemctl status php-fpm\nâ php-fpm.service - The PHP FastCGI Process Manager\n   Loaded: loaded (/usr/lib/systemd/system/php-fpm.service; enabled; vendor preset: disabled)\n   Active: active (running) since Wed 2020-04-15 08:23:23 EDT; 4s ago\n Main PID: 21961 (php-fpm)\n   Status: \"Ready to handle connections\"\n   CGroup: /system.slice/php-fpm.service\n           ââ21961 php-fpm: master process (/etc/php-fpm.conf)\n           ââ21962 php-fpm: pool www\n           ââ21963 php-fpm: pool www\n           ââ21964 php-fpm: pool www\n           ââ21965 php-fpm: pool www\n           ââ21966 php-fpm: pool www\n\nApr 15 08:23:23 www.lnmp.com systemd[1]: Starting The PHP FastCGI Process Manager...\nApr 15 08:23:23 www.lnmp.com systemd[1]: Started The PHP FastCGI Process Manager.\n\n\n\n# 5.4 è°æ´php-fpm éç½®æä»¶\n\n$ vi /etc/php-fpm.d/www.conf\n[www]\nuser = nginx\ngroup = nginx\n\n\n\n# 5.5 è°æ´nginxéç½®æä»¶\n\n$ vi /etc/nginx/conf.d/default.conf \nlocation / {\n        root   /opt/nginx/html;\n        index  index.php index.html index.htm;\n     }\n    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n    #\n    location ~ \\.php$ {\n        root           /opt/nginx/html;\n        fastcgi_pass   127.0.0.1:9000;\n        fastcgi_index  index.php;\n    #   fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;\n    \tfastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n        include        fastcgi_params;\n\tfastcgi_cache TEST;\n\tfastcgi_cache_valid 300 302 1h;\n\tfastcgi_cache_valid 301 1d;\n\tfastcgi_cache_valid any 1m;\n    }\n\n\n\n# 5.6 åå»ºMySQLæ°æ®åºç®¡çå\n\nè®¤è¯æºå¶å¿é¡»æ¯mysql_native_ passwordï¼é»è®¤mysql8ä½¿ç¨caching_sha2_ passwordçèº«ä»½éªè¯æºå¶\n\n> create user 'dbadmin'@'%' identified with mysql_native_password by 'Com.123456';\n> grant all on *.* to 'dbadmin'@'%';\n> grant grant option on *.* to 'dbadmin'@'%';\n\n\n\n# 6.LNMPç¯å¢æµè¯\n\n\n# 6.1 æµè¯LNMPç¯å¢\n\n$ cat test.php \n<?php\nphpinfo();\n?>\n\n\n * å¨å®¢æ·ç«¯è®¿é® http://192.168.154.137/test.php\n\n\n\n\n# 6.2 æµè¯æ¯å¦å¯ä»¥è¿æ¥MySQLæ°æ®åºæä»¶\n\n$ cat mysql_test.php \n<?PHP\n    $conn=mysqli_connect(\"localhost\",\"dbadmin\",\"Com.123456\");\n    if($conn){\n        echo\"ok\";\n    }else{\n    echo\"error\";\n    }\n?>\n\n\n * å¨å®¢æ·ç«¯è®¿é®\n\n$ curl http://192.168.154.137/mysql_test.php\nok\n\n\n\n# 7. é¨ç½²å¼æºè®ºåDiscuz\n\n\n# 7.1 ä¸è½½Discuzè®ºåæä»¶\n\nDiscuzç°å¨å¨gitee.comè¿è¡ç»´æ¤ï¼å°åä¸ºï¼http://gitee.com/ComsenzDiscuz/DiscuzX\n\n * ä¸è½½æä»¶\n   \n   $ wget https://gitee.com/ComsenzDiscuz/DiscuzX/repository/archive/master.zip\n   \n\n * è§£åå¹¶ä¸ä¼ uploadç®å½å°ç½ç«æ ¹ç®å½\n   \n   $ unzip master.zip \n   $ cd DiscuzX/\n   $ ls\n   readme  README.md  upload  utility\n   $ mv upload/ /opt/nginx/html/\n   \n\n\n# 7.2 å»ºç«Discuzè®ºåæç¨æ°æ®åº\n\n$ mysql -uroot -pCom.123456\nmysql> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| sys                |\n+--------------------+\n4 rows in set (0.01 sec)\n\nmysql> create database discuz;\nQuery OK, 1 row affected (0.01 sec)\n\nmysql> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| discuz             |\n| information_schema |\n| mysql              |\n| performance_schema |\n| sys                |\n+--------------------+\n5 rows in set (0.00 sec)\n\n\n\n# 7.3 å®è£Discuzè®ºå\n\n * å¨å®¢æ·ç«¯ä½¿ç¨æµè§å¨æå¼ç½ç«å°åï¼http://192.168.154.137/upload/install ï¼ä¼æ¾ç¤ºä»¥ä¸å®è£çé¢ï¼\n   \n   \n\n * ç¹å»æåæ\n   \n   \n\n * è§£å³æææä»¶æéï¼éè¦å¯åæé\n   \n   $ cd /opt/nginx/html/upload/\n   $ chmod -R 777 ./config/ ./data/ ./uc_client/ ./uc_server/\n   \n\n * ç¶åå·æ°çé¢\n   \n   \n\n * éæ©å¨æ°å®è£ï¼ç¹å»ä¸ä¸æ­¥\n   \n   \n\n * æ·»å å®è£æ°æ®åºæå³ä¿¡æ¯å¿é¡»è¦æç§å®éæåµæ·»å ã\n   \n   \n\n * ä¼å¼å§å®è£è®ºåï¼å®è£å®æ¯åå°±å¯ä»¥è®¿é®è®ºåäºï¼å¯ä»¥æuploadæä»¶å¤¹éå½å\n   \n   $ mv upload/ discuz\n   \n\nè®¿é®è®ºå\n\n\n\n\n# 7.4 å¯ä»¥ä½¿ç¨è®ºåç®¡çåadminç¨æ·åè®ºåç®¡ç\n\nä½¿ç¨è®ºåç®¡çåè´¦å·adminç»å½ç®¡çä¸­å¿ï¼å°±å¯ä»¥ç®¡çè®ºåäºã",normalizedContent:"# lnmpç¯å¢é¨ç½²\n\nlnmpæ¯æä¸ç»éå¸¸ä¸ èµ·ä½¿ç¨æ¥è¿è¡å¨æç½ç«æèæå¡å¨çèªç±è½¯ä»¶åç§°é¦å­æ¯ç¼©åãlælinuxï¼nænginxï¼mä¸è¬æmysqlï¼ä¹å¯ä»¥æmariadb, pä¸è¬æphpï¼ä¹å¯ä»¥æperlæpythonã å¯ä»¥å¨ç¬ç«ä¸»æºä¸è½»æ¾çå®è£lnmpçäº§ç¯å¢ãæ¬æ¡ä¾ä¸»è¦ä»ç»lnmpæ¡æ¶å®è£æ¹æ³ä»¥åé¨ç½²discuzç¤¾åºè®ºååºç¨ã\n\n\n# 1. å®è£æä½ç³»ç»\n\n * ä½¿ç¨vmware workstationæ°å»ºèææº\n\n * å®è£centos7.5ç³»ç»ï¼æå°åå®è£ï¼è®°å¾è¦éä¸­å¼åå·¥å·(development tools)\n\n * å®è£bash-completionä»¥ä¾¿å¯ä»¥å½ä»¤è¡¥å¨\n   \n   $ yum install bash-completion -y\n   \n\n * å®è£vimç­åºç¡å\n   \n   $ yum install vim wget net-tools curl -y\n   \n\n\n# 2.ç³»ç»åå§åéç½®\n\n * linux ç³»ç»èµæºè°é\n   \n   $ cat /etc/security/limits.conf \n   *               soft    nofile            65535\n   *               soft    nofile            65535\n   \n\n * ä¿®æ¹ä¸»æºåå­\n   \n   $ hostnamectl set-hostname www.lnmp.com\n   \n\n * éç½®ç½ç»ãè®¾ç½®åºå®ipå°åï¼ç½å³ådnsæå¡å¨å°å\n   \n   $ nmcli connection modify ens33 ipv4.addresses 192.168.154.137/24 ipv4.gateway 192.168.154.2 ipv4.dns 192.168.154.2 autoconnect yes\n   $ nmcli connection up ens33\n   connection successfully activated (d-bus active path: /org/freedesktop/networkmanager/activeconnection/5)\n   \n\n * å³é­selinux\n   \n   $ vi /etc/selinux/config\n   selinux=disabled\n   \n\n * yumæºçéç½®ï¼å¯ä»¥æ ¹æ®ä¸å¡éæ±æ¥å®è£epelã nginxã remiæºï¼ä¸ä¿®æ¹éç½®åæ°ã\n   \n   $ yum install epel-release -y\n   $ rpm -ivh http://rpms.remirepo.net/enterprise/remi-release-7.rpm\n   $ vi remi.repo\n   [epel]\n   enabled=1\n   \n\n * dns è§£æååè®¾ç½®\n   \n   $ cat /etc/resolve.conf \n   nameserver 192.168.154.2\n   nameserver 202.106.0.20\n   \n\n\n# 3. å®è£éç½®nginxç½ç«æå¡å¨\n\n\n# 3.1 å®è£nginxæå¡\n\n * è®¾ç½®nginx yumæº\n   \n   $ yum install yum-utils -y\n   $ cat /etc/yum.repos.d/nginx.repo \n   [nginx-stable]\n   name=nginx stable repo\n   baseurl=http://nginx.org/packages/centos/$releasever/$basearch/\n   gpgcheck=1\n   enabled=1\n   gpgkey=https://nginx.org/keys/nginx_signing.key\n   \n   [nginx-mainline]\n   name=nginx mainline repo\n   baseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/\n   gpgcheck=1\n   enabled=0\n   gpgkey=https://nginx.org/keys/nginx_signing.key\n   \n\n * å®è£nginxæå¡ï¼ä¼å®è£1.16.0çæ¬\n   \n   $ yum install nginx -y\n   \n\n * è®¾ç½®nginxå¼æºå¯å¨å¹¶å¼å¯nginxæå¡\n   \n   $ systemctl enable nginx\n   created symlink from /etc/systemd/system/multi-user.target.wants/nginx.service to /usr/lib/systemd/system/nginx.service.\n   $ systemctl start nginx\n   $ systemctl status nginx\n   â nginx.service - nginx - high performance web server\n      loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; vendor preset: disabled)\n      active: active (running) since tue 2020-04-14 12:01:46 edt; 6s ago\n        docs: http://nginx.org/en/docs/\n     process: 20355 execstart=/usr/sbin/nginx -c /etc/nginx/nginx.conf (code=exited, status=0/success)\n    main pid: 20356 (nginx)\n      cgroup: /system.slice/nginx.service\n              ââ20356 nginx: master process /usr/sbin/nginx -c /etc/nginx/nginx.conf\n              ââ20357 nginx: worker process\n   \n   apr 14 12:01:46 www.lnmp.com systemd[1]: starting nginx - high performance web server...\n   apr 14 12:01:46 www.lnmp.com systemd[1]: started nginx - high performance web server.\n   \n\n * é²ç«å¢æ¾è¡httpæå¡\n   \n   $ firewall-cmd --add-service=http --permanent\n   success\n   $ firewall-cmd --add-service=http\n   success\n   \n\n * æµè¯æ¯å¤å¯ä»¥è®¿é®nginx\n   \n   $ curl 192.168.154.137\n   \n   \n   æèæ¾ä¸ªå®¢æ·ç«¯ï¼ä½¿ç¨æµè§å¨è®¿é®æå¡å¨å°å\n\n\n# 3.2 è°æ´nginxéç½®æä»¶\n\n(æä»¶å¤¹ædefault.confånginx.conf)\n\n$ vim /etc/nginx/nginx.conf\nuser  nginx nginx;\nworker_processes  4;\nworker_cpu_affinity 00000001 00000010 00000100 00001000;\nworker_rlimit_nofile 65535;\n\nerror_log  /var/log/nginx/error.log warn;\npid        /var/run/nginx.pid;\n\n\nevents {\n    use epoll;\n    worker_connections  10240;\n}\n\n\nhttp {\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n    server_names_hash_bucket_size 128;\n    client_header_buffer_size 2k;\n    large_client_header_buffers 4 4k;\n    client_max_body_size 8m;\n\n    log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n                      '$status $body_bytes_sent \"$http_referer\" '\n                      '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    access_log  /var/log/nginx/access.log  main;\n\n    sendfile        on;\n    tcp_nopush     on;\n    tcp_nodelay on;\n    keepalive_timeout  65;\n    fastcgi_cache_path /etc/nginx/fastcgi_cache levels=1:2 keys_zone=test:10m inactive=5m;\n    fastcgi_cache_key http://$host$request_uri;\n    fastcgi_connect_timeout 300;\n    fastcgi_send_timeout 300;\n    fastcgi_read_timeout 300;\n    fastcgi_buffer_size 4k;\n    fastcgi_buffers 8 4k;\n    fastcgi_busy_buffers_size 8k;\n    fastcgi_temp_file_write_size 8k;\n    fastcgi_cache test;\n    fastcgi_cache_valid 200 302 1h;\n    fastcgi_cache_valid 301 1d;\n    fastcgi_cache_valid any 1m;\n    fastcgi_cache_min_uses 1;\n    fastcgi_cache_use_stale error timeout invalid_header http_500;\n    open_file_cache max=204800 inactive=20s;\n    open_file_cache_min_uses 1;\n    open_file_cache_valid 30s;\n\n    gzip  on;\n    gzip_min_length 1k;\n    gzip_buffers 4 16k;\n    gzip_http_version 1.0;\n    gzip_comp_level 2;\n    gzip_types text/plain application/x-javascript text/css application/xml;\n    gzip_vary on;\n\n    include /etc/nginx/conf.d/*.conf;\n}\n\n\n$ vim /etc/nginx/conf.d/default.conf\nserver {\n    listen       80;\n    server_name  www.lnmp.com;\n\n    #charset koi8-r;\n    #access_log  /var/log/nginx/host.access.log  main;\n\n    location / {\n        root   /usr/share/nginx/html;\n        index  index.html index.htm;\n    }\n    location /status\n    {\n        stub_status on;\n    }\n\n    #error_page  404              /404.html;\n\n    # redirect server error pages to the static page /50x.html\n    #\n    error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n        root   /opt/nginx/html;\n    }\n    location ~ .*/.(gif|jpg|gpeg|png|bmp|swf|js|css)$\n    {\n        expires 30d;\n    }\n\n    # proxy the php scripts to apache listening on 127.0.0.1:80\n    #\n    #location ~ \\.php$ {\n    #    proxy_pass   http://127.0.0.1;\n    #}\n\n    # pass the php scripts to fastcgi server listening on 127.0.0.1:9000\n    #\n    #location ~ \\.php$ {\n    #    root           html;\n    #    fastcgi_pass   127.0.0.1:9000;\n    #    fastcgi_index  index.php;\n    #    fastcgi_param  script_filename  /scripts$fastcgi_script_name;\n    #    include        fastcgi_params;\n    #}\n\n    # deny access to .htaccess files, if apache's document root\n    # concurs with nginx's one\n    #\n    #location ~ /\\.ht {\n    #    deny  all;\n    #}\n}\n\n\n * ç±äºæ´æ¹äºæ ¹ç®å½ï¼æä»¥éè¦åå»ºæ°çæ ¹ç®å½\n   \n   $ mkdir /opt/nginx/html -p\n   $ cp /usr/share/nginx/html/* /opt/nginx/html/\n   $ ll /opt/nginx/html/\n   total 8\n   -rw-r--r--. 1 root root 494 apr 14 12:48 50x.html\n   -rw-r--r--. 1 root root 612 apr 14 12:48 index.html\n   \n\n * æ¹åäºæå¡éç½®æä»¶ï¼æä»¥éè¦éæ°å¯å¨æå¡\n   \n   $ nginx -t #æ£æµéç½®æä»¶è¯­æ³æ¯å¦æéè¯¯\n   $ systemctl restart nginx\n   $ systemctl status nginx\n   \n\n\n# 4.å®è£éç½®mysqlæ°æ®åºæå¡å¨\n\nmysqlæ¯ç®åä½¿ç¨æåä¿¡èµåå¹¿æ³ä½¿ç¨çå¼æºæ°æ®åºå¹³å°ãå¨çåå¤§æåæ¬¢è¿åé«æµéçç½ç«ä¸­æ10ä¸ªä¾èµäºmysqlãmysql 8.0éè¿æä¾å¨é¢çæ¹è¿å»ºç«å¨è¿ä¸å¿å¤´ä¸ï¼æ¨å¨ä½¿åæ°çdbaåå¼åäººåè½å¤å¨ææ°ä¸ä»£çå¼åæ¡æ¶åç¡¬ä»¶ä¸åå»ºåé¨ç½²ä¸ä¸ä»£webï¼åµå¥å¼ï¼ç§»å¨åäº/ saas/ paas/ dbaasåºç¨ç¨åºå¹³å°ãmysql 8.0äº®ç¹åæ¬ï¼\n\n * mysqlææ¡£å­å¨\n * äº¤ææ°æ®å­å¸\n * sqlè§è²\n * é»è®¤ä¸ºutf8mb4\n * å¬ç¨è¡¨è¡¨è¾¾å¼\n * çªå£åè½\n * ä»¥åæ´å¤\n\n\n# 4.1 å®è£mysqlæº\n\n * ä¸è½½mysql yum ä»åºï¼\n   \n   $ wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm\n   \n\n * å®è£mysql yum ä»åºï¼\n   \n   $ rpm -uvh mysql80-community-release-el7-3.noarch.rpm\n   \n\n\n# 4.2 å®è£mysqlæ°æ®åº\n\n * é»è®¤å®è£ææ°gaçmysql\n\n * å¯ä»¥éè¿è¿è¡ä»¥ä¸å½ä»¤å¹¶æ£æ¥å¶è¾åºæ¥éªè¯æ¯å¦å·²å¯ç¨åç¦ç¨äºæ­£ç¡®çå­å­å¨åº\n   \n   $ yum repolist enabled | grep mysql\n   repository 'epel' is missing name in configuration, using id\n   repository epel is listed more than once in the configuration\n   mysql-connectors-community/x86_64 mysql connectors community                 141\n   mysql-tools-community/x86_64      mysql tools community                      105\n   mysql80-community/x86_64          mysql 8.0 community server                 161\n   \n\n * å®è£mysql\n   \n   $ yum remove mariadb-libs -y\n   $ yum install mysql-community-server -y\n   $ systemctl start mysqld\n   $ systemctl status mysqld\n   â mysqld.service - mysql server\n      loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)\n      active: active (running) since tue 2020-04-14 13:18:59 edt; 16s ago\n        docs: man:mysqld(8)\n              http://dev.mysql.com/doc/refman/en/using-systemd.html\n    main pid: 21009 (mysqld)\n      status: \"server is operational\"\n      cgroup: /system.slice/mysqld.service\n              ââ21009 /usr/sbin/mysqld\n   \n   apr 14 13:18:55 www.lnmp.com systemd[1]: starting mysql server...\n   apr 14 13:18:59 www.lnmp.com systemd[1]: started mysql server.\n   \n\n\n# 4.3 mysqlæ°æ®åºåå§å(ä»mysql 5.7å¼å§)\n\nå¨æå¡å¨åå§å¯å¨æ¶ï¼å¦ææå¡å¨çæ°æ®ç®å½ä¸ºç©ºï¼åä¼åçä»¥ä¸æåµï¼\n\n * æå¡å¨å·²åå§åã\n\n * å¨æ°æ®ç®å½ä¸­çæsslè¯ä¹¦åå¯é¥æä»¶ã\n\n * è¯¥validate_ passwordæä»¶å®è£å¹¶å¯ç¨ã\n\n * å°'root'@'localhost åå»ºä¸ä¸ªè¶çº§ç¨æ·å¸æ·ã è®¾ç½®è¶çº§ç¨æ·çå¯ç å¹¶å°å¶å­å¨å¨éè¯¯æ¥å¿æä»¶ä¸­ãè¦æ¾ç¤ºå®ï¼è¯·ä½¿ç¨ä»¥ä¸å½ä»¤ï¼\n   \n   $ grep 'temporary password' /var/log/mysqld.log\n   2020-04-14t17:18:57.123362z 5 [note] [my-010454] [server] a temporary password is generated for root@localhost: tqlbnlq*v5j1\n   \n   \n   â éè¿ä½¿ç¨çæçä¸´æ¶å¯ç ç»å½å¹¶ä¸ºè¶çº§ç¨æ·å¸æ·è®¾ç½®èªå®ä¹å¯ç ï¼å°½å¿«æ´æ¹rootå¯ç ï¼\n   \n   $ mysql -uroot -ptqlbnlq*v5j1\n   # è¿å¥æ°æ®åºåæ´æ¹å¯ç \n   > alter user 'root'@'localhost' identified by 'com.123456';\n   # æ³¨æ: mysqlçvalidate_ password æä»¶é»è®¤å®è£ãè¿å°è¦æ±å¯ç åå«è³å°ä¸ä¸ªå¤§åå­æ¯ï¼ä¸ä¸ªå°åå­æ¯ï¼ä¸ä¸ªæ°å­åä¸ä¸ªç¹æ®å­ç¬¦ï¼å¹¶ä¸å¯ç æ»é¿åº¦è³å°ä¸º8ä¸ªå­ç¬¦ã\n   \n\n\n# 4.4 éç½®å¼æºå¯å¨mysqlæå¡\n\n$ systemctl enable mysqld\n$ systemctl restart mysqld\n$ systemctl status mysqld\nâ mysqld.service - mysql server\n   loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)\n   active: active (running) since wed 2020-04-15 07:38:02 edt; 6s ago\n     docs: man:mysqld(8)\n           http://dev.mysql.com/doc/refman/en/using-systemd.html\n  process: 21314 execstartpre=/usr/bin/mysqld_pre_systemd (code=exited, status=0/success)\n main pid: 21338 (mysqld)\n   status: \"server is operational\"\n   cgroup: /system.slice/mysqld.service\n           ââ21338 /usr/sbin/mysqld\n\napr 15 07:38:01 www.lnmp.com systemd[1]: starting mysql server...\napr 15 07:38:02 www.lnmp.com systemd[1]: started mysql server.\n\n\n\n# 5. å®è£éç½®phpç¯å¢\n\n\n# 5.1 å®è£php7çyumæº\n\n$ rpm -uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\n$ rpm -uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm\n\n\n\n# 5.2 å®è£php7.2\n\n$ yum install php72w php72w-cli php72w-common php72w-gd php72w-ldap php72w-mbstring php72w-mcrypt php72w-mysql php72w-pdo -y\n\n\n\n# 5.3 å®è£php-fpmå¹¶å¯å¨\n\n$ yum install php72w-fpm php72w-opcache -y\n$ systemctl enable php-fpm\n$ systemctl start php-fpm\n$ systemctl status php-fpm\nâ php-fpm.service - the php fastcgi process manager\n   loaded: loaded (/usr/lib/systemd/system/php-fpm.service; enabled; vendor preset: disabled)\n   active: active (running) since wed 2020-04-15 08:23:23 edt; 4s ago\n main pid: 21961 (php-fpm)\n   status: \"ready to handle connections\"\n   cgroup: /system.slice/php-fpm.service\n           ââ21961 php-fpm: master process (/etc/php-fpm.conf)\n           ââ21962 php-fpm: pool www\n           ââ21963 php-fpm: pool www\n           ââ21964 php-fpm: pool www\n           ââ21965 php-fpm: pool www\n           ââ21966 php-fpm: pool www\n\napr 15 08:23:23 www.lnmp.com systemd[1]: starting the php fastcgi process manager...\napr 15 08:23:23 www.lnmp.com systemd[1]: started the php fastcgi process manager.\n\n\n\n# 5.4 è°æ´php-fpm éç½®æä»¶\n\n$ vi /etc/php-fpm.d/www.conf\n[www]\nuser = nginx\ngroup = nginx\n\n\n\n# 5.5 è°æ´nginxéç½®æä»¶\n\n$ vi /etc/nginx/conf.d/default.conf \nlocation / {\n        root   /opt/nginx/html;\n        index  index.php index.html index.htm;\n     }\n    # pass the php scripts to fastcgi server listening on 127.0.0.1:9000\n    #\n    location ~ \\.php$ {\n        root           /opt/nginx/html;\n        fastcgi_pass   127.0.0.1:9000;\n        fastcgi_index  index.php;\n    #   fastcgi_param  script_filename  /scripts$fastcgi_script_name;\n    \tfastcgi_param  script_filename  $document_root$fastcgi_script_name;\n        include        fastcgi_params;\n\tfastcgi_cache test;\n\tfastcgi_cache_valid 300 302 1h;\n\tfastcgi_cache_valid 301 1d;\n\tfastcgi_cache_valid any 1m;\n    }\n\n\n\n# 5.6 åå»ºmysqlæ°æ®åºç®¡çå\n\nè®¤è¯æºå¶å¿é¡»æ¯mysql_native_ passwordï¼é»è®¤mysql8ä½¿ç¨caching_sha2_ passwordçèº«ä»½éªè¯æºå¶\n\n> create user 'dbadmin'@'%' identified with mysql_native_password by 'com.123456';\n> grant all on *.* to 'dbadmin'@'%';\n> grant grant option on *.* to 'dbadmin'@'%';\n\n\n\n# 6.lnmpç¯å¢æµè¯\n\n\n# 6.1 æµè¯lnmpç¯å¢\n\n$ cat test.php \n<?php\nphpinfo();\n?>\n\n\n * å¨å®¢æ·ç«¯è®¿é® http://192.168.154.137/test.php\n\n\n\n\n# 6.2 æµè¯æ¯å¦å¯ä»¥è¿æ¥mysqlæ°æ®åºæä»¶\n\n$ cat mysql_test.php \n<?php\n    $conn=mysqli_connect(\"localhost\",\"dbadmin\",\"com.123456\");\n    if($conn){\n        echo\"ok\";\n    }else{\n    echo\"error\";\n    }\n?>\n\n\n * å¨å®¢æ·ç«¯è®¿é®\n\n$ curl http://192.168.154.137/mysql_test.php\nok\n\n\n\n# 7. é¨ç½²å¼æºè®ºådiscuz\n\n\n# 7.1 ä¸è½½discuzè®ºåæä»¶\n\ndiscuzç°å¨å¨gitee.comè¿è¡ç»´æ¤ï¼å°åä¸ºï¼http://gitee.com/comsenzdiscuz/discuzx\n\n * ä¸è½½æä»¶\n   \n   $ wget https://gitee.com/comsenzdiscuz/discuzx/repository/archive/master.zip\n   \n\n * è§£åå¹¶ä¸ä¼ uploadç®å½å°ç½ç«æ ¹ç®å½\n   \n   $ unzip master.zip \n   $ cd discuzx/\n   $ ls\n   readme  readme.md  upload  utility\n   $ mv upload/ /opt/nginx/html/\n   \n\n\n# 7.2 å»ºç«discuzè®ºåæç¨æ°æ®åº\n\n$ mysql -uroot -pcom.123456\nmysql> show databases;\n+--------------------+\n| database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| sys                |\n+--------------------+\n4 rows in set (0.01 sec)\n\nmysql> create database discuz;\nquery ok, 1 row affected (0.01 sec)\n\nmysql> show databases;\n+--------------------+\n| database           |\n+--------------------+\n| discuz             |\n| information_schema |\n| mysql              |\n| performance_schema |\n| sys                |\n+--------------------+\n5 rows in set (0.00 sec)\n\n\n\n# 7.3 å®è£discuzè®ºå\n\n * å¨å®¢æ·ç«¯ä½¿ç¨æµè§å¨æå¼ç½ç«å°åï¼http://192.168.154.137/upload/install ï¼ä¼æ¾ç¤ºä»¥ä¸å®è£çé¢ï¼\n   \n   \n\n * ç¹å»æåæ\n   \n   \n\n * è§£å³æææä»¶æéï¼éè¦å¯åæé\n   \n   $ cd /opt/nginx/html/upload/\n   $ chmod -r 777 ./config/ ./data/ ./uc_client/ ./uc_server/\n   \n\n * ç¶åå·æ°çé¢\n   \n   \n\n * éæ©å¨æ°å®è£ï¼ç¹å»ä¸ä¸æ­¥\n   \n   \n\n * æ·»å å®è£æ°æ®åºæå³ä¿¡æ¯å¿é¡»è¦æç§å®éæåµæ·»å ã\n   \n   \n\n * ä¼å¼å§å®è£è®ºåï¼å®è£å®æ¯åå°±å¯ä»¥è®¿é®è®ºåäºï¼å¯ä»¥æuploadæä»¶å¤¹éå½å\n   \n   $ mv upload/ discuz\n   \n\nè®¿é®è®ºå\n\n\n\n\n# 7.4 å¯ä»¥ä½¿ç¨è®ºåç®¡çåadminç¨æ·åè®ºåç®¡ç\n\nä½¿ç¨è®ºåç®¡çåè´¦å·adminç»å½ç®¡çä¸­å¿ï¼å°±å¯ä»¥ç®¡çè®ºåäºã",charsets:{cjk:!0}},{title:"Nginxä¼ååé²çé¾",frontmatter:{},regularPath:"/Nginx/04_nginx%E4%BC%98%E5%8C%96%E7%AE%A1%E7%90%86/1.%20Nginx%E4%BC%98%E5%8C%96%E5%8F%8A%E9%98%B2%E7%9B%97%E9%93%BE/Nginx%E4%BC%98%E5%8C%96%E5%8F%8A%E9%98%B2%E7%9B%97%E9%93%BE.html",relativePath:"Nginx/04_nginxä¼åç®¡ç/1. Nginxä¼ååé²çé¾/Nginxä¼ååé²çé¾.md",key:"v-66bdd3e8",path:"/nginx/04_nginxyou-hua-guan-li/1.-nginxyou-hua-ji-fang-dao-lian/nginxyou-hua-ji-fang-dao-lian.html",headers:[{level:2,title:"1ãéèçæ¬ç­ä¿¡æ¯",slug:"_1ãéèçæ¬ç­ä¿¡æ¯",normalizedTitle:"1ãéèçæ¬ç­ä¿¡æ¯",charIndex:134},{level:3,title:"ä¼åæ¹å¼",slug:"ä¼åæ¹å¼",normalizedTitle:"ä¼åæ¹å¼",charIndex:461},{level:2,title:"2ãå·¥ä½è¿ç¨æ°ä¼å",slug:"_2ãå·¥ä½è¿ç¨æ°ä¼å",normalizedTitle:"2ãå·¥ä½è¿ç¨æ°ä¼å",charIndex:2087},{level:2,title:"3ãNginxäºä»¶å¤çæ¨¡å",slug:"_3ãnginxäºä»¶å¤çæ¨¡å",normalizedTitle:"3ãnginxäºä»¶å¤çæ¨¡å",charIndex:2580},{level:2,title:"4ãå¼å¯é«æä¼ è¾æ¨¡å¼",slug:"_4ãå¼å¯é«æä¼ è¾æ¨¡å¼",normalizedTitle:"4ãå¼å¯é«æä¼ è¾æ¨¡å¼",charIndex:3090},{level:2,title:"5ãè¿æ¥è¶æ¶æ¶é´",slug:"_5ãè¿æ¥è¶æ¶æ¶é´",normalizedTitle:"5ãè¿æ¥è¶æ¶æ¶é´",charIndex:3627},{level:2,title:"6ãfastcgiè°ä¼",slug:"_6ãfastcgiè°ä¼",normalizedTitle:"6ãfastcgiè°ä¼",charIndex:4924},{level:2,title:"7ãgzipè°ä¼",slug:"_7ãgzipè°ä¼",normalizedTitle:"7ãgzipè°ä¼",charIndex:7226},{level:2,title:"8ãéç½®ç½é¡µç¼å­æ¶é´",slug:"_8ãéç½®ç½é¡µç¼å­æ¶é´",normalizedTitle:"8ãéç½®ç½é¡µç¼å­æ¶é´",charIndex:8324},{level:2,title:"9ãé²çé¾",slug:"_9ãé²çé¾",normalizedTitle:"9ãé²çé¾",charIndex:8872},{level:2,title:"10ãåæ ¸åæ°ä¼å",slug:"_10ãåæ ¸åæ°ä¼å",normalizedTitle:"10ãåæ ¸åæ°ä¼å",charIndex:9258},{level:3,title:"åæ ¸ä¼åæ¡ä¾",slug:"åæ ¸ä¼åæ¡ä¾",normalizedTitle:"åæ ¸ä¼åæ¡ä¾",charIndex:10995},{level:3,title:"å®éªä¼åæ¡ä¾",slug:"å®éªä¼åæ¡ä¾",normalizedTitle:"å®éªä¼åæ¡ä¾",charIndex:12049},{level:3,title:"éªè¯ãååæµè¯",slug:"éªè¯ãååæµè¯",normalizedTitle:"éªè¯ãååæµè¯",charIndex:15059}],headersStr:"1ãéèçæ¬ç­ä¿¡æ¯ ä¼åæ¹å¼ 2ãå·¥ä½è¿ç¨æ°ä¼å 3ãNginxäºä»¶å¤çæ¨¡å 4ãå¼å¯é«æä¼ è¾æ¨¡å¼ 5ãè¿æ¥è¶æ¶æ¶é´ 6ãfastcgiè°ä¼ 7ãgzipè°ä¼ 8ãéç½®ç½é¡µç¼å­æ¶é´ 9ãé²çé¾ 10ãåæ ¸åæ°ä¼å åæ ¸ä¼åæ¡ä¾ å®éªä¼åæ¡ä¾ éªè¯ãååæµè¯",content:'# Nginxä¼ååé²çé¾\n\nå¨ä¼ä¸ä¿¡æ¯ååºç¨ç¯å¢ä¸­ï¼æå¡å¨çå®å¨æ§åååºéåº¦éè¦æ ¹æ®å®éæåµè¿è¡ç¸åºåæ°éç½®,ä»¥è¾¾å°æä¼çç¨æ·ä½éªãé»è®¤çNginxå®è£åæ°åªè½æä¾æåºæ¬çæå¡ï¼éè¦è°æ´å¦ç½é¡µç¼å­æ¶é´ãè¿æ¥è¶æ¶ãç½é¡µåç¼©ç­ç¸åºåæ°ï¼åæ¥åºæå¡å¨çæå¤§ä½ç¨ã\n\n\n# 1ãéèçæ¬ç­ä¿¡æ¯\n\nå¨çäº§ç¯å¢ä¸­ï¼éè¦éèNginxççæ¬å·ï¼ ä»¥é¿åæ³æ¼Nginxççæ¬ï¼ ä½¿æ»å»èä¸è½éå¯¹ç¹å®çæ¬è¿è¡æ»å»ã ä¼ååè®¿é®:\n\nHTTP/1.1 200 OK\nserver: nginx/1.16.0\t#çæ¬ä¿¡æ¯\nDate: Thu, 04 Jul 2019 15:06:57 GMT\nContent-Type: text/html; charset=utf-8\nContent-Length: 626\nLast-Modified: Monï¼ 01 Jul 2019 09:26:46 GMT\nConnection: keep-alive\nETag: "5d19d1d6-272"\nAccept-Ranges: bytes\n\n\n\n# ä¼åæ¹å¼\n\n * ä¿®æ¹ä¸»éç½®æä»¶\n   \n   å°Nginxçéç½®æä»¶ä¸­çserver_tokenséé¡¹å¼è®¾ç½®ä¸ºoff,å¦æ²¡æè¯¥éç½®é¡¹,å ä¸å³å¯ã\n   \n   http {\n   include\t\t mime.types;\n   default_type application/octet-stream;\n   server_tokens off ;\n   â¦â¦â¦â¦\t#çç¥å¾å¤åå®¹\n   }\n   \n\nä½¿ç¨äºphpå¤çå¨æç½é¡µ,å¦æphpéç½®æä»¶ä¸­éç½®äºfastcgi_param SERVER_SOFTWAREéé¡¹,åç¼è¾php-fpméç½®æä»¶ï¼å°fastcgi_param SERVER_SOFTWAREå¯¹åºçå¼ä¿®æ¹ä¸ºfastcgi_param SERVER_SOFTWARE nginxã\n\néå¯æå¡åï¼åæ¬¡æ¥çï¼\n\n  $ curl -I http://127.0.0.1\n  HTTP/1.1 200 OK\n  Server: nginx\n  Date: Tue, 21 Apr 2020 14:35:15 GMT\n  Content-Type: text/html\n  Content-Length: 612\n  Last-Modified: Tue, 21 Apr 2020 13:35:13 GMT\n  Connection: keep-alive\n  ETag: "5e9ef691-264"\n  Accept-Ranges: bytes\n\n\n * ç¼è¯å®è£åä¿®æ¹æºç \n   \n   ç¼è¯åçä¼åä¸»è¦æ¯ç¨æ¥ä¿®æ¹ç¨åºåç­ç­ï¼ç®çæ´æ¹æºç éèè½¯ä»¶åç§°åçæ¬å·ã\n   \n   1.è¿å¥è§£ååçæºç ç®å½,è¿è¡ä¿®æ¹\n   \n   ä¿®æ¹å\n   \n   $ vim src/core/nginx.h\n   #define NGINX_VERSION\t   "1.16.0"\t  #å®ä¹ççæ¬å·\n   #define NGINX_VER\t\t  "nginx/" NGINX_VERSION  #å®ä¹çè½¯ä»¶åç§°\n   \n   \n   ä¿®æ¹å\n   \n   $ vim src/core/nginx.h\n   #define NGINX_VERSION\t\t"7.0"\n   #define NGINX_VER\t\t\t"IIS/" NGINX_VERSION\n   \n   \n   2ãä¿®æ¹HTTPå¤´ä¿¡æ¯ä¸­çconnectionå­æ®µï¼é²æ­¢åæ¾å·ä½çæ¬å·\n   \n   æå±:éç¨httpå¤´,éç¨å¤´åå«è¯·æ±åååºæ¶æ¯é½æ¯æçå¤´ï¼éç¨å¤´åå«Cache-ControlãConnectionãDateã Pragmaã Transfer-Encodingã Upgradeã Viaã å¯¹éç¨å¤´çæ©å±è¦æ±éè®¯åæ¹é½æ¯ææ­¤æ©å±ï¼å¦æå­å¨ä¸æ¯æçéç¨å¤´, ä¸è¬å°ä¼ä½ä¸ºå®ä½å¤´å¤çãé£ä¹ä¹å°±æ¯è¯´æé¨åè®¾å¤æèæ¯è½¯ä»¶è½è·åå°connectionï¼ è¦éèå°±è¦å½»åº!\n   \n   ä¿®æ¹åï¼\n   \n   $ vim src/core/nginx.h\n   static u_char ngx_http_error_tail[] =\n   "<hr><center>nginx</center>" CRLF\n   "</body>" CRLF\n   \'</html>" CRLF\n   ;\n   \n\nä¿®æ¹åï¼\n\n  static u_char ngx_http_error_tail[] =\n  "<hr><center>IIS</center>" CRLF\n  "</body>" CRLF\n  "</html>" CRLF\n  ;\n\n\nä¿®æ¹å®æ¯åè¿è¡ç¼è¯å®è£ï¼å®è£å®æå,æ¥çæµè¯:\n\n  $ curl -I http://127.0.0.1\n  HTTP/1.1 200 OK\n  Server: IIS/7.0 \n  â¦â¦â¦â¦\t\t#çç¥å¾å¤åå®¹\n\n\n\n# 2ãå·¥ä½è¿ç¨æ°ä¼å\n\nNginxé»è®¤åªå¼å¯ä¸ä¸ªworkerè¿ç¨ï¼ ä¸è¬é½è®¾ç½®ä¸ºCPUä¸ªæ°ï¼æ¥çCPUä¸ªæ°ä½¿ç¨å¦ä¸å½ä»¤:\n\n$ grep -C \'processor\' /proc/cpuinfo\n4\n\n\næä»¥åºè¯¥éç½®æï¼\n\nworker_processes 4;\nworker_cpu_affinity 0001 0010 0100 1000; #å°æ¯ä¸ªå·¥ä½è¿ç¨ç»å®å°åç¬çCPU\nworker_rlimit_nofile 65535; #å·¥ä½è¿ç¨æå¼çæå¤§æä»¶æ°\n\n\nä¹å¯ä»¥è¿æ ·è°æ´(1.9.0çæ¬å)\n\nworker_processes auto;\nworker_cpu_affinity auto;\n#1.9.10çæ¬ååè®¸å°å·¥ä½è¿ç¨èªå¨ç»å®å°å¯ç¨çCPU\n\n\næå¼çæå¤§æä»¶æ°è¿è¦åç³»ç»çä¸è´ï¼ä½¿ç¨ulimit -næ¥çï¼å¦æä¸ä¸è´,éè¦è°æ´\n\n$ vim /etc/security/limits.conf\n* soft nofile 65535\n* hard nofile 65535\n* soft noproc 65535\n* hard noproc 65535\n\n\n\n# 3ãNginxäºä»¶å¤çæ¨¡å\n\nevents {\n\tuse epoll;\n\tworker_connections 8192;\n\taccept_mutex on;\n\tmulti_accept on;\n}\n\n\nnginxéç¨epolIäºä»¶æ¨¡åï¼å¤çæçé«ã\n\nwork_connectionsæ¯åä¸ªworkerè¿ç¨åè®¸å®¢æ·ç«¯æå¤§è¿æ¥æ°,è¿ä¸ªæ°å¼ä¸è¬æ ¹æ®æå¡å¨æ§è½ååå­æ¥å¶å®ï¼å®éæå¤§å¼å°±æ¯workerè¿ç¨æ°ä¹ä»¥work_connections\n\naccept_mutexï¼ [ÉkËsept] //,mjuË ËtÉks//ï¼å¦æå¯ç¨on,å·¥ä½è¿ç¨å°è½®æµæ¥åæ°çè¿æ¥ãå¦åï¼å°éç¥ææå·¥ä½è¿ç¨æå³æ°è¿æ¥çä¿¡æ¯,ä½åªæä¸ä¸ªè¿ç¨å¯ä»¥è·å¾è¿æ¥ãå¦ææ°è¿æ¥çæ°éè¾ä½ï¼åæäºå·¥ä½è¿ç¨å¯è½ä¼æµªè´¹ç³»ç»èµæºãå¦ææ¯å¹¶åè¿æ¥æ°å¾å¤§çæåµï¼åºè¯¥è°æ´ä¸ºoff.æ°çæ¬é»è®¤æ¯off,å¨çæ¬1.1 1.3ä¹åï¼é»è®¤å¼ä¸ºonã\n\nmulti_acceptæä»¤ä½¿å¾NGINX workerè½å¤å¨è·å¾æ°è¿æ¥çéç¥æ¶å°½å¯è½å¤çæ¥åè¿æ¥ãæ­¤æä»¤çä½ç¨æ¯ç«å³æ¥åææè¿æ¥æ¾å°çå¬éåä¸­ãå¦ææä»¤è¢«ç¦ç¨, workerè¿ç¨å°éä¸ªæ¥åè¿æ¥ãé»è®¤æ¯offã\n\n\n# 4ãå¼å¯é«æä¼ è¾æ¨¡å¼\n\nhttp {\n\tinclude\t\t\tmime.types;\n\tdefault_type \tapplication/octet-stream;\n\tsendfile\t\ton;\n\ttcp_nopush\t\ton;\n\t}\n\n\ninclude mime.types; //åªä½ç±»å,includeåªæ¯ä¸ä¸ªå¨å½åæä»¶ä¸­åå«å¦ä¸ä¸ªæä»¶åå®¹çæä»¤ã default_type application/octet-stream; //é»è®¤åªä½ç±»å\n\nsendfile on; //å¼å¯é«ææä»¶ä¼ è¾æ¨¡å¼ï¼sendfileæä»¤æå®nginxæ¯å¦è°ç¨sendfileå½æ°æ¥è¾åºæä»¶ï¼å¯¹äºæ®éåºç¨è®¾ä¸ºon,å¦æç¨æ¥è¿è¡ä¸è½½ç­åºç¨ç£çI/0éè´è½½åºç¨ï¼å¯è®¾ç½®ä¸ºoff, ä»¥å¹³è¡¡ç£çä¸ç½ç»I/Oå¤çéåº¦ï¼éä½ç³»ç»çè´è½½ãæ³¨æ:å¦æå¾çæ¾ç¤ºä¸æ­£å¸¸æè¿ä¸ªæ¹æoffãå½Nginxæ¯ä¸ä¸ªéææä»¶æå¡å¨çæ¶åï¼å¼å¯sendfileéç½®é¡¹è½å¤§å¤§æé«Nginxçæ§è½ã\n\ntcp_nopush on;å¿é¡»å¨sendfileå¼å¯æ¨¡å¼æææ,é²æ­¢ç½è·¯é»å¡,ç§¯æçåå°ç½ç»æ¥ææ®µçæ°é(åè¯nginxå¨ä¸ä¸ªæ°æ®åéåéææå¤´æä»¶,èä¸æ¯ä¸ä¸ªæ¥ä¸ä¸ªçåéã åtcp_nodelayéé¡¹äºæ¥)\n\n\n# 5ãè¿æ¥è¶æ¶æ¶é´\n\nä¸»è¦ç®çæ¯ä¿æ¤æå¡å¨èµæºï¼CPU,åå­,æ§å¶è¿æ¥æ°ï¼å ä¸ºå»ºç«è¿æ¥ä¹æ¯éè¦æ¶èèµæºç\n\nkeepalive_timeout 60;\ntcp_nodelay on;\nclient_header_buffer_size 4k;\nopen_file_cache max=102400 inactive=20s;\nopen_file_cache_valid 30s;\nopen_file_cache_min_uses 1;\nclient_header_timeout 15 ;\nclient_body_timeout 15;\nreset_timedout_connection on ;\nsend_timeout 15;\nserver_tokens off;\nclient_max_body_size 10m;\n\n\nkeepalived_timeoutå®¢æ·ç«¯è¿æ¥ä¿æä¼è¯è¶æ¶æ¶é´,è¶è¿è¿ä¸ªæ¶é´ï¼æå¡å¨æ­å¼è¿ä¸ªé¾æ¥\n\ntcp_nodelay off,ä¼å¢å éä¿¡çå»¶æ¶,ä½æ¯ä¼æé«å¸¦å®½å©ç¨çãå¨é«å»¶æ¶ãæ°æ®éå¤§çéä¿¡åºæ¯ä¸­åºè¯¥ä¼æä¸éçææ;tcp_nodelay on,ä¼å¢å å°åçæ°é,ä½æ¯å¯ä»¥æé«ååºéåº¦ãå¨åæ¶æ§é«çéä¿¡åºæ¯ä¸­åºè¯¥ä¼æä¸éçææ;\n\nclient_header_buffer_size 4k; å®¢æ·ç«¯è¯·æ±å¤´é¨çç¼å²åºå¤§å°ï¼è¿ä¸ªå¯ä»¥æ ¹æ®ä½ çç³»ç»åé¡µå¤§å°æ¥è®¾ç½®ï¼ä¸è¬ä¸ä¸ªè¯·æ±å¤´çå¤§å°ä¸ä¼è¶è¿1k,ä¸è¿ç±äºä¸è¬ç³»ç»åé¡µé½è¦å¤§äº1k, æä»¥è¿éè®¾ç½®ä¸ºåé¡µå¤§å°ãåé¡µå¤§å°å¯ä»¥ç¨å½ä»¤getconf PAGESIZEåå¾ã\n\nopen_file_cache max=102400 inactive=20s; è¿ä¸ªå°ä¸ºæå¼æä»¶æå®ç¼å­ï¼é»è®¤æ¯æ²¡æå¯ç¨çï¼maxæå®ç¼å­æ°é,å»ºè®®åæå¼æä»¶æ°ä¸è´ï¼inactiveæ¯æç»è¿å¤é¿æ¶é´æä»¶æ²¡è¢«è¯·æ±åå é¤ç¼å­ã\n\nopen_file_cache_valid 30s;è¿ä¸ªæ¯æå¤é¿æ¶é´æ£æ¥ä¸æ¬¡ç¼å­çææä¿¡æ¯ã open_file_cache_min_uses 1;open_file_cache æä»¤ä¸­çinactiveåæ°æ¶é´åæä»¶çæå°ä½¿ç¨æ¬¡æ°ï¼å¦æè¶è¿è¿ä¸ªæ°å­ï¼æä»¶æè¿°ç¬¦ä¸ç´æ¯å¨ç¼å­ä¸­æå¼çï¼å¦ä¸ä¾ï¼å¦ææä¸ä¸ªæä»¶å¨inactiveæ¶é´åä¸æ¬¡æ²¡è¢«ä½¿ç¨ï¼å®å°è¢«ç§»é¤\n\nclient_header_timeoutè®¾ç½®è¯·æ±å¤´çè¶æ¶æ¶é´ãæä»¬ä¹å¯ä»¥æè¿ä¸ªè®¾ç½®ä½äºï¼å¦æè¶è¿è¿ä¸ªæ¶é´æ²¡æåéä»»ä½æ°æ®ï¼nginxå°è¿årequest time outçéè¯¯\n\nclient_body_timeoutè®¾ç½®è¯·æ±ä½çè¶æ¶æ¶é´ãæä»¬ä¹å¯ä»¥æè¿ä¸ªè®¾ç½®ä½äºï¼è¶è¿è¿ä¸ªæ¶é´æ²¡æåéä»»ä½æ°æ®ï¼åä¸é¢ä¸æ ·çéè¯¯æç¤º\n\nreset_timeout_connection åè¯nginxå³é­ä¸ååºçå®¢æ·ç«¯è¿æ¥ãè¿å°ä¼éæ¾é£ä¸ªå®¢æ·ç«¯æå æçåå­ç©ºé´ã\n\nsend_timeoutååºå®¢æ·ç«¯è¶æ¶æ¶é´ï¼è¿ä¸ªè¶æ¶æ¶é´ä»éäºä¸¤ä¸ªæ´»å¨ä¹é´çæ¶é´ï¼å¦æè¶è¿è¿ä¸ªæ¶é´ï¼å®¢æ·ç«¯æ²¡æä»»ä½æ´»å¨ï¼nginx å³é­è¿æ¥\n\nclient_max_body_size.ä¸ä¼ æä»¶å¤§å°éå¶ã\n\n\n# 6ãfastcgiè°ä¼\n\nfastcgi_connect_timeout 600 ;\nfastcgi_send_timeout 600;\nfastcgi_read_timeout 600;\nfastcgi_buffer_size 64k;\nfastcgi_buffers 4 64k;\nfastcgi_busy_buffers_size 128k;\nfastcgi_temp_file_write_size 128k;\nfastcgi_temp_path /usr/local/nginx1.10/nginx_tmp;\nfastcgi_intercept_errors on;\nfastcgi_cache_path /usr/1ocal/nginx1.10/fastcgi_cache levels=1:2\nkeys_zone=cache_fastcgi:128m\ninactive=1d max_size=10g;\n\n\nfastcgi_connect_timeout 600; #æå®è¿æ¥å°åç«¯FastCGIçè¶æ¶æ¶é´ã fastcgi_send_timeout 600; #åFastCGlä¼ éè¯·æ±çè¶æ¶æ¶é´ã fastcgi_read_timeout 600; #æå®æ¥æ¶FastCGIåºç­çè¶æ¶æ¶é´ã fastcgi_buffer_size 64k; #æå®è¯»åFastCGIåºç­ç¬¬ä¸é¨åéè¦ç¨å¤å¤§çç¼å²åºï¼é»è®¤çç¼å²åºå¤§å°ä¸ºä¸ä¸ªåå­é¡µå¤§å°(4Kæè8K)ï¼å¯ä»¥å°è¿ä¸ªå¼è®¾ç½®æ´å°ã\n\nfastcgi_buffers 4 64k; #æå®æ¬å°éè¦ç¨å¤å°åå¤å¤§çç¼å²åºæ¥ç¼å²FastCGlçåºç­è¯·æ±,å¦æä¸ä¸ªphpèæ¬æäº§ççé¡µé¢å¤§å°ä¸º256KB,é£ä¹ä¼åé4ä¸ª64KBçç¼å²åºæ¥ç¼å­,å¦æé¡µé¢å¤§å°å¤§äº256KB,é£ä¹å¤§äº256KBçé¨åä¼ç¼å­å°fastcgi_temp_pathæå®çè·¯å¾ä¸­ï¼ä½æ¯è¿å¹¶ä¸æ¯å¥½æ¹æ³,å ä¸ºåå­ä¸­çæ°æ®å¤çéåº¦è¦å¿«äºç£çãä¸è¬è¿ä¸ªå¼åºè¯¥ä¸ºç«ç¹ä¸­ phpèæ¬æäº§ççé¡µé¢å¤§å°çä¸­é´å¼ï¼å¦æç«ç¹å¤§é¨åèæ¬æççé¡µé¢å¤§å°ä¸º256KB,é£ä¹å¯ä»¥æè¿ä¸ªå¼è®¾ç½®ä¸ºâ8 32K"ãâ4 64kâç­ã\n\nfastcgi_busy_buffers_size 128k; #å»ºè®®è®¾ç½®ä¸ºfastcgi_buffersçä¸¤åï¼ç¹å¿æ¶åçbuffer\n\nfastcgi_temp_file_write_size 128k; #å¨åå¥fastcgi_temp_path æ¶å°ç¨å¤å¤§çæ°æ®åï¼é»è®¤å¼æ¯fastcgi_ buffersçä¸¤å,è¯¥æ°å¼è®¾ç½®è¿å°æ¶è¥è´è½½ä¸æ¥æ¶å¯è½æ¥502 Bad Gateway\n\nfastcgi_temp_path #ç¼å­ä¸´æ¶ç®å½\n\nfastcgi_intercept_errors on;#è¿ä¸ªæä»¤æå®æ¯å¦ä¼ é4xxå5xxéè¯¯ä¿¡æ¯å°å®¢æ·ç«¯ï¼æèåè®¸nginxä½¿ç¨error_pageå¤çéè¯¯ä¿¡æ¯ãæ³¨:éææä»¶ä¸å­å¨ä¼è¿å404é¡µé¢ï¼ä½æ¯phpé¡µé¢åè¿åç©ºç½é¡µ!\n\nfastcgi_cache_path /usr/local/nginx1.1 0/fastcgi_cache levels=1:2 keys_zone=cache_fastcgi:128m inactive=1d.max_size=10g; # fastcgi_cache ç¼å­ç®å½ï¼å¯ä»¥è®¾ç½®ç®å½å±çº§ï¼æ¯å¦1:2ä¼çæ16*256ä¸ªå­ç®å½ï¼cache_fastcgi æ¯è¿ä¸ªç¼å­ç©ºé´çåå­ï¼cache æ¯ç¨å¤å°åå­(è¿æ ·ç­é¨çåå®¹nginxç´æ¥æ¾åå­ï¼æé«è®¿é®éåº¦)ï¼inactiveè¡¨ç¤ºé»è®¤å¤±ææ¶é´ï¼å¦æç¼å­æ°æ®å¨å¤±ææ¶é´åæ²¡æè¢«è®¿é®ï¼å°è¢«å é¤ï¼max_size è¡¨ç¤ºæå¤ç¨å¤å°ç¡¬çç©ºé´ã\n\nfastcgi_cache cache_fastcgi; #è¡¨ç¤ºå¼å¯FastCGIç¼å­å¹¶ä¸ºå¶æå®ä¸ä¸ªåç§°ãå¼å¯ç¼å­éå¸¸æç¨ï¼å¯ä»¥ææéä½CPUçè´è½½ï¼å¹¶ä¸é²æ­¢502çéè¯¯åçãcache_fastcgiä¸ºproxy_cache_pathæä»¤åå»ºçç¼å­åºåç§°\n\nfastcgi_cache_valid 200 302 1h;#ç¨æ¥æå®åºç­ä»£ç çç¼å­æ¶é´,å®ä¾ä¸­çå¼è¡¨ç¤ºå°200å302åºç­ç¼å­ä¸å°æ¶ï¼è¦åfastcgi. cacheéåä½¿ç¨\n\nfastcgi_cache. valid 301 1d; #å°301åºç­ç¼å­ä¸å¤©\n\nfastcgi_cache_valid any 1m; #å°å¶ä»åºç­ç¼å­ä¸º1åé fastcgi_cache_min_uses 1; #è¯¥æä»¤ç¨äºè®¾ç½®ç»è¿å¤å°æ¬¡è¯·æ±çç¸åURLå°è¢«ç¼å­ã fastcgi_cache_key http://$host$request_uri; #è¯¥æä»¤ç¨æ¥è®¾ç½®webç¼å­çKeyå¼,nginxæ ¹æ®Keyå¼md5åå¸å­å¨,ä¸-è¬æ ¹æ®$host(åå)ã$request_uri(è¯·æ±çè·¯å¾)ç­åéç»åæproxy_cache_key\n\næ»ç»ï¼\n\nnginxçç¼å­åè½æ: proxy_cacheåfastcgi_cache\n\n * proxy_cacheçä½ç¨æ¯ç¼å­åç«¯æå¡å¨çåå®¹,å¯è½æ¯ä»»ä½åå®¹,åæ¬éæçåå¨æã\n\n * fastcgi_cacheçä½ç¨æ¯ç¼å­fastcgjçæçåå®¹ï¼å¾å¤æåµæ¯phpçæçå¨æçåå®¹ã\n\n * proxy_cacheç¼å­åå°äºnginxä¸åç«¯éä¿¡çæ¬¡æ°ï¼èçäºä¼ è¾æ¶é´ååç«¯å®½å¸¦ã\n\n * fastcgi_cacheç¼å­åå°äºnginxä¸phpçéä¿¡çæ¬¡æ°ï¼ æ´åè½»äºphpåæ°æ®åº(mysql)çååã\n\n\n# 7ãgzipè°ä¼\n\nä½¿ç¨gzipåç¼©åè½ï¼å¯èçº¦å¸¦å®½ï¼å å¿«ä¼ è¾éåº¦,ææ´å¥½çä½éª,ä¹ä¸ºæä»¬èçº¦ææ¬,æä»¥è¯´è¿æ¯ä¸ä¸ªéç¹ãNginxå¯ç¨åç¼©åè½éè¦ä½ æ¥ngx_http_gzip_moduleæ¨¡åï¼apacheä½¿ç¨çæ¯mod_deflate. ä¸è¬æä»¬éè¦åç¼©çåå®¹æ:ææ¬ï¼js, html, Css, å¯¹äºå¾ç,è§é¢ï¼flashä»ä¹çä¸åç¼©ï¼åæ¶ä¹è¦æ³¨æ,ä½¿ç¨gzipçåè½æ¯éè¦æ¶èCPUçã\n\ngzip on;\ngzip_min_length 2k;\ngzip_buffers 4 32k;\ngzip_http_version 1.1;\ngzip_comp_level 6;\ngzip_types text/plain text/css text/javascript application/json\napplication/javascript\napplication/x-javascript application/xml;gzip_vary on; \ngzip_proxied any;\n\n\ngzip on; #å¼å¯åç¼©åè½ gzip_min_length 1k; #è®¾ç½®åè®¸åç¼©çé¡µé¢æå°å­èæ°ï¼é¡µé¢å­èæ°ä»headerå¤´çContent-Lengthä¸­è·åï¼é»è®¤å¼æ¯20å­è,å»ºè®®è®¾ç½®æå¤§äº1K,å¦æå°äº1 Kå¯è½ä¼è¶åè¶å¤§ã\n\ngzip_buffers 4 32k; #åç¼©ç¼å²åºå¤§å°,è¡¨ç¤ºç³è¯·4ä¸ªåä½ä¸º32Kçåå­ä½ä¸ºåç¼©ç»ææµç¼å­,é»è®¤å¼æ¯ç³è¯·ä¸åå§æ°æ®å¤§å°ç¸åçåå­ç©ºé´æ¥å­å¨gzipåç¼©ç»æã\n\ngzip_http_version 1.1; #åç¼©çæ¬ï¼ç¨äºè®¾ç½®è¯å«HTTPåè®®çæ¬,é»è®¤æ¯1.1,ç®åå¤§é¨åæµè§å¨å·²ç»æ¯æGZIPè§£åï¼ä½¿ç¨é»è®¤å³å¯\n\ngzip_comp_level 6; #åç¼©æ¯ä¾ï¼ç¨æ¥æå®GZIPåç¼©æ¯ï¼1åç¼©æ¯æå°ï¼å¤çéåº¦æå¿«ï¼9åç¼©æ¯æå¤§,ä¼ è¾éåº¦å¿«ï¼ä½æ¯å¤çæ¢ï¼ä¹æ¯è¾æ¶èCPUèµæºãé»è®¤æ¯1\n\ngzip_types text/css text/xml application/javascript; #ç¨æ¥æå®åç¼©çç±»åï¼\'text/htmlç±»åæ»æ¯ä¼è¢«åç¼©ãé»è®¤å¼: gzip_types text/html (é»è®¤ä¸å¯¹js/CSSæä»¶è¿è¡åç¼©)\n\ngzip_vary on;å¼å¯åå³é­æå¥"Vary: Accept-Encoding"ååºå¤´åºå\n\ngzip_proxied any; #Nginxä½ä¸ºååä»£ççæ¶åå¯ç¨,æ ¹æ®åç«¯æå¡å¨çç¸åºå¤´åºåæ¯å¦æ"Viaâåºåæ¥å¼å¯æèæ¯å³é­åç¼©ãanyå°±æ¯ææçä»£çè¯·æ±é½åç¼©ã\n\n\n# 8ãéç½®ç½é¡µç¼å­æ¶é´\n\nå½Nginxå°ç½é¡µæ°æ®è¿åç»å®¢æ·ç«¯åï¼å¯è®¾ç½®ç¼å­çæ¶é´ï¼ä»¥æ¹ä¾¿å¨æ¥åè¿è¡ç¸ååå®¹çè¯·æ±æ¶ç´æ¥è¿åï¼ä»¥é¿åéå¤è¯·æ±ï¼å å¿«äºè®¿é®éåº¦ï¼ä¸è¬éå¯¹éæèµæºè¿è¡è®¾ç½®, å¯¹å¨æç½é¡µä¸ç¨è®¾ç½®ç¼å­æ¶é´ã ä¸é¢å¯¹å¾çåç¼å­éç½®:\n\nlocation ~ \\.(gif|jpg|jpeg|png|bmp|ico)$ {\t\t#å å¥æ°çlocation\n\t\troot html ;\n\t\texpires 1d;\t\t\t\t#æå®ç¼å­æ¶é´\n}\n\n\nè®¾ç½®ç¼å­ä¸å¤©çæ¶é´ï¼ä¸å¤©ä¹åæµè§å¨è®¿é®è¿ä¸ªé¡µé¢ï¼ é½æ¯ç¨ç¼å­ä¸­çæ°æ®ï¼èä¸éè¦åNginxæå¡å¨éæ°ååºè¯·æ±ï¼åå°äºæå¡å¨çä½¿ç¨å¸¦å®½ã\n\næ»ç»ï¼\n\nexpireåè½ä¼ç¹:\n\n * expireså¯ä»¥éä½ç½ç«è´­ä¹°çå¸¦å®½ï¼ èçº¦ææ¬\n * åæ¶æåç¨æ·è®¿é®ä½éª\n * åè½»æå¡çååï¼èçº¦æå¡å¨ææ¬ï¼æ¯webæå¡éå¸¸éè¦çåè½ã\n * expireåè½ç¼ºç¹:\n * è¢«ç¼å­çé¡µé¢ææ°æ®æ´æ°äº,ç¨æ·çå°çå¯è½è¿æ¯æ§çåå®¹,åèå½±åç¨æ·ä½éªã\n * è§£å³åæ³: ãç¬¬ä¸ä¸ªç¼©ç­ç¼å­æ¶é´ï¼ä¾å¦: 1å¤©,ä½ä¸å½»åºï¼é¤éæ´æ°é¢çå¤§äº1å¤©; ãç¬¬äºä¸ªå¯¹ç¼å­çå¯¹è±¡æ¹åã\n * ç½ç«ä¸å¸æè¢«ç¼å­çåå®¹: ãç½ç«æµéç»è®¡å·¥å· ãæ´æ°é¢ç¹çæä»¶(googleçlogo)\n\n\n# 9ãé²çé¾\n\nå¨ä¼ä¸ç½ç«æå¡ä¸­ï¼ä¸è¬é½è¦éç½®é²çé¾åè½ï¼ä»¥é¿åç½ç«åå®¹è¢«éæ³çç¨ï¼é æç»æµæå¤±ï¼ä¹é¿åäºä¸å¿è¦çå¸¦å®½æµªè´¹ãNginxçé²çé¾åè½ä¹éå¸¸å¼ºå¤§ï¼å¨é»è®¤æåµä¸ï¼åªéè¦è¿è¡å¾ç®åçéç½®ï¼å³å¯å®ç°é²çé¾å¤çã\n\nlocation ~* \\.(jpg|gif|swf)$ {\n    valid_referers none blocked web.test.cn;\n    if ($invalid_referer) {\n        rewrite ^/ http://web.test.cn/meinv02.jpg;\n    }\n    root   /usr/share/nginx/html/web;\n}\n\n\nNginxçé²çé¾åçæ¯å å¥locationé¡¹ï¼ç¨æ­£åè¡¨è¾¾å¼è¿æ»¤å¾çç±»åæä»¶,å¯¹äºä¿¡ä»»çç½åå¯ä»¥æ­£å¸¸ä½¿ç¨ï¼ä¸ä¿¡ä»»çç½åè¿åç¸åºçéè¯¯å¾çã\n\n\n# 10ãåæ ¸åæ°ä¼å\n\nfs.file-max = 999999:\n\nè¿ä¸ªåæ°è¡¨ç¤ºè¿ç¨(æ¯å¦ä¸ä¸ªworkerè¿ç¨)å¯ä»¥åæ¶æå¼çæå¤§å¥ææ°ï¼è¿ä¸ªåæ°ç´çº¿éå¶æå¤§å¹¶åè¿æ¥æ°ï¼éæ ¹æ®å®éæåµéç½®ã\n\nnet.ipv4.tcp_max_tw_buckets = 6000\n\nè¿ä¸ªåæ°è¡¨ç¤ºæä½ç³»ç»åè®¸TIME_WAITå¥æ¥å­æ°éçæå¤§å¼,å¦æè¶è¿è¿ä¸ªæ°å­ï¼TIME_WAITå¥æ¥å­å°ç«å»è¢«æ¸é¤å¹¶æå°è­¦åä¿¡æ¯ãè¯¥åæ°é»è®¤ä¸º180000,è¿å¤çTIME_WAITå¥æ¥å­ä¼ä½¿Webæå¡å¨åæ¢ã æ³¨:ä¸»å¨å³é­è¿æ¥çæå¡ç«¯ä¼äº§ç TIME_WAITç¶æçè¿æ¥\n\nnet.ipv4.ip_local_port_range = 1024 65000 åè®¸ç³»ç»æå¼çç«¯å£èå´\n\nnet.ipv4.tcp_tw_recycle= 1 å¯ç¨timewaitå¿«éåæ¶\n\nnet.ipv4.tcp_tw_reuse= 1 å¼å¯éç¨ãåè®¸å°TIME-WAIT socketséæ°ç¨äºæ°çTCPè¿æ¥ãè¿å¯¹äºæå¡å¨æ¥è¯´å¾ææä¹,å ä¸ºæå¡å¨ä¸æ»ä¼æå¤§éTIME-WAITç¶æçè¿æ¥ã\n\nnet.ipv4.tcp_keepalive_time= 30 è¿ä¸ªåæ°è¡¨ç¤ºå½keepaliveå¯ç¨æ¶ï¼TCPåékeepaliveæ¶æ¯çé¢åº¦ãé»è®¤æ¯2å°æ¶,è¥å°å¶è®¾ç½®çå°ä¸äºï¼å¯ä»¥æ´å¿«å°æ¸çæ æçè¿æ¥ã\n\nnet.ipv4.tcp_syncookies= 1 å¼å¯SYN Cookieså½åºç°SYNç­å¾éåæº¢åºæ¶ï¼å¯ç¨cookiesæ¥å¤çãè¯¥åæ°ä¸æ§è½æ å³ï¼ç¨äºè§£å³TCPçSYNæ»å»ã\n\nnet.core.somaxconn = 40960 somaxconnåæ°:å®ä¹äºç³»ç»ä¸­æ¯ä¸ä¸ªç«¯å£æå¤§ççå¬éåçé¿åº¦ï¼è¿æ¯ä¸ªå¨å±çåæ°é»è®¤å¼ä¸º128ï¼å¯¹äºä¸ä¸ªç»å¸¸å¤çæ°è¿æ¥çé«è´è½½webæå¡ç¯å¢æ¥è¯´ï¼é»è®¤ç128å¤ªå°äºãå¤§å¤æ°ç¯å¢è¿ä¸ªå¼å»ºè®®å¢å å°1024æèæ´å¤ãå¤§çä¾¦å¬éåå¯¹é²æ­¢æç»æå¡DoSæ»å»ä¹ä¼ææå¸®å©ã webåºç¨ä¸­listenå½æ°çbacklogé»è®¤ä¼ç»æä»¬åæ ¸åæ°çnet.core.somaxconnéå¶å°128,ènginxå®ä¹çNGX_LISTEN_BACKLOG é»è®¤ä¸º511,æä»¥æå¿è¦è°æ´è¿ä¸ªå¼ã æ³¨:å¯¹äºä¸ ä¸ªTCPè¿æ¥, Serverä¸Clientéè¦éè¿ä¸æ¬¡æ¡ææ¥å»ºç«ç½ç»è¿æ¥.å½ä¸æ¬¡æ¡ææåå,æä»¬å¯ä»¥çå°ç«¯å£çç¶æç±LISTENè½¬åä¸ºESTABLISHEDï¼ [ÉªËstÃ¦blÉªÊt] å»ºç«ï¼ï¼æ¥çè¿æ¡é¾è·¯ä¸å°±å¯ä»¥å¼å§ä¼ éæ°æ®äºãæ¯ä¸ä¸ªå¤äºçå¬(Listen)ç¶æçç«¯å£,é½æèªå·±ççå¬éå.çå¬éåçé¿åº¦ä¸æ­¤somaxconnåæ°åä½¿ç¨è¯¥ç«¯å£çç¨åºä¸­listen()å½æ°æå³\n\nnet.core.netdev_max_backlog = 262144 æ¯ä¸ªç½ç»æ¥å£æ¥æ¶æ°æ®åçéçæ¯åæ ¸å¤çè¿äºåçéçå¿«æ¶ï¼åè®¸éå°éåçæ°æ®åçæå¤§æ°ç®ã\n\nnet.ipv4.tcp_max_syn_backlog = 262144 è¿ä¸ªåæ°æ ç¤ºTCPä¸æ¬¡æ¡æå»ºç«é¶æ®µæ¥åSYNè¯·æ±éåçæå¤§é¿åº¦,é»è®¤ä¸º1024,å°å¶è®¾ç½®å¾å¤§ä¸äºå¯ä»¥ä½¿åºç°Nginxç¹å¿æ¥ä¸åacceptæ°è¿æ¥çæåµæ¶ï¼Linux ä¸è³äºä¸¢å¤±å®¢æ·ç«¯åèµ·çè¿æ¥è¯·æ±ã\n\nnet.ipv4.tcp_rmem = 10240 87380 12582912 è¿ä¸ªåæ°å®ä¹äºTCPæ¥åç¼å­(ç¨äºTCPæ¥åæ»å¨çªå£)çæå°å¼ãé»è®¤å¼ãæå¤§å¼ã\n\nnet.ipv4.tcp_wmem = 10240 87380 12582912 è¿ä¸ªåæ°å®ä¹äºTCPåéç¼å­(ç¨äºTCPåéæ»å¨çªå£)çæå°å¼ãé»è®¤å¼ãæå¤§å¼ã\n\nnet.core.rmem_default = 6291456 è¿ä¸ªåæ°è¡¨ç¤ºåæ ¸å¥æ¥å­æ¥åç¼å­åºé»è®¤çå¤§å°ã\n\nnet.core.wmem_default = 6291456 è¿ä¸ªåæ°è¡¨ç¤ºåæ ¸å¥æ¥å­åéç¼å­åºé»è®¤çå¤§å°ã\n\nnet.core.rmem_max= 12582912 è¿ä¸ªåæ°è¡¨ç¤ºåæ ¸å¥æ¥å­æ¥åç¼å­åºçæå¤§å¤§å°ã\n\nnet.core.wmem_max = 12582912 è¿ä¸ªåæ°è¡¨ç¤ºåæ ¸å¥æ¥å­åéç¼å­åºçæå¤§å¤§å°ã\n\n\n# åæ ¸ä¼åæ¡ä¾\n\nfs.file-max = 99999\nnet.ipv4.ip_forward = 0\nnet.ipv4.conf.default.rp_filter = 1\nnet.ipv4.conf.default.accept_source_route = 0\nkernel.sysrq = 0\nkernel.core_uses_pid = 1\nnet.ipv4.tcp_syncookies = 1\nkernel.msgmnb = 65536\nkernel.msgmax = 65536\nkernel.shmmax = 68719476736\nkernel.shmall = 4294967296\nnet.ipv4.tcp_max_tw_buckets = 6000\nnet.ipv4.tcp_sack = 1\nnet.ipv4.tcp_window_scaling = 1\nnet.ipv4.tcp_rmem = 10240 87380 12582912\nnet.ipv4.tcp_wmem = 10240 87380 12582912\nnet.core.wmem_default = 8388608\nnet.core.rmem_default = 8388608\nnet.core.rmem_max = 16777216\nnet.core.wmem_max = 16777216\nnet.core.netdev_max_backlog = 262144\nnet.core.somaxconn = 40960\nnet.ipv4.tcp_max_orphans = 3276800\nnet.ipv4.tcp_max_syn_backlog = 262144\nnet.ipv4.tcp_timestamps = 0\nnet.ipv4.tcp_synack_retries = 1\nnet.ipv4.tcp_syn_retries = 1\nnet.ipv4.tcp_tw_recycle = 1\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_mem = 94500000 915000000 927000000\nnet.ipv4.tcp_fin_timeout = 1\nnet.ipv4.tcp_keepalive_time = 30\nnet.ipv4.ip_local_port_range = 1024 65000\n\n\næ§è¡sysctl -p ä½¿åæ ¸ä¿®æ¹çæ\n\n\n# å®éªä¼åæ¡ä¾\n\né¨ç½²å®éªç¯å¢\n\n1ãé¨ç½²LNMPç¯å¢(ç¥)\n\n2ãä¸ä¸ªå®æ´çNginxéç½®æä»¶æ¡ä¾\n\nuser www www;\nworker_processes 4 :\nworker_cpu_affinity 0001 0010 0100 1000;\nworker_rlimit_nofile 65535;\nerror_log logs/error.log;\n#error_log logs/error.log notice; \n#error_log logs/error.log info; \npid logs/nginx.pid;\nevents {\n\tuse epoll;\n\tworker_connections 8192;\n\tmulti_accept on;\n}\nhttp {\n\tinclude mime.types;\n\tdefault_type application/octet-stream; \n\tlog_format main \'$remote_addr - $remote_user [$time_local] "$request" \'\n\t\t\t\t   \'$status $body_bytes_sent â$http_referer\'\n\t\t\t\t   \'"$http_user_agent" "Shttp_x_forwarded_for"\';\n\t#access_log logs/access.log main;\n\tsendfile on;\n\ttcp_nopush on;\n\tkeepalive_timeout 65;\n\ttcp_nodelay on;\n\tclient_header_buffer_size 4k;\n\topen_file_cache max=102400 inactive=20s ;\n\topen_file_cache_valid 30s;\n\topen_file_cache_min_uses 1\n\tclient_header_timeout 15;\n\tclient_body_timeout 15;\n\treset_timedout_connection on;\n\tsend_timeout 15;\n\tserver_tokens off;\n\tclient_max_body_size 10m;\n\tfastcgi_connect timeout 600;\n\tfastcgi_send timeout 600;\n\tfastcgi_read timeout 600;\n\tfastcgi_buffer_size 64k;\n\tfastcgi_buffers 4 64k;\n\tfastcgi_busy_buffers_size 128k;\n\tfastcgi_temp_file_write_size 128k;\n\tfastcgi_temp path /usr/local/nginx1.10/nginx_tmp;\n\tfastcgi_intercept_errors on;\n\tfastcgi_cache_path /usr/local/nginx1.10/fastcgi_cache levels=1:2\n\tkeys_zone=cache_fastcgi:128m inactive=1d max_size=10g;\n\tgzip on;\n\tgzip_min_length 2k;\n\tgzip_buffers 4 32k;gzip_http_version 1.1;\n\tgzip_comp_level 6;\n\tgzip_types text/plain text/css text/javascript application/json\napplication/javascript\napplication/x-javascript application/xml ;\n\tgzip_vary on;\n\tgzip_proxied any;\nserver {\n\tlisten 80; \n\tserver_name www.shengzhe.com; \n\t#charset koi8-r;\n\t#access_log logs/host.access.log main;\n\tlocation ~* ^.+\\.(jpg|gif|png|swf|flv|wma|wmv|asf|mp3|mmf|zip|rar)${\n\t\tvalid_referers none blocked www.shengzhe.com shengzhe.com;\n\t\t\tif ($invalid_referer) {\n\t\t\t\t#return 302 http://www.shengzhe.com/img/nolink.jpg;\n\t\t\t\treturn 404;\n\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\taccess_log off;\n\t\t\t}\n\t\tlocation / {\n\t\t\troot html;\n\t\t\tindex index.php index.html index.htm;\n\t\t\t}\n\t\tlocation ~* \\.(ico|jpeg|gif|png|bmp|swf|flv)$ {\n\t\t\texpires 30d;\n\t\t\t#log_not_found off;\n\t\t\taccess_log off;\n\t\t\t}\n\t\tlocation ~* \\.(js|css)$ {\n\t\t\texpires 7d;\n\t\t\tlog_not_found off;\n\t\t\taccess_log off;\n\t\t\t}\n\t\tlocation = /(favicon.ico|roboots.txt) {\n\t\t\taccess_log off;\n\t\t\tlog_not_found off;\n\t\t\t}\n\t\tlocation /status {\n\t\t\tstub_status on;\n\t\tlocation ~ . *\\.(php|php5)?$ {\n\t\t\troot html;\n\t\t\tfastcgi_pass 127.0.0.1:9000;\n\t\t\tfastcgi_index index.php;\n\t\t\tinclude fastcgi.conf;\n\t\t\tfastcgi_cache cache_fastcgi;\n\t\t\tfastcgi_cache_alid 200 302 1h;\n\t\t\tfastcgi_cache_valid 301 1d;\n\t\t\tfastcgi_cache_valid any 1m;\n\t\t\tfastcgi_cache_min_uses 1;\n\t\t\tfastcgi_cache_use_stale error timeout invalid_header http_500;\n\t\t\tfastcgi_cache_key http://$host$request_uri;\n\t\t#error_page 404 /404.html;\n\t\t# redirect server error pages to the static page /50x.html\n\t\t#\n\t\terror_page 500 502 503 504 /50x.html;\n\t\tlocation = /50x.html {\n\t\t\troot html ;\n\t\t\t}\n\t\t}\n\t}\n\n\n\n\n# éªè¯ãååæµè¯\n\n# 1.éªè¯é²çé¾\n\nä½¿ç¨Apacheåä¸ºä¸ä¸ªæµè¯ç«ç¹ï¼ååä¸ºwww.test.com,å¨æµè¯é¡µä¸åä¸ä¸ªè¶é¾æ¥ï¼ é¾æ¥nginxç«ç¹çä¸å¼ å¾ç\n\n$ cat /var/www/html/index.html\n<a href="http://www.shengzhe.com/11.gif">lianjie</a>\n\n\nNginxç«ç¹çç½é¡µç®å½ç»å¦ä¸:\n\n$ tree -C /usr/local/nginx1.16/html/\n/usr/local/nginx1.16/html/\nâââ 11.gif\nâââ 50x.html\nâââ img\nâ       âââ nolink.jpg\nâââ index.html\nâââ mysql_test.php\nâââ test.php\n\n1 directory, 6 files\n\n\nå¨å®¢æ·ç«¯æµè§å¨ä¸­è¾å¥:www.test.com\n\n\n\nç¹å»é¡µé¢é¾æ¥ï¼å¯ä»¥çå°é²çé¾è®¾ç½®å·²ç»çæ\n\n\n\n# 2.éªè¯gzipåè½\n\nä½¿ç¨è°·æ­æµè§å¨æµè¯è®¿é®ï¼å¦ä¸å¾æ¾ç¤ºç»æ: (æç¤º: å¨è®¿é®æµè¯é¡µä¹åæF12é®)\n\n\n\nç¨æ·è®¿é®test.phpæä»¶ï¼ å¨ä¸å¾ä¸­content-encoding:gzipè¡¨æååºç»ç¨æ·çæ°æ®æ¯åç¼©ä¼ è¾ã\n\n# 3.ååæµè¯\n\nç½ç«æ§è½ååæµè¯æ¯æå¡å¨ç½ç«æ§è½è°ä¼è¿ç¨ä¸­å¿ä¸å¯ç¼ºå°çä¸ç¯ãåªæè®©æå¡å¨å¤å¨é«åæåµä¸ï¼æè½çæ­£ä½ç°åºè½¯ä»¶ãç¡¬ä»¶ç­åç§è®¾ç½®ä¸å½ææ´é²åºçé®é¢ã\n\næ§è½æµè¯å·¥å·ç®åæå¸¸è§çæä»¥ä¸å ç§: abãhttp_loadãwebbenchãsiegeã abæ¯apacheèªå¸¦çååæµè¯å·¥å·ãabéå¸¸å®ç¨ï¼å®ä¸ä»å¯ä»¥å¯¹apacheæå¡å¨è¿è¡ç½ç«è®¿é®ååæµè¯ï¼ä¹å¯ä»¥å¯¹æå¶å®ç±»åçæå¡å¨è¿è¡ååæµè¯ãæ¯å¦nginxãtomcatã llSç­ã éè¦å®è£æè½ä½¿ç¨:\n\n$ yum install httpd-tools -y\n\n\næå¸¸ç¨çåæ°:\n\n-n\tæ»çè¦æ§è¡å¤å°ä¸ªè¯·æ±æ°\n-C\tä¸æ¬¡è¦ååºçè¯·æ±æ°(å¹¶åæ°)\n\n\næ§è¡ä»¥ä¸æµè¯å½ä»¤\n\n$ ab -C 500 -n 50000 http://192.168.154.140/index.html\nThis is ApacheBench, version 2.3 <$Revision: 1430300 $>\nCopyright 1996 Adam Twissï¼Zeus Technology Ltdï¼http://www.zeustech.net/\nLicensed to The Apache Software Foundation, http://www.apache.org/\nBenchmarking 192.168.154.140 (be patient)\nCompleted 5000 requests\nCompleted 10000 requests\nCompleted 15000 requests\nCompleted 20000 requests\nCompleted 25000 requests\nCompleted 30000 requests\nCompleted 35000 requests\nCompleted 40000 requests\nCompleted 45000 requests\nCompleted 50000 requests\nFinished 50000 requests\n\nServer Software:\tnginx\nServer Hostname :\t192.168.154.140\nServer Port:\t\t80\n\nDocument Path:\t\t/index.html\nDocument Length:\t626 bytes\n\nconcurrency Level:\t\t500\nTime taken for tests:\t32.916 seconds\nComplete requests:\t\t50000\nFailed requests :\t\t12\n\t(Connect: 0ï¼Receive: 0ï¼Length: 6ï¼Exceptions: 6)\nwrite errors:\t\t\t0\nTotal transferred: \t\t42600000 bytes\nHTML transferred:\t\t31300000 bytes\nRequests per second:\t1519.01 [#/sec] (mean)\nTime per request:\t\t329.161 [ms] (mean)\nTime per request:\t\t0.658 [ms] (meanï¼ across a11 concurrent requests )\nTransfer rate:\t\t\t1263.87 [Kbytes/sec] received\n\nConnection Times (ms )\n\t\t\tmin\tmean[+/-sd]\tmedian\tmax\nConnect :\t   0  85  26.8     83    367\nProcessing:\t   8  95  168.8    92  15002\nwaiting:       2  64  28.5     59    374\nTotal :\t\t  82 181 168.5    172  15002\n\nPercentage of the requests served within a certain time (ms)\n50%\t\t172\n66%\t\t179\n75%\t\t184\n80%\t\t187\n90%\t\t198\n95%\t\t209\n98%\t\t250\n99%\t\t370\n100% \t15002 (longest request)\n\n\nabæ§è½ææ \n\n1ãååç(Requests per second)\n\næå¡å¨å¹¶åå¤çè½åçéåæè¿°ï¼åä½æ¯reqs/s, æçæ¯å¨æä¸ªå¹¶åç¨æ·æ°ä¸åä½æ¶é´åå¤ççè¯·æ±æ°ãæä¸ªå¹¶åç¨æ·æ°ä¸åä½æ¶é´åè½å¤ççæå¤§è¯·æ±æ°,ç§°ä¹ä¸ºæå¤§ååçã\n\nè®°ä½:ååçæ¯åºäºå¹¶åç¨æ·æ°çãè¿å¥è¯ä»£è¡¨äºä¸¤ä¸ªå«ä¹:\n\n * ååçåå¹¶åç¨æ·æ°ç¸å³\n * ä¸åçå¹¶åç¨æ·æ°ä¸,ååçä¸è¬æ¯ä¸åç\n\nè®¡ç®å¬å¼:æ»è¯·æ±æ°/å¤çå®æè¿äºè¯·æ±æ°æè±è´¹çæ¶é´ï¼å³ Request per second=Complete requests/Time taken for tests å¿é¡»è¦è¯´æçæ¯ï¼è¿ä¸ªæ°å¼è¡¨ç¤ºå½åæºå¨çæ´ä½æ§è½ï¼å¼è¶å¤§è¶å¥½ã\n\n2.å¹¶åè¿æ¥æ°(The number of concurrent connections)\n\nå¹¶åè¿æ¥æ°æçæ¯æä¸ªæ¶å»æå¡å¨ææ¥åçè¯·æ±æ°ç®,ç®åçè®²ï¼å°±æ¯ä¸ä¸ªä¼è¯\n\n3.å¹¶åç¨æ·æ°(Concurrency Level)\n\nè¦æ³¨æåºåè¿ä¸ªæ¦å¿µåå¹¶åè¿æ¥æ°ä¹é´çåºå«ï¼ä¸ä¸ªç¨æ·å¯è½åæ¶ä¼äº§çå¤ä¸ªä¼è¯ï¼ä¹å³è¿æ¥æ°ãå¨HTTP/1.1ä¸ï¼IE7æ¯æä¸¤ä¸ªå¹¶åè¿æ¥ï¼IE8æ¯æ6ä¸ªå¹¶åè¿æ¥ï¼ FireFox3æ¯æ4ä¸ªå¹¶åè¿æ¥,æä»¥ç¸åºçï¼æä»¬çå¹¶åç¨æ·æ°å°±å¾é¤ä»¥è¿ä¸ªåºæ°ã\n\n4.ç¨æ·å¹³åè¯·æ±ç­å¾æ¶é´(Time per request)\n\nè®¡ç®å¬å¼:å¤çå®æææè¯·æ±æ°æè±è´¹çæ¶é´/ (æ»è¯·æ±æ°/å¹¶åç¨æ·æ°)ï¼å³:\n\nTime per request=Time taken for tests/ (Complete requests/Concurrency Level)\n\n5.æå¡å¨å¹³åè¯·æ±ç­å¾æ¶é´(Time per request:across all concurrent requests)\n\nè®¡ç®å¬å¼:å¤çå®æææè¯·æ±æ°æè±è´¹çæ¶é´/æ»è¯·æ±æ°,å³:\n\nTime taken for/testsComplete requests\n\nå¯ä»¥çå°ï¼å®æ¯ååççåæ°ã\n\nåæ¶ï¼å®ä¹ç­äºç¨æ·å¹³åè¯·æ±ç­å¾æ¶é´/å¹¶åç¨æ·æ°,å³\n\nTime per request/Concurrency Level\n\nç¬¬äºæ¬¡ååæµè¯ï¼æ¯è¾ä¸¤æ¬¡çå·®å¼\n\n$ ab -C 1000 -n 10000 http://192.168.154.140/index.html\nThis is ApacheBenchï¼version 2.3 <SRevision: 1430300 $>\nCopyright 1996 Adam Twissï¼Zeus Technology Ltd, http://www.zeustech.net/\nLicensed to The Apache software Foundation, http://www.apache.org/\n\nBenchmarking 192.168.154.140 (be patient)\nCompleted 10000 requests\nCompleted 20000 requests\nCompleted 30000 requests\nCompleted 40000 requests\nCompleted 50000 requests\nCompleted 60000 requests\nCompleted 70000 requests\nCompleted 80000 requests\nCompleted 90000 requests\nCompleted 100000 requests\nFinished 100000 requests\n\nServer Software:\tnginx\nServer Hostname :\t192.168.154.140\nServer Port:\t\t80\n\nDocument Path:\t\t/index.html\nDocument Length:\t626 bytes\n\nconcurrency Level:\t\t1000\nTime taken for tests:\t50.908 seconds\nComplete requests:\t\t10000\nFailed requests :\t\t39\n\t(Connect: 0ï¼Receive: 0ï¼Length: 6ï¼Exceptions: 6)\nwrite errors:\t\t\t0\nTotal transferred: \t\t85200000 bytes\nHTML transferred:\t\t62600000 bytes\nRequests per second:\t1964.33 [#/sec] (mean)\nTime per request:\t\t509.080 [ms] (mean)\nTime per request:\t\t0.658 [ms] (meanï¼ across a11 concurrent requests )\nTransfer rate:\t\t\t1634.38 [Kbytes/sec] received\n\n\nConnection Times (ms )\n\t\t\tmin\tmean[+/-sd]\tmedian\t max\nConnect :\t   0  173  \t50.7    171   638\nProcessing:\t  16  189  211.9    183  15010\nwaiting:       3  122   54.4    115    472\nTotal :\t\t 191  361  207.8    349  15010\n\nPercentage of the requests served within a certain time (ms)\n50%\t\t349\n66%\t\t359\n75%\t\t366\n80%\t\t371\n90%\t\t385\n95%\t\t400\n98%\t\t461\n99%\t\t603\n100% \t15010 (longest request)\n\n\n# 4.opcacheæé«PHPè®¿åéåº¦\n\nOpcacheçåçæ¯Optimizer+ï¼ [ËÉptÉËmaÉªzÉr]ä¼åå¨ ï¼,å®æ¯PHPçå®æ¹å¬å¸Zendå¼åçä¸æ¬¾é­æºä½å¯ä»¥åè´¹ä½¿ç¨çPHPä¼åå éç»ä»¶ãOptimizer+å°PHPä»£ç é¢ç¼è¯çæçèæ¬æä»¶Opcodeç¼å­å¨å±äº«åå­ä¸­ä¾ä»¥ååå¤ä½¿ç¨ï¼ä»èé¿åäºä»ç£çè¯»åä»£ç åæ¬¡ç¼è¯çæ¶é´æ¶èãåæ¶ï¼å®è¿åºç¨äºä¸äºä»£ç ä¼åæ¨¡å¼ï¼ä½¿å¾ä»£ç æ§è¡æ´å¿«ãä»èå éPHPçæ§è¡ã å®è£\n\n$ yum install php72w-opcache -y\n\n\nå®æ¹æ¨èéç½®\n\nopcache.enable=1\nopcache.memory_consumption=128\nopcache.interned_strings_buffer=8\nopcache.max_accelerated files=4000\nopcache.revalidate_freq=60\nopcache.fast_shutdown=1\nopcache.enab1e_cli=1\n\n\næµè¯PHPå¨æé¡µé¢\n\n$ ab -C 1000 -n 100000 http://192.168.154.140/test.php\nThis is ApacheBenchï¼version 2.3 <$Revision: 1430300 $>\nCopyright 1996 Adam Twissï¼Zeus Technology Ltdï¼http://www.zeustech.net/\nLicensed to The Apache software Foundation, http://www.apache.org/\n\nBenchmarking 192.168.154.140 (be patient)\nCompleted 10000 requests\nCompleted 20000 requests\nCompleted 30000 requests\nCompleted 40000 requests\nCompleted 50000 requests\nCompleted 60000 requests\nCompleted 70000 requests\nCompleted 80000 requests\nCompleted 90000 requests\nCompleted 100000 requests\nFinished 100000 requests\n\nServer Software:\tnginx\nServer Hostname :\t192.168.154.140\nServer Port:\t\t80\n\nDocument Path:\t\t/text.php\nDocument Length:\t73746 bytes\n\nconcurrency Level:\t\t1000\nTime taken for tests:\t43.004 seconds\nComplete requests:\t\t10000\nFailed requests :\t\t0\nwrite errors:\t\t\t0\nTotal transferred: \t\t7392500000 bytes\nHTML transferred:\t\t7371600000 bytes\nRequests per second:\t2325.39 [#/sec] (mean)\nTime per request:\t\t430.036 [ms] (mean)\nTime per request:\t\t0.430 [ms] (meanï¼ across a11 concurrent requests )\nTransfer rate:\t\t\t167875.33 [Kbytes/sec] received\n\n\nConnection Times (ms)\n\t\t\tmin\tmean[+/-sd]\tmedian\t max\nConnect :\t   1   78  \t54.3     67   524\nProcessing:\t  38  350   80.6    343   824\nwaiting:       1   51   33.8     44   404\nTotal :\t\t 112  428   77.3    409   899\n\nPercentage of the requests served within a certain time (ms)\n50%\t\t405\n66%\t\t420\n75%\t\t435\n80%\t\t449\n90%\t\t504\n95%\t\t595\n98%\t\t694\n99%\t\t767\n100% \t899 (longest request)\n',normalizedContent:'# nginxä¼ååé²çé¾\n\nå¨ä¼ä¸ä¿¡æ¯ååºç¨ç¯å¢ä¸­ï¼æå¡å¨çå®å¨æ§åååºéåº¦éè¦æ ¹æ®å®éæåµè¿è¡ç¸åºåæ°éç½®,ä»¥è¾¾å°æä¼çç¨æ·ä½éªãé»è®¤çnginxå®è£åæ°åªè½æä¾æåºæ¬çæå¡ï¼éè¦è°æ´å¦ç½é¡µç¼å­æ¶é´ãè¿æ¥è¶æ¶ãç½é¡µåç¼©ç­ç¸åºåæ°ï¼åæ¥åºæå¡å¨çæå¤§ä½ç¨ã\n\n\n# 1ãéèçæ¬ç­ä¿¡æ¯\n\nå¨çäº§ç¯å¢ä¸­ï¼éè¦éènginxççæ¬å·ï¼ ä»¥é¿åæ³æ¼nginxççæ¬ï¼ ä½¿æ»å»èä¸è½éå¯¹ç¹å®çæ¬è¿è¡æ»å»ã ä¼ååè®¿é®:\n\nhttp/1.1 200 ok\nserver: nginx/1.16.0\t#çæ¬ä¿¡æ¯\ndate: thu, 04 jul 2019 15:06:57 gmt\ncontent-type: text/html; charset=utf-8\ncontent-length: 626\nlast-modified: monï¼ 01 jul 2019 09:26:46 gmt\nconnection: keep-alive\netag: "5d19d1d6-272"\naccept-ranges: bytes\n\n\n\n# ä¼åæ¹å¼\n\n * ä¿®æ¹ä¸»éç½®æä»¶\n   \n   å°nginxçéç½®æä»¶ä¸­çserver_tokenséé¡¹å¼è®¾ç½®ä¸ºoff,å¦æ²¡æè¯¥éç½®é¡¹,å ä¸å³å¯ã\n   \n   http {\n   include\t\t mime.types;\n   default_type application/octet-stream;\n   server_tokens off ;\n   â¦â¦â¦â¦\t#çç¥å¾å¤åå®¹\n   }\n   \n\nä½¿ç¨äºphpå¤çå¨æç½é¡µ,å¦æphpéç½®æä»¶ä¸­éç½®äºfastcgi_param server_softwareéé¡¹,åç¼è¾php-fpméç½®æä»¶ï¼å°fastcgi_param server_softwareå¯¹åºçå¼ä¿®æ¹ä¸ºfastcgi_param server_software nginxã\n\néå¯æå¡åï¼åæ¬¡æ¥çï¼\n\n  $ curl -i http://127.0.0.1\n  http/1.1 200 ok\n  server: nginx\n  date: tue, 21 apr 2020 14:35:15 gmt\n  content-type: text/html\n  content-length: 612\n  last-modified: tue, 21 apr 2020 13:35:13 gmt\n  connection: keep-alive\n  etag: "5e9ef691-264"\n  accept-ranges: bytes\n\n\n * ç¼è¯å®è£åä¿®æ¹æºç \n   \n   ç¼è¯åçä¼åä¸»è¦æ¯ç¨æ¥ä¿®æ¹ç¨åºåç­ç­ï¼ç®çæ´æ¹æºç éèè½¯ä»¶åç§°åçæ¬å·ã\n   \n   1.è¿å¥è§£ååçæºç ç®å½,è¿è¡ä¿®æ¹\n   \n   ä¿®æ¹å\n   \n   $ vim src/core/nginx.h\n   #define nginx_version\t   "1.16.0"\t  #å®ä¹ççæ¬å·\n   #define nginx_ver\t\t  "nginx/" nginx_version  #å®ä¹çè½¯ä»¶åç§°\n   \n   \n   ä¿®æ¹å\n   \n   $ vim src/core/nginx.h\n   #define nginx_version\t\t"7.0"\n   #define nginx_ver\t\t\t"iis/" nginx_version\n   \n   \n   2ãä¿®æ¹httpå¤´ä¿¡æ¯ä¸­çconnectionå­æ®µï¼é²æ­¢åæ¾å·ä½çæ¬å·\n   \n   æå±:éç¨httpå¤´,éç¨å¤´åå«è¯·æ±åååºæ¶æ¯é½æ¯æçå¤´ï¼éç¨å¤´åå«cache-controlãconnectionãdateã pragmaã transfer-encodingã upgradeã viaã å¯¹éç¨å¤´çæ©å±è¦æ±éè®¯åæ¹é½æ¯ææ­¤æ©å±ï¼å¦æå­å¨ä¸æ¯æçéç¨å¤´, ä¸è¬å°ä¼ä½ä¸ºå®ä½å¤´å¤çãé£ä¹ä¹å°±æ¯è¯´æé¨åè®¾å¤æèæ¯è½¯ä»¶è½è·åå°connectionï¼ è¦éèå°±è¦å½»åº!\n   \n   ä¿®æ¹åï¼\n   \n   $ vim src/core/nginx.h\n   static u_char ngx_http_error_tail[] =\n   "<hr><center>nginx</center>" crlf\n   "</body>" crlf\n   \'</html>" crlf\n   ;\n   \n\nä¿®æ¹åï¼\n\n  static u_char ngx_http_error_tail[] =\n  "<hr><center>iis</center>" crlf\n  "</body>" crlf\n  "</html>" crlf\n  ;\n\n\nä¿®æ¹å®æ¯åè¿è¡ç¼è¯å®è£ï¼å®è£å®æå,æ¥çæµè¯:\n\n  $ curl -i http://127.0.0.1\n  http/1.1 200 ok\n  server: iis/7.0 \n  â¦â¦â¦â¦\t\t#çç¥å¾å¤åå®¹\n\n\n\n# 2ãå·¥ä½è¿ç¨æ°ä¼å\n\nnginxé»è®¤åªå¼å¯ä¸ä¸ªworkerè¿ç¨ï¼ ä¸è¬é½è®¾ç½®ä¸ºcpuä¸ªæ°ï¼æ¥çcpuä¸ªæ°ä½¿ç¨å¦ä¸å½ä»¤:\n\n$ grep -c \'processor\' /proc/cpuinfo\n4\n\n\næä»¥åºè¯¥éç½®æï¼\n\nworker_processes 4;\nworker_cpu_affinity 0001 0010 0100 1000; #å°æ¯ä¸ªå·¥ä½è¿ç¨ç»å®å°åç¬çcpu\nworker_rlimit_nofile 65535; #å·¥ä½è¿ç¨æå¼çæå¤§æä»¶æ°\n\n\nä¹å¯ä»¥è¿æ ·è°æ´(1.9.0çæ¬å)\n\nworker_processes auto;\nworker_cpu_affinity auto;\n#1.9.10çæ¬ååè®¸å°å·¥ä½è¿ç¨èªå¨ç»å®å°å¯ç¨çcpu\n\n\næå¼çæå¤§æä»¶æ°è¿è¦åç³»ç»çä¸è´ï¼ä½¿ç¨ulimit -næ¥çï¼å¦æä¸ä¸è´,éè¦è°æ´\n\n$ vim /etc/security/limits.conf\n* soft nofile 65535\n* hard nofile 65535\n* soft noproc 65535\n* hard noproc 65535\n\n\n\n# 3ãnginxäºä»¶å¤çæ¨¡å\n\nevents {\n\tuse epoll;\n\tworker_connections 8192;\n\taccept_mutex on;\n\tmulti_accept on;\n}\n\n\nnginxéç¨epoliäºä»¶æ¨¡åï¼å¤çæçé«ã\n\nwork_connectionsæ¯åä¸ªworkerè¿ç¨åè®¸å®¢æ·ç«¯æå¤§è¿æ¥æ°,è¿ä¸ªæ°å¼ä¸è¬æ ¹æ®æå¡å¨æ§è½ååå­æ¥å¶å®ï¼å®éæå¤§å¼å°±æ¯workerè¿ç¨æ°ä¹ä»¥work_connections\n\naccept_mutexï¼ [ÉkËsept] //,mjuË ËtÉks//ï¼å¦æå¯ç¨on,å·¥ä½è¿ç¨å°è½®æµæ¥åæ°çè¿æ¥ãå¦åï¼å°éç¥ææå·¥ä½è¿ç¨æå³æ°è¿æ¥çä¿¡æ¯,ä½åªæä¸ä¸ªè¿ç¨å¯ä»¥è·å¾è¿æ¥ãå¦ææ°è¿æ¥çæ°éè¾ä½ï¼åæäºå·¥ä½è¿ç¨å¯è½ä¼æµªè´¹ç³»ç»èµæºãå¦ææ¯å¹¶åè¿æ¥æ°å¾å¤§çæåµï¼åºè¯¥è°æ´ä¸ºoff.æ°çæ¬é»è®¤æ¯off,å¨çæ¬1.1 1.3ä¹åï¼é»è®¤å¼ä¸ºonã\n\nmulti_acceptæä»¤ä½¿å¾nginx workerè½å¤å¨è·å¾æ°è¿æ¥çéç¥æ¶å°½å¯è½å¤çæ¥åè¿æ¥ãæ­¤æä»¤çä½ç¨æ¯ç«å³æ¥åææè¿æ¥æ¾å°çå¬éåä¸­ãå¦ææä»¤è¢«ç¦ç¨, workerè¿ç¨å°éä¸ªæ¥åè¿æ¥ãé»è®¤æ¯offã\n\n\n# 4ãå¼å¯é«æä¼ è¾æ¨¡å¼\n\nhttp {\n\tinclude\t\t\tmime.types;\n\tdefault_type \tapplication/octet-stream;\n\tsendfile\t\ton;\n\ttcp_nopush\t\ton;\n\t}\n\n\ninclude mime.types; //åªä½ç±»å,includeåªæ¯ä¸ä¸ªå¨å½åæä»¶ä¸­åå«å¦ä¸ä¸ªæä»¶åå®¹çæä»¤ã default_type application/octet-stream; //é»è®¤åªä½ç±»å\n\nsendfile on; //å¼å¯é«ææä»¶ä¼ è¾æ¨¡å¼ï¼sendfileæä»¤æå®nginxæ¯å¦è°ç¨sendfileå½æ°æ¥è¾åºæä»¶ï¼å¯¹äºæ®éåºç¨è®¾ä¸ºon,å¦æç¨æ¥è¿è¡ä¸è½½ç­åºç¨ç£çi/0éè´è½½åºç¨ï¼å¯è®¾ç½®ä¸ºoff, ä»¥å¹³è¡¡ç£çä¸ç½ç»i/oå¤çéåº¦ï¼éä½ç³»ç»çè´è½½ãæ³¨æ:å¦æå¾çæ¾ç¤ºä¸æ­£å¸¸æè¿ä¸ªæ¹æoffãå½nginxæ¯ä¸ä¸ªéææä»¶æå¡å¨çæ¶åï¼å¼å¯sendfileéç½®é¡¹è½å¤§å¤§æé«nginxçæ§è½ã\n\ntcp_nopush on;å¿é¡»å¨sendfileå¼å¯æ¨¡å¼æææ,é²æ­¢ç½è·¯é»å¡,ç§¯æçåå°ç½ç»æ¥ææ®µçæ°é(åè¯nginxå¨ä¸ä¸ªæ°æ®åéåéææå¤´æä»¶,èä¸æ¯ä¸ä¸ªæ¥ä¸ä¸ªçåéã åtcp_nodelayéé¡¹äºæ¥)\n\n\n# 5ãè¿æ¥è¶æ¶æ¶é´\n\nä¸»è¦ç®çæ¯ä¿æ¤æå¡å¨èµæºï¼cpu,åå­,æ§å¶è¿æ¥æ°ï¼å ä¸ºå»ºç«è¿æ¥ä¹æ¯éè¦æ¶èèµæºç\n\nkeepalive_timeout 60;\ntcp_nodelay on;\nclient_header_buffer_size 4k;\nopen_file_cache max=102400 inactive=20s;\nopen_file_cache_valid 30s;\nopen_file_cache_min_uses 1;\nclient_header_timeout 15 ;\nclient_body_timeout 15;\nreset_timedout_connection on ;\nsend_timeout 15;\nserver_tokens off;\nclient_max_body_size 10m;\n\n\nkeepalived_timeoutå®¢æ·ç«¯è¿æ¥ä¿æä¼è¯è¶æ¶æ¶é´,è¶è¿è¿ä¸ªæ¶é´ï¼æå¡å¨æ­å¼è¿ä¸ªé¾æ¥\n\ntcp_nodelay off,ä¼å¢å éä¿¡çå»¶æ¶,ä½æ¯ä¼æé«å¸¦å®½å©ç¨çãå¨é«å»¶æ¶ãæ°æ®éå¤§çéä¿¡åºæ¯ä¸­åºè¯¥ä¼æä¸éçææ;tcp_nodelay on,ä¼å¢å å°åçæ°é,ä½æ¯å¯ä»¥æé«ååºéåº¦ãå¨åæ¶æ§é«çéä¿¡åºæ¯ä¸­åºè¯¥ä¼æä¸éçææ;\n\nclient_header_buffer_size 4k; å®¢æ·ç«¯è¯·æ±å¤´é¨çç¼å²åºå¤§å°ï¼è¿ä¸ªå¯ä»¥æ ¹æ®ä½ çç³»ç»åé¡µå¤§å°æ¥è®¾ç½®ï¼ä¸è¬ä¸ä¸ªè¯·æ±å¤´çå¤§å°ä¸ä¼è¶è¿1k,ä¸è¿ç±äºä¸è¬ç³»ç»åé¡µé½è¦å¤§äº1k, æä»¥è¿éè®¾ç½®ä¸ºåé¡µå¤§å°ãåé¡µå¤§å°å¯ä»¥ç¨å½ä»¤getconf pagesizeåå¾ã\n\nopen_file_cache max=102400 inactive=20s; è¿ä¸ªå°ä¸ºæå¼æä»¶æå®ç¼å­ï¼é»è®¤æ¯æ²¡æå¯ç¨çï¼maxæå®ç¼å­æ°é,å»ºè®®åæå¼æä»¶æ°ä¸è´ï¼inactiveæ¯æç»è¿å¤é¿æ¶é´æä»¶æ²¡è¢«è¯·æ±åå é¤ç¼å­ã\n\nopen_file_cache_valid 30s;è¿ä¸ªæ¯æå¤é¿æ¶é´æ£æ¥ä¸æ¬¡ç¼å­çææä¿¡æ¯ã open_file_cache_min_uses 1;open_file_cache æä»¤ä¸­çinactiveåæ°æ¶é´åæä»¶çæå°ä½¿ç¨æ¬¡æ°ï¼å¦æè¶è¿è¿ä¸ªæ°å­ï¼æä»¶æè¿°ç¬¦ä¸ç´æ¯å¨ç¼å­ä¸­æå¼çï¼å¦ä¸ä¾ï¼å¦ææä¸ä¸ªæä»¶å¨inactiveæ¶é´åä¸æ¬¡æ²¡è¢«ä½¿ç¨ï¼å®å°è¢«ç§»é¤\n\nclient_header_timeoutè®¾ç½®è¯·æ±å¤´çè¶æ¶æ¶é´ãæä»¬ä¹å¯ä»¥æè¿ä¸ªè®¾ç½®ä½äºï¼å¦æè¶è¿è¿ä¸ªæ¶é´æ²¡æåéä»»ä½æ°æ®ï¼nginxå°è¿årequest time outçéè¯¯\n\nclient_body_timeoutè®¾ç½®è¯·æ±ä½çè¶æ¶æ¶é´ãæä»¬ä¹å¯ä»¥æè¿ä¸ªè®¾ç½®ä½äºï¼è¶è¿è¿ä¸ªæ¶é´æ²¡æåéä»»ä½æ°æ®ï¼åä¸é¢ä¸æ ·çéè¯¯æç¤º\n\nreset_timeout_connection åè¯nginxå³é­ä¸ååºçå®¢æ·ç«¯è¿æ¥ãè¿å°ä¼éæ¾é£ä¸ªå®¢æ·ç«¯æå æçåå­ç©ºé´ã\n\nsend_timeoutååºå®¢æ·ç«¯è¶æ¶æ¶é´ï¼è¿ä¸ªè¶æ¶æ¶é´ä»éäºä¸¤ä¸ªæ´»å¨ä¹é´çæ¶é´ï¼å¦æè¶è¿è¿ä¸ªæ¶é´ï¼å®¢æ·ç«¯æ²¡æä»»ä½æ´»å¨ï¼nginx å³é­è¿æ¥\n\nclient_max_body_size.ä¸ä¼ æä»¶å¤§å°éå¶ã\n\n\n# 6ãfastcgiè°ä¼\n\nfastcgi_connect_timeout 600 ;\nfastcgi_send_timeout 600;\nfastcgi_read_timeout 600;\nfastcgi_buffer_size 64k;\nfastcgi_buffers 4 64k;\nfastcgi_busy_buffers_size 128k;\nfastcgi_temp_file_write_size 128k;\nfastcgi_temp_path /usr/local/nginx1.10/nginx_tmp;\nfastcgi_intercept_errors on;\nfastcgi_cache_path /usr/1ocal/nginx1.10/fastcgi_cache levels=1:2\nkeys_zone=cache_fastcgi:128m\ninactive=1d max_size=10g;\n\n\nfastcgi_connect_timeout 600; #æå®è¿æ¥å°åç«¯fastcgiçè¶æ¶æ¶é´ã fastcgi_send_timeout 600; #åfastcglä¼ éè¯·æ±çè¶æ¶æ¶é´ã fastcgi_read_timeout 600; #æå®æ¥æ¶fastcgiåºç­çè¶æ¶æ¶é´ã fastcgi_buffer_size 64k; #æå®è¯»åfastcgiåºç­ç¬¬ä¸é¨åéè¦ç¨å¤å¤§çç¼å²åºï¼é»è®¤çç¼å²åºå¤§å°ä¸ºä¸ä¸ªåå­é¡µå¤§å°(4kæè8k)ï¼å¯ä»¥å°è¿ä¸ªå¼è®¾ç½®æ´å°ã\n\nfastcgi_buffers 4 64k; #æå®æ¬å°éè¦ç¨å¤å°åå¤å¤§çç¼å²åºæ¥ç¼å²fastcglçåºç­è¯·æ±,å¦æä¸ä¸ªphpèæ¬æäº§ççé¡µé¢å¤§å°ä¸º256kb,é£ä¹ä¼åé4ä¸ª64kbçç¼å²åºæ¥ç¼å­,å¦æé¡µé¢å¤§å°å¤§äº256kb,é£ä¹å¤§äº256kbçé¨åä¼ç¼å­å°fastcgi_temp_pathæå®çè·¯å¾ä¸­ï¼ä½æ¯è¿å¹¶ä¸æ¯å¥½æ¹æ³,å ä¸ºåå­ä¸­çæ°æ®å¤çéåº¦è¦å¿«äºç£çãä¸è¬è¿ä¸ªå¼åºè¯¥ä¸ºç«ç¹ä¸­ phpèæ¬æäº§ççé¡µé¢å¤§å°çä¸­é´å¼ï¼å¦æç«ç¹å¤§é¨åèæ¬æççé¡µé¢å¤§å°ä¸º256kb,é£ä¹å¯ä»¥æè¿ä¸ªå¼è®¾ç½®ä¸ºâ8 32k"ãâ4 64kâç­ã\n\nfastcgi_busy_buffers_size 128k; #å»ºè®®è®¾ç½®ä¸ºfastcgi_buffersçä¸¤åï¼ç¹å¿æ¶åçbuffer\n\nfastcgi_temp_file_write_size 128k; #å¨åå¥fastcgi_temp_path æ¶å°ç¨å¤å¤§çæ°æ®åï¼é»è®¤å¼æ¯fastcgi_ buffersçä¸¤å,è¯¥æ°å¼è®¾ç½®è¿å°æ¶è¥è´è½½ä¸æ¥æ¶å¯è½æ¥502 bad gateway\n\nfastcgi_temp_path #ç¼å­ä¸´æ¶ç®å½\n\nfastcgi_intercept_errors on;#è¿ä¸ªæä»¤æå®æ¯å¦ä¼ é4xxå5xxéè¯¯ä¿¡æ¯å°å®¢æ·ç«¯ï¼æèåè®¸nginxä½¿ç¨error_pageå¤çéè¯¯ä¿¡æ¯ãæ³¨:éææä»¶ä¸å­å¨ä¼è¿å404é¡µé¢ï¼ä½æ¯phpé¡µé¢åè¿åç©ºç½é¡µ!\n\nfastcgi_cache_path /usr/local/nginx1.1 0/fastcgi_cache levels=1:2 keys_zone=cache_fastcgi:128m inactive=1d.max_size=10g; # fastcgi_cache ç¼å­ç®å½ï¼å¯ä»¥è®¾ç½®ç®å½å±çº§ï¼æ¯å¦1:2ä¼çæ16*256ä¸ªå­ç®å½ï¼cache_fastcgi æ¯è¿ä¸ªç¼å­ç©ºé´çåå­ï¼cache æ¯ç¨å¤å°åå­(è¿æ ·ç­é¨çåå®¹nginxç´æ¥æ¾åå­ï¼æé«è®¿é®éåº¦)ï¼inactiveè¡¨ç¤ºé»è®¤å¤±ææ¶é´ï¼å¦æç¼å­æ°æ®å¨å¤±ææ¶é´åæ²¡æè¢«è®¿é®ï¼å°è¢«å é¤ï¼max_size è¡¨ç¤ºæå¤ç¨å¤å°ç¡¬çç©ºé´ã\n\nfastcgi_cache cache_fastcgi; #è¡¨ç¤ºå¼å¯fastcgiç¼å­å¹¶ä¸ºå¶æå®ä¸ä¸ªåç§°ãå¼å¯ç¼å­éå¸¸æç¨ï¼å¯ä»¥ææéä½cpuçè´è½½ï¼å¹¶ä¸é²æ­¢502çéè¯¯åçãcache_fastcgiä¸ºproxy_cache_pathæä»¤åå»ºçç¼å­åºåç§°\n\nfastcgi_cache_valid 200 302 1h;#ç¨æ¥æå®åºç­ä»£ç çç¼å­æ¶é´,å®ä¾ä¸­çå¼è¡¨ç¤ºå°200å302åºç­ç¼å­ä¸å°æ¶ï¼è¦åfastcgi. cacheéåä½¿ç¨\n\nfastcgi_cache. valid 301 1d; #å°301åºç­ç¼å­ä¸å¤©\n\nfastcgi_cache_valid any 1m; #å°å¶ä»åºç­ç¼å­ä¸º1åé fastcgi_cache_min_uses 1; #è¯¥æä»¤ç¨äºè®¾ç½®ç»è¿å¤å°æ¬¡è¯·æ±çç¸åurlå°è¢«ç¼å­ã fastcgi_cache_key http://$host$request_uri; #è¯¥æä»¤ç¨æ¥è®¾ç½®webç¼å­çkeyå¼,nginxæ ¹æ®keyå¼md5åå¸å­å¨,ä¸-è¬æ ¹æ®$host(åå)ã$request_uri(è¯·æ±çè·¯å¾)ç­åéç»åæproxy_cache_key\n\næ»ç»ï¼\n\nnginxçç¼å­åè½æ: proxy_cacheåfastcgi_cache\n\n * proxy_cacheçä½ç¨æ¯ç¼å­åç«¯æå¡å¨çåå®¹,å¯è½æ¯ä»»ä½åå®¹,åæ¬éæçåå¨æã\n\n * fastcgi_cacheçä½ç¨æ¯ç¼å­fastcgjçæçåå®¹ï¼å¾å¤æåµæ¯phpçæçå¨æçåå®¹ã\n\n * proxy_cacheç¼å­åå°äºnginxä¸åç«¯éä¿¡çæ¬¡æ°ï¼èçäºä¼ è¾æ¶é´ååç«¯å®½å¸¦ã\n\n * fastcgi_cacheç¼å­åå°äºnginxä¸phpçéä¿¡çæ¬¡æ°ï¼ æ´åè½»äºphpåæ°æ®åº(mysql)çååã\n\n\n# 7ãgzipè°ä¼\n\nä½¿ç¨gzipåç¼©åè½ï¼å¯èçº¦å¸¦å®½ï¼å å¿«ä¼ è¾éåº¦,ææ´å¥½çä½éª,ä¹ä¸ºæä»¬èçº¦ææ¬,æä»¥è¯´è¿æ¯ä¸ä¸ªéç¹ãnginxå¯ç¨åç¼©åè½éè¦ä½ æ¥ngx_http_gzip_moduleæ¨¡åï¼apacheä½¿ç¨çæ¯mod_deflate. ä¸è¬æä»¬éè¦åç¼©çåå®¹æ:ææ¬ï¼js, html, css, å¯¹äºå¾ç,è§é¢ï¼flashä»ä¹çä¸åç¼©ï¼åæ¶ä¹è¦æ³¨æ,ä½¿ç¨gzipçåè½æ¯éè¦æ¶ècpuçã\n\ngzip on;\ngzip_min_length 2k;\ngzip_buffers 4 32k;\ngzip_http_version 1.1;\ngzip_comp_level 6;\ngzip_types text/plain text/css text/javascript application/json\napplication/javascript\napplication/x-javascript application/xml;gzip_vary on; \ngzip_proxied any;\n\n\ngzip on; #å¼å¯åç¼©åè½ gzip_min_length 1k; #è®¾ç½®åè®¸åç¼©çé¡µé¢æå°å­èæ°ï¼é¡µé¢å­èæ°ä»headerå¤´çcontent-lengthä¸­è·åï¼é»è®¤å¼æ¯20å­è,å»ºè®®è®¾ç½®æå¤§äº1k,å¦æå°äº1 kå¯è½ä¼è¶åè¶å¤§ã\n\ngzip_buffers 4 32k; #åç¼©ç¼å²åºå¤§å°,è¡¨ç¤ºç³è¯·4ä¸ªåä½ä¸º32kçåå­ä½ä¸ºåç¼©ç»ææµç¼å­,é»è®¤å¼æ¯ç³è¯·ä¸åå§æ°æ®å¤§å°ç¸åçåå­ç©ºé´æ¥å­å¨gzipåç¼©ç»æã\n\ngzip_http_version 1.1; #åç¼©çæ¬ï¼ç¨äºè®¾ç½®è¯å«httpåè®®çæ¬,é»è®¤æ¯1.1,ç®åå¤§é¨åæµè§å¨å·²ç»æ¯ægzipè§£åï¼ä½¿ç¨é»è®¤å³å¯\n\ngzip_comp_level 6; #åç¼©æ¯ä¾ï¼ç¨æ¥æå®gzipåç¼©æ¯ï¼1åç¼©æ¯æå°ï¼å¤çéåº¦æå¿«ï¼9åç¼©æ¯æå¤§,ä¼ è¾éåº¦å¿«ï¼ä½æ¯å¤çæ¢ï¼ä¹æ¯è¾æ¶ècpuèµæºãé»è®¤æ¯1\n\ngzip_types text/css text/xml application/javascript; #ç¨æ¥æå®åç¼©çç±»åï¼\'text/htmlç±»åæ»æ¯ä¼è¢«åç¼©ãé»è®¤å¼: gzip_types text/html (é»è®¤ä¸å¯¹js/cssæä»¶è¿è¡åç¼©)\n\ngzip_vary on;å¼å¯åå³é­æå¥"vary: accept-encoding"ååºå¤´åºå\n\ngzip_proxied any; #nginxä½ä¸ºååä»£ççæ¶åå¯ç¨,æ ¹æ®åç«¯æå¡å¨çç¸åºå¤´åºåæ¯å¦æ"viaâåºåæ¥å¼å¯æèæ¯å³é­åç¼©ãanyå°±æ¯ææçä»£çè¯·æ±é½åç¼©ã\n\n\n# 8ãéç½®ç½é¡µç¼å­æ¶é´\n\nå½nginxå°ç½é¡µæ°æ®è¿åç»å®¢æ·ç«¯åï¼å¯è®¾ç½®ç¼å­çæ¶é´ï¼ä»¥æ¹ä¾¿å¨æ¥åè¿è¡ç¸ååå®¹çè¯·æ±æ¶ç´æ¥è¿åï¼ä»¥é¿åéå¤è¯·æ±ï¼å å¿«äºè®¿é®éåº¦ï¼ä¸è¬éå¯¹éæèµæºè¿è¡è®¾ç½®, å¯¹å¨æç½é¡µä¸ç¨è®¾ç½®ç¼å­æ¶é´ã ä¸é¢å¯¹å¾çåç¼å­éç½®:\n\nlocation ~ \\.(gif|jpg|jpeg|png|bmp|ico)$ {\t\t#å å¥æ°çlocation\n\t\troot html ;\n\t\texpires 1d;\t\t\t\t#æå®ç¼å­æ¶é´\n}\n\n\nè®¾ç½®ç¼å­ä¸å¤©çæ¶é´ï¼ä¸å¤©ä¹åæµè§å¨è®¿é®è¿ä¸ªé¡µé¢ï¼ é½æ¯ç¨ç¼å­ä¸­çæ°æ®ï¼èä¸éè¦ånginxæå¡å¨éæ°ååºè¯·æ±ï¼åå°äºæå¡å¨çä½¿ç¨å¸¦å®½ã\n\næ»ç»ï¼\n\nexpireåè½ä¼ç¹:\n\n * expireså¯ä»¥éä½ç½ç«è´­ä¹°çå¸¦å®½ï¼ èçº¦ææ¬\n * åæ¶æåç¨æ·è®¿é®ä½éª\n * åè½»æå¡çååï¼èçº¦æå¡å¨ææ¬ï¼æ¯webæå¡éå¸¸éè¦çåè½ã\n * expireåè½ç¼ºç¹:\n * è¢«ç¼å­çé¡µé¢ææ°æ®æ´æ°äº,ç¨æ·çå°çå¯è½è¿æ¯æ§çåå®¹,åèå½±åç¨æ·ä½éªã\n * è§£å³åæ³: ãç¬¬ä¸ä¸ªç¼©ç­ç¼å­æ¶é´ï¼ä¾å¦: 1å¤©,ä½ä¸å½»åºï¼é¤éæ´æ°é¢çå¤§äº1å¤©; ãç¬¬äºä¸ªå¯¹ç¼å­çå¯¹è±¡æ¹åã\n * ç½ç«ä¸å¸æè¢«ç¼å­çåå®¹: ãç½ç«æµéç»è®¡å·¥å· ãæ´æ°é¢ç¹çæä»¶(googleçlogo)\n\n\n# 9ãé²çé¾\n\nå¨ä¼ä¸ç½ç«æå¡ä¸­ï¼ä¸è¬é½è¦éç½®é²çé¾åè½ï¼ä»¥é¿åç½ç«åå®¹è¢«éæ³çç¨ï¼é æç»æµæå¤±ï¼ä¹é¿åäºä¸å¿è¦çå¸¦å®½æµªè´¹ãnginxçé²çé¾åè½ä¹éå¸¸å¼ºå¤§ï¼å¨é»è®¤æåµä¸ï¼åªéè¦è¿è¡å¾ç®åçéç½®ï¼å³å¯å®ç°é²çé¾å¤çã\n\nlocation ~* \\.(jpg|gif|swf)$ {\n    valid_referers none blocked web.test.cn;\n    if ($invalid_referer) {\n        rewrite ^/ http://web.test.cn/meinv02.jpg;\n    }\n    root   /usr/share/nginx/html/web;\n}\n\n\nnginxçé²çé¾åçæ¯å å¥locationé¡¹ï¼ç¨æ­£åè¡¨è¾¾å¼è¿æ»¤å¾çç±»åæä»¶,å¯¹äºä¿¡ä»»çç½åå¯ä»¥æ­£å¸¸ä½¿ç¨ï¼ä¸ä¿¡ä»»çç½åè¿åç¸åºçéè¯¯å¾çã\n\n\n# 10ãåæ ¸åæ°ä¼å\n\nfs.file-max = 999999:\n\nè¿ä¸ªåæ°è¡¨ç¤ºè¿ç¨(æ¯å¦ä¸ä¸ªworkerè¿ç¨)å¯ä»¥åæ¶æå¼çæå¤§å¥ææ°ï¼è¿ä¸ªåæ°ç´çº¿éå¶æå¤§å¹¶åè¿æ¥æ°ï¼éæ ¹æ®å®éæåµéç½®ã\n\nnet.ipv4.tcp_max_tw_buckets = 6000\n\nè¿ä¸ªåæ°è¡¨ç¤ºæä½ç³»ç»åè®¸time_waitå¥æ¥å­æ°éçæå¤§å¼,å¦æè¶è¿è¿ä¸ªæ°å­ï¼time_waitå¥æ¥å­å°ç«å»è¢«æ¸é¤å¹¶æå°è­¦åä¿¡æ¯ãè¯¥åæ°é»è®¤ä¸º180000,è¿å¤çtime_waitå¥æ¥å­ä¼ä½¿webæå¡å¨åæ¢ã æ³¨:ä¸»å¨å³é­è¿æ¥çæå¡ç«¯ä¼äº§ç time_waitç¶æçè¿æ¥\n\nnet.ipv4.ip_local_port_range = 1024 65000 åè®¸ç³»ç»æå¼çç«¯å£èå´\n\nnet.ipv4.tcp_tw_recycle= 1 å¯ç¨timewaitå¿«éåæ¶\n\nnet.ipv4.tcp_tw_reuse= 1 å¼å¯éç¨ãåè®¸å°time-wait socketséæ°ç¨äºæ°çtcpè¿æ¥ãè¿å¯¹äºæå¡å¨æ¥è¯´å¾ææä¹,å ä¸ºæå¡å¨ä¸æ»ä¼æå¤§étime-waitç¶æçè¿æ¥ã\n\nnet.ipv4.tcp_keepalive_time= 30 è¿ä¸ªåæ°è¡¨ç¤ºå½keepaliveå¯ç¨æ¶ï¼tcpåékeepaliveæ¶æ¯çé¢åº¦ãé»è®¤æ¯2å°æ¶,è¥å°å¶è®¾ç½®çå°ä¸äºï¼å¯ä»¥æ´å¿«å°æ¸çæ æçè¿æ¥ã\n\nnet.ipv4.tcp_syncookies= 1 å¼å¯syn cookieså½åºç°synç­å¾éåæº¢åºæ¶ï¼å¯ç¨cookiesæ¥å¤çãè¯¥åæ°ä¸æ§è½æ å³ï¼ç¨äºè§£å³tcpçsynæ»å»ã\n\nnet.core.somaxconn = 40960 somaxconnåæ°:å®ä¹äºç³»ç»ä¸­æ¯ä¸ä¸ªç«¯å£æå¤§ççå¬éåçé¿åº¦ï¼è¿æ¯ä¸ªå¨å±çåæ°é»è®¤å¼ä¸º128ï¼å¯¹äºä¸ä¸ªç»å¸¸å¤çæ°è¿æ¥çé«è´è½½webæå¡ç¯å¢æ¥è¯´ï¼é»è®¤ç128å¤ªå°äºãå¤§å¤æ°ç¯å¢è¿ä¸ªå¼å»ºè®®å¢å å°1024æèæ´å¤ãå¤§çä¾¦å¬éåå¯¹é²æ­¢æç»æå¡dosæ»å»ä¹ä¼ææå¸®å©ã webåºç¨ä¸­listenå½æ°çbacklogé»è®¤ä¼ç»æä»¬åæ ¸åæ°çnet.core.somaxconnéå¶å°128,ènginxå®ä¹çngx_listen_backlog é»è®¤ä¸º511,æä»¥æå¿è¦è°æ´è¿ä¸ªå¼ã æ³¨:å¯¹äºä¸ ä¸ªtcpè¿æ¥, serverä¸clientéè¦éè¿ä¸æ¬¡æ¡ææ¥å»ºç«ç½ç»è¿æ¥.å½ä¸æ¬¡æ¡ææåå,æä»¬å¯ä»¥çå°ç«¯å£çç¶æç±listenè½¬åä¸ºestablishedï¼ [ÉªËstÃ¦blÉªÊt] å»ºç«ï¼ï¼æ¥çè¿æ¡é¾è·¯ä¸å°±å¯ä»¥å¼å§ä¼ éæ°æ®äºãæ¯ä¸ä¸ªå¤äºçå¬(listen)ç¶æçç«¯å£,é½æèªå·±ççå¬éå.çå¬éåçé¿åº¦ä¸æ­¤somaxconnåæ°åä½¿ç¨è¯¥ç«¯å£çç¨åºä¸­listen()å½æ°æå³\n\nnet.core.netdev_max_backlog = 262144 æ¯ä¸ªç½ç»æ¥å£æ¥æ¶æ°æ®åçéçæ¯åæ ¸å¤çè¿äºåçéçå¿«æ¶ï¼åè®¸éå°éåçæ°æ®åçæå¤§æ°ç®ã\n\nnet.ipv4.tcp_max_syn_backlog = 262144 è¿ä¸ªåæ°æ ç¤ºtcpä¸æ¬¡æ¡æå»ºç«é¶æ®µæ¥åsynè¯·æ±éåçæå¤§é¿åº¦,é»è®¤ä¸º1024,å°å¶è®¾ç½®å¾å¤§ä¸äºå¯ä»¥ä½¿åºç°nginxç¹å¿æ¥ä¸åacceptæ°è¿æ¥çæåµæ¶ï¼linux ä¸è³äºä¸¢å¤±å®¢æ·ç«¯åèµ·çè¿æ¥è¯·æ±ã\n\nnet.ipv4.tcp_rmem = 10240 87380 12582912 è¿ä¸ªåæ°å®ä¹äºtcpæ¥åç¼å­(ç¨äºtcpæ¥åæ»å¨çªå£)çæå°å¼ãé»è®¤å¼ãæå¤§å¼ã\n\nnet.ipv4.tcp_wmem = 10240 87380 12582912 è¿ä¸ªåæ°å®ä¹äºtcpåéç¼å­(ç¨äºtcpåéæ»å¨çªå£)çæå°å¼ãé»è®¤å¼ãæå¤§å¼ã\n\nnet.core.rmem_default = 6291456 è¿ä¸ªåæ°è¡¨ç¤ºåæ ¸å¥æ¥å­æ¥åç¼å­åºé»è®¤çå¤§å°ã\n\nnet.core.wmem_default = 6291456 è¿ä¸ªåæ°è¡¨ç¤ºåæ ¸å¥æ¥å­åéç¼å­åºé»è®¤çå¤§å°ã\n\nnet.core.rmem_max= 12582912 è¿ä¸ªåæ°è¡¨ç¤ºåæ ¸å¥æ¥å­æ¥åç¼å­åºçæå¤§å¤§å°ã\n\nnet.core.wmem_max = 12582912 è¿ä¸ªåæ°è¡¨ç¤ºåæ ¸å¥æ¥å­åéç¼å­åºçæå¤§å¤§å°ã\n\n\n# åæ ¸ä¼åæ¡ä¾\n\nfs.file-max = 99999\nnet.ipv4.ip_forward = 0\nnet.ipv4.conf.default.rp_filter = 1\nnet.ipv4.conf.default.accept_source_route = 0\nkernel.sysrq = 0\nkernel.core_uses_pid = 1\nnet.ipv4.tcp_syncookies = 1\nkernel.msgmnb = 65536\nkernel.msgmax = 65536\nkernel.shmmax = 68719476736\nkernel.shmall = 4294967296\nnet.ipv4.tcp_max_tw_buckets = 6000\nnet.ipv4.tcp_sack = 1\nnet.ipv4.tcp_window_scaling = 1\nnet.ipv4.tcp_rmem = 10240 87380 12582912\nnet.ipv4.tcp_wmem = 10240 87380 12582912\nnet.core.wmem_default = 8388608\nnet.core.rmem_default = 8388608\nnet.core.rmem_max = 16777216\nnet.core.wmem_max = 16777216\nnet.core.netdev_max_backlog = 262144\nnet.core.somaxconn = 40960\nnet.ipv4.tcp_max_orphans = 3276800\nnet.ipv4.tcp_max_syn_backlog = 262144\nnet.ipv4.tcp_timestamps = 0\nnet.ipv4.tcp_synack_retries = 1\nnet.ipv4.tcp_syn_retries = 1\nnet.ipv4.tcp_tw_recycle = 1\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_mem = 94500000 915000000 927000000\nnet.ipv4.tcp_fin_timeout = 1\nnet.ipv4.tcp_keepalive_time = 30\nnet.ipv4.ip_local_port_range = 1024 65000\n\n\næ§è¡sysctl -p ä½¿åæ ¸ä¿®æ¹çæ\n\n\n# å®éªä¼åæ¡ä¾\n\né¨ç½²å®éªç¯å¢\n\n1ãé¨ç½²lnmpç¯å¢(ç¥)\n\n2ãä¸ä¸ªå®æ´çnginxéç½®æä»¶æ¡ä¾\n\nuser www www;\nworker_processes 4 :\nworker_cpu_affinity 0001 0010 0100 1000;\nworker_rlimit_nofile 65535;\nerror_log logs/error.log;\n#error_log logs/error.log notice; \n#error_log logs/error.log info; \npid logs/nginx.pid;\nevents {\n\tuse epoll;\n\tworker_connections 8192;\n\tmulti_accept on;\n}\nhttp {\n\tinclude mime.types;\n\tdefault_type application/octet-stream; \n\tlog_format main \'$remote_addr - $remote_user [$time_local] "$request" \'\n\t\t\t\t   \'$status $body_bytes_sent â$http_referer\'\n\t\t\t\t   \'"$http_user_agent" "shttp_x_forwarded_for"\';\n\t#access_log logs/access.log main;\n\tsendfile on;\n\ttcp_nopush on;\n\tkeepalive_timeout 65;\n\ttcp_nodelay on;\n\tclient_header_buffer_size 4k;\n\topen_file_cache max=102400 inactive=20s ;\n\topen_file_cache_valid 30s;\n\topen_file_cache_min_uses 1\n\tclient_header_timeout 15;\n\tclient_body_timeout 15;\n\treset_timedout_connection on;\n\tsend_timeout 15;\n\tserver_tokens off;\n\tclient_max_body_size 10m;\n\tfastcgi_connect timeout 600;\n\tfastcgi_send timeout 600;\n\tfastcgi_read timeout 600;\n\tfastcgi_buffer_size 64k;\n\tfastcgi_buffers 4 64k;\n\tfastcgi_busy_buffers_size 128k;\n\tfastcgi_temp_file_write_size 128k;\n\tfastcgi_temp path /usr/local/nginx1.10/nginx_tmp;\n\tfastcgi_intercept_errors on;\n\tfastcgi_cache_path /usr/local/nginx1.10/fastcgi_cache levels=1:2\n\tkeys_zone=cache_fastcgi:128m inactive=1d max_size=10g;\n\tgzip on;\n\tgzip_min_length 2k;\n\tgzip_buffers 4 32k;gzip_http_version 1.1;\n\tgzip_comp_level 6;\n\tgzip_types text/plain text/css text/javascript application/json\napplication/javascript\napplication/x-javascript application/xml ;\n\tgzip_vary on;\n\tgzip_proxied any;\nserver {\n\tlisten 80; \n\tserver_name www.shengzhe.com; \n\t#charset koi8-r;\n\t#access_log logs/host.access.log main;\n\tlocation ~* ^.+\\.(jpg|gif|png|swf|flv|wma|wmv|asf|mp3|mmf|zip|rar)${\n\t\tvalid_referers none blocked www.shengzhe.com shengzhe.com;\n\t\t\tif ($invalid_referer) {\n\t\t\t\t#return 302 http://www.shengzhe.com/img/nolink.jpg;\n\t\t\t\treturn 404;\n\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\taccess_log off;\n\t\t\t}\n\t\tlocation / {\n\t\t\troot html;\n\t\t\tindex index.php index.html index.htm;\n\t\t\t}\n\t\tlocation ~* \\.(ico|jpeg|gif|png|bmp|swf|flv)$ {\n\t\t\texpires 30d;\n\t\t\t#log_not_found off;\n\t\t\taccess_log off;\n\t\t\t}\n\t\tlocation ~* \\.(js|css)$ {\n\t\t\texpires 7d;\n\t\t\tlog_not_found off;\n\t\t\taccess_log off;\n\t\t\t}\n\t\tlocation = /(favicon.ico|roboots.txt) {\n\t\t\taccess_log off;\n\t\t\tlog_not_found off;\n\t\t\t}\n\t\tlocation /status {\n\t\t\tstub_status on;\n\t\tlocation ~ . *\\.(php|php5)?$ {\n\t\t\troot html;\n\t\t\tfastcgi_pass 127.0.0.1:9000;\n\t\t\tfastcgi_index index.php;\n\t\t\tinclude fastcgi.conf;\n\t\t\tfastcgi_cache cache_fastcgi;\n\t\t\tfastcgi_cache_alid 200 302 1h;\n\t\t\tfastcgi_cache_valid 301 1d;\n\t\t\tfastcgi_cache_valid any 1m;\n\t\t\tfastcgi_cache_min_uses 1;\n\t\t\tfastcgi_cache_use_stale error timeout invalid_header http_500;\n\t\t\tfastcgi_cache_key http://$host$request_uri;\n\t\t#error_page 404 /404.html;\n\t\t# redirect server error pages to the static page /50x.html\n\t\t#\n\t\terror_page 500 502 503 504 /50x.html;\n\t\tlocation = /50x.html {\n\t\t\troot html ;\n\t\t\t}\n\t\t}\n\t}\n\n\n\n\n# éªè¯ãååæµè¯\n\n# 1.éªè¯é²çé¾\n\nä½¿ç¨apacheåä¸ºä¸ä¸ªæµè¯ç«ç¹ï¼ååä¸ºwww.test.com,å¨æµè¯é¡µä¸åä¸ä¸ªè¶é¾æ¥ï¼ é¾æ¥nginxç«ç¹çä¸å¼ å¾ç\n\n$ cat /var/www/html/index.html\n<a href="http://www.shengzhe.com/11.gif">lianjie</a>\n\n\nnginxç«ç¹çç½é¡µç®å½ç»å¦ä¸:\n\n$ tree -c /usr/local/nginx1.16/html/\n/usr/local/nginx1.16/html/\nâââ 11.gif\nâââ 50x.html\nâââ img\nâ       âââ nolink.jpg\nâââ index.html\nâââ mysql_test.php\nâââ test.php\n\n1 directory, 6 files\n\n\nå¨å®¢æ·ç«¯æµè§å¨ä¸­è¾å¥:www.test.com\n\n\n\nç¹å»é¡µé¢é¾æ¥ï¼å¯ä»¥çå°é²çé¾è®¾ç½®å·²ç»çæ\n\n\n\n# 2.éªè¯gzipåè½\n\nä½¿ç¨è°·æ­æµè§å¨æµè¯è®¿é®ï¼å¦ä¸å¾æ¾ç¤ºç»æ: (æç¤º: å¨è®¿é®æµè¯é¡µä¹åæf12é®)\n\n\n\nç¨æ·è®¿é®test.phpæä»¶ï¼ å¨ä¸å¾ä¸­content-encoding:gzipè¡¨æååºç»ç¨æ·çæ°æ®æ¯åç¼©ä¼ è¾ã\n\n# 3.ååæµè¯\n\nç½ç«æ§è½ååæµè¯æ¯æå¡å¨ç½ç«æ§è½è°ä¼è¿ç¨ä¸­å¿ä¸å¯ç¼ºå°çä¸ç¯ãåªæè®©æå¡å¨å¤å¨é«åæåµä¸ï¼æè½çæ­£ä½ç°åºè½¯ä»¶ãç¡¬ä»¶ç­åç§è®¾ç½®ä¸å½ææ´é²åºçé®é¢ã\n\næ§è½æµè¯å·¥å·ç®åæå¸¸è§çæä»¥ä¸å ç§: abãhttp_loadãwebbenchãsiegeã abæ¯apacheèªå¸¦çååæµè¯å·¥å·ãabéå¸¸å®ç¨ï¼å®ä¸ä»å¯ä»¥å¯¹apacheæå¡å¨è¿è¡ç½ç«è®¿é®ååæµè¯ï¼ä¹å¯ä»¥å¯¹æå¶å®ç±»åçæå¡å¨è¿è¡ååæµè¯ãæ¯å¦nginxãtomcatã llsç­ã éè¦å®è£æè½ä½¿ç¨:\n\n$ yum install httpd-tools -y\n\n\næå¸¸ç¨çåæ°:\n\n-n\tæ»çè¦æ§è¡å¤å°ä¸ªè¯·æ±æ°\n-c\tä¸æ¬¡è¦ååºçè¯·æ±æ°(å¹¶åæ°)\n\n\næ§è¡ä»¥ä¸æµè¯å½ä»¤\n\n$ ab -c 500 -n 50000 http://192.168.154.140/index.html\nthis is apachebench, version 2.3 <$revision: 1430300 $>\ncopyright 1996 adam twissï¼zeus technology ltdï¼http://www.zeustech.net/\nlicensed to the apache software foundation, http://www.apache.org/\nbenchmarking 192.168.154.140 (be patient)\ncompleted 5000 requests\ncompleted 10000 requests\ncompleted 15000 requests\ncompleted 20000 requests\ncompleted 25000 requests\ncompleted 30000 requests\ncompleted 35000 requests\ncompleted 40000 requests\ncompleted 45000 requests\ncompleted 50000 requests\nfinished 50000 requests\n\nserver software:\tnginx\nserver hostname :\t192.168.154.140\nserver port:\t\t80\n\ndocument path:\t\t/index.html\ndocument length:\t626 bytes\n\nconcurrency level:\t\t500\ntime taken for tests:\t32.916 seconds\ncomplete requests:\t\t50000\nfailed requests :\t\t12\n\t(connect: 0ï¼receive: 0ï¼length: 6ï¼exceptions: 6)\nwrite errors:\t\t\t0\ntotal transferred: \t\t42600000 bytes\nhtml transferred:\t\t31300000 bytes\nrequests per second:\t1519.01 [#/sec] (mean)\ntime per request:\t\t329.161 [ms] (mean)\ntime per request:\t\t0.658 [ms] (meanï¼ across a11 concurrent requests )\ntransfer rate:\t\t\t1263.87 [kbytes/sec] received\n\nconnection times (ms )\n\t\t\tmin\tmean[+/-sd]\tmedian\tmax\nconnect :\t   0  85  26.8     83    367\nprocessing:\t   8  95  168.8    92  15002\nwaiting:       2  64  28.5     59    374\ntotal :\t\t  82 181 168.5    172  15002\n\npercentage of the requests served within a certain time (ms)\n50%\t\t172\n66%\t\t179\n75%\t\t184\n80%\t\t187\n90%\t\t198\n95%\t\t209\n98%\t\t250\n99%\t\t370\n100% \t15002 (longest request)\n\n\nabæ§è½ææ \n\n1ãååç(requests per second)\n\næå¡å¨å¹¶åå¤çè½åçéåæè¿°ï¼åä½æ¯reqs/s, æçæ¯å¨æä¸ªå¹¶åç¨æ·æ°ä¸åä½æ¶é´åå¤ççè¯·æ±æ°ãæä¸ªå¹¶åç¨æ·æ°ä¸åä½æ¶é´åè½å¤ççæå¤§è¯·æ±æ°,ç§°ä¹ä¸ºæå¤§ååçã\n\nè®°ä½:ååçæ¯åºäºå¹¶åç¨æ·æ°çãè¿å¥è¯ä»£è¡¨äºä¸¤ä¸ªå«ä¹:\n\n * ååçåå¹¶åç¨æ·æ°ç¸å³\n * ä¸åçå¹¶åç¨æ·æ°ä¸,ååçä¸è¬æ¯ä¸åç\n\nè®¡ç®å¬å¼:æ»è¯·æ±æ°/å¤çå®æè¿äºè¯·æ±æ°æè±è´¹çæ¶é´ï¼å³ request per second=complete requests/time taken for tests å¿é¡»è¦è¯´æçæ¯ï¼è¿ä¸ªæ°å¼è¡¨ç¤ºå½åæºå¨çæ´ä½æ§è½ï¼å¼è¶å¤§è¶å¥½ã\n\n2.å¹¶åè¿æ¥æ°(the number of concurrent connections)\n\nå¹¶åè¿æ¥æ°æçæ¯æä¸ªæ¶å»æå¡å¨ææ¥åçè¯·æ±æ°ç®,ç®åçè®²ï¼å°±æ¯ä¸ä¸ªä¼è¯\n\n3.å¹¶åç¨æ·æ°(concurrency level)\n\nè¦æ³¨æåºåè¿ä¸ªæ¦å¿µåå¹¶åè¿æ¥æ°ä¹é´çåºå«ï¼ä¸ä¸ªç¨æ·å¯è½åæ¶ä¼äº§çå¤ä¸ªä¼è¯ï¼ä¹å³è¿æ¥æ°ãå¨http/1.1ä¸ï¼ie7æ¯æä¸¤ä¸ªå¹¶åè¿æ¥ï¼ie8æ¯æ6ä¸ªå¹¶åè¿æ¥ï¼ firefox3æ¯æ4ä¸ªå¹¶åè¿æ¥,æä»¥ç¸åºçï¼æä»¬çå¹¶åç¨æ·æ°å°±å¾é¤ä»¥è¿ä¸ªåºæ°ã\n\n4.ç¨æ·å¹³åè¯·æ±ç­å¾æ¶é´(time per request)\n\nè®¡ç®å¬å¼:å¤çå®æææè¯·æ±æ°æè±è´¹çæ¶é´/ (æ»è¯·æ±æ°/å¹¶åç¨æ·æ°)ï¼å³:\n\ntime per request=time taken for tests/ (complete requests/concurrency level)\n\n5.æå¡å¨å¹³åè¯·æ±ç­å¾æ¶é´(time per request:across all concurrent requests)\n\nè®¡ç®å¬å¼:å¤çå®æææè¯·æ±æ°æè±è´¹çæ¶é´/æ»è¯·æ±æ°,å³:\n\ntime taken for/testscomplete requests\n\nå¯ä»¥çå°ï¼å®æ¯ååççåæ°ã\n\nåæ¶ï¼å®ä¹ç­äºç¨æ·å¹³åè¯·æ±ç­å¾æ¶é´/å¹¶åç¨æ·æ°,å³\n\ntime per request/concurrency level\n\nç¬¬äºæ¬¡ååæµè¯ï¼æ¯è¾ä¸¤æ¬¡çå·®å¼\n\n$ ab -c 1000 -n 10000 http://192.168.154.140/index.html\nthis is apachebenchï¼version 2.3 <srevision: 1430300 $>\ncopyright 1996 adam twissï¼zeus technology ltd, http://www.zeustech.net/\nlicensed to the apache software foundation, http://www.apache.org/\n\nbenchmarking 192.168.154.140 (be patient)\ncompleted 10000 requests\ncompleted 20000 requests\ncompleted 30000 requests\ncompleted 40000 requests\ncompleted 50000 requests\ncompleted 60000 requests\ncompleted 70000 requests\ncompleted 80000 requests\ncompleted 90000 requests\ncompleted 100000 requests\nfinished 100000 requests\n\nserver software:\tnginx\nserver hostname :\t192.168.154.140\nserver port:\t\t80\n\ndocument path:\t\t/index.html\ndocument length:\t626 bytes\n\nconcurrency level:\t\t1000\ntime taken for tests:\t50.908 seconds\ncomplete requests:\t\t10000\nfailed requests :\t\t39\n\t(connect: 0ï¼receive: 0ï¼length: 6ï¼exceptions: 6)\nwrite errors:\t\t\t0\ntotal transferred: \t\t85200000 bytes\nhtml transferred:\t\t62600000 bytes\nrequests per second:\t1964.33 [#/sec] (mean)\ntime per request:\t\t509.080 [ms] (mean)\ntime per request:\t\t0.658 [ms] (meanï¼ across a11 concurrent requests )\ntransfer rate:\t\t\t1634.38 [kbytes/sec] received\n\n\nconnection times (ms )\n\t\t\tmin\tmean[+/-sd]\tmedian\t max\nconnect :\t   0  173  \t50.7    171   638\nprocessing:\t  16  189  211.9    183  15010\nwaiting:       3  122   54.4    115    472\ntotal :\t\t 191  361  207.8    349  15010\n\npercentage of the requests served within a certain time (ms)\n50%\t\t349\n66%\t\t359\n75%\t\t366\n80%\t\t371\n90%\t\t385\n95%\t\t400\n98%\t\t461\n99%\t\t603\n100% \t15010 (longest request)\n\n\n# 4.opcacheæé«phpè®¿åéåº¦\n\nopcacheçåçæ¯optimizer+ï¼ [ËÉptÉËmaÉªzÉr]ä¼åå¨ ï¼,å®æ¯phpçå®æ¹å¬å¸zendå¼åçä¸æ¬¾é­æºä½å¯ä»¥åè´¹ä½¿ç¨çphpä¼åå éç»ä»¶ãoptimizer+å°phpä»£ç é¢ç¼è¯çæçèæ¬æä»¶opcodeç¼å­å¨å±äº«åå­ä¸­ä¾ä»¥ååå¤ä½¿ç¨ï¼ä»èé¿åäºä»ç£çè¯»åä»£ç åæ¬¡ç¼è¯çæ¶é´æ¶èãåæ¶ï¼å®è¿åºç¨äºä¸äºä»£ç ä¼åæ¨¡å¼ï¼ä½¿å¾ä»£ç æ§è¡æ´å¿«ãä»èå éphpçæ§è¡ã å®è£\n\n$ yum install php72w-opcache -y\n\n\nå®æ¹æ¨èéç½®\n\nopcache.enable=1\nopcache.memory_consumption=128\nopcache.interned_strings_buffer=8\nopcache.max_accelerated files=4000\nopcache.revalidate_freq=60\nopcache.fast_shutdown=1\nopcache.enab1e_cli=1\n\n\næµè¯phpå¨æé¡µé¢\n\n$ ab -c 1000 -n 100000 http://192.168.154.140/test.php\nthis is apachebenchï¼version 2.3 <$revision: 1430300 $>\ncopyright 1996 adam twissï¼zeus technology ltdï¼http://www.zeustech.net/\nlicensed to the apache software foundation, http://www.apache.org/\n\nbenchmarking 192.168.154.140 (be patient)\ncompleted 10000 requests\ncompleted 20000 requests\ncompleted 30000 requests\ncompleted 40000 requests\ncompleted 50000 requests\ncompleted 60000 requests\ncompleted 70000 requests\ncompleted 80000 requests\ncompleted 90000 requests\ncompleted 100000 requests\nfinished 100000 requests\n\nserver software:\tnginx\nserver hostname :\t192.168.154.140\nserver port:\t\t80\n\ndocument path:\t\t/text.php\ndocument length:\t73746 bytes\n\nconcurrency level:\t\t1000\ntime taken for tests:\t43.004 seconds\ncomplete requests:\t\t10000\nfailed requests :\t\t0\nwrite errors:\t\t\t0\ntotal transferred: \t\t7392500000 bytes\nhtml transferred:\t\t7371600000 bytes\nrequests per second:\t2325.39 [#/sec] (mean)\ntime per request:\t\t430.036 [ms] (mean)\ntime per request:\t\t0.430 [ms] (meanï¼ across a11 concurrent requests )\ntransfer rate:\t\t\t167875.33 [kbytes/sec] received\n\n\nconnection times (ms)\n\t\t\tmin\tmean[+/-sd]\tmedian\t max\nconnect :\t   1   78  \t54.3     67   524\nprocessing:\t  38  350   80.6    343   824\nwaiting:       1   51   33.8     44   404\ntotal :\t\t 112  428   77.3    409   899\n\npercentage of the requests served within a certain time (ms)\n50%\t\t405\n66%\t\t420\n75%\t\t435\n80%\t\t449\n90%\t\t504\n95%\t\t595\n98%\t\t694\n99%\t\t767\n100% \t899 (longest request)\n',charsets:{cjk:!0}},{title:"Nginx Rewrite",frontmatter:{},regularPath:"/Nginx/04_nginx%E4%BC%98%E5%8C%96%E7%AE%A1%E7%90%86/2.%20Nginx%20Rewrite/Nginx%20Rewrite.html",relativePath:"Nginx/04_nginxä¼åç®¡ç/2. Nginx Rewrite/Nginx Rewrite.md",key:"v-4ae56fbe",path:"/nginx/04_nginxyou-hua-guan-li/2.-nginx-rewrite/nginx-rewrite.html",headers:[{level:2,title:"Rewriteåç½®ç¥è¯",slug:"rewriteåç½®ç¥è¯",normalizedTitle:"rewriteåç½®ç¥è¯",charIndex:194},{level:3,title:"1ãRewriteè·³è½¬åºæ¯",slug:"_1ãrewriteè·³è½¬åºæ¯",normalizedTitle:"1ãrewriteè·³è½¬åºæ¯",charIndex:210},{level:3,title:"2ãRewriteè·³è½¬å®ç°",slug:"_2ãrewriteè·³è½¬å®ç°",normalizedTitle:"2ãrewriteè·³è½¬å®ç°",charIndex:419},{level:3,title:"3ãRewriteå®éåºæ¯",slug:"_3ãrewriteå®éåºæ¯",normalizedTitle:"3ãrewriteå®éåºæ¯",charIndex:766},{level:2,title:"Rewriteå¿å¤ç¥è¯",slug:"rewriteå¿å¤ç¥è¯",normalizedTitle:"rewriteå¿å¤ç¥è¯",charIndex:1047},{level:3,title:"1ãæ­£åè¡¨è¾¾å¼",slug:"_1ãæ­£åè¡¨è¾¾å¼",normalizedTitle:"1ãæ­£åè¡¨è¾¾å¼",charIndex:1063},{level:3,title:"2ãRewriteè¯­æ³",slug:"_2ãrewriteè¯­æ³",normalizedTitle:"2ãrewriteè¯­æ³",charIndex:1170},{level:3,title:"3ãlocation",slug:"_3ãlocation",normalizedTitle:"3ãlocation",charIndex:2543},{level:2,title:"Rewriteéç½®æ¡ä¾",slug:"rewriteéç½®æ¡ä¾",normalizedTitle:"rewriteéç½®æ¡ä¾",charIndex:4258},{level:3,title:"YUMå®è£Nginx",slug:"yumå®è£nginx",normalizedTitle:"yumå®è£nginx",charIndex:4274},{level:3,title:"åºäºååçè·³è½¬",slug:"åºäºååçè·³è½¬",normalizedTitle:"åºäºååçè·³è½¬",charIndex:4697},{level:3,title:"åºäºå®¢æ·ç«¯IPè®¿é®è·³è½¬",slug:"åºäºå®¢æ·ç«¯ipè®¿é®è·³è½¬",normalizedTitle:"åºäºå®¢æ·ç«¯ipè®¿é®è·³è½¬",charIndex:5541},{level:3,title:"åºäºæ§ååè·³è½¬å°æ°åååé¢å ç®å½",slug:"åºäºæ§ååè·³è½¬å°æ°åååé¢å ç®å½",normalizedTitle:"åºäºæ§ååè·³è½¬å°æ°åååé¢å ç®å½",charIndex:6337},{level:3,title:"åºäºåæ°å¹éçè·³è½¬",slug:"åºäºåæ°å¹éçè·³è½¬",normalizedTitle:"åºäºåæ°å¹éçè·³è½¬",charIndex:7066},{level:3,title:"åºäºç®å½ä¸ææphpç»å°¾çæä»¶è·³è½¬",slug:"åºäºç®å½ä¸ææphpç»å°¾çæä»¶è·³è½¬",normalizedTitle:"åºäºç®å½ä¸ææphpç»å°¾çæä»¶è·³è½¬",charIndex:7351},{level:3,title:"åºäºææ®éä¸æ¡urlè¯·æ±çè·³è½¬,è®¿é®ä¸ä¸ªå·ä½çé¡µé¢è·³è½¬å°é¦é¡µ",slug:"åºäºææ®éä¸æ¡urlè¯·æ±çè·³è½¬-è®¿é®ä¸ä¸ªå·ä½çé¡µé¢è·³è½¬å°é¦é¡µ",normalizedTitle:"åºäºææ®éä¸æ¡urlè¯·æ±çè·³è½¬,è®¿é®ä¸ä¸ªå·ä½çé¡µé¢è·³è½¬å°é¦é¡µ",charIndex:7595},{level:3,title:"æ»ç»",slug:"æ»ç»",normalizedTitle:"æ»ç»",charIndex:7804}],headersStr:"Rewriteåç½®ç¥è¯ 1ãRewriteè·³è½¬åºæ¯ 2ãRewriteè·³è½¬å®ç° 3ãRewriteå®éåºæ¯ Rewriteå¿å¤ç¥è¯ 1ãæ­£åè¡¨è¾¾å¼ 2ãRewriteè¯­æ³ 3ãlocation Rewriteéç½®æ¡ä¾ YUMå®è£Nginx åºäºååçè·³è½¬ åºäºå®¢æ·ç«¯IPè®¿é®è·³è½¬ åºäºæ§ååè·³è½¬å°æ°åååé¢å ç®å½ åºäºåæ°å¹éçè·³è½¬ åºäºç®å½ä¸ææphpç»å°¾çæä»¶è·³è½¬ åºäºææ®éä¸æ¡urlè¯·æ±çè·³è½¬,è®¿é®ä¸ä¸ªå·ä½çé¡µé¢è·³è½¬å°é¦é¡µ æ»ç»",content:'# Nginx Rewrite\n\nç°å¨Nginxå·²ç»æä¸ºå¾å¤å¬å¸ä½ä¸ºåç«¯ååä»£çæå¡å¨çé¦éï¼å¨å®éå·¥ä½ä¸­å¾å¾ä¼éå°å¾å¤è·³è½¬(éåURL)çéæ±ãæ¯å¦æ´æ¢åååéè¦ä¿ææ§çååè½è·³è½¬å°æ°çååä¸ãæç½é¡µåçæ¹åéè¦è·³è½¬å°æ°çé¡µé¢ãç½ç«é²çé¾ç­ç­éæ±ãå¦æå¨åç«¯ä½¿ç¨çApacheæå¡å¨ï¼ è½ç¶ä¹è½åè·³è½¬,è§ååºä¹å¾å¼ºå¤§ï¼ä½æ¯ç¨Nginxè·³è½¬æçä¼æ´é«ï¼è¿ä¹æ¯å­¦ä¹ æ¬ç« çç®çæå¨ã\n\n\n# Rewriteåç½®ç¥è¯\n\n\n# 1ãRewriteè·³è½¬åºæ¯\n\nRewriteè·³è½¬åºæ¯ä¸»è¦åæ¬ä»¥ä¸å ç§:\n\n1.å¯ä»¥è°æ´ç¨æ·æµè§çURL,çèµ·æ¥æ´è§èï¼åä¹å¼ååäº§åäººåçéæ±;\n\n2.ä¸ºäºè®©æç´¢å¼ææå½ç½ç«åå®¹åç¨æ·ä½éªæ´å¥½ï¼ä¼ä¸ä¼å°å¨æURLå°åä¼ªè£æéæå°åæä¾æå¡;\n\n3.ç½åæ¢æ°åååï¼è®©æ§çè®¿é®è·³è½¬å°æ°çååä¸ãä¾å¦ï¼è®¿é®äº¬ä¸ç360buy.comä¼è·³è½¬å°jd.com;\n\n4.æ ¹æ®ç¹æ®åéãç®å½ãå®¢æ·ç«¯çä¿¡æ¯è¿è¡URLè°æ´ç­ã\n\n\n# 2ãRewriteè·³è½¬å®ç°\n\nNginx æ¯éè¿ngx_http_rewrite_moduleæ¨¡åæ¯æurléåãæ¯æifæ¡ä»¶å¤æ­ï¼ä½ä¸æ¯æelseãå¦å¤è¯¥æ¨¡åéè¦PCREæ¯æï¼åºå¨ç¼è¯Nginxæ¶æå®PCREï¼PCREåºæ¯ææ­£åè¡¨è¾¾å¼ï¼æ¯æï¼é»è®¤å·²ç»å®è£ãæ ¹æ®ç¸å³åééå®ååéæ©ä¸åçéç½®ï¼ä»ä¸ä¸ªlocationè·³è½¬å°å¦ä¸ä¸ªlocation, ä¸è¿è¿æ ·çå¾ªç¯æå¤å¯ä»¥æ§è¡10æ¬¡ï¼è¶è¿åNginxå°è¿å500éè¯¯ãåæ¶ï¼éåæ¨¡ååå«setæä»¤ï¼æ¥åå»ºæ°çåéå¹¶è®¾å¶å¼ï¼è¿å¨æäºææ¯ä¸éå¸¸æç¨çï¼å¦è®°å½æ¡ä»¶æ è¯ãä¼ éåæ°å°å¶ä»location.è®°å½åäºä»ä¹ç­ç­ãrewriteåè½å°±æ¯ï¼ ä½¿ç¨Nginxæä¾çå¨å±åéæèªå·±è®¾ç½®çåéï¼ç»åæ­£åè¡¨è¾¾å¼åæ å¿ä½å®ç°url éåä»¥åéå®åã\n\n\n# 3ãRewriteå®éåºæ¯\n\nå¨å®éå·¥ä½åºæ¯ï¼Nginxè·³è½¬éæ±æä¸ç§æ¹å¼å¯å®ç°ãå¯ä»¥ç´æ¥ç¨rewriteè¿è¡å¹éè·³è½¬ï¼ä¹å¯ä»¥ä½¿ç¨ifå¹éå¨å±åéåè·³è½¬ï¼å¦å¤è¿å¯ä»¥ä½¿ç¨locationå¹éåè·³è½¬ï¼æä»¥rewriteåªè½æ¾å¨server{}, if{},location{}æ®µä¸­ï¼ä¾å¦locationåªè½å¯¹åååè¾¹çé¤å»ä¼ éçåæ°å¤çå­ç¬¦ä¸²èµ·ä½ç¨ï¼ä¾å¦http://www.domain.com/index.php?id=1åªå¯¹/index.phpéåãå¦ææ³å¯¹ååæåæ°å­ç¬¦ä¸²èµ·ä½ç¨ï¼å¯ä»¥ä½¿ç¨ifå¨å±åéå¹éï¼ä¹å¯ä»¥ä½¿ç¨proxy_ passååä»£çã\n\n\n# Rewriteå¿å¤ç¥è¯\n\n\n# 1ãæ­£åè¡¨è¾¾å¼\n\nå­¦ä¹ Rewriteä¹åè¦å¯¹æ­£åè¡¨è¾¾å¼è¦å¾çæï¼ä¸è¡¨ä¸­åä¸¾åºä¸äºå¸¸ç¨çæ­£åè¡¨è¾¾å¼åå­ç¬¦ãè¦æ·±å»çè§£åå­¦ä¹ æ¯ä¸ªåå­ç¬¦çå«ä¹ï¼å¹¶ä¸å¤å¨æè¿è¡å®éªï¼å¨å®éçäº§ç¯å¢ä¸­è¦ç»åå¤ä¸ªåå­ç¬¦ä¸èµ·ä½¿ç¨ã\n\n\n\n\n# 2ãRewriteè¯­æ³\n\nSyntax: rewrite regex replacement [flag] ; \nDefault: -\nContext: server, location,if\n\n\nå¦æregexå¹éäºä¸ä¸ªè¯·æ±çURI,è¯¥URIè¢«æ¿æ¢ä¸ºreplacementï¼[rÉªËpleÉªsmÉnt] æ¿æ¢ï¼ã rewrite æä»¤å¨éç½®æä»¶ä¸­æç§åºç°çé¡ºåºæ§è¡ãå¯ä½¿ç¨flagä¸­æ­¢è¿ä¸æ­¥çå¤çãå¦æreplacementä»¥"http://","https://"ä¸ºèµ·å§çå­ç¬¦ä¸²ï¼å°ä¸­æ­¢å¤çï¼å¹¶è¿åéå®åæä»¤ç»å®¢æ·ç«¯ã\n\nflagåæ°çå¼å¯ä»¥ä¸º:\n\n * laståæ­¢å½ångx_http.rewrite_moduleæ¨¡åæä»¤éçå¤ç, å¹¶ä¸ºä¿®æ¹åçURIå¯»æ¾æ°çå¹éçlocation\n * breakåæ­¢å½ångx_http.rewrite.moduleæ¨¡åæä»¤éçå¤çï¼ä¸breakï¼éå®åæ¨¡åä¸­çbreakï¼æä»¤ä½ç¨ç¸åï¼æ¬æ¡è§åå¹éå®æå³ç»æ­¢ï¼ä¸åå¹éåé¢çä»»ä½è§å\n * redirectè¿å302ä»£ç çä¸´æ¶éå®å,å½replacementä¸ä»¥"httpt://","https://âä¸ºèµ·å§çå­ç¬¦ä¸²æ¶ä½¿ç¨ãæµè§å¨å°åä¼æ¾ç¤ºè·³è½¬åçURUå°åï¼ç¬è«ä¸ä¼æ´æ°url (å ä¸ºæ¯ä¸´æ¶)\n * permanentè¿å301ä»£ç çæ°¸ä¹éå®åãæµè§å¨å°åæ ä¼æ¾ç¤ºè·³è½¬åçURLå°å,ç¬è«æ´æ°urlã\n\nå¦æåé¢ä¸è·flagæ è®°ï¼é£ä¹é»è®¤æ¯302ä¸´æ¶éå®åãå¨å®éå·¥ä½åºæ¯ä¸­ï¼è¿æå¦ä¸ç§returnæå®ãå ä¸º301å302ä¸è½ç®åçåªè¿åç¶æç ï¼è¿å¿é¡»æéå®åçURL,è¿å°±æ¯returnæä»¤æ æ³è¿å301 ,302çåå äºã\n\nä¾å­:\n\nserver{\n\t...\n\trewrite ^(/download/.*)/media/(.*)\\..*$ $1/mp3/$2.mp3 last;\n\trewrite ^(/download/.*)/audio/(.*)\\..*$ $1/mp3/$2.ra  last;\n\treturn 403 ; \n\t...\n}\n\n\nä½å¦æè¿äºæä»¤è¢«æ¾å¥"/download" locationåºåä¸­ï¼åºå°last flagæ¿æ¢ä¸ºbreak,å¦ånginxä¼ä¸æ­å¾ªç¯ï¼è¾¾å°10æ¬¡åï¼è¿å500 error\n\nlocation /download {\n\t...\n\trewrite ^(/download/.*)/media/(.*)\\..*$ $1/mp3/$2.mp3 break;\n\trewrite ^(/download/.*)/audio/(.*)\\..*$ $1/mp3/$2.ra  break;\n\treturn 403 ; \n\t...\n}\n\n\nlastä¸è¬åå¨serveråifä¸­ï¼èbreakä¸è¬ä½¿ç¨å¨locationä¸­ãlastä¸ç»æ­¢éååçurlå¹éï¼ å³æ°çurlä¼åä»serverèµ°ä¸éå¹éæµç¨ï¼ èbreakç»æ­¢éååçå¹éã\n\nå¦æreplacementåå«è¯·æ±åæ°ï¼åæ¥çè¯·æ±åæ°å°è¢«è¿½å å¨åé¢ãå¦æä¸å¸æè¿½å åæ¥çè¯·æ±åæ°,å¯å¨replacementå­ç¬¦ä¸²çæ«å°¾æ·»å ä¸ä¸ª"?âç¬¦å·ï¼ ä¾å¦:\n\nrewrite ^/users/(.*)$ /show?user=$1? last;\n\n\n\n# 3ãlocation\n\nSyntax: location [ = | ~ | ~*| ^~] uri { ... }\n\tlocation @name { ... }\nDefault: -\nContext: server, location\n\n\næ ¹æ®è¯·æ±çURIè®¾ç½®éç½®ãå¨ä¸ä¸ªserverä¸­locationéç½®æ®µå¯å­å¨å¤ä¸ª,ç¨äºå®ç°URIå°æä»¶ç³»ç»çè·¯å¾æ å°;\n\nå¹éå­ç¬¦ä¸²åä¸ºä¸¤ç§:æ®éå­ç¬¦ä¸²(literal string)åæ­£åè¡¨è¾¾å¼(regular expression)ï¼å¶ä¸­~å~*ç¨äºæ­£åè¡¨è¾¾å¼ï¼å¶ä»åç¼åæ ä»»ä½åç¼é½ç¨äºæ®éå­ç¬¦ä¸²ã\n\n@ç¨æ¥å®ä¹ä¸ä¸ªå½ålocationãä¸»è¦ç¨äºåé¨éå®åï¼ä¸è½ç¨æ¥å¤çæ­£å¸¸çè¯·æ±ãå¶ç¨æ³å¦ä¸ï¼\n\nlocation / {\n    try_files $uri $uri/ @custom\n}\nlocation @custom {\n    # ...do something\n}\n\n\nä¸ä¾ä¸­ï¼å½å°è¯è®¿é®urlæ¾ä¸å°å¯¹åºçæä»¶å°±éå®åå°æä»¬èªå®ä¹çå½ålocationï¼æ­¤å¤ä¸ºcustomï¼ãå¼å¾æ³¨æçæ¯ï¼å½ålocationä¸­ä¸è½ååµå¥å¶å®çå½ålocationã\n\nå¹éé¡ºåºæ¯:\n\n1.åå¹éæ®éå­ç¬¦ä¸²ï¼å°æç²¾ç¡®çå¹éææ¶å­å¨; 2.ç¶åæç§éç½®æä»¶ä¸­çå£°æé¡ºåºè¿è¡æ­£åè¡¨è¾¾å¼å¹éï¼åªè¦å¹éå°ä¸æ¡æ­£åè¡¨è¾¾å¼ï¼ååæ­¢å¹é,åæ­£åè¡¨è¾¾å¼ä¸ºå¹éç»æ; 3.å¦ææææ­£åè¡¨è¾¾å¼é½å¹éä¸ä¸,åå1ä¸­å­å¨çç»æ; 4.å¦ææ®éå­ç¬¦ä¸²åæ­£åè¡¨è¾¾å¼é½å¹éä¸ä¸,åæ¥404 NOT FOUND 5.â^~âå"=âé½è½é»æ­¢ç»§ç»­æç´¢æ­£ålocationãä¸åç¹æ¯â^~âä¾ç¶éµå®âæå¤§åç¼âå¹éè§åï¼ç¶èâ=âä¸æ¯âæå¤§åç¼"ï¼èæ¯å¿é¡»æ¯ä¸¥æ ¼å¹é 6.åªè¦éå°\'ç²¾ç¡®å¹éexact matchâ,å³ä½¿æ®élocationæ²¡æå¸¦"=âæâ^~âåç¼ï¼ä¹ä¸æ ·ä¼ç»æ­¢åé¢çå¹éãä¾å¦:\n\nlocation = /uri         =å¼å¤´è¡¨ç¤ºç²¾ç¡®åç¼å¹éï¼åªæå®å¨å¹éæè½çæã\nlocation ^~ /uri        ^~å¼å¤´è¡¨ç¤ºæ®éå­ç¬¦ä¸²å¹éä¸ä»¥åä¸åè¿è¡æ­£åå¹éã\nlocation ~ pattern      ~å¼å¤´è¡¨ç¤ºåºåå¤§å°åçæ­£åå¹éã\nlocation ~* pattern      ~*å¼å¤´è¡¨ç¤ºä¸åºåå¤§å°åçæ­£åå¹éã\nlocation /uri           ä¸å¸¦ä»»ä½ä¿®é¥°ç¬¦ï¼è¡¨ç¤ºåç¼å¹éã\nlocation /              éç¨å¹éï¼ä»»ä½æªå¹éå°å¶ä»locationçè¯·æ±é½ä¼å¹éå°ã\n\n\néç½®ä¸¾ä¾ï¼\n\nlocation = / {\n\t[ configuration A ]\n}\n\nlocation / {\n\t[ configuration B ]\n}\n\nlocation /documents/ {\n\t[ configuration C ]\n}\n\nlocation ^~ /images/ {\n\t[ configuration D ]\n}\n\nlocation ~* \\. (gif|jpg|jpeg)$ {\n\t[ configuration E ]\n}\n\n#â/âè¯·æ±å¹éconfiguration A:\n#â/index. html"è¯·æ±å¹éconfiguration B:\n#"/documents/ document.html"è¯·æ±å¹éconfiguration C:\n#"/images/1.gif"è¯·æ±å¹éconfiguration D:\n#"/documents/1.jpg"è¯·æ±å¹éconfiguration E.\n\n#æ³¨æ:æ­£åå¹éä¼æ ¹æ®å¹éé¡ºåºï¼æ¾å°ç¬¬ä¸ä¸ªå¹éå¾æ­£åè¡¨è¾¾å¼åå°åæ­¢æç´¢ã\n#æ®éå­ç¬¦ä¸²å¹éåæ è§é¡ºåºï¼åªä¼éæ©æç²¾ç¡®çå¹éã\n\n\næ³¨:ä»åè½çrewriteålocationä¼¼ä¹æ ç¹åï¼é½è½å®ç°è·³è½¬,ä¸»è¦åºå«å¨äºrewriteæ¯å¨åä¸åååæ´æ¹è·åèµæºçè·¯å¾ï¼èlocationæ¯å¯¹ä¸ç±»è·¯å¾åæ§å¶è®¿é®æååä»£çï¼è¿å¯ä»¥proxy_passå°å¶ä»æºå¨ãå¾å¤æåµä¸rewriteä¹ä¼åå¨locationéã\n\n\n# Rewriteéç½®æ¡ä¾\n\n\n# YUMå®è£Nginx\n\nå®è£å®æåï¼ä¿®æ¹éç½®æä»¶(/etc/nginx/conf.d/default.conf )å¦ä¸:\n\nserver {\n        listen   80;\n        server_name www.domain.com ;\n\n        #charset koi8-r;\n        access_log /var/log/nginx/www.domain.com-access.log main;\n\n        location / {\n                root /opt/nginx/html;\n                index index.html index.htm;\n        }\n    ......#çç¥é¨ååå®¹\n}\n\n\n\næ³¨æäºé¡¹:åæ¯ä¸æ­¥åºæ¯æµè¯ä¹åè¯·ç¡®å®è¿ä¸ªååå¯ä»¥æ­£å¸¸è§£æï¼æ¯åä¸ä¸ä¸ªåºæ¯ä¹åè¯·å é¤ä¸ä¸ä¸ªåºæ¯çéç½®ï¼å¦å¤æ¸é¤æµè§å¨ç¼å­ã\n\n\n# åºäºååçè·³è½¬\n\nç°å¨å¬å¸æ§ååwww.domain.comæä¸å¡éæ±æåæ´ï¼éè¦ä½¿ç¨æ°ååwww.newdomain.comä»£æ¿,ä½æ¯æ§ååä¸è½åºé¤ï¼éè¦è·³è½¬å°æ°ååä¸,èä¸åé¢çåæ°ä¿æä¸åã\n\nå¨/etc/nginx/conf.d/default.conf æä»¶éçlocationä¸é¢æ·»å å¦ä¸åå®¹:\n\nserver {\n    listen   80;\n    server_name www.newdomain.com www.domain.com ;\n\n    #charset koi8-r;\n    access_log /var/log/nginx/www.domain.com-access.log main;\n\n    location / {\n         root /opt/nginx/html;\n         index index.html index.htm;\n         if ($host = \'www.domain.com\'){\n             rewrite ^/(.*) http://www.newdomain.com/$1 permanent;\n         }\n    }\n    \n}\n\n\nä¿®æ¹éç½®æä»¶åï¼éå¯nginxæå¡\n\nä½¿ç¨å®¢æ·ç«¯æµè§å¨è®¿é®æ§ååï¼ååç´æ¥è·³è½¬,æF12å¯ä»¥æ¸æ¥ççå°ä»æ§ååwww.domain.comè·³è½¬å°äºæ°ååwww.newdomain.comä¸ï¼ç¶æç æ¯301æ°¸ä¹éå®åã\n\n\n\nåååé¢å åæ°è·³è½¬ï¼å ä¸ºå¨ä»£ç ä¸­å¾å¤çè¯·æ±æ¯å¸¦åæ°ç,æä»¥è¦ä¿è¯åæ°é½è½æ­£å¸¸è·³è½¬ãæµè§å¨è¾å¥æ¨¡æè®¿é®http://www.domain.com/test/1/index.php(è½ç¶è¿ä¸ªè¯·æ±åå®¹æ¯ä¸å­å¨ç)è·³è½¬å°http://www.newdomain.com/test/1/index.phpï¼ä»headerséé¢å¯ä»¥çå°301å®ç°äºæ°¸ä¹éå®åè·³è½¬ï¼èä¸åååçåæ°ä¹æ­£å¸¸è·³è½¬ã\n\n\n\n\n# åºäºå®¢æ·ç«¯IPè®¿é®è·³è½¬\n\nä¾å¦ä»å¤©å¬å¸ä¸å¡çæ¬ä¸çº¿ï¼ææIPè®¿é®ä»»ä½åå®¹é½æ¾ç¤º-ä¸ä¸ªåºå®ç»´æ¤é¡µé¢ï¼åªæå¬å¸Pè®¿é®æ­£å¸¸ã\n\nå¨/etc/nginx/conf.d/default.confæä»¶éæ·»å å¦ä¸åå®¹\n\nserver {\n    listen   80;\n    server_name www.newdomain.com www.domain.com ;\n\n    #charset koi8-r;\n    access_log /var/log/nginx/www.domain.com-access.log main;\n\n    #ä¸é¢æ¯æ·»å çåå®¹\n    set $rewrite true;\n    \n    if ($remote_addr = \'192.168.154.1\') {\n        set $rewrite false;\n    }\n    if ($rewrite = true) {\n        rewrite (.+) /maintenance.html;\n    }\n    \n    location = /maintenance.html {\n\t\troot /opt/nginx/html;\n\t}\n    \n   ......#çç¥å¾å¤åå®¹ \n    \n}\n$ echo \'Website is Maintainingï¼ Please visit later !â> /opt/nginx/html/maintenance.html\n$ systemctl restart nginx\n\n\nåªæIPä¸º192.1 68.154.1è½æ­£å¸¸è®¿é®ï¼å¶å®å°åé½æ¯ç»´æ¤é¡µé¢ï¼ä½¿ç¨-ä¸ä¸ªå±åç½çå¶å®IPå°åç¨æµè§å¨è®¿é®http://www.domain.comåååå åæ°é½æ¯è¯·æ±çmaintenance.htmlé¡µé¢çåå®¹ï¼èä¸ç¶æç æ¯200\n\n\n\n\n# åºäºæ§ååè·³è½¬å°æ°åååé¢å ç®å½\n\nä¾å¦ç°å¨è®¿é®çæ¯http://bbs.domain.com,ç°å¨éè¦å°è¿ä¸ªååä¸é¢çåå¸é½è·³è½¬å°http://www.domain.com/bbsï¼æ³¨æä¿æååè·³è½¬åçåæ°ä¸åã\n\nä¿®æ¹/et/nginx/conf. d/default.conféç½®æä»¶å¦ä¸ï¼\n\nserver {\n    listen   80;\n    server_name www.newdomain.com www.domain.com bbs.domain.com;\n\n    #charset koi8-r;\n    access_log /var/log/nginx/www.domain.com-access.log main;\n\n    location / {\n         root /opt/nginx/html;\n         index index.html index.htm;\n         if ($host = \'www.domain.com\'){\n             rewrite ^/(.*) http://www.newdomain.com/$1 permanent;\n         }\n    }\n    \n    location /post {\n        rewrite (.+) http://www.domain.com/bbbs$1 permanent;\n    }\n    \n}\n\n\næ¨¡æä½¿ç¨æµè§å¨è®¿é®http://bbs.domain.com/post/1 .php ,è·³è½¬å°http://www.ewdomain.com/bbs/post/1.php\n\n\n\n\n# åºäºåæ°å¹éçè·³è½¬\n\nä¾å¦ç°å¨è®¿é®hp://www.domain.com/100-100|200)-100.htmlè·³è½¬å°http://www.domain.comé¡µé¢\n\nç¼è¾/etc/nginx/conf. d/default.confæä»¶éæ·»å å¦ä¸åå®¹:\n\nlocation ~* /100-(100|200)-(\\d+).html$ {\n    rewrite (.*) http://www.domain.com permanent;\n}\n\n\néå¯æå¡å¨åï¼ä½¿ç¨æµè§å¨è®¿é®http://www domain.com/100-200-100.html\n\n\n\n\n# åºäºç®å½ä¸ææphpç»å°¾çæä»¶è·³è½¬\n\nè®¿é®http://www.domain.com/upload/1.phpè·³è½¬å°é¦é¡µ\n\nç¼è¾/etc/nginx/conf. d/default.confæä»¶éæ·»å å¦ä¸åå®¹:\n\nlocation ~* /upload/.*\\.php$ {\n\trewrite (.+) http://www.domain.com permanent;\n}\n\n\néå¯æå¡ï¼æµè§å¨è®¿é®http://www.domain.com/upload/1.phpå³å¯å®ç°è·³è½¬\n\n\n# åºäºææ®éä¸æ¡urlè¯·æ±çè·³è½¬,è®¿é®ä¸ä¸ªå·ä½çé¡µé¢è·³è½¬å°é¦é¡µ\n\nç¼è¾/etc/nginx/conf.d/default.confæä»¶éæ·»å å¦ä¸åå®¹:\n\nlocation ~* ^/1/test.html {\n\trewrite (.+) http://www.domain.com permanent;\n}\n\n\néå¯æå¡åï¼æµè§å¨è®¿é®http://www.domain.com/1/test.htmlè·³è½¬å°é¦é¡µ\n\n\n# æ»ç»\n\nå³äºNginx rewriteæ¬ç« çåå®¹å°±è¿ä¹å¤ãå¶å®å¨å®éå·¥ä½ä¸­è¿è¿ä¸æ­¢è¿äºåºæ¯ï¼èä¸ä¼æ´å å¤æç¹çï¼å¸æåå­¦ä»¬è½ä¸¾ä¸åä¸ï¼å¤å ç»ä¹ ã',normalizedContent:'# nginx rewrite\n\nç°å¨nginxå·²ç»æä¸ºå¾å¤å¬å¸ä½ä¸ºåç«¯ååä»£çæå¡å¨çé¦éï¼å¨å®éå·¥ä½ä¸­å¾å¾ä¼éå°å¾å¤è·³è½¬(éåurl)çéæ±ãæ¯å¦æ´æ¢åååéè¦ä¿ææ§çååè½è·³è½¬å°æ°çååä¸ãæç½é¡µåçæ¹åéè¦è·³è½¬å°æ°çé¡µé¢ãç½ç«é²çé¾ç­ç­éæ±ãå¦æå¨åç«¯ä½¿ç¨çapacheæå¡å¨ï¼ è½ç¶ä¹è½åè·³è½¬,è§ååºä¹å¾å¼ºå¤§ï¼ä½æ¯ç¨nginxè·³è½¬æçä¼æ´é«ï¼è¿ä¹æ¯å­¦ä¹ æ¬ç« çç®çæå¨ã\n\n\n# rewriteåç½®ç¥è¯\n\n\n# 1ãrewriteè·³è½¬åºæ¯\n\nrewriteè·³è½¬åºæ¯ä¸»è¦åæ¬ä»¥ä¸å ç§:\n\n1.å¯ä»¥è°æ´ç¨æ·æµè§çurl,çèµ·æ¥æ´è§èï¼åä¹å¼ååäº§åäººåçéæ±;\n\n2.ä¸ºäºè®©æç´¢å¼ææå½ç½ç«åå®¹åç¨æ·ä½éªæ´å¥½ï¼ä¼ä¸ä¼å°å¨æurlå°åä¼ªè£æéæå°åæä¾æå¡;\n\n3.ç½åæ¢æ°åååï¼è®©æ§çè®¿é®è·³è½¬å°æ°çååä¸ãä¾å¦ï¼è®¿é®äº¬ä¸ç360buy.comä¼è·³è½¬å°jd.com;\n\n4.æ ¹æ®ç¹æ®åéãç®å½ãå®¢æ·ç«¯çä¿¡æ¯è¿è¡urlè°æ´ç­ã\n\n\n# 2ãrewriteè·³è½¬å®ç°\n\nnginx æ¯éè¿ngx_http_rewrite_moduleæ¨¡åæ¯æurléåãæ¯æifæ¡ä»¶å¤æ­ï¼ä½ä¸æ¯æelseãå¦å¤è¯¥æ¨¡åéè¦pcreæ¯æï¼åºå¨ç¼è¯nginxæ¶æå®pcreï¼pcreåºæ¯ææ­£åè¡¨è¾¾å¼ï¼æ¯æï¼é»è®¤å·²ç»å®è£ãæ ¹æ®ç¸å³åééå®ååéæ©ä¸åçéç½®ï¼ä»ä¸ä¸ªlocationè·³è½¬å°å¦ä¸ä¸ªlocation, ä¸è¿è¿æ ·çå¾ªç¯æå¤å¯ä»¥æ§è¡10æ¬¡ï¼è¶è¿ånginxå°è¿å500éè¯¯ãåæ¶ï¼éåæ¨¡ååå«setæä»¤ï¼æ¥åå»ºæ°çåéå¹¶è®¾å¶å¼ï¼è¿å¨æäºææ¯ä¸éå¸¸æç¨çï¼å¦è®°å½æ¡ä»¶æ è¯ãä¼ éåæ°å°å¶ä»location.è®°å½åäºä»ä¹ç­ç­ãrewriteåè½å°±æ¯ï¼ ä½¿ç¨nginxæä¾çå¨å±åéæèªå·±è®¾ç½®çåéï¼ç»åæ­£åè¡¨è¾¾å¼åæ å¿ä½å®ç°url éåä»¥åéå®åã\n\n\n# 3ãrewriteå®éåºæ¯\n\nå¨å®éå·¥ä½åºæ¯ï¼nginxè·³è½¬éæ±æä¸ç§æ¹å¼å¯å®ç°ãå¯ä»¥ç´æ¥ç¨rewriteè¿è¡å¹éè·³è½¬ï¼ä¹å¯ä»¥ä½¿ç¨ifå¹éå¨å±åéåè·³è½¬ï¼å¦å¤è¿å¯ä»¥ä½¿ç¨locationå¹éåè·³è½¬ï¼æä»¥rewriteåªè½æ¾å¨server{}, if{},location{}æ®µä¸­ï¼ä¾å¦locationåªè½å¯¹åååè¾¹çé¤å»ä¼ éçåæ°å¤çå­ç¬¦ä¸²èµ·ä½ç¨ï¼ä¾å¦http://www.domain.com/index.php?id=1åªå¯¹/index.phpéåãå¦ææ³å¯¹ååæåæ°å­ç¬¦ä¸²èµ·ä½ç¨ï¼å¯ä»¥ä½¿ç¨ifå¨å±åéå¹éï¼ä¹å¯ä»¥ä½¿ç¨proxy_ passååä»£çã\n\n\n# rewriteå¿å¤ç¥è¯\n\n\n# 1ãæ­£åè¡¨è¾¾å¼\n\nå­¦ä¹ rewriteä¹åè¦å¯¹æ­£åè¡¨è¾¾å¼è¦å¾çæï¼ä¸è¡¨ä¸­åä¸¾åºä¸äºå¸¸ç¨çæ­£åè¡¨è¾¾å¼åå­ç¬¦ãè¦æ·±å»çè§£åå­¦ä¹ æ¯ä¸ªåå­ç¬¦çå«ä¹ï¼å¹¶ä¸å¤å¨æè¿è¡å®éªï¼å¨å®éçäº§ç¯å¢ä¸­è¦ç»åå¤ä¸ªåå­ç¬¦ä¸èµ·ä½¿ç¨ã\n\n\n\n\n# 2ãrewriteè¯­æ³\n\nsyntax: rewrite regex replacement [flag] ; \ndefault: -\ncontext: server, location,if\n\n\nå¦æregexå¹éäºä¸ä¸ªè¯·æ±çuri,è¯¥uriè¢«æ¿æ¢ä¸ºreplacementï¼[rÉªËpleÉªsmÉnt] æ¿æ¢ï¼ã rewrite æä»¤å¨éç½®æä»¶ä¸­æç§åºç°çé¡ºåºæ§è¡ãå¯ä½¿ç¨flagä¸­æ­¢è¿ä¸æ­¥çå¤çãå¦æreplacementä»¥"http://","https://"ä¸ºèµ·å§çå­ç¬¦ä¸²ï¼å°ä¸­æ­¢å¤çï¼å¹¶è¿åéå®åæä»¤ç»å®¢æ·ç«¯ã\n\nflagåæ°çå¼å¯ä»¥ä¸º:\n\n * laståæ­¢å½ångx_http.rewrite_moduleæ¨¡åæä»¤éçå¤ç, å¹¶ä¸ºä¿®æ¹åçuriå¯»æ¾æ°çå¹éçlocation\n * breakåæ­¢å½ångx_http.rewrite.moduleæ¨¡åæä»¤éçå¤çï¼ä¸breakï¼éå®åæ¨¡åä¸­çbreakï¼æä»¤ä½ç¨ç¸åï¼æ¬æ¡è§åå¹éå®æå³ç»æ­¢ï¼ä¸åå¹éåé¢çä»»ä½è§å\n * redirectè¿å302ä»£ç çä¸´æ¶éå®å,å½replacementä¸ä»¥"httpt://","https://âä¸ºèµ·å§çå­ç¬¦ä¸²æ¶ä½¿ç¨ãæµè§å¨å°åä¼æ¾ç¤ºè·³è½¬åçuruå°åï¼ç¬è«ä¸ä¼æ´æ°url (å ä¸ºæ¯ä¸´æ¶)\n * permanentè¿å301ä»£ç çæ°¸ä¹éå®åãæµè§å¨å°åæ ä¼æ¾ç¤ºè·³è½¬åçurlå°å,ç¬è«æ´æ°urlã\n\nå¦æåé¢ä¸è·flagæ è®°ï¼é£ä¹é»è®¤æ¯302ä¸´æ¶éå®åãå¨å®éå·¥ä½åºæ¯ä¸­ï¼è¿æå¦ä¸ç§returnæå®ãå ä¸º301å302ä¸è½ç®åçåªè¿åç¶æç ï¼è¿å¿é¡»æéå®åçurl,è¿å°±æ¯returnæä»¤æ æ³è¿å301 ,302çåå äºã\n\nä¾å­:\n\nserver{\n\t...\n\trewrite ^(/download/.*)/media/(.*)\\..*$ $1/mp3/$2.mp3 last;\n\trewrite ^(/download/.*)/audio/(.*)\\..*$ $1/mp3/$2.ra  last;\n\treturn 403 ; \n\t...\n}\n\n\nä½å¦æè¿äºæä»¤è¢«æ¾å¥"/download" locationåºåä¸­ï¼åºå°last flagæ¿æ¢ä¸ºbreak,å¦ånginxä¼ä¸æ­å¾ªç¯ï¼è¾¾å°10æ¬¡åï¼è¿å500 error\n\nlocation /download {\n\t...\n\trewrite ^(/download/.*)/media/(.*)\\..*$ $1/mp3/$2.mp3 break;\n\trewrite ^(/download/.*)/audio/(.*)\\..*$ $1/mp3/$2.ra  break;\n\treturn 403 ; \n\t...\n}\n\n\nlastä¸è¬åå¨serveråifä¸­ï¼èbreakä¸è¬ä½¿ç¨å¨locationä¸­ãlastä¸ç»æ­¢éååçurlå¹éï¼ å³æ°çurlä¼åä»serverèµ°ä¸éå¹éæµç¨ï¼ èbreakç»æ­¢éååçå¹éã\n\nå¦æreplacementåå«è¯·æ±åæ°ï¼åæ¥çè¯·æ±åæ°å°è¢«è¿½å å¨åé¢ãå¦æä¸å¸æè¿½å åæ¥çè¯·æ±åæ°,å¯å¨replacementå­ç¬¦ä¸²çæ«å°¾æ·»å ä¸ä¸ª"?âç¬¦å·ï¼ ä¾å¦:\n\nrewrite ^/users/(.*)$ /show?user=$1? last;\n\n\n\n# 3ãlocation\n\nsyntax: location [ = | ~ | ~*| ^~] uri { ... }\n\tlocation @name { ... }\ndefault: -\ncontext: server, location\n\n\næ ¹æ®è¯·æ±çuriè®¾ç½®éç½®ãå¨ä¸ä¸ªserverä¸­locationéç½®æ®µå¯å­å¨å¤ä¸ª,ç¨äºå®ç°uriå°æä»¶ç³»ç»çè·¯å¾æ å°;\n\nå¹éå­ç¬¦ä¸²åä¸ºä¸¤ç§:æ®éå­ç¬¦ä¸²(literal string)åæ­£åè¡¨è¾¾å¼(regular expression)ï¼å¶ä¸­~å~*ç¨äºæ­£åè¡¨è¾¾å¼ï¼å¶ä»åç¼åæ ä»»ä½åç¼é½ç¨äºæ®éå­ç¬¦ä¸²ã\n\n@ç¨æ¥å®ä¹ä¸ä¸ªå½ålocationãä¸»è¦ç¨äºåé¨éå®åï¼ä¸è½ç¨æ¥å¤çæ­£å¸¸çè¯·æ±ãå¶ç¨æ³å¦ä¸ï¼\n\nlocation / {\n    try_files $uri $uri/ @custom\n}\nlocation @custom {\n    # ...do something\n}\n\n\nä¸ä¾ä¸­ï¼å½å°è¯è®¿é®urlæ¾ä¸å°å¯¹åºçæä»¶å°±éå®åå°æä»¬èªå®ä¹çå½ålocationï¼æ­¤å¤ä¸ºcustomï¼ãå¼å¾æ³¨æçæ¯ï¼å½ålocationä¸­ä¸è½ååµå¥å¶å®çå½ålocationã\n\nå¹éé¡ºåºæ¯:\n\n1.åå¹éæ®éå­ç¬¦ä¸²ï¼å°æç²¾ç¡®çå¹éææ¶å­å¨; 2.ç¶åæç§éç½®æä»¶ä¸­çå£°æé¡ºåºè¿è¡æ­£åè¡¨è¾¾å¼å¹éï¼åªè¦å¹éå°ä¸æ¡æ­£åè¡¨è¾¾å¼ï¼ååæ­¢å¹é,åæ­£åè¡¨è¾¾å¼ä¸ºå¹éç»æ; 3.å¦ææææ­£åè¡¨è¾¾å¼é½å¹éä¸ä¸,åå1ä¸­å­å¨çç»æ; 4.å¦ææ®éå­ç¬¦ä¸²åæ­£åè¡¨è¾¾å¼é½å¹éä¸ä¸,åæ¥404 not found 5.â^~âå"=âé½è½é»æ­¢ç»§ç»­æç´¢æ­£ålocationãä¸åç¹æ¯â^~âä¾ç¶éµå®âæå¤§åç¼âå¹éè§åï¼ç¶èâ=âä¸æ¯âæå¤§åç¼"ï¼èæ¯å¿é¡»æ¯ä¸¥æ ¼å¹é 6.åªè¦éå°\'ç²¾ç¡®å¹éexact matchâ,å³ä½¿æ®élocationæ²¡æå¸¦"=âæâ^~âåç¼ï¼ä¹ä¸æ ·ä¼ç»æ­¢åé¢çå¹éãä¾å¦:\n\nlocation = /uri         =å¼å¤´è¡¨ç¤ºç²¾ç¡®åç¼å¹éï¼åªæå®å¨å¹éæè½çæã\nlocation ^~ /uri        ^~å¼å¤´è¡¨ç¤ºæ®éå­ç¬¦ä¸²å¹éä¸ä»¥åä¸åè¿è¡æ­£åå¹éã\nlocation ~ pattern      ~å¼å¤´è¡¨ç¤ºåºåå¤§å°åçæ­£åå¹éã\nlocation ~* pattern      ~*å¼å¤´è¡¨ç¤ºä¸åºåå¤§å°åçæ­£åå¹éã\nlocation /uri           ä¸å¸¦ä»»ä½ä¿®é¥°ç¬¦ï¼è¡¨ç¤ºåç¼å¹éã\nlocation /              éç¨å¹éï¼ä»»ä½æªå¹éå°å¶ä»locationçè¯·æ±é½ä¼å¹éå°ã\n\n\néç½®ä¸¾ä¾ï¼\n\nlocation = / {\n\t[ configuration a ]\n}\n\nlocation / {\n\t[ configuration b ]\n}\n\nlocation /documents/ {\n\t[ configuration c ]\n}\n\nlocation ^~ /images/ {\n\t[ configuration d ]\n}\n\nlocation ~* \\. (gif|jpg|jpeg)$ {\n\t[ configuration e ]\n}\n\n#â/âè¯·æ±å¹éconfiguration a:\n#â/index. html"è¯·æ±å¹éconfiguration b:\n#"/documents/ document.html"è¯·æ±å¹éconfiguration c:\n#"/images/1.gif"è¯·æ±å¹éconfiguration d:\n#"/documents/1.jpg"è¯·æ±å¹éconfiguration e.\n\n#æ³¨æ:æ­£åå¹éä¼æ ¹æ®å¹éé¡ºåºï¼æ¾å°ç¬¬ä¸ä¸ªå¹éå¾æ­£åè¡¨è¾¾å¼åå°åæ­¢æç´¢ã\n#æ®éå­ç¬¦ä¸²å¹éåæ è§é¡ºåºï¼åªä¼éæ©æç²¾ç¡®çå¹éã\n\n\næ³¨:ä»åè½çrewriteålocationä¼¼ä¹æ ç¹åï¼é½è½å®ç°è·³è½¬,ä¸»è¦åºå«å¨äºrewriteæ¯å¨åä¸åååæ´æ¹è·åèµæºçè·¯å¾ï¼èlocationæ¯å¯¹ä¸ç±»è·¯å¾åæ§å¶è®¿é®æååä»£çï¼è¿å¯ä»¥proxy_passå°å¶ä»æºå¨ãå¾å¤æåµä¸rewriteä¹ä¼åå¨locationéã\n\n\n# rewriteéç½®æ¡ä¾\n\n\n# yumå®è£nginx\n\nå®è£å®æåï¼ä¿®æ¹éç½®æä»¶(/etc/nginx/conf.d/default.conf )å¦ä¸:\n\nserver {\n        listen   80;\n        server_name www.domain.com ;\n\n        #charset koi8-r;\n        access_log /var/log/nginx/www.domain.com-access.log main;\n\n        location / {\n                root /opt/nginx/html;\n                index index.html index.htm;\n        }\n    ......#çç¥é¨ååå®¹\n}\n\n\n\næ³¨æäºé¡¹:åæ¯ä¸æ­¥åºæ¯æµè¯ä¹åè¯·ç¡®å®è¿ä¸ªååå¯ä»¥æ­£å¸¸è§£æï¼æ¯åä¸ä¸ä¸ªåºæ¯ä¹åè¯·å é¤ä¸ä¸ä¸ªåºæ¯çéç½®ï¼å¦å¤æ¸é¤æµè§å¨ç¼å­ã\n\n\n# åºäºååçè·³è½¬\n\nç°å¨å¬å¸æ§ååwww.domain.comæä¸å¡éæ±æåæ´ï¼éè¦ä½¿ç¨æ°ååwww.newdomain.comä»£æ¿,ä½æ¯æ§ååä¸è½åºé¤ï¼éè¦è·³è½¬å°æ°ååä¸,èä¸åé¢çåæ°ä¿æä¸åã\n\nå¨/etc/nginx/conf.d/default.conf æä»¶éçlocationä¸é¢æ·»å å¦ä¸åå®¹:\n\nserver {\n    listen   80;\n    server_name www.newdomain.com www.domain.com ;\n\n    #charset koi8-r;\n    access_log /var/log/nginx/www.domain.com-access.log main;\n\n    location / {\n         root /opt/nginx/html;\n         index index.html index.htm;\n         if ($host = \'www.domain.com\'){\n             rewrite ^/(.*) http://www.newdomain.com/$1 permanent;\n         }\n    }\n    \n}\n\n\nä¿®æ¹éç½®æä»¶åï¼éå¯nginxæå¡\n\nä½¿ç¨å®¢æ·ç«¯æµè§å¨è®¿é®æ§ååï¼ååç´æ¥è·³è½¬,æf12å¯ä»¥æ¸æ¥ççå°ä»æ§ååwww.domain.comè·³è½¬å°äºæ°ååwww.newdomain.comä¸ï¼ç¶æç æ¯301æ°¸ä¹éå®åã\n\n\n\nåååé¢å åæ°è·³è½¬ï¼å ä¸ºå¨ä»£ç ä¸­å¾å¤çè¯·æ±æ¯å¸¦åæ°ç,æä»¥è¦ä¿è¯åæ°é½è½æ­£å¸¸è·³è½¬ãæµè§å¨è¾å¥æ¨¡æè®¿é®http://www.domain.com/test/1/index.php(è½ç¶è¿ä¸ªè¯·æ±åå®¹æ¯ä¸å­å¨ç)è·³è½¬å°http://www.newdomain.com/test/1/index.phpï¼ä»headerséé¢å¯ä»¥çå°301å®ç°äºæ°¸ä¹éå®åè·³è½¬ï¼èä¸åååçåæ°ä¹æ­£å¸¸è·³è½¬ã\n\n\n\n\n# åºäºå®¢æ·ç«¯ipè®¿é®è·³è½¬\n\nä¾å¦ä»å¤©å¬å¸ä¸å¡çæ¬ä¸çº¿ï¼ææipè®¿é®ä»»ä½åå®¹é½æ¾ç¤º-ä¸ä¸ªåºå®ç»´æ¤é¡µé¢ï¼åªæå¬å¸pè®¿é®æ­£å¸¸ã\n\nå¨/etc/nginx/conf.d/default.confæä»¶éæ·»å å¦ä¸åå®¹\n\nserver {\n    listen   80;\n    server_name www.newdomain.com www.domain.com ;\n\n    #charset koi8-r;\n    access_log /var/log/nginx/www.domain.com-access.log main;\n\n    #ä¸é¢æ¯æ·»å çåå®¹\n    set $rewrite true;\n    \n    if ($remote_addr = \'192.168.154.1\') {\n        set $rewrite false;\n    }\n    if ($rewrite = true) {\n        rewrite (.+) /maintenance.html;\n    }\n    \n    location = /maintenance.html {\n\t\troot /opt/nginx/html;\n\t}\n    \n   ......#çç¥å¾å¤åå®¹ \n    \n}\n$ echo \'website is maintainingï¼ please visit later !â> /opt/nginx/html/maintenance.html\n$ systemctl restart nginx\n\n\nåªæipä¸º192.1 68.154.1è½æ­£å¸¸è®¿é®ï¼å¶å®å°åé½æ¯ç»´æ¤é¡µé¢ï¼ä½¿ç¨-ä¸ä¸ªå±åç½çå¶å®ipå°åç¨æµè§å¨è®¿é®http://www.domain.comåååå åæ°é½æ¯è¯·æ±çmaintenance.htmlé¡µé¢çåå®¹ï¼èä¸ç¶æç æ¯200\n\n\n\n\n# åºäºæ§ååè·³è½¬å°æ°åååé¢å ç®å½\n\nä¾å¦ç°å¨è®¿é®çæ¯http://bbs.domain.com,ç°å¨éè¦å°è¿ä¸ªååä¸é¢çåå¸é½è·³è½¬å°http://www.domain.com/bbsï¼æ³¨æä¿æååè·³è½¬åçåæ°ä¸åã\n\nä¿®æ¹/et/nginx/conf. d/default.conféç½®æä»¶å¦ä¸ï¼\n\nserver {\n    listen   80;\n    server_name www.newdomain.com www.domain.com bbs.domain.com;\n\n    #charset koi8-r;\n    access_log /var/log/nginx/www.domain.com-access.log main;\n\n    location / {\n         root /opt/nginx/html;\n         index index.html index.htm;\n         if ($host = \'www.domain.com\'){\n             rewrite ^/(.*) http://www.newdomain.com/$1 permanent;\n         }\n    }\n    \n    location /post {\n        rewrite (.+) http://www.domain.com/bbbs$1 permanent;\n    }\n    \n}\n\n\næ¨¡æä½¿ç¨æµè§å¨è®¿é®http://bbs.domain.com/post/1 .php ,è·³è½¬å°http://www.ewdomain.com/bbs/post/1.php\n\n\n\n\n# åºäºåæ°å¹éçè·³è½¬\n\nä¾å¦ç°å¨è®¿é®hp://www.domain.com/100-100|200)-100.htmlè·³è½¬å°http://www.domain.comé¡µé¢\n\nç¼è¾/etc/nginx/conf. d/default.confæä»¶éæ·»å å¦ä¸åå®¹:\n\nlocation ~* /100-(100|200)-(\\d+).html$ {\n    rewrite (.*) http://www.domain.com permanent;\n}\n\n\néå¯æå¡å¨åï¼ä½¿ç¨æµè§å¨è®¿é®http://www domain.com/100-200-100.html\n\n\n\n\n# åºäºç®å½ä¸ææphpç»å°¾çæä»¶è·³è½¬\n\nè®¿é®http://www.domain.com/upload/1.phpè·³è½¬å°é¦é¡µ\n\nç¼è¾/etc/nginx/conf. d/default.confæä»¶éæ·»å å¦ä¸åå®¹:\n\nlocation ~* /upload/.*\\.php$ {\n\trewrite (.+) http://www.domain.com permanent;\n}\n\n\néå¯æå¡ï¼æµè§å¨è®¿é®http://www.domain.com/upload/1.phpå³å¯å®ç°è·³è½¬\n\n\n# åºäºææ®éä¸æ¡urlè¯·æ±çè·³è½¬,è®¿é®ä¸ä¸ªå·ä½çé¡µé¢è·³è½¬å°é¦é¡µ\n\nç¼è¾/etc/nginx/conf.d/default.confæä»¶éæ·»å å¦ä¸åå®¹:\n\nlocation ~* ^/1/test.html {\n\trewrite (.+) http://www.domain.com permanent;\n}\n\n\néå¯æå¡åï¼æµè§å¨è®¿é®http://www.domain.com/1/test.htmlè·³è½¬å°é¦é¡µ\n\n\n# æ»ç»\n\nå³äºnginx rewriteæ¬ç« çåå®¹å°±è¿ä¹å¤ãå¶å®å¨å®éå·¥ä½ä¸­è¿è¿ä¸æ­¢è¿äºåºæ¯ï¼èä¸ä¼æ´å å¤æç¹çï¼å¸æåå­¦ä»¬è½ä¸¾ä¸åä¸ï¼å¤å ç»ä¹ ã',charsets:{cjk:!0}},{title:"åå®¹æå»ºä¸­",frontmatter:{},regularPath:"/",relativePath:"README.md",key:"v-75be7fd3",path:"/",headersStr:null,content:"# åå®¹æå»ºä¸­\n\næ¯å¨åä¸ä¸¤ç¯ææ¯æ¹é¢åå®¹ã",normalizedContent:"# åå®¹æå»ºä¸­\n\næ¯å¨åä¸ä¸¤ç¯ææ¯æ¹é¢åå®¹ã",charsets:{cjk:!0}},{title:"åºç°ä¸¤å¹´ç uniCloud",frontmatter:{},regularPath:"/uniCloud.html",relativePath:"uniCloud.md",key:"v-0d5263ec",path:"/unicloud.html",headers:[{level:3,title:"åå¨åé¢",slug:"åå¨åé¢",normalizedTitle:"åå¨åé¢",charIndex:21},{level:3,title:"äºæ°æ®åº",slug:"äºæ°æ®åº",normalizedTitle:"äºæ°æ®åº",charIndex:253},{level:3,title:"äºå½æ°",slug:"äºå½æ°",normalizedTitle:"äºå½æ°",charIndex:258},{level:3,title:"äºå­å¨",slug:"äºå­å¨",normalizedTitle:"äºå­å¨",charIndex:161},{level:3,title:"ç¼ºç¹",slug:"ç¼ºç¹",normalizedTitle:"ç¼ºç¹",charIndex:721},{level:3,title:"ä¼ç¹",slug:"ä¼ç¹",normalizedTitle:"ä¼ç¹",charIndex:848}],headersStr:"åå¨åé¢ äºæ°æ®åº äºå½æ° äºå­å¨ ç¼ºç¹ ä¼ç¹",content:"# åºç°ä¸¤å¹´ç uniCloud\n\n\n# åå¨åé¢\n\nè¿äºå¹´æ¥ï¼éçäºè®¡ç®çæµè¡ï¼å°±æäººæåºäºServerlessæ³æ³ã\n\nä»ä¹æ¯Serverless ?\n\nServerless å°±æ¯ä¸èèæå¡å¨èµæºçç¼ç¨ï¼Serverless + js ç¼ç¨å°±æ¯ç®ååç«¯å¤çï¼è½å¨åç«¯å¤çå°±å¨åç«¯å¤çï¼ä¸éè¦è°ç¨åç«¯åå£ç´æ¥è°ç¨æ°æ®åºåäºå­å¨ç­ç­åå®¹ã\n\nuniCloud æ¯ DCloud èåé¿éäºãè¾è®¯äºï¼ä¸ºå¼åèæä¾çåºäº serverless æ¨¡å¼å js ç¼ç¨çäºå¼åå¹³å°ã\n\nå¨uniCloudå¹³å°éæäºï¼äºæ°æ®åºãäºå½æ°ãäºå­å¨ç­ç­åå®¹èµæºï¼æä»¬å¯ä»¥éè¿ js ç´æ¥è¿æ¥äºæ°æ®åºï¼ä¹å¯å¨æå¡å¨é¨ç½²äºå½æ°ï¼ä¹å¯ä»¥éè¿ js ä¸ä¼ æä»¶å°äºå­å¨ç©ºé´ã\n\n\n# äºæ°æ®åº\n\nuniCloudå¹³å°æä¾å¤ç§æ¹å¼æä½æ°æ®åºï¼åæ¬å¨äºå½æ°åä½¿ç¨ä¼ ç»æ¹å¼æä½æ°æ®åºãå¨åç«¯æèå¨äºå½æ°ä½¿ç¨JQLè¯­æ³ç´æ¥æä½æ°æ®åºãå¨åç«¯ä½¿ç¨<unicloud-db>æ¥è¯¢æ°æ®åºã\n\nå½ç¶æä¸ªäººå¨ä½¿ç¨ä¸­æ¯è¾åæ¬¢ä½¿ç¨å¨åç«¯ä½¿ç¨JQLæä½æ°æ®åºï¼ä½æ¯æåç°å¨åç«¯æä½æ°æ®åºçæ¶åï¼ä¸äºè¿è¡¨æ¥è¯¢æ¯è¾ï¼å ä¸ºuniCloudå¹³å°å¯¹ä¸äºæä½è¿è¡äºç®åãä¼åå¤çã\n\n\n# äºå½æ°\n\näºå½æ°æ¯è¿è¡å¨äºç«¯ç JavaScript ä»£ç ï¼æ¯åºäº Node.js çæ©å±ã\n\nuniCloudå°±æ¯å¨Node.jsçåºç¡ä¸å¢å äºuniCloudå¯¹è±¡ï¼uniCloudå¯¹è±¡åç½®äºä¸ä¸æä½æ°æ®åºãç½ç»äºå­å¨çä¸äºåå®¹ã\n\näºå½æ°å¯ä»¥å®æ¶æ§è¡ï¼å¯ä»¥æä¸äºå®æ¶ä»»å¡ç­åå®¹åå°äºå½æ°åã\n\n\n# äºå­å¨\n\nä½¿ç¨uniCloudäºå­å¨ï¼æ éååä¼ ç»æ¨¡å¼é£æ ·åç¬å»è´­ä¹°å­å¨ç©ºé´ãCDNæ å°ãæµééè´­ç­ã\n\n\n# ç¼ºç¹\n\n 1. å®æ¹ææ¡£æ¯è¾æ··ä¹±ï¼æ¡ä¾æ¯è¾å°ï¼ä¸å©äºå¿«éä¸æ\n 2. å¤è¡¨å³èæ¥è¯¢åºæ¯ä¸ä¸çæ³ï¼ç¹å«æ¯è¦å¼åä¸äºç»è®¡é¡µé¢çæ¶å\n 3. æ²¡æç±»ä¼¼navicatçå¯è§åå±ç¤ºåå®¹\n 4. æ²¡æç±»ä¼¼MySQLçåæå¨ï¼ä¸å¤ªå®¹æåç°ä½ çæ¥è¯¢è¯­å¥åªéåºé\n\n\n# ä¼ç¹\n\næé«å¼åå°è·¯\n\n 1. å¼åææ¬å¤§å¹ä¸éãå¼åæçå¤§å¹æåãä¸çº¿åè¿­ä»£éåº¦å¤§å¹æéï¼\n\n 2. å¦æä½ å·²æ¥æææ¡phpåjsçå¨æ ï¼é£ä¹æ¹ç¨æ°çææ¯æ ï¼ä¸æ ·å¯ä»¥å¤§å¹æåå¼åæçãéä½ææ¬ï¼\n\nä¸æ³¨ä¸å¡\n\n 1. ä½ åªéä¸æ³¨äºä½ çä¸å¡ï¼å¶ä»ä»ä¹æå¡å¨è¿ç»´ãå¼¹æ§æ©å®¹ãå¤§å¹¶åæ¿è½½ãé²DDoSæ»å»ï¼å¨é½ä¸éè¦æå¿ï¼\n\néä½è¿ç»´ææ¬\n\n 1. é¤äºå¼åææ¬ï¼äºèµæºç§ç¨ææ¬ä¹å°å¤§å¹ä¸éï¼\n\n 2. å¦æä¸åå¸H5çï¼ä½ å°ä¸éè¦è´­ä¹°å¤æ¡ååãå°ç¨åºåAppå¯ä»¥åååä½¿ç¨æå¡å¨ï¼",normalizedContent:"# åºç°ä¸¤å¹´ç unicloud\n\n\n# åå¨åé¢\n\nè¿äºå¹´æ¥ï¼éçäºè®¡ç®çæµè¡ï¼å°±æäººæåºäºserverlessæ³æ³ã\n\nä»ä¹æ¯serverless ?\n\nserverless å°±æ¯ä¸èèæå¡å¨èµæºçç¼ç¨ï¼serverless + js ç¼ç¨å°±æ¯ç®ååç«¯å¤çï¼è½å¨åç«¯å¤çå°±å¨åç«¯å¤çï¼ä¸éè¦è°ç¨åç«¯åå£ç´æ¥è°ç¨æ°æ®åºåäºå­å¨ç­ç­åå®¹ã\n\nunicloud æ¯ dcloud èåé¿éäºãè¾è®¯äºï¼ä¸ºå¼åèæä¾çåºäº serverless æ¨¡å¼å js ç¼ç¨çäºå¼åå¹³å°ã\n\nå¨unicloudå¹³å°éæäºï¼äºæ°æ®åºãäºå½æ°ãäºå­å¨ç­ç­åå®¹èµæºï¼æä»¬å¯ä»¥éè¿ js ç´æ¥è¿æ¥äºæ°æ®åºï¼ä¹å¯å¨æå¡å¨é¨ç½²äºå½æ°ï¼ä¹å¯ä»¥éè¿ js ä¸ä¼ æä»¶å°äºå­å¨ç©ºé´ã\n\n\n# äºæ°æ®åº\n\nunicloudå¹³å°æä¾å¤ç§æ¹å¼æä½æ°æ®åºï¼åæ¬å¨äºå½æ°åä½¿ç¨ä¼ ç»æ¹å¼æä½æ°æ®åºãå¨åç«¯æèå¨äºå½æ°ä½¿ç¨jqlè¯­æ³ç´æ¥æä½æ°æ®åºãå¨åç«¯ä½¿ç¨<unicloud-db>æ¥è¯¢æ°æ®åºã\n\nå½ç¶æä¸ªäººå¨ä½¿ç¨ä¸­æ¯è¾åæ¬¢ä½¿ç¨å¨åç«¯ä½¿ç¨jqlæä½æ°æ®åºï¼ä½æ¯æåç°å¨åç«¯æä½æ°æ®åºçæ¶åï¼ä¸äºè¿è¡¨æ¥è¯¢æ¯è¾ï¼å ä¸ºunicloudå¹³å°å¯¹ä¸äºæä½è¿è¡äºç®åãä¼åå¤çã\n\n\n# äºå½æ°\n\näºå½æ°æ¯è¿è¡å¨äºç«¯ç javascript ä»£ç ï¼æ¯åºäº node.js çæ©å±ã\n\nunicloudå°±æ¯å¨node.jsçåºç¡ä¸å¢å äºunicloudå¯¹è±¡ï¼unicloudå¯¹è±¡åç½®äºä¸ä¸æä½æ°æ®åºãç½ç»äºå­å¨çä¸äºåå®¹ã\n\näºå½æ°å¯ä»¥å®æ¶æ§è¡ï¼å¯ä»¥æä¸äºå®æ¶ä»»å¡ç­åå®¹åå°äºå½æ°åã\n\n\n# äºå­å¨\n\nä½¿ç¨unicloudäºå­å¨ï¼æ éååä¼ ç»æ¨¡å¼é£æ ·åç¬å»è´­ä¹°å­å¨ç©ºé´ãcdnæ å°ãæµééè´­ç­ã\n\n\n# ç¼ºç¹\n\n 1. å®æ¹ææ¡£æ¯è¾æ··ä¹±ï¼æ¡ä¾æ¯è¾å°ï¼ä¸å©äºå¿«éä¸æ\n 2. å¤è¡¨å³èæ¥è¯¢åºæ¯ä¸ä¸çæ³ï¼ç¹å«æ¯è¦å¼åä¸äºç»è®¡é¡µé¢çæ¶å\n 3. æ²¡æç±»ä¼¼navicatçå¯è§åå±ç¤ºåå®¹\n 4. æ²¡æç±»ä¼¼mysqlçåæå¨ï¼ä¸å¤ªå®¹æåç°ä½ çæ¥è¯¢è¯­å¥åªéåºé\n\n\n# ä¼ç¹\n\næé«å¼åå°è·¯\n\n 1. å¼åææ¬å¤§å¹ä¸éãå¼åæçå¤§å¹æåãä¸çº¿åè¿­ä»£éåº¦å¤§å¹æéï¼\n\n 2. å¦æä½ å·²æ¥æææ¡phpåjsçå¨æ ï¼é£ä¹æ¹ç¨æ°çææ¯æ ï¼ä¸æ ·å¯ä»¥å¤§å¹æåå¼åæçãéä½ææ¬ï¼\n\nä¸æ³¨ä¸å¡\n\n 1. ä½ åªéä¸æ³¨äºä½ çä¸å¡ï¼å¶ä»ä»ä¹æå¡å¨è¿ç»´ãå¼¹æ§æ©å®¹ãå¤§å¹¶åæ¿è½½ãé²ddosæ»å»ï¼å¨é½ä¸éè¦æå¿ï¼\n\néä½è¿ç»´ææ¬\n\n 1. é¤äºå¼åææ¬ï¼äºèµæºç§ç¨ææ¬ä¹å°å¤§å¹ä¸éï¼\n\n 2. å¦æä¸åå¸h5çï¼ä½ å°ä¸éè¦è´­ä¹°å¤æ¡ååãå°ç¨åºåappå¯ä»¥åååä½¿ç¨æå¡å¨ï¼",charsets:{cjk:!0}},{frontmatter:{},regularPath:"/%E5%87%BD%E6%95%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E7%A0%94%E7%A9%B6.html",relativePath:"å½æ°çä¸äºç ç©¶.md",key:"v-4a574a03",path:"/han-shu-de-yi-xie-yan-jiu.html",headers:[{level:2,title:"thisæå",slug:"thisæå",normalizedTitle:"thisæå",charIndex:118},{level:3,title:"æ´æ¹thisæå",slug:"æ´æ¹thisæå",normalizedTitle:"æ´æ¹thisæå",charIndex:573}],headersStr:"thisæå æ´æ¹thisæå",content:"å¨åå»ºå½æ°çæ¶åï¼æä»¬å¯ä»¥ä½¿ç¨å½æ°è¡¨è¾¾å¼ï¼å½æ°å£°æï¼new å½æ°ï¼åç®­å¤´å½æ°æ¹å¼çåå»ºå½æ°ï¼ä½æ¯æä»¬å¨åå»ºå¯¹è±¡åé¨å½æ°çæ¶ååé¢å¤å¯ä»¥ä½¿ç¨{key(){}}çæ¹å¼åå»ºå½æ°ã\n\nè¿ç¯æç« ä¸»è¦æ¯å¯¹å¯¹è±¡åå®¹çå¤ç§å½æ°åå»ºæ¹å¼çç ç©¶ã\n\n\n# thisæå\n\né¦åæä»¬åå»ºä¸ä¸ªå¯¹è±¡ï¼\n\nlet obj = {\n  a: function(){\n    console.log(this)\n  },\n  b(){\n    console.log(this)\n  },\n  c:()=>{\n\t\tconsole.log(this)  \n\t}\n}\n\n\næä»¬è¿è¡ä¸ä¸obj.a() obj.b() obj.c()å¯ä»¥å¾å°å¦ä¸æå°æºåå®¹ï¼\n\n// obj.a()\n{a: Æ, b: Æ, c: Æ}\n// obj.b() \n{a: Æ, b: Æ, c: Æ}\n// obj.c()\nWindow {window: Window, self: Window, document: document, name: '', location: Location, â¦}\n\n\næä»¬å¯ä»¥çå°å½æ°aåå½æ°bçthisæåé½æ¯å¯¹è±¡objï¼ä½æ¯ç®­å¤´å½æ°cçthisæåäºWindowå¯¹è±¡ï¼è¿æ¯æ ¹æ®ä»¥å¾çæ®éå½æ°åç®­å¤´å½æ°çåºå«ï¼æä»¬ç¥éç°å¨çthisæåæ¯æ²¡æé®é¢çã\n\n\n# æ´æ¹thisæå\n\næä»¬ä½¿ç¨callæ´æ¹thisæåä¸º{},æ§è¡å¾å°å¦ä¸æå°åå®¹ï¼\n\n// obj.a.call({})\n{}\n// obj.b.call({})\n{}\n// obj.c.call({})\nWindow {window: Window, self: Window, document: document, name: '', location: Location, â¦}\n\n\næä»¬ç°å¨åç°thisçæåä¹å¦åæä»¬çæçæ®éå½æ°åç®­å¤´å½æ°çåºå«ä¸æ ·ï¼ç®­å¤´å½æ°æ æ³ç´æ¥æ´æ¹thisæåï¼éåæä»¬å°è¯æ´æ¹obj.c()çç¶çº§å½æ°çthisæåï¼å½ç¶ç°å¨çobjå¯¹è±¡å·²ç»æ æ³éè¿æä½æ´æ¹ç¶çº§å½æ°çthisæåï¼æä»¬éè¦éæ°åå»ºå½æ°funcï¼\n\nfunction func(){\n  let obj = {\n    a: function(){\n      console.log(this)\n    },\n    b(){\n      console.log(this)\n    },\n    c:()=>{\n      console.log(this)  \n    }\n }\n obj.a()\n obj.b()\n obj.c()\n obj.a.call({})\n obj.b.call({})\n obj.c.call({})\n}\n\n\næä»¬ç´æ¥æ§è¡func()æä»¬ä¼åç°ä»¥ä¸ç»æï¼\n\n{a: Æ, b: Æ, c: Æ} // obj.a()\n{a: Æ, b: Æ, c: Æ} // obj.b()\nWindow {window: Window, self: Window, document: document, name: '', location: Location, â¦} // obj.c()\n{} // obj.a.call({})\n{} // obj.b.call({})\nWindow {window: Window, self: Window, document: document, name: '', location: Location, â¦} //obj.c.call({})\n\n\næä»¬æ´æ¹ç¶çº§å½æ°çthisæååï¼å¾å°ï¼\n\n{a: Æ, b: Æ, c: Æ} // obj.a()\n{a: Æ, b: Æ, c: Æ} // obj.a()\n{} // obj.a()\n{} // obj.b.call({})\n{} // obj.b.call({})\n{} // obj.b.call({})\n\n\næä»¬åç°æ´æ¹å¯¹è±¡åçç®­å¤´å½æ°çç¶çº§å¯¹è±¡çthisæåæ¶ï¼ç®­å¤´å½æ°çthisåªæ³ä¹ä¼æ¹åï¼èå½æ°bä¸å½æ°açthisæåå¯ä»¥ç´æ¥ä¿®æ¹ã",normalizedContent:"å¨åå»ºå½æ°çæ¶åï¼æä»¬å¯ä»¥ä½¿ç¨å½æ°è¡¨è¾¾å¼ï¼å½æ°å£°æï¼new å½æ°ï¼åç®­å¤´å½æ°æ¹å¼çåå»ºå½æ°ï¼ä½æ¯æä»¬å¨åå»ºå¯¹è±¡åé¨å½æ°çæ¶ååé¢å¤å¯ä»¥ä½¿ç¨{key(){}}çæ¹å¼åå»ºå½æ°ã\n\nè¿ç¯æç« ä¸»è¦æ¯å¯¹å¯¹è±¡åå®¹çå¤ç§å½æ°åå»ºæ¹å¼çç ç©¶ã\n\n\n# thisæå\n\né¦åæä»¬åå»ºä¸ä¸ªå¯¹è±¡ï¼\n\nlet obj = {\n  a: function(){\n    console.log(this)\n  },\n  b(){\n    console.log(this)\n  },\n  c:()=>{\n\t\tconsole.log(this)  \n\t}\n}\n\n\næä»¬è¿è¡ä¸ä¸obj.a() obj.b() obj.c()å¯ä»¥å¾å°å¦ä¸æå°æºåå®¹ï¼\n\n// obj.a()\n{a: Æ, b: Æ, c: Æ}\n// obj.b() \n{a: Æ, b: Æ, c: Æ}\n// obj.c()\nwindow {window: window, self: window, document: document, name: '', location: location, â¦}\n\n\næä»¬å¯ä»¥çå°å½æ°aåå½æ°bçthisæåé½æ¯å¯¹è±¡objï¼ä½æ¯ç®­å¤´å½æ°cçthisæåäºwindowå¯¹è±¡ï¼è¿æ¯æ ¹æ®ä»¥å¾çæ®éå½æ°åç®­å¤´å½æ°çåºå«ï¼æä»¬ç¥éç°å¨çthisæåæ¯æ²¡æé®é¢çã\n\n\n# æ´æ¹thisæå\n\næä»¬ä½¿ç¨callæ´æ¹thisæåä¸º{},æ§è¡å¾å°å¦ä¸æå°åå®¹ï¼\n\n// obj.a.call({})\n{}\n// obj.b.call({})\n{}\n// obj.c.call({})\nwindow {window: window, self: window, document: document, name: '', location: location, â¦}\n\n\næä»¬ç°å¨åç°thisçæåä¹å¦åæä»¬çæçæ®éå½æ°åç®­å¤´å½æ°çåºå«ä¸æ ·ï¼ç®­å¤´å½æ°æ æ³ç´æ¥æ´æ¹thisæåï¼éåæä»¬å°è¯æ´æ¹obj.c()çç¶çº§å½æ°çthisæåï¼å½ç¶ç°å¨çobjå¯¹è±¡å·²ç»æ æ³éè¿æä½æ´æ¹ç¶çº§å½æ°çthisæåï¼æä»¬éè¦éæ°åå»ºå½æ°funcï¼\n\nfunction func(){\n  let obj = {\n    a: function(){\n      console.log(this)\n    },\n    b(){\n      console.log(this)\n    },\n    c:()=>{\n      console.log(this)  \n    }\n }\n obj.a()\n obj.b()\n obj.c()\n obj.a.call({})\n obj.b.call({})\n obj.c.call({})\n}\n\n\næä»¬ç´æ¥æ§è¡func()æä»¬ä¼åç°ä»¥ä¸ç»æï¼\n\n{a: Æ, b: Æ, c: Æ} // obj.a()\n{a: Æ, b: Æ, c: Æ} // obj.b()\nwindow {window: window, self: window, document: document, name: '', location: location, â¦} // obj.c()\n{} // obj.a.call({})\n{} // obj.b.call({})\nwindow {window: window, self: window, document: document, name: '', location: location, â¦} //obj.c.call({})\n\n\næä»¬æ´æ¹ç¶çº§å½æ°çthisæååï¼å¾å°ï¼\n\n{a: Æ, b: Æ, c: Æ} // obj.a()\n{a: Æ, b: Æ, c: Æ} // obj.a()\n{} // obj.a()\n{} // obj.b.call({})\n{} // obj.b.call({})\n{} // obj.b.call({})\n\n\næä»¬åç°æ´æ¹å¯¹è±¡åçç®­å¤´å½æ°çç¶çº§å¯¹è±¡çthisæåæ¶ï¼ç®­å¤´å½æ°çthisåªæ³ä¹ä¼æ¹åï¼èå½æ°bä¸å½æ°açthisæåå¯ä»¥ç´æ¥ä¿®æ¹ã",charsets:{cjk:!0}},{title:"å¸¸è§ css ä»£ç åº",frontmatter:{},regularPath:"/%E4%BB%A3%E7%A0%81/%E5%B8%B8%E8%A7%81%20css%20%E4%BB%A3%E7%A0%81%E5%BA%93.html",relativePath:"ä»£ç /å¸¸è§ css ä»£ç åº.md",key:"v-34f6f7a4",path:"/dai-ma/chang-jian-css-dai-ma-ku.html",headers:[{level:3,title:"å¸¸è§ css ä»£ç åº",slug:"å¸¸è§-css-ä»£ç åº",normalizedTitle:"å¸¸è§ css ä»£ç åº",charIndex:2}],headersStr:"å¸¸è§ css ä»£ç åº",content:"# å¸¸è§ css ä»£ç åº",normalizedContent:"# å¸¸è§ css ä»£ç åº",charsets:{cjk:!0}},{title:"å¸¸è§ js ä»£ç åº",frontmatter:{},regularPath:"/%E4%BB%A3%E7%A0%81/%E5%B8%B8%E8%A7%81%20js%20%E4%BB%A3%E7%A0%81%E5%BA%93.html",relativePath:"ä»£ç /å¸¸è§ js ä»£ç åº.md",key:"v-cc890f28",path:"/dai-ma/chang-jian-js-dai-ma-ku.html",headers:[{level:3,title:"æå®èå´åçéæºæ°",slug:"æå®èå´åçéæºæ°",normalizedTitle:"æå®èå´åçéæºæ°",charIndex:16},{level:3,title:"æ¶é´æ ¼å¼å",slug:"æ¶é´æ ¼å¼å",normalizedTitle:"æ¶é´æ ¼å¼å",charIndex:227},{level:3,title:"æ¶é´è½´(ä¸èèæ¶é´ï¼åªèèå ç§åï¼å åéåï¼å å°æ¶åï¼å å¤©åï¼å æåï¼å å¹´å)",slug:"æ¶é´è½´-ä¸èèæ¶é´-åªèèå ç§å-å åéå-å å°æ¶å-å å¤©å-å æå-å å¹´å",normalizedTitle:"æ¶é´è½´(ä¸èèæ¶é´ï¼åªèèå ç§åï¼å åéåï¼å å°æ¶åï¼å å¤©åï¼å æåï¼å å¹´å)",charIndex:1159},{level:3,title:"è¿æ»¤å¯¹è±¡ä¸­ä¸ºç©ºçå¼",slug:"è¿æ»¤å¯¹è±¡ä¸­ä¸ºç©ºçå¼",normalizedTitle:"è¿æ»¤å¯¹è±¡ä¸­ä¸ºç©ºçå¼",charIndex:2080},{level:3,title:"æ°ç»å»é",slug:"æ°ç»å»é",normalizedTitle:"æ°ç»å»é",charIndex:2593}],headersStr:"æå®èå´åçéæºæ° æ¶é´æ ¼å¼å æ¶é´è½´(ä¸èèæ¶é´ï¼åªèèå ç§åï¼å åéåï¼å å°æ¶åï¼å å¤©åï¼å æåï¼å å¹´å) è¿æ»¤å¯¹è±¡ä¸­ä¸ºç©ºçå¼ æ°ç»å»é",content:"# å¸¸è§ js ä»£ç åº\n\n\n# æå®èå´åçéæºæ°\n\n/*\n* @param {String|*}\n* @returns {String}\n* @example  randoms(10,2);    //8\n*/\n  function randoms(max,min){\n    if(min===undefined) min=0;\n    return Math.floor(Math.random()*(max-min)+min);\n }\n\n\n\n# æ¶é´æ ¼å¼å\n\n/**\n * è½¬æ¢æ ¼å¼\n * @param {String} formatStr\n * @param {String|*} time æ¶é´\n * @returns {String}\n * @example formatDate('YYYY-MM-DD hh:mm:ss', new Date())\n */\nfunction formatDate(formatStr, time) {\n  const date = time && new Date(time) || new Date()\n  const o = {\n    'M+': date.getMonth() + 1, // month\n    'D+': date.getDate(), // day\n    'h+': date.getHours(), // hour\n    'm+': date.getMinutes(), // minute\n    's+': date.getSeconds(), // second\n    'q+': Math.floor((date.getMonth() + 3) / 3), // quarter\n    'S': date.getMilliseconds() // millisecond\n  }\n  if (/(Y+)/.test(formatStr)) {\n    formatStr = formatStr.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length))\n  }\n  for (const k in o) {\n    if (new RegExp('(' + k + ')').test(formatStr)) {\n      formatStr = formatStr.replace(RegExp.$1, RegExp.$1.length === 1 ? o[k] : ('00' + o[k]).substr(('' + o[k]).length))\n    }\n  }\n  return formatStr\n}\n\n\n\n# æ¶é´è½´(ä¸èèæ¶é´ï¼åªèèå ç§åï¼å åéåï¼å å°æ¶åï¼å å¤©åï¼å æåï¼å å¹´å)\n\n/**\n * è½¬æ¢æ ¼å¼\n * @param {String} str æ¶é´\n * @returns {String}\n * @example formatTime(new Date()) // 4åéå\n */\nfunction formatAgo(str) {\n  if (!str) return '';\n  const date = new Date(Number(str));\n  const time = new Date().getTime() - date.getTime(); // ç°å¨çæ¶é´-ä¼ å¥çæ¶é´ = ç¸å·®çæ¶é´ï¼åä½ = æ¯«ç§ï¼\n  if (time < 0) {\n    return '';\n  } else if (time / 1000 < 30) {\n    return 'åå';\n  } else if (time / 1000 < 60) {\n    return parseInt(String(time / 1000)) + 'ç§å';\n  } else if (time / 60000 < 60) {\n    return parseInt(String(time / 60000)) + 'åéå';\n  } else if (time / 3600000 < 24) {\n    return parseInt(String(time / 3600000)) + 'å°æ¶å';\n  } else if (time / 86400000 < 31) {\n    return parseInt(String(time / 86400000)) + 'å¤©å';\n  } else if (time / 2592000000 < 12) {\n    return parseInt(String(time / 2592000000)) + 'æå';\n  } else {\n    return parseInt(String(time / 31536000000)) + 'å¹´å';\n  }\n}\n\n\n\n# è¿æ»¤å¯¹è±¡ä¸­ä¸ºç©ºçå¼\n\n/**\n * è¿æ»¤å¯¹è±¡ä¸­ä¸ºç©ºçå¼\n * descriptionï¼å ä¸ºå¨æçå¯¹è±¡ä¸­æ¬èº«æ²¡æèµå¼ï¼ä½æ¯å¾åå°ä¼ å¼è¿æ¯ä¼æundefinedä¼ è¿å»ï¼è¯¥æ¹æ³å°±æ¯è¿æ»¤æå¯¹è±¡ä¸­ä¸ºç©ºæènullæèundefinedçå¼ï¼æ¬æ¹æ³éç¨äºéå½ï¼å¯ä»¥å±å±è¿æ»¤\n * @param {object} data\n * @return {object}\n */\nfunction filterObj(data) {\n  const objClone = {}\n  for (const i in data) {\n    if (data[i] && typeof data[i] === 'object') {\n      objClone[i] = filterObj(data[i])\n    } else {\n      if (!data[i] || data[i].length === 0) {\n        delete data[i]\n      } else {\n        objClone[i] = data[i]\n      }\n    }\n  }\n  return objClone\n}\n\n\n\n# æ°ç»å»é\n\n/*\n* @param [] arr\n* @returns []\n* @example  unique([1,1,1,2,3,4,4,5,7,7]); // [1,2,3,4,5,7]\n*/\n  function unique(arr) {\n            if (!arr) {\n                return 'åæ°ä¸ºæ°ç»å¿ä¼ '\n            }\n            for (var i = 0; i < arr.length; i++) {\n                for (var j = i + 1; j < arr.length; j++) {\n                    if (arr[i] == arr[j]) {\n                        arr.splice(j, 1);\n                        j--\n                    }\n                }\n            }\n            return arr\n        }\n",normalizedContent:"# å¸¸è§ js ä»£ç åº\n\n\n# æå®èå´åçéæºæ°\n\n/*\n* @param {string|*}\n* @returns {string}\n* @example  randoms(10,2);    //8\n*/\n  function randoms(max,min){\n    if(min===undefined) min=0;\n    return math.floor(math.random()*(max-min)+min);\n }\n\n\n\n# æ¶é´æ ¼å¼å\n\n/**\n * è½¬æ¢æ ¼å¼\n * @param {string} formatstr\n * @param {string|*} time æ¶é´\n * @returns {string}\n * @example formatdate('yyyy-mm-dd hh:mm:ss', new date())\n */\nfunction formatdate(formatstr, time) {\n  const date = time && new date(time) || new date()\n  const o = {\n    'm+': date.getmonth() + 1, // month\n    'd+': date.getdate(), // day\n    'h+': date.gethours(), // hour\n    'm+': date.getminutes(), // minute\n    's+': date.getseconds(), // second\n    'q+': math.floor((date.getmonth() + 3) / 3), // quarter\n    's': date.getmilliseconds() // millisecond\n  }\n  if (/(y+)/.test(formatstr)) {\n    formatstr = formatstr.replace(regexp.$1, (date.getfullyear() + '').substr(4 - regexp.$1.length))\n  }\n  for (const k in o) {\n    if (new regexp('(' + k + ')').test(formatstr)) {\n      formatstr = formatstr.replace(regexp.$1, regexp.$1.length === 1 ? o[k] : ('00' + o[k]).substr(('' + o[k]).length))\n    }\n  }\n  return formatstr\n}\n\n\n\n# æ¶é´è½´(ä¸èèæ¶é´ï¼åªèèå ç§åï¼å åéåï¼å å°æ¶åï¼å å¤©åï¼å æåï¼å å¹´å)\n\n/**\n * è½¬æ¢æ ¼å¼\n * @param {string} str æ¶é´\n * @returns {string}\n * @example formattime(new date()) // 4åéå\n */\nfunction formatago(str) {\n  if (!str) return '';\n  const date = new date(number(str));\n  const time = new date().gettime() - date.gettime(); // ç°å¨çæ¶é´-ä¼ å¥çæ¶é´ = ç¸å·®çæ¶é´ï¼åä½ = æ¯«ç§ï¼\n  if (time < 0) {\n    return '';\n  } else if (time / 1000 < 30) {\n    return 'åå';\n  } else if (time / 1000 < 60) {\n    return parseint(string(time / 1000)) + 'ç§å';\n  } else if (time / 60000 < 60) {\n    return parseint(string(time / 60000)) + 'åéå';\n  } else if (time / 3600000 < 24) {\n    return parseint(string(time / 3600000)) + 'å°æ¶å';\n  } else if (time / 86400000 < 31) {\n    return parseint(string(time / 86400000)) + 'å¤©å';\n  } else if (time / 2592000000 < 12) {\n    return parseint(string(time / 2592000000)) + 'æå';\n  } else {\n    return parseint(string(time / 31536000000)) + 'å¹´å';\n  }\n}\n\n\n\n# è¿æ»¤å¯¹è±¡ä¸­ä¸ºç©ºçå¼\n\n/**\n * è¿æ»¤å¯¹è±¡ä¸­ä¸ºç©ºçå¼\n * descriptionï¼å ä¸ºå¨æçå¯¹è±¡ä¸­æ¬èº«æ²¡æèµå¼ï¼ä½æ¯å¾åå°ä¼ å¼è¿æ¯ä¼æundefinedä¼ è¿å»ï¼è¯¥æ¹æ³å°±æ¯è¿æ»¤æå¯¹è±¡ä¸­ä¸ºç©ºæènullæèundefinedçå¼ï¼æ¬æ¹æ³éç¨äºéå½ï¼å¯ä»¥å±å±è¿æ»¤\n * @param {object} data\n * @return {object}\n */\nfunction filterobj(data) {\n  const objclone = {}\n  for (const i in data) {\n    if (data[i] && typeof data[i] === 'object') {\n      objclone[i] = filterobj(data[i])\n    } else {\n      if (!data[i] || data[i].length === 0) {\n        delete data[i]\n      } else {\n        objclone[i] = data[i]\n      }\n    }\n  }\n  return objclone\n}\n\n\n\n# æ°ç»å»é\n\n/*\n* @param [] arr\n* @returns []\n* @example  unique([1,1,1,2,3,4,4,5,7,7]); // [1,2,3,4,5,7]\n*/\n  function unique(arr) {\n            if (!arr) {\n                return 'åæ°ä¸ºæ°ç»å¿ä¼ '\n            }\n            for (var i = 0; i < arr.length; i++) {\n                for (var j = i + 1; j < arr.length; j++) {\n                    if (arr[i] == arr[j]) {\n                        arr.splice(j, 1);\n                        j--\n                    }\n                }\n            }\n            return arr\n        }\n",charsets:{cjk:!0}},{title:"åç»å¥³æåçä¸­çº§åç«¯é¢è¯ç§ç±ï¼å«è¯¦ç»ç­æ¡ï¼15kçº§å«ï¼",frontmatter:{},regularPath:"/%E6%94%B6%E8%97%8F%E6%96%87%E7%AB%A0/%E5%86%99%E7%BB%99%E5%A5%B3%E6%9C%8B%E5%8F%8B%E7%9A%84%E4%B8%AD%E7%BA%A7%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E7%A7%98%E7%B1%8D%EF%BC%88%E5%90%AB%E8%AF%A6%E7%BB%86%E7%AD%94%E6%A1%88%EF%BC%8C15k%E7%BA%A7%E5%88%AB%EF%BC%89.html",relativePath:"æ¶èæç« /åç»å¥³æåçä¸­çº§åç«¯é¢è¯ç§ç±ï¼å«è¯¦ç»ç­æ¡ï¼15kçº§å«ï¼.md",key:"v-6695a75d",path:"/shou-cang-wen-zhang/xie-gei-nu-peng-you-de-zhong-ji-qian-duan-mian-shi-mi-ji-han-xiang-xi-da-an-15kji-bie-.html",headers:[{level:2,title:"åè¨",slug:"åè¨",normalizedTitle:"åè¨",charIndex:155},{level:2,title:"HTMLç¯",slug:"htmlç¯",normalizedTitle:"htmlç¯",charIndex:248},{level:2,title:"CSSç¯",slug:"cssç¯",normalizedTitle:"cssç¯",charIndex:322},{level:2,title:"JSåºç¡ç¯",slug:"jsåºç¡ç¯",normalizedTitle:"jsåºç¡ç¯",charIndex:561},{level:2,title:"æ¡æ¶ç¯",slug:"æ¡æ¶ç¯",normalizedTitle:"æ¡æ¶ç¯",charIndex:1858},{level:3,title:"React",slug:"react",normalizedTitle:"react",charIndex:1866},{level:2,title:"å·¥å·",slug:"å·¥å·",normalizedTitle:"å·¥å·",charIndex:2371},{level:3,title:"webpackçåºç¡ç¥è¯",slug:"webpackçåºç¡ç¥è¯",normalizedTitle:"webpackçåºç¡ç¥è¯",charIndex:2378},{level:2,title:"æ§è½ä¼å",slug:"æ§è½ä¼å",normalizedTitle:"æ§è½ä¼å",charIndex:1915},{level:3,title:"è®²è®²webåä¸ªé¶æ®µçæ§è½ä¼åï¼",slug:"è®²è®²webåä¸ªé¶æ®µçæ§è½ä¼å",normalizedTitle:"è®²è®²webåä¸ªé¶æ®µçæ§è½ä¼åï¼",charIndex:2443},{level:3,title:"webpackä»£ç åå²æ¯æä¹åçï¼",slug:"webpackä»£ç åå²æ¯æä¹åç",normalizedTitle:"webpackä»£ç åå²æ¯æä¹åçï¼",charIndex:2529},{level:2,title:"ç½ç»",slug:"ç½ç»",normalizedTitle:"ç½ç»",charIndex:2619},{level:2,title:"æåç³»å",slug:"æåç³»å",normalizedTitle:"æåç³»å",charIndex:3082},{level:3,title:"åºç¡",slug:"åºç¡",normalizedTitle:"åºç¡",charIndex:358},{level:3,title:"è¿é¶",slug:"è¿é¶",normalizedTitle:"è¿é¶",charIndex:207}],headersStr:"åè¨ HTMLç¯ CSSç¯ JSåºç¡ç¯ æ¡æ¶ç¯ React å·¥å· webpackçåºç¡ç¥è¯ æ§è½ä¼å è®²è®²webåä¸ªé¶æ®µçæ§è½ä¼åï¼ webpackä»£ç åå²æ¯æä¹åçï¼ ç½ç» æåç³»å åºç¡ è¿é¶",content:"# åç»å¥³æåçä¸­çº§åç«¯é¢è¯ç§ç±ï¼å«è¯¦ç»ç­æ¡ï¼15kçº§å«ï¼\n\n> ä½èï¼ssh_æ¨æ¦æ¶æ¢¦è§å®\n> \n> é¾æ¥ï¼https://juejin.cn/post/6844904115428917255\n> \n> æ¥æºï¼ç¨åæé\n> \n> èä½æå½ä½èææãåä¸è½¬è½½è¯·èç³»ä½èè·å¾ææï¼éåä¸è½¬è½½è¯·æ³¨æåºå¤ã\n\n\n# åè¨\n\næ¬ç¯æç« ï¼ç®ç»æå®¶å¥³æåï¼ç¥å¥¹å¨æ­å·æ¾ä¸ä¸ª965çå¥½å¬å¸ï¼\n\n> é¢å¤è¯ï¼å³äºä¸­çº§ -> é«çº§çè¿é¶ï¼æä¹åäºä¸ç¯æç« ï¼å¸æå¯¹ä½ æå¸®å©ï¼\n\nåç»åä¸­çº§åç«¯çé«çº§è¿é¶æå\n\n\n# HTMLç¯\n\n# HTML5è¯­ä¹å\n\nhtml5è¯­ä¹åæ ç­¾\n\n> ç¾åº¦ifeçh5è¯­ä¹åæç« ï¼è®²å¾å¾å¥½ï¼å¾å¤ä¸éçå¬å¸é½ä¼é®è¯­ä¹åçé®é¢ã\n\n\n# CSSç¯\n\n# CSSå¸¸è§é¢è¯é¢\n\n50éCSSç»å¸é¢è¯é¢\n\n> CSSåºç¡æçå¬å¸å¾éè§ï¼å¨é¢è¯åè¿æ¯éè¦å¥½å¥½å¤ä¹ ä¸éçã\n\n# è½ä¸è½è®²ä¸è®²Flexå¸å±ï¼ä»¥åå¸¸ç¨çå±æ§ï¼ã\n\né®ä¸å³°çflexç³»å\n\n> Flexå¸å±æ¯é«é¢èç¹ï¼èä¸æ¯å¹³å¸¸å¼åä¸­æå¸¸ç¨çå¸å±æ¹å¼ä¹ä¸ï¼ä¸å®è¦çæã\n\n# BFCæ¯ä»ä¹ï¼è½è§£å³ä»ä¹é®é¢ï¼\n\nä»ä¹æ¯BFCï¼ä»ä¹æ¡ä»¶ä¸ä¼è§¦åï¼åºç¨åºæ¯æåªäºï¼\n\n> å³äºbfcï¼å¯ä»¥ççä¸åå¤§ä½¬æ»ç»çæç« \n\nè¿ç¯æç« éï¼é¡ºä¾¿ä¹æå¤è¾¹è·éå çé®é¢è®²äºä¸ä¸ã\n\n\n# JSåºç¡ç¯\n\n# è®²è®²JSçæ°æ®ç±»åï¼\n\nææ°ç ECMAScript æ åå®ä¹äº 8ç§æ°æ®ç±»å:\n\n * 6 ç§åå§ç±»å\n   * Boolean\n   * Undefined\n   * Number\n   * BigInt\n   * String\n   * Symbol\n * null\n * Object\n * Function\n\n> developer.mozilla.org/en-US/docs/â¦\n\n# è®²è®²MapåSetï¼\n\n 1. Mapçkeyç¸æ¯è¾æ®éå¯¹è±¡æ¥è¯´æ´ä¸ºçµæ´»ï¼æ®éå¯¹è±¡çkeyåªè½ä»¥åºç¡æ°æ®ç±»åä½ä¸ºkeyå¼ï¼å¹¶ä¸ææä¼ å¥çkeyå¼é½ä¼è¢«è½¬åæstringç±»åï¼èMapçkeyå¯ä»¥æ¯åç§æ°æ®ç±»åæ ¼å¼ã\n 2. Setå¯ä»¥è®²è®²å®å»éçç¹æ§ã\n\n# WeakMapåMapä¹é´çåºå«ï¼\n\nWeakMapåªè½ä»¥å¤ææ°æ®ç±»åä½ä¸ºkeyï¼å¹¶ä¸keyå¼æ¯å¼±å¼ç¨ï¼å¯¹äºåå¾åæ¶æ´å åå¥½ã\n\n# è®²è®²ååé¾ï¼\n\nJavaScriptæ·±å¥ä¹ä»ååå°ååé¾\n\n> å³äºååé¾ï¼è½ç¶ç°å¨ç¨çä¸å¤ªå¤äºï¼ä½æ¯__proto__åprototypeä¹é´çå³ç³»ï¼ä»¥åå¯¹äºå±æ§çåä¸æ¥æ¾è¿äºè¿æ¯ä¸å®è¦æ¸æ¥çï¼å¶ä½ä¸ç¨ççå¤ªç»ã\n\n# è®²è®²thisï¼\n\nJavaScriptä¸­çthis\n\n>  1. thisæåè°ç¨èè¿ä¸ªå³ç³»ä¸å®è¦æ¸æ¥\n>  2. è¦ç¥éæ¹åthisæåçå ç§æ¹å¼(call, bind, apply)\n>  3. ç®­å¤´å½æ°ä¸­thisçç¹æ®æ§è¦è½è®²æ¸æ¥\n\n# æµæ·è´åæ·±æ·è´çåºå«\n\n * æµæ·è´ï¼ä¸è¬æçæ¯æå¯¹è±¡çç¬¬ä¸å±æ·è´å°ä¸ä¸ªæ°å¯¹è±¡ä¸å»ï¼æ¯å¦\n\nvar a = { count: 1, deep: { count: 2 } }\nvar b = Object.assign({}, a)\n// æè\nvar b = {...a}\nå¤å¶ä»£ç \n\n\n * æ·±æ·è´ï¼ä¸è¬éè¦åå©éå½å®ç°ï¼å¦æå¯¹è±¡çå¼è¿æ¯ä¸ªå¯¹è±¡ï¼è¦è¿ä¸æ­¥çæ·±å¥æ·è´ï¼å®å¨æ¿æ¢ææ¯ä¸ä¸ªå¤æç±»åçå¼ç¨ã\n\nvar deepCopy = (obj) => {\n    var ret = {}\n    for (var key in obj) {\n        var value = obj[key]\n        ret[key] = typeof value === 'object' ? deepCopy(value) : value\n    }\n    return ret\n}\nå¤å¶ä»£ç \n\n\nå¯¹äºåä¸ä¸ªç¨ä¾æ¥è¯´\n\n// æµæ·è´\nvar a = { count: 1, deep: { count: 2 } }\nvar b = {...a}\n\na.deep.count = 5\nb.deep.count // 5\n\nvar a = { count: 1, deep: { count: 2 } }\nvar b = deepCopy(a)\na.deep.count = 5\nb.deep.count // 2\n\n\n# è®²è®²äºä»¶åæ³¡åäºä»¶æè·ä»¥åäºä»¶ä»£çï¼\n\nä½ çççè§£ äºä»¶åæ³¡ å äºä»¶æè· åï¼\n\n\n# æ¡æ¶ç¯\n\n\n# React\n\nReactéè¦å°½å¯è½çä¿è¯çç»ãå ä¸ºä½ä¸ºä¸­çº§å·¥ç¨å¸æ¥è¯´ï¼å¬å¸å¯è½ä¸ä¼è®©ä½ å»åæ¡æ¶ï¼è°æ§è½ä¼åï¼ä½æ¯ä¸å®æ¯ä¼è®©ä½ ä¿è´¨ä¿éçå®æå¼åä»»å¡çï¼è¿éè¦ä½ è½çç»ææ¡æ¡æ¶ã\n\n# React2019é«é¢é¢è¯é¢\n\n2019å¹´17éé«é¢Reacté¢è¯é¢åè¯¦è§£\n\n> è¿äºé¢å¯ä»¥åè¿ä¸ä¸ï¼å¦æææ¶ä¸è½çè§£çå°±åè·³è¿ï¼ä¸éè¦æ­»ç£ã\n\n# ææ²¡æä½¿ç¨è¿ React Hooksï¼\n\n * å¸¸ç¨çæåªäºï¼é½æä»ä¹ä½ç¨ï¼\n * å¦ä½ä½¿ç¨hookå¨ä¾èµæ¹åçæ¶åéæ°åéè¯·æ±ï¼\n * åè¿èªå®ä¹hookåï¼è§£å³äºåªäºé®é¢ã\n * è®²è®²React Hooksçé­åé·é±ï¼ä½ æ¯æä¹è§£å³çï¼\n\nuseEffect å®æ´æå\n\n> å¶å®å³äºHookçé®é¢ï¼æDançåæç¨å¾®è¿ä¸éï¼åºæ¬ä¸å°±å¯ä»¥åé¢è¯å®è°ç¬é£çäºã\n\n# è®²è®²Reactä¸­çç»ä»¶å¤ç¨ï¼\n\nãReactæ·±å¥ãä»Mixinå°HOCåå°Hook\n\n> è¿ç¯æç« ä»mixinå°HOCå°Hookï¼è¯¦ç»çè®²è§£äºReactå¨ç»ä»¶å¤ç¨ä¸­åçä¸äºæ¢ç´¢ååå±ï¼è½æè¿ä¸ªå¥½å¥½è®²æç½ï¼é¢è¯å®ä¹ä¼å¯¹ä½ çReactå®åå®ç®ç¸çã\n\nå¦å¤è¿ç¯æç« ä¸­çé«é¶ç»ä»¶åHookæ¬èº«ä¹æ¯é«é¢èç¹ã\n\n\n# å·¥å·\n\n\n# webpackçåºç¡ç¥è¯\n\nè¿ä¸ªç³»åä»åºç¡å°ä¼åé½æï¼å¯ä»¥èªå·±éæ©æ·±å¥ æéåå°å¤çwebpackç³»å\n\n\n# æ§è½ä¼å\n\n\n# è®²è®²webåä¸ªé¶æ®µçæ§è½ä¼åï¼\n\nReact 16 å è½½æ§è½ä¼åæå\n\n> è¿ä¸ªå¾é¿ï¼å¾ç»èï¼ä¸æ ·ä¸è¦æ­»ç£å¶ä¸­çæä¸ä¸ªç¹ï¼å¯¹äºä½ å¤§æ¦ç¥éçç¹åå·©åºä¸ä¸å°è±¡å°±okã\n\n\n# webpackä»£ç åå²æ¯æä¹åçï¼\n\nwebpackçä»£ç åå²ï¼è·¯ç±æå è½½åçï¼\n\n> è·¯ç±æå è½½åwebpackå¼æ­¥å è½½æ¨¡åé½æ¯è¿ä¸ªimport()è¯­æ³ï¼å¼å¾ä»ç»ççã\n\n\n# ç½ç»\n\n# è®²è®²httpçåºæ¬ç»æï¼\n\nhttpçåºç¡ç»æ\n\n# è¯´è¯´å¸¸ç¨çhttpç¶æç ï¼\n\nhttpç¶æç \n\n# æµè§å¨ä»è¾å¥urlå°æ¸²æé¡µé¢ï¼åçäºä»ä¹ï¼\n\nç»è¯´æµè§å¨è¾å¥URLååçäºä»ä¹\n\n# è®²è®²ä½ å¯¹cookieççè§£ï¼åæ¬SameSiteå±æ§ã\n\né¢æµæè¿é¢è¯ä¼è Cookie ç SameSite å±æ§\n\n> è¿ç¯æç« å¯ä»¥ä¸»è¦è®²chrome80æ°å¢çcookieçSameSiteå±æ§ï¼å¦å¤å¯¹äºcookieæ´ä½ä¹å¯ä»¥å¤ä¹ ååé¡¾ä¸éï¼éå¸¸æ£~\n\n# è°è°httpsçåçï¼ä¸ºä»ä¹httpsè½ä¿è¯å®å¨ï¼\n\nè°è° HTTPS\n\n> httpsä¹æ¯ä¸ä¸ªé«é¢èç¹ï¼éè¦è¿ä¸éhttpsçå å¯åçã\n\n# è°è°åç«¯çå®å¨ç¥è¯ï¼XSSãCSRFï¼ä»¥åå¦ä½é²èã\n\nå¯å¬æ±èä¹ä½ å¿é¡»è¦æçWebå®å¨\n\n> å®å¨é®é¢ä¹æ¯å¾å¤å¬å¸å¿é®çï¼æ¯ç«è°ä¹ä¸å¸æèªå·±çåç«¯åçç½ç«æ¼æ´ç¾åºåã\n\n# è®²è®²httpçç¼å­æºå¶å§ï¼å¼ºç¼å­ï¼ååç¼å­ï¼\n\næ·±å¥çè§£æµè§å¨çç¼å­æºå¶\n\n> æµè§å¨ç¼å­åºæ¬ä¸æ¯å¿é®çï¼è¿ç¯æç« éå¸¸å¼å¾ä¸çã\n\n\n# æåç³»å\n\n\n# åºç¡\n\n# æååç§åçæ¹æ³\n\nå¦ä½æ¨¡æå®ç°ä¸ä¸ªnewçææï¼ å¦ä½æ¨¡æå®ç°ä¸ä¸ª bind çææï¼ å¦ä½å®ç°ä¸ä¸ª call/apply å½æ°ï¼ ä¸å-æåä»£ç ç³»å\n\n> è¯´å®è¯æä¸å¤ªåæ¬¢æåä»£ç çé¢è¯é¢ï¼ä½æ¯å¾å¤å¬å¸åæ¬¢èè¿ä¸ªï¼æä½åçè¯è¿æ¯è¿ä¸éå§ã\n\n\n# è¿é¶\n\næåPromise 20è¡\n\n> ç²¾åæéçæåµä¸ï¼å°±åå«èA+è§èçpromiseæåäºï¼ä½æ¯å¦æææ¶é´çè¯ï¼å¯ä»¥å¤§æ¦è¿ä¸éæç« ï¼ç¶åå¦æé¢è¯çæ¶åèå°äºï¼åç¨ç®ç­çæ¹å¼ååºæ¥ã\n\nåæPromiseåé¨ç»æï¼ä¸æ­¥ä¸æ­¥å®ç°ä¸ä¸ªå®æ´çãè½éè¿ææTest caseçPromiseç±»",normalizedContent:"# åç»å¥³æåçä¸­çº§åç«¯é¢è¯ç§ç±ï¼å«è¯¦ç»ç­æ¡ï¼15kçº§å«ï¼\n\n> ä½èï¼ssh_æ¨æ¦æ¶æ¢¦è§å®\n> \n> é¾æ¥ï¼https://juejin.cn/post/6844904115428917255\n> \n> æ¥æºï¼ç¨åæé\n> \n> èä½æå½ä½èææãåä¸è½¬è½½è¯·èç³»ä½èè·å¾ææï¼éåä¸è½¬è½½è¯·æ³¨æåºå¤ã\n\n\n# åè¨\n\næ¬ç¯æç« ï¼ç®ç»æå®¶å¥³æåï¼ç¥å¥¹å¨æ­å·æ¾ä¸ä¸ª965çå¥½å¬å¸ï¼\n\n> é¢å¤è¯ï¼å³äºä¸­çº§ -> é«çº§çè¿é¶ï¼æä¹åäºä¸ç¯æç« ï¼å¸æå¯¹ä½ æå¸®å©ï¼\n\nåç»åä¸­çº§åç«¯çé«çº§è¿é¶æå\n\n\n# htmlç¯\n\n# html5è¯­ä¹å\n\nhtml5è¯­ä¹åæ ç­¾\n\n> ç¾åº¦ifeçh5è¯­ä¹åæç« ï¼è®²å¾å¾å¥½ï¼å¾å¤ä¸éçå¬å¸é½ä¼é®è¯­ä¹åçé®é¢ã\n\n\n# cssç¯\n\n# csså¸¸è§é¢è¯é¢\n\n50écssç»å¸é¢è¯é¢\n\n> cssåºç¡æçå¬å¸å¾éè§ï¼å¨é¢è¯åè¿æ¯éè¦å¥½å¥½å¤ä¹ ä¸éçã\n\n# è½ä¸è½è®²ä¸è®²flexå¸å±ï¼ä»¥åå¸¸ç¨çå±æ§ï¼ã\n\né®ä¸å³°çflexç³»å\n\n> flexå¸å±æ¯é«é¢èç¹ï¼èä¸æ¯å¹³å¸¸å¼åä¸­æå¸¸ç¨çå¸å±æ¹å¼ä¹ä¸ï¼ä¸å®è¦çæã\n\n# bfcæ¯ä»ä¹ï¼è½è§£å³ä»ä¹é®é¢ï¼\n\nä»ä¹æ¯bfcï¼ä»ä¹æ¡ä»¶ä¸ä¼è§¦åï¼åºç¨åºæ¯æåªäºï¼\n\n> å³äºbfcï¼å¯ä»¥ççä¸åå¤§ä½¬æ»ç»çæç« \n\nè¿ç¯æç« éï¼é¡ºä¾¿ä¹æå¤è¾¹è·éå çé®é¢è®²äºä¸ä¸ã\n\n\n# jsåºç¡ç¯\n\n# è®²è®²jsçæ°æ®ç±»åï¼\n\nææ°ç ecmascript æ åå®ä¹äº 8ç§æ°æ®ç±»å:\n\n * 6 ç§åå§ç±»å\n   * boolean\n   * undefined\n   * number\n   * bigint\n   * string\n   * symbol\n * null\n * object\n * function\n\n> developer.mozilla.org/en-us/docs/â¦\n\n# è®²è®²mapåsetï¼\n\n 1. mapçkeyç¸æ¯è¾æ®éå¯¹è±¡æ¥è¯´æ´ä¸ºçµæ´»ï¼æ®éå¯¹è±¡çkeyåªè½ä»¥åºç¡æ°æ®ç±»åä½ä¸ºkeyå¼ï¼å¹¶ä¸ææä¼ å¥çkeyå¼é½ä¼è¢«è½¬åæstringç±»åï¼èmapçkeyå¯ä»¥æ¯åç§æ°æ®ç±»åæ ¼å¼ã\n 2. setå¯ä»¥è®²è®²å®å»éçç¹æ§ã\n\n# weakmapåmapä¹é´çåºå«ï¼\n\nweakmapåªè½ä»¥å¤ææ°æ®ç±»åä½ä¸ºkeyï¼å¹¶ä¸keyå¼æ¯å¼±å¼ç¨ï¼å¯¹äºåå¾åæ¶æ´å åå¥½ã\n\n# è®²è®²ååé¾ï¼\n\njavascriptæ·±å¥ä¹ä»ååå°ååé¾\n\n> å³äºååé¾ï¼è½ç¶ç°å¨ç¨çä¸å¤ªå¤äºï¼ä½æ¯__proto__åprototypeä¹é´çå³ç³»ï¼ä»¥åå¯¹äºå±æ§çåä¸æ¥æ¾è¿äºè¿æ¯ä¸å®è¦æ¸æ¥çï¼å¶ä½ä¸ç¨ççå¤ªç»ã\n\n# è®²è®²thisï¼\n\njavascriptä¸­çthis\n\n>  1. thisæåè°ç¨èè¿ä¸ªå³ç³»ä¸å®è¦æ¸æ¥\n>  2. è¦ç¥éæ¹åthisæåçå ç§æ¹å¼(call, bind, apply)\n>  3. ç®­å¤´å½æ°ä¸­thisçç¹æ®æ§è¦è½è®²æ¸æ¥\n\n# æµæ·è´åæ·±æ·è´çåºå«\n\n * æµæ·è´ï¼ä¸è¬æçæ¯æå¯¹è±¡çç¬¬ä¸å±æ·è´å°ä¸ä¸ªæ°å¯¹è±¡ä¸å»ï¼æ¯å¦\n\nvar a = { count: 1, deep: { count: 2 } }\nvar b = object.assign({}, a)\n// æè\nvar b = {...a}\nå¤å¶ä»£ç \n\n\n * æ·±æ·è´ï¼ä¸è¬éè¦åå©éå½å®ç°ï¼å¦æå¯¹è±¡çå¼è¿æ¯ä¸ªå¯¹è±¡ï¼è¦è¿ä¸æ­¥çæ·±å¥æ·è´ï¼å®å¨æ¿æ¢ææ¯ä¸ä¸ªå¤æç±»åçå¼ç¨ã\n\nvar deepcopy = (obj) => {\n    var ret = {}\n    for (var key in obj) {\n        var value = obj[key]\n        ret[key] = typeof value === 'object' ? deepcopy(value) : value\n    }\n    return ret\n}\nå¤å¶ä»£ç \n\n\nå¯¹äºåä¸ä¸ªç¨ä¾æ¥è¯´\n\n// æµæ·è´\nvar a = { count: 1, deep: { count: 2 } }\nvar b = {...a}\n\na.deep.count = 5\nb.deep.count // 5\n\nvar a = { count: 1, deep: { count: 2 } }\nvar b = deepcopy(a)\na.deep.count = 5\nb.deep.count // 2\n\n\n# è®²è®²äºä»¶åæ³¡åäºä»¶æè·ä»¥åäºä»¶ä»£çï¼\n\nä½ çççè§£ äºä»¶åæ³¡ å äºä»¶æè· åï¼\n\n\n# æ¡æ¶ç¯\n\n\n# react\n\nreactéè¦å°½å¯è½çä¿è¯çç»ãå ä¸ºä½ä¸ºä¸­çº§å·¥ç¨å¸æ¥è¯´ï¼å¬å¸å¯è½ä¸ä¼è®©ä½ å»åæ¡æ¶ï¼è°æ§è½ä¼åï¼ä½æ¯ä¸å®æ¯ä¼è®©ä½ ä¿è´¨ä¿éçå®æå¼åä»»å¡çï¼è¿éè¦ä½ è½çç»ææ¡æ¡æ¶ã\n\n# react2019é«é¢é¢è¯é¢\n\n2019å¹´17éé«é¢reacté¢è¯é¢åè¯¦è§£\n\n> è¿äºé¢å¯ä»¥åè¿ä¸ä¸ï¼å¦æææ¶ä¸è½çè§£çå°±åè·³è¿ï¼ä¸éè¦æ­»ç£ã\n\n# ææ²¡æä½¿ç¨è¿ react hooksï¼\n\n * å¸¸ç¨çæåªäºï¼é½æä»ä¹ä½ç¨ï¼\n * å¦ä½ä½¿ç¨hookå¨ä¾èµæ¹åçæ¶åéæ°åéè¯·æ±ï¼\n * åè¿èªå®ä¹hookåï¼è§£å³äºåªäºé®é¢ã\n * è®²è®²react hooksçé­åé·é±ï¼ä½ æ¯æä¹è§£å³çï¼\n\nuseeffect å®æ´æå\n\n> å¶å®å³äºhookçé®é¢ï¼ædançåæç¨å¾®è¿ä¸éï¼åºæ¬ä¸å°±å¯ä»¥åé¢è¯å®è°ç¬é£çäºã\n\n# è®²è®²reactä¸­çç»ä»¶å¤ç¨ï¼\n\nãreactæ·±å¥ãä»mixinå°hocåå°hook\n\n> è¿ç¯æç« ä»mixinå°hocå°hookï¼è¯¦ç»çè®²è§£äºreactå¨ç»ä»¶å¤ç¨ä¸­åçä¸äºæ¢ç´¢ååå±ï¼è½æè¿ä¸ªå¥½å¥½è®²æç½ï¼é¢è¯å®ä¹ä¼å¯¹ä½ çreactå®åå®ç®ç¸çã\n\nå¦å¤è¿ç¯æç« ä¸­çé«é¶ç»ä»¶åhookæ¬èº«ä¹æ¯é«é¢èç¹ã\n\n\n# å·¥å·\n\n\n# webpackçåºç¡ç¥è¯\n\nè¿ä¸ªç³»åä»åºç¡å°ä¼åé½æï¼å¯ä»¥èªå·±éæ©æ·±å¥ æéåå°å¤çwebpackç³»å\n\n\n# æ§è½ä¼å\n\n\n# è®²è®²webåä¸ªé¶æ®µçæ§è½ä¼åï¼\n\nreact 16 å è½½æ§è½ä¼åæå\n\n> è¿ä¸ªå¾é¿ï¼å¾ç»èï¼ä¸æ ·ä¸è¦æ­»ç£å¶ä¸­çæä¸ä¸ªç¹ï¼å¯¹äºä½ å¤§æ¦ç¥éçç¹åå·©åºä¸ä¸å°è±¡å°±okã\n\n\n# webpackä»£ç åå²æ¯æä¹åçï¼\n\nwebpackçä»£ç åå²ï¼è·¯ç±æå è½½åçï¼\n\n> è·¯ç±æå è½½åwebpackå¼æ­¥å è½½æ¨¡åé½æ¯è¿ä¸ªimport()è¯­æ³ï¼å¼å¾ä»ç»ççã\n\n\n# ç½ç»\n\n# è®²è®²httpçåºæ¬ç»æï¼\n\nhttpçåºç¡ç»æ\n\n# è¯´è¯´å¸¸ç¨çhttpç¶æç ï¼\n\nhttpç¶æç \n\n# æµè§å¨ä»è¾å¥urlå°æ¸²æé¡µé¢ï¼åçäºä»ä¹ï¼\n\nç»è¯´æµè§å¨è¾å¥urlååçäºä»ä¹\n\n# è®²è®²ä½ å¯¹cookieççè§£ï¼åæ¬samesiteå±æ§ã\n\né¢æµæè¿é¢è¯ä¼è cookie ç samesite å±æ§\n\n> è¿ç¯æç« å¯ä»¥ä¸»è¦è®²chrome80æ°å¢çcookieçsamesiteå±æ§ï¼å¦å¤å¯¹äºcookieæ´ä½ä¹å¯ä»¥å¤ä¹ ååé¡¾ä¸éï¼éå¸¸æ£~\n\n# è°è°httpsçåçï¼ä¸ºä»ä¹httpsè½ä¿è¯å®å¨ï¼\n\nè°è° https\n\n> httpsä¹æ¯ä¸ä¸ªé«é¢èç¹ï¼éè¦è¿ä¸éhttpsçå å¯åçã\n\n# è°è°åç«¯çå®å¨ç¥è¯ï¼xssãcsrfï¼ä»¥åå¦ä½é²èã\n\nå¯å¬æ±èä¹ä½ å¿é¡»è¦æçwebå®å¨\n\n> å®å¨é®é¢ä¹æ¯å¾å¤å¬å¸å¿é®çï¼æ¯ç«è°ä¹ä¸å¸æèªå·±çåç«¯åçç½ç«æ¼æ´ç¾åºåã\n\n# è®²è®²httpçç¼å­æºå¶å§ï¼å¼ºç¼å­ï¼ååç¼å­ï¼\n\næ·±å¥çè§£æµè§å¨çç¼å­æºå¶\n\n> æµè§å¨ç¼å­åºæ¬ä¸æ¯å¿é®çï¼è¿ç¯æç« éå¸¸å¼å¾ä¸çã\n\n\n# æåç³»å\n\n\n# åºç¡\n\n# æååç§åçæ¹æ³\n\nå¦ä½æ¨¡æå®ç°ä¸ä¸ªnewçææï¼ å¦ä½æ¨¡æå®ç°ä¸ä¸ª bind çææï¼ å¦ä½å®ç°ä¸ä¸ª call/apply å½æ°ï¼ ä¸å-æåä»£ç ç³»å\n\n> è¯´å®è¯æä¸å¤ªåæ¬¢æåä»£ç çé¢è¯é¢ï¼ä½æ¯å¾å¤å¬å¸åæ¬¢èè¿ä¸ªï¼æä½åçè¯è¿æ¯è¿ä¸éå§ã\n\n\n# è¿é¶\n\næåpromise 20è¡\n\n> ç²¾åæéçæåµä¸ï¼å°±åå«èa+è§èçpromiseæåäºï¼ä½æ¯å¦æææ¶é´çè¯ï¼å¯ä»¥å¤§æ¦è¿ä¸éæç« ï¼ç¶åå¦æé¢è¯çæ¶åèå°äºï¼åç¨ç®ç­çæ¹å¼ååºæ¥ã\n\nåæpromiseåé¨ç»æï¼ä¸æ­¥ä¸æ­¥å®ç°ä¸ä¸ªå®æ´çãè½éè¿æætest caseçpromiseç±»",charsets:{cjk:!0}},{title:"é¢è¯æ±æ»",frontmatter:{},regularPath:"/%E9%9D%A2%E8%AF%95.html",relativePath:"é¢è¯.md",key:"v-33b03a91",path:"/mian-shi.html",headers:[{level:2,title:"JavaScript",slug:"javascript",normalizedTitle:"javascript",charIndex:11},{level:3,title:"æ°æ®ç±»å",slug:"æ°æ®ç±»å",normalizedTitle:"æ°æ®ç±»å",charIndex:26},{level:3,title:"æ°æ®ç±»åçè½¬æ¢",slug:"æ°æ®ç±»åçè½¬æ¢",normalizedTitle:"æ°æ®ç±»åçè½¬æ¢",charIndex:372},{level:3,title:"é»è¾å¤æ­",slug:"é»è¾å¤æ­",normalizedTitle:"é»è¾å¤æ­",charIndex:583},{level:3,title:"try-catch-finally",slug:"try-catch-finally",normalizedTitle:"try-catch-finally",charIndex:709}],headersStr:"JavaScript æ°æ®ç±»å æ°æ®ç±»åçè½¬æ¢ é»è¾å¤æ­ try-catch-finally",content:"# é¢è¯æ±æ»\n\n\n# JavaScript\n\n\n# æ°æ®ç±»å\n\n * åºæ¬æ°æ®ç±»å\n   1. Boolean\n   2. null\n   3. undefined è¡¨ç¤ºåéæªèµå¼æ¶çå±æ§.\n   4. Number æ´æ°ææµ®ç¹æ°ï¼å¨åæµ®ç¹æ°è®¡ç®æ¶å¯è½ä¼å ä¸ºç²¾åº¦é®é¢å¯¼è´è®¡ç®åºé ï¼0.1+0.2 = 0.30000000000000004ï¼\n   5. Bigint ä»»æç²¾åº¦çæ´æ°ï¼çè³å¯ä»¥è¶è¿æ°å­çå®å¨æ´æ°éå¶(Number.MAX_VALUE)\n   6. String å­ç¬¦ä¸²\n   7. Symbol ä¸ç§å®ä¾æ¯å¯ä¸ä¸ä¸å¯æ¹åçæ°æ®ç±»åã\n * Object\n\n> å¯¹è±¡ï¼Objectsï¼åå½æ°ï¼functionsï¼æ¯è¿é¨è¯­è¨çå¦å¤ä¸¤ä¸ªåºæ¬åç´ ãä½ å¯ä»¥æå¯¹è±¡å½ä½å­æ¾å¼çä¸ä¸ªå½åå®¹å¨ï¼ç¶åå°å½æ°å½ä½ä½ çç¨åºè½å¤æ§è¡çæ­¥éª¤ã\n\n\n# æ°æ®ç±»åçè½¬æ¢\n\n> JavaScriptæ¯ä¸ç§å¨æç±»åè¯­è¨(dynamically typed language)ãè¿æå³çä½ å¨å£°æåéæ¶å¯ä»¥ä¸å¿æå®æ°æ®ç±»åï¼èæ°æ®ç±»åä¼å¨ä»£ç æ§è¡æ¶ä¼æ ¹æ®éè¦èªå¨è½¬æ¢ã\n\n * åå«çæ°å­åå­ç¬¦ä¸²çè¡¨è¾¾å¼ä¸­ä½¿ç¨å æ³è¿ç®ç¬¦ï¼+ï¼ï¼JavaScript ä¼ææ°å­è½¬æ¢æå­ç¬¦ä¸²ã\n * å¨æ¶åå¶å®è¿ç®ç¬¦ï¼è¯æ³¨ï¼å¦ä¸é¢çåå·'-'ï¼æ¶ï¼JavaScriptè¯­è¨ä¸ä¼ææ°å­åä¸ºå­ç¬¦ä¸²ã\n\n\n# é»è¾å¤æ­\n\n * ä¸é¢è¿äºå¼å°è¢«è®¡ç®åº false (also known as Falsy values):\n   * false\n   * undefined\n   * null\n   * 0\n   * NaN\n   * ç©ºå­ç¬¦ä¸²ï¼\"\"ï¼\n\n\n# try-catch-finally",normalizedContent:"# é¢è¯æ±æ»\n\n\n# javascript\n\n\n# æ°æ®ç±»å\n\n * åºæ¬æ°æ®ç±»å\n   1. boolean\n   2. null\n   3. undefined è¡¨ç¤ºåéæªèµå¼æ¶çå±æ§.\n   4. number æ´æ°ææµ®ç¹æ°ï¼å¨åæµ®ç¹æ°è®¡ç®æ¶å¯è½ä¼å ä¸ºç²¾åº¦é®é¢å¯¼è´è®¡ç®åºé ï¼0.1+0.2 = 0.30000000000000004ï¼\n   5. bigint ä»»æç²¾åº¦çæ´æ°ï¼çè³å¯ä»¥è¶è¿æ°å­çå®å¨æ´æ°éå¶(number.max_value)\n   6. string å­ç¬¦ä¸²\n   7. symbol ä¸ç§å®ä¾æ¯å¯ä¸ä¸ä¸å¯æ¹åçæ°æ®ç±»åã\n * object\n\n> å¯¹è±¡ï¼objectsï¼åå½æ°ï¼functionsï¼æ¯è¿é¨è¯­è¨çå¦å¤ä¸¤ä¸ªåºæ¬åç´ ãä½ å¯ä»¥æå¯¹è±¡å½ä½å­æ¾å¼çä¸ä¸ªå½åå®¹å¨ï¼ç¶åå°å½æ°å½ä½ä½ çç¨åºè½å¤æ§è¡çæ­¥éª¤ã\n\n\n# æ°æ®ç±»åçè½¬æ¢\n\n> javascriptæ¯ä¸ç§å¨æç±»åè¯­è¨(dynamically typed language)ãè¿æå³çä½ å¨å£°æåéæ¶å¯ä»¥ä¸å¿æå®æ°æ®ç±»åï¼èæ°æ®ç±»åä¼å¨ä»£ç æ§è¡æ¶ä¼æ ¹æ®éè¦èªå¨è½¬æ¢ã\n\n * åå«çæ°å­åå­ç¬¦ä¸²çè¡¨è¾¾å¼ä¸­ä½¿ç¨å æ³è¿ç®ç¬¦ï¼+ï¼ï¼javascript ä¼ææ°å­è½¬æ¢æå­ç¬¦ä¸²ã\n * å¨æ¶åå¶å®è¿ç®ç¬¦ï¼è¯æ³¨ï¼å¦ä¸é¢çåå·'-'ï¼æ¶ï¼javascriptè¯­è¨ä¸ä¼ææ°å­åä¸ºå­ç¬¦ä¸²ã\n\n\n# é»è¾å¤æ­\n\n * ä¸é¢è¿äºå¼å°è¢«è®¡ç®åº false (also known as falsy values):\n   * false\n   * undefined\n   * null\n   * 0\n   * nan\n   * ç©ºå­ç¬¦ä¸²ï¼\"\"ï¼\n\n\n# try-catch-finally",charsets:{cjk:!0}},{title:"å¸¸è§ æ­£å ä»£ç åº",frontmatter:{},regularPath:"/%E4%BB%A3%E7%A0%81/%E5%B8%B8%E8%A7%81%20%E6%AD%A3%E5%88%99%20%E4%BB%A3%E7%A0%81%E5%BA%93.html",relativePath:"ä»£ç /å¸¸è§ æ­£å ä»£ç åº.md",key:"v-ee533d90",path:"/dai-ma/chang-jian-zheng-ze-dai-ma-ku.html",headers:[{level:3,title:"å¸¸è§ æ­£å ä»£ç åº",slug:"å¸¸è§-æ­£å-ä»£ç åº",normalizedTitle:"å¸¸è§ æ­£å ä»£ç åº",charIndex:2}],headersStr:"å¸¸è§ æ­£å ä»£ç åº",content:"# å¸¸è§ æ­£å ä»£ç åº",normalizedContent:"# å¸¸è§ æ­£å ä»£ç åº",charsets:{cjk:!0}}],themeConfig:{nav:[],sidebar:["","uniCloud","å½æ°çä¸äºç ç©¶","é¢è¯",{title:"Java Script",children:["JavaScript/åæ­¥å¼æ­¥"]},{title:"Nginx",children:[{title:"Nginxå®è£åéç½®",children:["Nginx/01_Nginxå®è£åéç½®/1.Nginxç®ä»","Nginx/01_Nginxå®è£åéç½®/2.Nginxå®è£","Nginx/01_Nginxå®è£åéç½®/3.Nginxéç½®æä»¶"]},{title:"Nginxæ¨¡åç®¡ç",children:["Nginx/02_Nginxæ¨¡åç®¡ç/Nginxå¸¸ç¨æ¨¡å01","Nginx/02_Nginxæ¨¡åç®¡ç/Nginxå¸¸ç¨æ¨¡å02","Nginx/02_Nginxæ¨¡åç®¡ç/Nginxå¸¸ç¨æ¨¡å03"]},{title:"LNMPç¯å¢é¨ç½²",children:["Nginx/03_LNMPç¯å¢é¨ç½²/1.Nginxç½ç«æå¡","Nginx/03_LNMPç¯å¢é¨ç½²/2.LNMPç¯å¢é¨ç½²"]},{title:"Nginxä¼åç®¡ç",children:["Nginx/04_nginxä¼åç®¡ç/1. Nginxä¼ååé²çé¾/Nginxä¼ååé²çé¾","Nginx/04_nginxä¼åç®¡ç/2. Nginx Rewrite/Nginx Rewrite"]}]},{title:"ä»£ç ",children:["ä»£ç /å¸¸è§ css ä»£ç åº","ä»£ç /å¸¸è§ js ä»£ç åº","ä»£ç /å¸¸è§ æ­£å ä»£ç åº"]},{title:"æ¶èæç« ",children:["æ¶èæç« /åç»å¥³æåçä¸­çº§åç«¯é¢è¯ç§ç±ï¼å«è¯¦ç»ç­æ¡ï¼15kçº§å«ï¼"]}]}};e(343);Ii.component("Badge",(function(){return Promise.all([e.e(0),e.e(3)]).then(e.bind(null,441))})),Ii.component("CodeGroup",(function(){return Promise.all([e.e(0),e.e(5)]).then(e.bind(null,420))})),Ii.component("CodeBlock",(function(){return Promise.all([e.e(0),e.e(4)]).then(e.bind(null,421))}));e(344);var hs=[{},function(n){n.Vue.mixin({computed:{$dataBlock:function(){return this.$options.__data__block__}}})},{},{}],ms=[];function gs(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}e(123);function vs(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function _s(n,t,e){return t&&vs(n.prototype,t),e&&vs(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}e(194);e(183);function xs(n,t){return(xs=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}e(184),e(185);function ys(n){return(ys=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function ws(n,t){if(t&&("object"===za(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function bs(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var e,r=ys(n);if(t){var i=ys(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return ws(this,e)}}var ks=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&xs(n,t)}(e,n);var t=bs(e);function e(){return gs(this,e),t.apply(this,arguments)}return _s(e)}(function(){function n(){gs(this,n),this.store=new Ii({data:{state:{}}})}return _s(n,[{key:"$get",value:function(n){return this.store.state[n]}},{key:"$set",value:function(n,t){Ii.set(this.store.state,n,t)}},{key:"$emit",value:function(){var n;(n=this.store).$emit.apply(n,arguments)}},{key:"$on",value:function(){var n;(n=this.store).$on.apply(n,arguments)}}]),n}());Object.assign(ks.prototype,{getPageAsyncComponent:Fa,getLayoutAsyncComponent:Ba,getAsyncComponent:Ha,getVueComponent:Ga});var $s={install:function(n){var t=new ks;n.$vuepress=t,n.prototype.$vuepress=t}};e(115);function Ss(n){n.beforeEach((function(t,e,r){if(zs(n,t.path))r();else if(/(\/|\.html)$/.test(t.path))if(/\/$/.test(t.path)){var i=t.path.replace(/\/$/,"")+".html";zs(n,i)?r(i):r()}else r();else{var o=t.path+"/",a=t.path+".html";zs(n,a)?r(a):zs(n,o)?r(o):r()}}))}function zs(n,t){var e=t.toLowerCase();return n.options.routes.some((function(n){return n.path.toLowerCase()===e}))}var js={props:{pageKey:String,slotKey:{type:String,default:"default"}},render:function(n){var t=this.pageKey||this.$parent.$page.key;return Va("pageKey",t),Ii.component(t)||Ii.component(t,Fa(t)),Ii.component(t)?n(t):n("")}},Ts={functional:!0,props:{slotKey:String,required:!0},render:function(n,t){var e=t.props,r=t.slots;return n("div",{class:["content__".concat(e.slotKey)]},r()[e.slotKey])}},Cs={computed:{openInNewWindowTitle:function(){return this.$themeLocaleConfig.openNewWindowText||"(opens new window)"}}},Es=(e(346),e(347),Object(us.a)(Cs,(function(){var n=this.$createElement,t=this._self._c||n;return t("span",[t("svg",{staticClass:"icon outbound",attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"}},[t("path",{attrs:{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}}),this._v(" "),t("polygon",{attrs:{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}})]),this._v(" "),t("span",{staticClass:"sr-only"},[this._v(this._s(this.openInNewWindowTitle))])])}),[],!1,null,null,null).exports);function Ps(){return(Ps=Object(r.a)(regeneratorRuntime.mark((function n(t){var e,r,i,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e="undefined"!=typeof window&&window.__VUEPRESS_ROUTER_BASE__?window.__VUEPRESS_ROUTER_BASE__:ds.routerBase||ds.base,Ss(r=new $a({base:e,mode:"history",fallback:!1,routes:fs,scrollBehavior:function(n,t,e){return e||(n.hash?!Ii.$vuepress.$get("disableScrollBehavior")&&{selector:decodeURIComponent(n.hash)}:{x:0,y:0})}})),i={},n.prev=4,n.next=7,Promise.all(hs.filter((function(n){return"function"==typeof n})).map((function(n){return n({Vue:Ii,options:i,router:r,siteData:ds,isServer:t})})));case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(4),console.error(n.t0);case 12:return o=new Ii(Object.assign(i,{router:r,render:function(n){return n("div",{attrs:{id:"app"}},[n("RouterView",{ref:"layout"}),n("div",{class:"global-ui"},ms.map((function(t){return n(t)})))])}})),n.abrupt("return",{app:o,router:r});case 14:case"end":return n.stop()}}),n,null,[[4,9]])})))).apply(this,arguments)}Ii.config.productionTip=!1,Ii.use($a),Ii.use($s),Ii.mixin(function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ii;Sa(t),e.$vuepress.$set("siteData",t);var r=n(e.$vuepress.$get("siteData")),i=new r,o=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(i)),a={};return Object.keys(o).reduce((function(n,t){return t.startsWith("$")&&(n[t]=o[t].get),n}),a),{computed:a}}((function(n){return function(){function t(){gs(this,t)}return _s(t,[{key:"setPage",value:function(n){this.__page=n}},{key:"$site",get:function(){return n}},{key:"$themeConfig",get:function(){return this.$site.themeConfig}},{key:"$frontmatter",get:function(){return this.$page.frontmatter}},{key:"$localeConfig",get:function(){var n,t,e=this.$site.locales,r=void 0===e?{}:e;for(var i in r)"/"===i?t=r[i]:0===this.$page.path.indexOf(i)&&(n=r[i]);return n||t||{}}},{key:"$siteTitle",get:function(){return this.$localeConfig.title||this.$site.title||""}},{key:"$canonicalUrl",get:function(){var n=this.$page.frontmatter.canonicalUrl;return"string"==typeof n&&n}},{key:"$title",get:function(){var n=this.$page,t=this.$page.frontmatter.metaTitle;if("string"==typeof t)return t;var e=this.$siteTitle,r=n.frontmatter.home?null:n.frontmatter.title||n.title;return e?r?r+" | "+e:e:r||"VuePress"}},{key:"$description",get:function(){var n=function(n){if(n){var t=n.filter((function(n){return"description"===n.name}))[0];if(t)return t.content}}(this.$page.frontmatter.meta);return n||(this.$page.frontmatter.description||this.$localeConfig.description||this.$site.description||"")}},{key:"$lang",get:function(){return this.$page.frontmatter.lang||this.$localeConfig.lang||"en-US"}},{key:"$localePath",get:function(){return this.$localeConfig.path||"/"}},{key:"$themeLocaleConfig",get:function(){return(this.$site.themeConfig.locales||{})[this.$localePath]||{}}},{key:"$page",get:function(){return this.__page?this.__page:function(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(r.path.toLowerCase()===t.toLowerCase())return r}return{path:"",frontmatter:{}}}(this.$site.pages,this.$route.path)}}]),t}()}),ds)),Ii.component("Content",js),Ii.component("ContentSlotsDistributor",Ts),Ii.component("OutboundLink",Es),Ii.component("ClientOnly",{functional:!0,render:function(n,t){var e=t.parent,r=t.children;if(e._isMounted)return r;e.$once("hook:mounted",(function(){e.$forceUpdate()}))}}),Ii.component("Layout",Ba("Layout")),Ii.component("NotFound",Ba("NotFound")),Ii.prototype.$withBase=function(n){var t=this.$site.base;return"/"===n.charAt(0)?t+n.slice(1):n},window.__VUEPRESS__={version:"1.9.7",hash:"93285ce"},function(n){return Ps.apply(this,arguments)}(!1).then((function(n){var t=n.app;n.router.onReady((function(){t.$mount("#app")}))}))}]);