<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nginx安装 | ONEMUE Docs</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="This is a Docs.">
    
    <link rel="preload" href="/docs/assets/css/0.styles.90a57e95.css" as="style"><link rel="preload" href="/docs/assets/js/app.27b283a1.js" as="script"><link rel="preload" href="/docs/assets/js/2.2e8f894a.js" as="script"><link rel="preload" href="/docs/assets/js/9.20e728b8.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.f6f629b0.js"><link rel="prefetch" href="/docs/assets/js/11.84b24849.js"><link rel="prefetch" href="/docs/assets/js/12.76af45bb.js"><link rel="prefetch" href="/docs/assets/js/13.c0ae4be6.js"><link rel="prefetch" href="/docs/assets/js/14.4f6283b3.js"><link rel="prefetch" href="/docs/assets/js/15.002291f6.js"><link rel="prefetch" href="/docs/assets/js/16.5dfc5cc5.js"><link rel="prefetch" href="/docs/assets/js/17.14f17db6.js"><link rel="prefetch" href="/docs/assets/js/18.971e9caa.js"><link rel="prefetch" href="/docs/assets/js/19.889fb802.js"><link rel="prefetch" href="/docs/assets/js/20.d1be27fd.js"><link rel="prefetch" href="/docs/assets/js/21.83fd3971.js"><link rel="prefetch" href="/docs/assets/js/22.6bc785a8.js"><link rel="prefetch" href="/docs/assets/js/23.c9474e02.js"><link rel="prefetch" href="/docs/assets/js/24.054109cd.js"><link rel="prefetch" href="/docs/assets/js/25.c7f91c21.js"><link rel="prefetch" href="/docs/assets/js/3.ea118fbe.js"><link rel="prefetch" href="/docs/assets/js/4.6fbf7596.js"><link rel="prefetch" href="/docs/assets/js/5.f7d53cbe.js"><link rel="prefetch" href="/docs/assets/js/6.db4bfcd5.js"><link rel="prefetch" href="/docs/assets/js/7.2123913f.js"><link rel="prefetch" href="/docs/assets/js/8.c52818c0.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.90a57e95.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">ONEMUE Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/docs/" aria-current="page" class="sidebar-link">内容构建中</a></li><li><a href="/docs/unicloud.html" class="sidebar-link">出现两年的 uniCloud</a></li><li><a href="/docs/han-shu-de-yi-xie-yan-jiu.html" class="sidebar-link">/han-shu-de-yi-xie-yan-jiu.html</a></li><li><a href="/docs/mian-shi.html" class="sidebar-link">面试汇总</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java Script</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Nginx</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Nginx安装及配置</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/nginx/01_nginxan-zhuang-ji-pei-zhi/1.nginxjian-jie.html" class="sidebar-link">Nginx简介</a></li><li><a href="/docs/nginx/01_nginxan-zhuang-ji-pei-zhi/2.nginxan-zhuang.html" aria-current="page" class="active sidebar-link">Nginx安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/nginx/01_nginxan-zhuang-ji-pei-zhi/2.nginxan-zhuang.html#_1-yum方式进行安装" class="sidebar-link">1. YUM方式进行安装</a></li><li class="sidebar-sub-header"><a href="/docs/nginx/01_nginxan-zhuang-ji-pei-zhi/2.nginxan-zhuang.html#_2-编译安装nginx" class="sidebar-link">2. 编译安装Nginx</a></li></ul></li><li><a href="/docs/nginx/01_nginxan-zhuang-ji-pei-zhi/3.nginxpei-zhi-wen-jian.html" class="sidebar-link">Nginx配置文件结构</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Nginx模块管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>LNMP环境部署</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Nginx优化管理</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>代码</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>收藏文章</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="nginx安装"><a href="#nginx安装" class="header-anchor">#</a> Nginx安装</h1> <h2 id="_1-yum方式进行安装"><a href="#_1-yum方式进行安装" class="header-anchor">#</a> 1. YUM方式进行安装</h2> <h3 id="_1-1设置nginx-yum源"><a href="#_1-1设置nginx-yum源" class="header-anchor">#</a> 1.1设置nginx YUM源</h3> <p>官方yum源：http://nginx.org/en/linux_packages.html#RHEL-CentOS</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ yum <span class="token function">install</span> yum-utils
$ <span class="token function">vim</span> /etc/yum.repos.d/nginx.repo 
<span class="token punctuation">[</span>nginx-stable<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>nginx stable repo
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://nginx.org/packages/centos/<span class="token variable">$releasever</span>/<span class="token variable">$basearch</span>/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://nginx.org/keys/nginx_signing.key
<span class="token assign-left variable">module_hotfixes</span><span class="token operator">=</span>true

<span class="token punctuation">[</span>nginx-mainline<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>nginx mainline repo
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://nginx.org/packages/mainline/centos/<span class="token variable">$releasever</span>/<span class="token variable">$basearch</span>/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://nginx.org/keys/nginx_signing.key
<span class="token assign-left variable">module_hotfixes</span><span class="token operator">=</span>true
</code></pre></div><h3 id="_1-2-安装nginx服务-会安装1-16-0版本"><a href="#_1-2-安装nginx服务-会安装1-16-0版本" class="header-anchor">#</a> 1.2 安装nginx服务，会安装1.16.0版本</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ yum <span class="token function">install</span> nginx
</code></pre></div><h3 id="_1-3-设置nginx开机启动"><a href="#_1-3-设置nginx开机启动" class="header-anchor">#</a> 1.3 设置nginx开机启动</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ systemctl <span class="token builtin class-name">enable</span> nginx.service
$ systemctl start nginx.service
$ systemctl status nginx.service
● nginx.service - nginx - high performance web server
   Loaded: loaded <span class="token punctuation">(</span>/usr/lib/systemd/system/nginx.service<span class="token punctuation">;</span> enabled<span class="token punctuation">;</span> vendor preset: disabled<span class="token punctuation">)</span>
   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Mon <span class="token number">2020</span>-04-13 <span class="token number">10</span>:59:12 EDT<span class="token punctuation">;</span> 14s ago
     Docs: http://nginx.org/en/docs/
  Process: <span class="token number">20145</span> <span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/sbin/nginx -c /etc/nginx/nginx.conf <span class="token punctuation">(</span>code<span class="token operator">=</span>exited, <span class="token assign-left variable">status</span><span class="token operator">=</span><span class="token number">0</span>/SUCCESS<span class="token punctuation">)</span>
 Main PID: <span class="token number">20146</span> <span class="token punctuation">(</span>nginx<span class="token punctuation">)</span>
   CGroup: /system.slice/nginx.service
           ├─20146 nginx: master process /usr/sbin/nginx -c /etc/nginx/nginx<span class="token punctuation">..</span><span class="token punctuation">..</span>
           └─20147 nginx: worker process

Apr <span class="token number">13</span> <span class="token number">10</span>:59:12 localhost.localdomain systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Starting nginx - high perfo<span class="token punctuation">..</span>.
Apr <span class="token number">13</span> <span class="token number">10</span>:59:12 localhost.localdomain systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Started nginx - high perfor<span class="token punctuation">..</span>.
Hint: Some lines were ellipsized, use -l to show <span class="token keyword">in</span> full.
</code></pre></div><h3 id="_1-4-防火墙放行htpp服务"><a href="#_1-4-防火墙放行htpp服务" class="header-anchor">#</a> 1.4 防火墙放行htpp服务</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ firewall-cmd --add-service<span class="token operator">=</span>http --permanent      
$ firewall-cmd --reload
$ firewall-cmd --list-all
</code></pre></div><h3 id="_1-5-测试是否可以访问nginx"><a href="#_1-5-测试是否可以访问nginx" class="header-anchor">#</a> 1.5 测试是否可以访问nginx</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">curl</span> http://192.168.58.142
</code></pre></div><h3 id="_1-6-加载动态模块"><a href="#_1-6-加载动态模块" class="header-anchor">#</a> 1.6 加载动态模块</h3> <p>nginx包是使用所有模块构建的，这些模块不需要额外的库来避免额外的依赖性。从版本1.9.11开始，nginx支持动态模块，以下模块构建为动态的，并作为单独的包提供：</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code>nginx-module-geoip
nginx-module-image-filter
nginx-module-njs
nginx-module-perl
nginx-module-xslt
</code></pre></div><p>安装动态模块</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ yum <span class="token function">install</span> nginx-module-image-filter -y
</code></pre></div><p>模块会安装在/usr/lib64/nginx/modules/目录中</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">ls</span> /usr/lib64/nginx/modules/
ngx_http_image_filter_module-debug.so
ngx_http_image_filter_module.so
</code></pre></div><p>在配置文件中加载模块，要在main上下文中配置（在 nginx.conf 中最上方写入）</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">load_module</span> modules/ngx_http_image_filter_module.so</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_2-编译安装nginx"><a href="#_2-编译安装nginx" class="header-anchor">#</a> 2. 编译安装Nginx</h2> <p>Nginx官网提供了三个类型的版本：</p> <ol><li>Mainline version：nginx的主力版本，为开发版</li> <li>Stable version：稳定版，在实际生产过程中选择此版本进行安装</li> <li>Legacy version：历史版本</li></ol> <h3 id="_2-1-准备工作"><a href="#_2-1-准备工作" class="header-anchor">#</a> 2.1 准备工作</h3> <ul><li>关闭selinux</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>$ setenforce <span class="token number">0</span>
$ <span class="token function">sed</span> -i  <span class="token string">'s/SELINUX=enforcing/SELINUX=disable/g'</span> /etc/selinux/config
</code></pre></div><ul><li>创建用户和组</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">groupadd</span> www 
$ <span class="token function">useradd</span> -M -g www -s /sbin/nologin www
$ <span class="token function">id</span> www
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>www<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>www<span class="token punctuation">)</span> <span class="token assign-left variable">groups</span><span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">(</span>www<span class="token punctuation">)</span>
</code></pre></div><ul><li>安装一些依赖库</li></ul> <p>首先下载gcc编译器以及nginx一些模块的依赖库，通常有pcre库 （支持rewrite模块），zlib（支持gzip模块）库，openssl (支持ssl模块)库等。这些库可以编译安装，也可以yum安装，这里选择yum安装。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ yum <span class="token function">install</span> gcc gcc-c++ pcre pcre-devel  zlib zlib-devel openssl openssl-devel -y
</code></pre></div><ul><li>下载源码包并解压</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">wget</span> http://nginx.org/download/nginx-1.16.0.tar.gz
$ <span class="token function">tar</span> zxvf nginx-1.16.0.tar.gz -C /usr/src/
</code></pre></div><ul><li><p>安装2个第三方模块</p> <p>使用nginx-sticky-module扩展模块实现Cookie会话黏贴（保持会话）</p> <p>使用ngx_cache_purge 实现更强大的缓存清除功能</p></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">wget</span> https://github.com/FRiCKLE/ngx_cache_purge/archive/master.zip
$ <span class="token function">unzip</span> master.zip
$ <span class="token function">mv</span> ngx_cache_purge-master/ /usr/src/
$ <span class="token function">wget</span> -c https://bitbucket.org/nginx-goodies/nginx-sticky-module-ng/get/08a395c66e42.zip
$ <span class="token function">unzip</span> 08a395c66e42.zip -d /usr/src/  
</code></pre></div><h3 id="_2-2-编译并安装"><a href="#_2-2-编译并安装" class="header-anchor">#</a> 2.2 编译并安装</h3> <ul><li>使用configure脚本自动生成Makefile文件</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token builtin class-name">cd</span> /usr/src/nginx-1.16.0/
$ ./configure --prefix<span class="token operator">=</span>/usr/local/nginx1.16 --user<span class="token operator">=</span>www --group<span class="token operator">=</span>www <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> --with-http_stub_status_module <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> --with-http_realip_module <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> --with-http_ssl_module <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> --with-http_gzip_static_module <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> --http-client-body-temp-path<span class="token operator">=</span>/var/tmp/nginx/client <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> --http-proxy-temp-path<span class="token operator">=</span>/var/tmp/nginx/proxy <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> --http-fastcgi-temp-path<span class="token operator">=</span>/var/tmp/nginx/fcgi <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> --with-pcre <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> --with-http_flv_module <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/ngx_cache_purge-master <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/nginx-goodies-nginx-sticky-module-ng-08a395c66e42
</code></pre></div><ul><li>编译并安装</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code> $ <span class="token function">make</span>
 $ <span class="token function">make</span> <span class="token function">install</span>
</code></pre></div><ul><li>完成后优化</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">ln</span> -s /usr/local/nginx1.16/sbin/nginx /usr/local/sbin/
$ nginx -t
$ <span class="token function">mkdir</span> /var/tmp/nginx/client -p
$ <span class="token function">chown</span> -R www:www /var/tmp/nginx/
$ nginx -t
nginx: the configuration <span class="token function">file</span> /usr/local/nginx1.16/conf/nginx.conf syntax is ok
nginx: configuration <span class="token function">file</span> /usr/local/nginx1.16/conf/nginx.conf <span class="token builtin class-name">test</span> is successful
$ nginx   <span class="token comment">#启动服务</span>
$ <span class="token function">netstat</span> -antp <span class="token operator">|</span> <span class="token function">grep</span> nginx
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:80              <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">16830</span>/nginx: master 
$ nginx -s reload    <span class="token comment">#重启服务</span>
$ nginx -s stop      <span class="token comment">#停止服务</span>

</code></pre></div><ul><li>生成systemed启动脚本</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">vim</span> /usr/lib/systemd/system/nginx.service
<span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token comment"># 对服务的说明</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>nginx - high performance web server   
<span class="token comment"># 文档</span>
<span class="token assign-left variable">Documentation</span><span class="token operator">=</span>http://nginx.org/en/docs/
<span class="token comment"># 如果该字段指定的 Unit 也要启动，那么必须在当前 Unit 之前启动</span>
<span class="token assign-left variable">After</span><span class="token operator">=</span>network-online.target remote-fs.target nss-lookup.target
<span class="token comment"># 与当前 Unit 配合的其他 Unit，如果它们没有运行，当前 Unit 不会启动失败</span>
<span class="token assign-left variable">Wants</span><span class="token operator">=</span>network-online.target

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token comment"># 启动方式</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>forking
<span class="token comment">#PID文件的路径</span>
<span class="token assign-left variable">PIDFile</span><span class="token operator">=</span>/usr/local/nginx1.16/logs/nginx.pid
<span class="token comment">#启动命令</span>
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/local/sbin/nginx -c /usr/local/nginx1.16/conf/nginx.conf
<span class="token comment">#重启命令</span>
<span class="token assign-left variable">ExecReload</span><span class="token operator">=</span>/bin/kill -s HUP <span class="token variable">$MAINPID</span>
<span class="token comment">#停止命令</span>
<span class="token assign-left variable">ExecStop</span><span class="token operator">=</span>/bin/kill -s <span class="token environment constant">TERM</span> <span class="token variable">$MAINPID</span>
<span class="token comment">#启动模式</span>
<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
<span class="token comment"># WantedBy的值是一个或多个 Target，当前 Unit 激活时（enable）符号链接会放入/etc/systemd/system目录下面以 Target 名 + .wants后缀构成的子目录中</span>
<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target 

$ systemctl daemon-reload
$ systemctl <span class="token builtin class-name">enable</span> nginx.service
$ systemctl restart nginx.service
$ systemctl status nginx.service
● nginx.service - nginx - high performance web server
   Loaded: loaded <span class="token punctuation">(</span>/usr/lib/systemd/system/nginx.service<span class="token punctuation">;</span> enabled<span class="token punctuation">;</span> vendor preset: disabled<span class="token punctuation">)</span>
   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since 二 <span class="token number">2020</span>-04-14 <span class="token number">18</span>:07:38 CST<span class="token punctuation">;</span> 21s ago
     Docs: http://nginx.org/en/docs/
  Process: <span class="token number">16967</span> <span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/local/sbin/nginx -c /usr/local/nginx1.16/conf/nginx.conf <span class="token punctuation">(</span>code<span class="token operator">=</span>exited, <span class="token assign-left variable">status</span><span class="token operator">=</span><span class="token number">0</span>/SUCCESS<span class="token punctuation">)</span>
 Main PID: <span class="token number">16968</span> <span class="token punctuation">(</span>nginx<span class="token punctuation">)</span>
   CGroup: /system.slice/nginx.service
           ├─16968 nginx: master process /usr/local/sbin/nginx -c /usr/local/<span class="token punctuation">..</span>.
           └─16969 nginx: worker process

<span class="token number">4</span>月 <span class="token number">14</span> <span class="token number">18</span>:07:38 localhost.localdomain systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Starting nginx - high perf<span class="token punctuation">..</span>.
<span class="token number">4</span>月 <span class="token number">14</span> <span class="token number">18</span>:07:38 localhost.localdomain systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Can't <span class="token function">open</span> PID <span class="token function">file</span> /usr/l<span class="token punctuation">..</span>.
<span class="token number">4</span>月 <span class="token number">14</span> <span class="token number">18</span>:07:38 localhost.localdomain systemd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Started nginx - high perfo<span class="token punctuation">..</span>.
Hint: Some lines were ellipsized, use -l to show <span class="token keyword">in</span> full.
</code></pre></div><h3 id="注"><a href="#注" class="header-anchor">#</a> 注：</h3> <p>如果你想在已经安装好的nginx上添加第三方模块，依然需要重新编译，但为了不覆盖你原有的配置，请不要 make install，而是直接拷贝可执行文件:</p> <p>查看原有的编译配置</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ nginx -V
</code></pre></div><p>重新编译</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ ./configure --add-module<span class="token operator">=</span><span class="token punctuation">..</span><span class="token punctuation">..</span>     <span class="token comment">#第三方模块</span>

$ <span class="token function">make</span>            <span class="token comment">#make 后不要make install ，改为手动拷贝，先备份</span>

$ <span class="token function">cp</span> /usr/local/nginx1.16/sbin/nginx /usr/local/nginx1.16/sbin/nginx.bak

$ <span class="token function">cp</span> objs/nginx /usr/local/nginx1.16/sbin/nginx
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/nginx/01_nginxan-zhuang-ji-pei-zhi/1.nginxjian-jie.html" class="prev">
        Nginx简介
      </a></span> <span class="next"><a href="/docs/nginx/01_nginxan-zhuang-ji-pei-zhi/3.nginxpei-zhi-wen-jian.html">
        Nginx配置文件结构
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.27b283a1.js" defer></script><script src="/docs/assets/js/2.2e8f894a.js" defer></script><script src="/docs/assets/js/9.20e728b8.js" defer></script>
  </body>
</html>
